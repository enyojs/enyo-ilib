{"version":3,"sources":["../../../../enyo-dev/node_modules/browserify/node_modules/browser-pack/_prelude.js","../../../../enyo-dev/node_modules/browserify/lib/_empty.js","../../../../enyo-dev/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js","../../../../enyo-dev/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","../../../../enyo-dev/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js","../../../../enyo-dev/node_modules/browserify/node_modules/process/browser.js","../../lib/packedbuffer.js","../../../enyo/lib/PathResolverFactory.js","../../../enyo/lib/options.js","../../../../enyo-dev/node_modules/browserify/node_modules/buffer/index.js","../../../enyo/lib/pathResolver.js","../../../enyo/index.js","../../lib/zoneinfo.js","../../../enyo/lib/AjaxProperties.js","../../../enyo/lib/ModelList.js","../../../enyo/lib/States.js","../../../enyo/lib/json.js","../../../enyo/lib/ready.js","../../../enyo/lib/roots.js","../../../enyo/lib/utils.js","../../../enyo/lib/StateSupport.js","../../../enyo/lib/EventEmitter.js","../../../enyo/lib/FormData.js","../../../enyo/lib/platform.js","../../../enyo/lib/animation.js","../../../enyo/lib/dom.js","../../../enyo/lib/logger.js","../../../enyo/lib/xhr.js","../../../enyo/lib/HTMLStringDelegate.js","../../../enyo/lib/kind.js","../../../enyo/lib/ApplicationSupport.js","../../../enyo/lib/Binding.js","../../../enyo/lib/ComponentBindingSupport.js","../../../enyo/lib/ComputedSupport.js","../../../enyo/lib/LinkedListNode.js","../../../enyo/lib/MixinSupport.js","../../../enyo/lib/Source.js","../../../enyo/lib/floatingLayer.js","../../../enyo/lib/BindingSupport.js","../../../enyo/lib/RepeaterChildSupport.js","../../../enyo/lib/LinkedList.js","../../../enyo/lib/ObserverChainNode.js","../../../enyo/lib/ObserverChain.js","../../../enyo/lib/ObserverSupport.js","../../../enyo/lib/CoreObject.js","../../../enyo/lib/Async.js","../../../enyo/lib/Store.js","../../../enyo/lib/jobs.js","../../../enyo/lib/Ajax.js","../../../enyo/lib/Model.js","../../../enyo/lib/Component.js","../../../enyo/lib/Collection.js","../../../enyo/lib/ScrollMath.js","../../../enyo/lib/Signals.js","../../../enyo/lib/hooks.js","../../../enyo/lib/master.js","../../../enyo/lib/UiComponent.js","../../../enyo/lib/dispatcher.js","../../../enyo/lib/fullscreen/fullscreen.js","../../../enyo/lib/gesture.js","../../../enyo/lib/Control/Control.js","../../../enyo/lib/drag.js","../../lib/glue.js","../../../enyo/lib/Anchor.js","../../../enyo/lib/DataRepeater.js","../../../enyo/lib/GroupItem.js","../../../enyo/lib/Input.js","../../../enyo/lib/Option.js","../../../enyo/lib/ScrollStrategy.js","../../../enyo/lib/ScrollThumb/ScrollThumb.js","../../index.js","../../../enyo/lib/ToolDecorator/ToolDecorator.js","../../../enyo/lib/Select.js","../../../enyo/lib/TouchScrollStrategy.js","../../../enyo/lib/Button/Button.js","ChooseLocale.js","../../../enyo/lib/TranslateScrollStrategy.js","../../../enyo/lib/Scroller/Scroller.js","AddressFormatting.js","AddressParsing.js","index.js"],"names":[],"mappings":"AAAA;ACAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC3CA;AACA;AACA;AACA;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtzCA;AACA;AACA;;ACFA;AACA;AACA;AACA;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7iBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACjyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AClOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9lBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC15BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7yCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACrmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3pDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtlBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACh3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"samples.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","","var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n;(function (exports) {\n\t'use strict';\n\n  var Arr = (typeof Uint8Array !== 'undefined')\n    ? Uint8Array\n    : Array\n\n\tvar PLUS   = '+'.charCodeAt(0)\n\tvar SLASH  = '/'.charCodeAt(0)\n\tvar NUMBER = '0'.charCodeAt(0)\n\tvar LOWER  = 'a'.charCodeAt(0)\n\tvar UPPER  = 'A'.charCodeAt(0)\n\tvar PLUS_URL_SAFE = '-'.charCodeAt(0)\n\tvar SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\tfunction decode (elt) {\n\t\tvar code = elt.charCodeAt(0)\n\t\tif (code === PLUS ||\n\t\t    code === PLUS_URL_SAFE)\n\t\t\treturn 62 // '+'\n\t\tif (code === SLASH ||\n\t\t    code === SLASH_URL_SAFE)\n\t\t\treturn 63 // '/'\n\t\tif (code < NUMBER)\n\t\t\treturn -1 //no match\n\t\tif (code < NUMBER + 10)\n\t\t\treturn code - NUMBER + 26 + 26\n\t\tif (code < UPPER + 26)\n\t\t\treturn code - UPPER\n\t\tif (code < LOWER + 26)\n\t\t\treturn code - LOWER + 26\n\t}\n\n\tfunction b64ToByteArray (b64) {\n\t\tvar i, j, l, tmp, placeHolders, arr\n\n\t\tif (b64.length % 4 > 0) {\n\t\t\tthrow new Error('Invalid string. Length must be a multiple of 4')\n\t\t}\n\n\t\t// the number of equal signs (place holders)\n\t\t// if there are two placeholders, than the two characters before it\n\t\t// represent one byte\n\t\t// if there is only one, then the three characters before it represent 2 bytes\n\t\t// this is just a cheap hack to not do indexOf twice\n\t\tvar len = b64.length\n\t\tplaceHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0\n\n\t\t// base64 is 4/3 + up to two characters of the original data\n\t\tarr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t\t// if there are placeholders, only get up to the last complete 4 chars\n\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t\tvar L = 0\n\n\t\tfunction push (v) {\n\t\t\tarr[L++] = v\n\t\t}\n\n\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t\t\tpush((tmp & 0xFF0000) >> 16)\n\t\t\tpush((tmp & 0xFF00) >> 8)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\tif (placeHolders === 2) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t\t\tpush(tmp & 0xFF)\n\t\t} else if (placeHolders === 1) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t\t\tpush((tmp >> 8) & 0xFF)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\treturn arr\n\t}\n\n\tfunction uint8ToBase64 (uint8) {\n\t\tvar i,\n\t\t\textraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes\n\t\t\toutput = \"\",\n\t\t\ttemp, length\n\n\t\tfunction encode (num) {\n\t\t\treturn lookup.charAt(num)\n\t\t}\n\n\t\tfunction tripletToBase64 (num) {\n\t\t\treturn encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t\t}\n\n\t\t// go through the array every three bytes, we'll deal with trailing stuff later\n\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t\t\toutput += tripletToBase64(temp)\n\t\t}\n\n\t\t// pad the end with zeros, but make sure to not forget the extra bytes\n\t\tswitch (extraBytes) {\n\t\t\tcase 1:\n\t\t\t\ttemp = uint8[uint8.length - 1]\n\t\t\t\toutput += encode(temp >> 2)\n\t\t\t\toutput += encode((temp << 4) & 0x3F)\n\t\t\t\toutput += '=='\n\t\t\t\tbreak\n\t\t\tcase 2:\n\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t\t\t\toutput += encode(temp >> 10)\n\t\t\t\toutput += encode((temp >> 4) & 0x3F)\n\t\t\t\toutput += encode((temp << 2) & 0x3F)\n\t\t\t\toutput += '='\n\t\t\t\tbreak\n\t\t}\n\n\t\treturn output\n\t}\n\n\texports.toByteArray = b64ToByteArray\n\texports.fromByteArray = uint8ToBase64\n}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n","exports.read = function(buffer, offset, isLE, mLen, nBytes) {\n  var e, m,\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      nBits = -7,\n      i = isLE ? (nBytes - 1) : 0,\n      d = isLE ? -1 : 1,\n      s = buffer[offset + i];\n\n  i += d;\n\n  e = s & ((1 << (-nBits)) - 1);\n  s >>= (-nBits);\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8);\n\n  m = e & ((1 << (-nBits)) - 1);\n  e >>= (-nBits);\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8);\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity);\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function(buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c,\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0),\n      i = isLE ? 0 : (nBytes - 1),\n      d = isLE ? 1 : -1,\n      s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0;\n\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8);\n\n  e = (e << mLen) | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8);\n\n  buffer[offset + i - d] |= s * 128;\n};\n","\n/**\n * isArray\n */\n\nvar isArray = Array.isArray;\n\n/**\n * toString\n */\n\nvar str = Object.prototype.toString;\n\n/**\n * Whether or not the given `val`\n * is an array.\n *\n * example:\n *\n *        isArray([]);\n *        // > true\n *        isArray(arguments);\n *        // > false\n *        isArray('');\n *        // > false\n *\n * @param {mixed} val\n * @return {bool}\n */\n\nmodule.exports = isArray || function (val) {\n  return !! val && '[object Array]' == str.call(val);\n};\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\n * packedbuffer.js - represent a packed buffer of bytes\n * \n * Copyright  2014 LG Electronics, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @constructor\n * Represents a binary buffer of unsigned bytes that will be parsed in various ways. The buffer \n * can be decoded by reading various lengths of bytes and interpretting them as longs\n * or unsigned bytes, etc. The bytes are interpretted in big-endian (network) format.\n * @param {string} buffer the binary buffer represented as a string\n */\nvar PackedBuffer = function (buffer) {\n\tthis.buffer = buffer;\n\tthis.index = 0;\n};\n\n/**\n * Return the specified number of signed long integers from the current location in\n * the buffer as an array of numbers and advance the current pointer in the buffer.\n * This method will only return as many longs as are available in the rest of the\n * buffer.\n * \n * @param {number} num The number of longs to return\n * @returns {Array.<number>} the array of signed long integers\n */\nPackedBuffer.prototype.getLongs = function(num) {\n\tvar result = undefined;\n\tif (this.buffer && this.index < this.buffer.length) {\n\t\tresult = [];\n\t\tfor (var i = 0; i < num && this.index+3 < this.buffer.length; i++) {\n\t\t\tvar longnum = this.buffer[this.index] << 24 | \n\t\t\t\tthis.buffer[this.index+1] << 16 | \n\t\t\t\tthis.buffer[this.index+2] << 8 | \n\t\t\t\tthis.buffer[this.index+3];\n\t\t\tresult.push(longnum);\n\t\t\tthis.index += 4;\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * Return a signed long integer from the current location in\n * the buffer as an array of numbers and advance the current pointer in the buffer.\n * This method will only return a long if it is available in the buffer, otherwise\n * it will return undefined.\n * \n * @returns {number} the long at the current point in the buffer, or undefined if\n * there is not enough bytes left in the buffer to form a long\n */\nPackedBuffer.prototype.getLong = function() {\n\tvar longs = this.getLongs(1);\n\tif (longs && longs.length > 0) {\n\t\treturn longs[0];\n\t}\n\treturn undefined;\n};\n\n/**\n * Return the specified number of signed byte integers from the current location in\n * the buffer as an array of numbers and advance the current pointer in the buffer.\n * This method will only return as many bytes as are available in the rest of the\n * buffer.\n * \n * @param {number|undefined} num The number of bytes to return\n * @returns {Array.<number>} the array of signed byte integers\n */\nPackedBuffer.prototype.getBytes = function(num) {\n\tvar result = undefined;\n\tif (this.buffer && this.index < this.buffer.length) {\n\t\tresult = [];\n\t\tfor (var i = 0; i < num && this.index < this.buffer.length; i++) {\n\t\t\tvar bytenum = this.buffer[this.index++];\n\t\t\tif (bytenum & 0x80) {\n\t\t\t\tbytenum -= 0x100;\n\t\t\t}\n\t\t\tresult.push(bytenum);\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * Return a signed byte integer from the current location in\n * the buffer as an array of numbers and advance the current pointer in the buffer.\n * This method will only return a byte if it is available in the buffer, otherwise\n * it will return undefined.\n * \n * @returns {number} the byte at the current point in the buffer, or undefined if\n * there is not enough bytes left in the buffer to form a byte\n */\nPackedBuffer.prototype.getByte = function() {\n\tvar bytes = this.getBytes(1);\n\tif (bytes && bytes.length > 0) {\n\t\treturn bytes[0];\n\t}\n\treturn undefined;\n};\n\n/**\n * Return the specified number of unsigned byte integers from the current location in\n * the buffer as an array of numbers and advance the current pointer in the buffer.\n * This method will only return as many bytes as are available in the rest of the\n * buffer.\n * \n * @param {number} num The number of bytes to return\n * @returns {Array.<number>} the array of unsigned byte integers\n */\nPackedBuffer.prototype.getUnsignedBytes = function(num) {\n\tvar result = undefined;\n\tif (this.buffer && this.index < this.buffer.length) {\n\t\tresult = [];\n\t\tfor (var i = 0; i < num && this.index < this.buffer.length; i++) {\n\t\t\tresult.push(this.buffer[this.index++]);\n\t\t}\n\t}\n\treturn result;\n\t\n};\n\n/**\n * Return a string made out of the given number of bytes and convert\n * from UTF-8 to UTF-16.\n * \n * @param {number} num The number of bytes to make a string out of\n * @returns {string} a string made out of the given bytes\n */\nPackedBuffer.prototype.getString = function(num) {\n\tvar arr = this.getUnsignedBytes(num);\n\tvar str = \"\";\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tstr += String.fromCharCode(arr[i]);\n\t}\n\treturn str;\n\t\n};\n\n/**\n * Advance the current pointer in the buffer by the specified number of\n * bytes in the string.\n * \n * @param {number} num The number of bytes to skip\n */\nPackedBuffer.prototype.skip = function(num) {\n\tthis.index += num;\n};\n\nmodule.exports = PackedBuffer;","\n\nvar PathResolverFactory = module.exports = function() {\n\tthis.paths = {};\n\tthis.pathNames = [];\n};\n\nPathResolverFactory.prototype = {\n\taddPath: function(inName, inPath) {\n\t\tthis.paths[inName] = inPath;\n\t\tthis.pathNames.push(inName);\n\t\tthis.pathNames.sort(function(a, b) {\n\t\t\treturn b.length - a.length;\n\t\t});\n\t\treturn inPath;\n\t},\n\taddPaths: function(inPaths) {\n\t\tif (inPaths) {\n\t\t\tfor (var n in inPaths) {\n\t\t\t\tthis.addPath(n, inPaths[n]);\n\t\t\t}\n\t\t}\n\t},\n\tincludeTrailingSlash: function(inPath) {\n\t\treturn (inPath && inPath.slice(-1) !== \"/\") ? inPath + \"/\" : inPath;\n\t},\n\t// replace macros of the form $pathname with the mapped value of paths.pathname\n\trewrite: function (inPath) {\n\t\tvar working, its = this.includeTrailingSlash, paths = this.paths;\n\t\tvar fn = function(macro, name) {\n\t\t\tworking = true;\n\t\t\treturn its(paths[name]) || '';\n\t\t};\n\t\tvar result = inPath;\n\t\tdo {\n\t\t\tworking = false;\n\t\t\tfor (var i=0; i<this.pathNames.length; i++) {\n\t\t\t\tvar regex = new RegExp(\"\\\\$(\" + this.pathNames[i] + \")(\\\\/)?\", \"g\");\n\t\t\t\tresult = result.replace(regex, fn);\n\t\t\t}\n\t\t} while (working);\n\t\treturn result;\n\t}\n};","/*jshint node:true */\n'use strict';\n\nmodule.exports = (global.enyo && global.enyo.options) || {};","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('is-array')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar kMaxLength = 0x3fffffff\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Note:\n *\n * - Implementation must support adding new properties to `Uint8Array` instances.\n *   Firefox 4-29 lacked support, fixed in Firefox 30+.\n *   See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *  - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *  - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *    incorrect length in some situations.\n *\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they will\n * get the Object implementation, which is slower but will work correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = (function () {\n  try {\n    var buf = new ArrayBuffer(0)\n    var arr = new Uint8Array(buf)\n    arr.foo = function () { return 42 }\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        new Uint8Array(1).subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n})()\n\n/**\n * Class: Buffer\n * =============\n *\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\n * with function properties for all the node `Buffer` API functions. We use\n * `Uint8Array` so that square bracket notation works as expected -- it returns\n * a single octet.\n *\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\n * prototype.\n */\nfunction Buffer (subject, encoding) {\n  var self = this\n  if (!(self instanceof Buffer)) return new Buffer(subject, encoding)\n\n  var type = typeof subject\n  var length\n\n  if (type === 'number') {\n    length = +subject\n  } else if (type === 'string') {\n    length = Buffer.byteLength(subject, encoding)\n  } else if (type === 'object' && subject !== null) {\n    // assume object is array-like\n    if (subject.type === 'Buffer' && isArray(subject.data)) subject = subject.data\n    length = +subject.length\n  } else {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (length > kMaxLength) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x' +\n      kMaxLength.toString(16) + ' bytes')\n  }\n\n  if (length < 0) length = 0\n  else length >>>= 0 // coerce to uint32\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Preferred: Return an augmented `Uint8Array` instance for best performance\n    self = Buffer._augment(new Uint8Array(length)) // eslint-disable-line consistent-this\n  } else {\n    // Fallback: Return THIS instance of Buffer (created by `new`)\n    self.length = length\n    self._isBuffer = true\n  }\n\n  var i\n  if (Buffer.TYPED_ARRAY_SUPPORT && typeof subject.byteLength === 'number') {\n    // Speed optimization -- use set if we're copying from a typed array\n    self._set(subject)\n  } else if (isArrayish(subject)) {\n    // Treat array-ish objects as a byte array\n    if (Buffer.isBuffer(subject)) {\n      for (i = 0; i < length; i++) {\n        self[i] = subject.readUInt8(i)\n      }\n    } else {\n      for (i = 0; i < length; i++) {\n        self[i] = ((subject[i] % 256) + 256) % 256\n      }\n    }\n  } else if (type === 'string') {\n    self.write(subject, 0, encoding)\n  } else if (type === 'number' && !Buffer.TYPED_ARRAY_SUPPORT) {\n    for (i = 0; i < length; i++) {\n      self[i] = 0\n    }\n  }\n\n  if (length > 0 && length <= Buffer.poolSize) self.parent = rootParent\n\n  return self\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n  for (var i = 0, len = Math.min(x, y); i < len && a[i] === b[i]; i++) {}\n  if (i !== len) {\n    x = a[i]\n    y = b[i]\n  }\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, totalLength) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  } else if (list.length === 1) {\n    return list[0]\n  }\n\n  var i\n  if (totalLength === undefined) {\n    totalLength = 0\n    for (i = 0; i < list.length; i++) {\n      totalLength += list[i].length\n    }\n  }\n\n  var buf = new Buffer(totalLength)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nBuffer.byteLength = function byteLength (str, encoding) {\n  var ret\n  str = str + ''\n  switch (encoding || 'utf8') {\n    case 'ascii':\n    case 'binary':\n    case 'raw':\n      ret = str.length\n      break\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      ret = str.length * 2\n      break\n    case 'hex':\n      ret = str.length >>> 1\n      break\n    case 'utf8':\n    case 'utf-8':\n      ret = utf8ToBytes(str).length\n      break\n    case 'base64':\n      ret = base64ToBytes(str).length\n      break\n    default:\n      ret = str.length\n  }\n  return ret\n}\n\n// pre-set for values that may exist in the future\nBuffer.prototype.length = undefined\nBuffer.prototype.parent = undefined\n\n// toString(encoding, start=0, end=buffer.length)\nBuffer.prototype.toString = function toString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start >>> 0\n  end = end === undefined || end === Infinity ? this.length : end >>> 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return 0\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\n// `get` will be removed in Node 0.13+\nBuffer.prototype.get = function get (offset) {\n  console.log('.get() is deprecated. Access using array indexes instead.')\n  return this.readUInt8(offset)\n}\n\n// `set` will be removed in Node 0.13+\nBuffer.prototype.set = function set (v, offset) {\n  console.log('.set() is deprecated. Access using array indexes instead.')\n  return this.writeUInt8(v, offset)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  var charsWritten = blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n  return charsWritten\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  var charsWritten = blitBuffer(asciiToBytes(string), buf, offset, length)\n  return charsWritten\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  var charsWritten = blitBuffer(base64ToBytes(string), buf, offset, length)\n  return charsWritten\n}\n\nfunction utf16leWrite (buf, string, offset, length) {\n  var charsWritten = blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n  return charsWritten\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Support both (string, offset, length, encoding)\n  // and the legacy (string, encoding, offset, length)\n  if (isFinite(offset)) {\n    if (!isFinite(length)) {\n      encoding = length\n      length = undefined\n    }\n  } else {  // legacy\n    var swap = encoding\n    encoding = offset\n    offset = length\n    length = swap\n  }\n\n  offset = Number(offset) || 0\n\n  if (length < 0 || offset < 0 || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  var remaining = this.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n  encoding = String(encoding || 'utf8').toLowerCase()\n\n  var ret\n  switch (encoding) {\n    case 'hex':\n      ret = hexWrite(this, string, offset, length)\n      break\n    case 'utf8':\n    case 'utf-8':\n      ret = utf8Write(this, string, offset, length)\n      break\n    case 'ascii':\n      ret = asciiWrite(this, string, offset, length)\n      break\n    case 'binary':\n      ret = binaryWrite(this, string, offset, length)\n      break\n    case 'base64':\n      ret = base64Write(this, string, offset, length)\n      break\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      ret = utf16leWrite(this, string, offset, length)\n      break\n    default:\n      throw new TypeError('Unknown encoding: ' + encoding)\n  }\n  return ret\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  var res = ''\n  var tmp = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    if (buf[i] <= 0x7F) {\n      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])\n      tmp = ''\n    } else {\n      tmp += '%' + buf[i].toString(16)\n    }\n  }\n\n  return res + decodeUtf8Char(tmp)\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = Buffer._augment(this.subarray(start, end))\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) >>> 0 & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) >>> 0 & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = value\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = value\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = value\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = value\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkInt(\n      this, value, offset, byteLength,\n      Math.pow(2, 8 * byteLength - 1) - 1,\n      -Math.pow(2, 8 * byteLength - 1)\n    )\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkInt(\n      this, value, offset, byteLength,\n      Math.pow(2, 8 * byteLength - 1) - 1,\n      -Math.pow(2, 8 * byteLength - 1)\n    )\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = value\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = value\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = value\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, target_start, start, end) {\n  var self = this // source\n\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (target_start >= target.length) target_start = target.length\n  if (!target_start) target_start = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || self.length === 0) return 0\n\n  // Fatal error conditions\n  if (target_start < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= self.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - target_start < end - start) {\n    end = target.length - target_start + start\n  }\n\n  var len = end - start\n\n  if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < len; i++) {\n      target[i + target_start] = this[i + start]\n    }\n  } else {\n    target._set(this.subarray(start, start + len), target_start)\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n/**\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\n * Added in Node 0.12. Only available in browsers that support ArrayBuffer.\n */\nBuffer.prototype.toArrayBuffer = function toArrayBuffer () {\n  if (typeof Uint8Array !== 'undefined') {\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      return (new Buffer(this)).buffer\n    } else {\n      var buf = new Uint8Array(this.length)\n      for (var i = 0, len = buf.length; i < len; i += 1) {\n        buf[i] = this[i]\n      }\n      return buf.buffer\n    }\n  } else {\n    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')\n  }\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar BP = Buffer.prototype\n\n/**\n * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods\n */\nBuffer._augment = function _augment (arr) {\n  arr.constructor = Buffer\n  arr._isBuffer = true\n\n  // save reference to original Uint8Array get/set methods before overwriting\n  arr._get = arr.get\n  arr._set = arr.set\n\n  // deprecated, will be removed in node 0.13+\n  arr.get = BP.get\n  arr.set = BP.set\n\n  arr.write = BP.write\n  arr.toString = BP.toString\n  arr.toLocaleString = BP.toString\n  arr.toJSON = BP.toJSON\n  arr.equals = BP.equals\n  arr.compare = BP.compare\n  arr.indexOf = BP.indexOf\n  arr.copy = BP.copy\n  arr.slice = BP.slice\n  arr.readUIntLE = BP.readUIntLE\n  arr.readUIntBE = BP.readUIntBE\n  arr.readUInt8 = BP.readUInt8\n  arr.readUInt16LE = BP.readUInt16LE\n  arr.readUInt16BE = BP.readUInt16BE\n  arr.readUInt32LE = BP.readUInt32LE\n  arr.readUInt32BE = BP.readUInt32BE\n  arr.readIntLE = BP.readIntLE\n  arr.readIntBE = BP.readIntBE\n  arr.readInt8 = BP.readInt8\n  arr.readInt16LE = BP.readInt16LE\n  arr.readInt16BE = BP.readInt16BE\n  arr.readInt32LE = BP.readInt32LE\n  arr.readInt32BE = BP.readInt32BE\n  arr.readFloatLE = BP.readFloatLE\n  arr.readFloatBE = BP.readFloatBE\n  arr.readDoubleLE = BP.readDoubleLE\n  arr.readDoubleBE = BP.readDoubleBE\n  arr.writeUInt8 = BP.writeUInt8\n  arr.writeUIntLE = BP.writeUIntLE\n  arr.writeUIntBE = BP.writeUIntBE\n  arr.writeUInt16LE = BP.writeUInt16LE\n  arr.writeUInt16BE = BP.writeUInt16BE\n  arr.writeUInt32LE = BP.writeUInt32LE\n  arr.writeUInt32BE = BP.writeUInt32BE\n  arr.writeIntLE = BP.writeIntLE\n  arr.writeIntBE = BP.writeIntBE\n  arr.writeInt8 = BP.writeInt8\n  arr.writeInt16LE = BP.writeInt16LE\n  arr.writeInt16BE = BP.writeInt16BE\n  arr.writeInt32LE = BP.writeInt32LE\n  arr.writeInt32BE = BP.writeInt32BE\n  arr.writeFloatLE = BP.writeFloatLE\n  arr.writeFloatBE = BP.writeFloatBE\n  arr.writeDoubleLE = BP.writeDoubleLE\n  arr.writeDoubleBE = BP.writeDoubleBE\n  arr.fill = BP.fill\n  arr.inspect = BP.inspect\n  arr.toArrayBuffer = BP.toArrayBuffer\n\n  return arr\n}\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-z\\-]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction isArrayish (subject) {\n  return isArray(subject) || Buffer.isBuffer(subject) ||\n      subject && typeof subject === 'object' &&\n      typeof subject.length === 'number'\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n  var i = 0\n\n  for (; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (leadSurrogate) {\n        // 2 leads in a row\n        if (codePoint < 0xDC00) {\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          leadSurrogate = codePoint\n          continue\n        } else {\n          // valid surrogate pair\n          codePoint = leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00 | 0x10000\n          leadSurrogate = null\n        }\n      } else {\n        // no lead yet\n\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else {\n          // valid lead\n          leadSurrogate = codePoint\n          continue\n        }\n      }\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n      leadSurrogate = null\n    }\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x200000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction decodeUtf8Char (str) {\n  try {\n    return decodeURIComponent(str)\n  } catch (err) {\n    return String.fromCharCode(0xFFFD) // UTF 8 invalid char\n  }\n}\n","var PathResolverFactory = require('./PathResolverFactory');\n\nmodule.exports = new PathResolverFactory();","'use strict';\n\nexports = module.exports = require('./lib/options');\nexports.version = '2.6.0-pre';","/*\n * zoneinfo.js - represent a binary zone info file\n *\n * Copyright  2014 LG Electronics, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * The portion of this code that parses the zone info file format is derived\n * from the code in the node-zoneinfo project by Gregory McWhirter licensed\n * under the MIT license:\n *\n * Copyright (c) 2013 Gregory McWhirter\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject\n * to the following conditions:\n\n * The above copyright notice and this permission notice shall be included\n * in all copies or substantial portions of the Software.\n\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n * OTHER DEALINGS IN THE SOFTWARE.\n */\n\nvar\n\tPackedBuffer = require(\"./packedbuffer.js\");\n\nvar _platform = \"unknown\";\n\n(function () {\n\tif (typeof(enyo) !== 'undefined') {\n\t\t_platform = \"enyo\";\n\t} else if (typeof(environment) !== 'undefined') {\n\t\t_platform = \"rhino\";\n\t} else if (typeof(process) !== 'undefined' || typeof(require) !== 'undefined') {\n\t\t_platform = \"nodejs\";\n\t} else if (typeof(window) !== 'undefined') {\n\t\t_platform = (typeof(PalmSystem) !== 'undefined') ? \"webos\" : \"browser\";\n\t}\n})();\n\n/**\n * @constructor\n * Represents a binary zone info file of the sort that the Unix Zone Info Compiler\n * produces.\n * @param {string} path path to the file to be loaded\n * @param {number} year year of the zone info rules needed\n */\nvar ZoneInfoFile = function (path) {\n\tvar that = this;\n\tswitch (_platform) {\n\t\t/*\n\t\tUncomment and use this when enyo works for binary load.\n\t\tcase \"enyo\":\n\t\t\tvar ajax = new enyo.Ajax({\n\t\t\t\txhrFields: {\n\t\t\t\t\tresponseType:\"arraybuffer\"\n\t\t\t\t},\n\t\t\t\tcacheBust: false,\n\t\t\t\tsync: true,\n\t\t\t\thandleAs: \"binary\",\n\t\t\t\turl: \"file://\" + path\n\t\t\t});\n\t\t\tajax.response(this, function(s, r) {\n\t\t\t\tvar byteArray = new Uint8Array(r);\n\t\t\t\t// console.log(\"ZoneInfoFile bytes received: \" + byteArray.length);\n\t\t\t\tthat._parseInfo(byteArray);\n\t\t\t});\n\t\t\t//ajax.error(this, function(s, r) {\n\t\t\t//\tconsole.log(\"ZoneInfoFile: failed to load files \" + JSON.stringify(s) + \" \" + r);\n\t\t\t//});\n\t\t\tajax.go();\n\t\t\tbreak;\n\t\t*/\n\t\t\n\t\tcase \"nodejs\":\n\t\t\t// console.log(\"ZoneInfoFile: loading zoneinfo path \" + path + \"\\n\");\n\t\t\tvar fs = require(\"fs\");\n\t\t\tvar bytes = new Buffer(fs.readFileSync(path));\n\t\t\tvar byteArray = new Uint8Array(bytes);\n\t\t\tthis._parseInfo(byteArray);\n\t\t\tbreak;\n\t\t\t\n\t\tdefault:\n\t\t\t// use normal web techniques\n\t\t\tvar req = new XMLHttpRequest();\n\t\t\treq.open(\"GET\", \"file:\" + path, false);\n\t\t\treq.responseType = \"arraybuffer\";\n\t\t\treq.onload = function(e) {\n\t\t\t\tvar byteArray = new Uint8Array(req.response);\n\t\t\t\t// console.log(\"ZoneInfoFile bytes received: \" + byteArray.length);\n\t\t\t\tthat._parseInfo(byteArray);\n\t\t\t};\n\t\t\treq.onerror = function(e) {\n\t\t\t\tthrow \"Cannot load file \" + path;\n\t\t\t};\n\t\t\treq.send();\n\t\t\tbreak;\n\t}\n};\n\n/**\n * @private\n * Parse the binary buffer to find the zone info\n * @param buffer\n */\nZoneInfoFile.prototype._parseInfo = function(buffer) {\n\tvar packed = new PackedBuffer(buffer);\n\n\t// The time zone information files used by tzset(3)\n\t// begin with the magic characters \"TZif\" to identify\n\t// them as time zone information files, followed by\n\t// sixteen bytes reserved for future use, followed by\n\t// six four-byte values of type long, written in a\n\t// ''standard'' byte order (the high-order byte\n\t// of the value is written first).\n\tif (packed.getString(4) != \"TZif\") {\n\t\tthrow \"file format not recognized\";\n\t} else {\n\t\t// ignore 16 bytes\n\t\tpacked.skip(16);\n\n\t\t// The number of UTC/local indicators stored in the file.\n\t\tvar tzh_ttisgmtcnt = packed.getLong();\n\t\t// The number of standard/wall indicators stored in the file.\n\t\tvar tzh_ttisstdcnt = packed.getLong();\n\t\t// The number of leap seconds for which data is stored in the file.\n\t\tvar tzh_leapcnt = packed.getLong();\n\t\t// The number of \"transition times\" for which data is stored in the file.\n\t\tvar tzh_timecnt = packed.getLong();\n\t\t// The number of \"local time types\" for which data is stored in the file (must not be zero).\n\t\tvar tzh_typecnt = packed.getLong();\n\t\t// The number of characters of \"time zone abbreviation strings\" stored in the file.\n\t\tvar tzh_charcnt = packed.getLong();\n\n\t\tthis.transitionTimes = tzh_timecnt ? packed.getLongs(tzh_timecnt) : [];\n\n\t\tthis.transitionTimes = this.transitionTimes.map(function (item) {\n\t\t\treturn item * 1000;\n\t\t});\n\n\t\t// these are indexes into the zonesInfo that correspond to each transition time\n\t\tthis.ruleIndex = tzh_timecnt ? packed.getUnsignedBytes(tzh_timecnt) : [];\n\n\t\tthis.zoneInfo = [];\n\t\tfor (var i = 0; i < tzh_typecnt; i++) {\n\t\t\tthis.zoneInfo.push({\n\t\t\t\toffset: Math.floor(packed.getLong()/60),  // offset in seconds, so convert to minutes\n\t\t\t\tisdst: !!packed.getByte(),\n\t\t\t\tabbreviationIndex: packed.getByte()\n\t\t\t});\n\t\t}\n\n\t\tvar allAbbreviations = packed.getString(tzh_charcnt);\n\n\t\tfor (var i = 0; i < tzh_typecnt; i++) {\n\t\t\tvar abbreviation = allAbbreviations.substring(this.zoneInfo[i].abbreviationIndex);\n\t\t\tthis.zoneInfo[i].abbreviation = abbreviation.substring(0, abbreviation.indexOf('\\x00'));\n\t\t}\n\n\t\t// ignore the leap seconds\n\t\tif (tzh_leapcnt) {\n\t\t\tpacked.skip(tzh_leapcnt * 2);\n\t\t}\n\n\t\t// skip the standard/wall time indicators\n\t\tif (tzh_ttisstdcnt) {\n\t\t\tpacked.skip(tzh_ttisstdcnt);\n\t\t}\n\n\t\t// ignore the UTC/local time indicators -- everything should be UTC\n\t\tif (tzh_ttisgmtcnt) {\n\t\t\tpacked.skip(tzh_ttisgmtcnt);\n\t\t}\n\n\t\t// finished reading\n\n\t\t// Replace ttinfo indexes for ttinfo objects.\n\t\tvar that = this;\n\t\tthis.ruleIndex = this.ruleIndex.map(function (item) {\n\t\t\treturn {\n\t\t\t\toffset: that.zoneInfo[item].offset,\n\t\t\t\tisdst: that.zoneInfo[item].isdst,\n\t\t\t\tabbreviation: that.zoneInfo[item].abbreviation\n\t\t\t};\n\t\t});\n\n\t\t// calculate the dst savings for each daylight time\n\t\tfor (var i = 0; i < tzh_timecnt; i++) {\n\t\t\tif (i > 0 && this.ruleIndex[i].isdst) {\n\t\t\t\tthis.ruleIndex[i].savings = this.ruleIndex[i].offset - this.ruleIndex[i-1].offset;\n\t\t\t}\n\t\t}\n\n\t\t// Set standard, dst, and before ttinfos. before will be\n\t\t// used when a given time is before any transitions,\n\t\t// and will be set to the first non-dst ttinfo, or to\n\t\t// the first dst, if all of them are dst.\n\t\tif (!this.transitionTimes.length) {\n\t\t\tthis.standardTime = this.zoneInfo[0];\n\t\t} else {\n\t\t\tfor (var j = tzh_timecnt - 1; j > -1; j--) {\n\t\t\t\tvar tti = this.ruleIndex[j];\n\t\t\t\tif (!this.standardTime && !tti.isdst) {\n\t\t\t\t\tthis.standardTime = tti;\n\t\t\t\t} else if (!this.daylightTime && tti.isdst) {\n\t\t\t\t\tthis.daylightTime = tti;\n\t\t\t\t}\n\n\t\t\t\tif (this.daylightTime && this.standardTime)\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (this.daylightTime && !this.standardTime) {\n\t\t\t\tthis.standardTime = this.daylightTime;\n\t\t\t}\n\n\t\t\tfor (var k = this.zoneInfo.length-1; k > 0; k--) {\n\t\t\t\tif (!this.zoneInfo[k].isdst) {\n\t\t\t\t\tthis.defaultTime = this.zoneInfo[k];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!this.defaultTime) {\n\t\t\tthis.defaultTime = this.zoneInfo[this.zoneInfo.length-1];\n\t\t}\n\t}\n};\n\n/**\n * Binary search a sorted array of numbers for a particular target value.\n * If the exact value is not found, it returns the index of the largest\n * entry that is smaller than the given target value.<p>\n *\n * @param {number} target element being sought\n * @param {Array} arr the array being searched\n * @return the index of the array into which the value would fit if\n * inserted, or -1 if given array is not an array or the target is not\n * a number\n */\nZoneInfoFile.prototype.bsearch = function(target, arr) {\n\tif (typeof(arr) === 'undefined' || !arr || typeof(target) === 'undefined' || target < arr[0]) {\n\t\treturn -1;\n\t}\n\n\t// greater than the end of the array\n\tif (target > arr[arr.length-1]) {\n\t\treturn arr.length - 1;\n\t}\n\n\tvar high = arr.length - 1,\n\t\tlow = 0,\n\t\tmid = 0,\n\t\tvalue;\n\n\twhile (low <= high) {\n\t\tmid = Math.floor((high+low)/2);\n\t\tvalue = arr[mid] - target;\n\t\tif (value > 0) {\n\t\t\thigh = mid - 1;\n\t\t} else if (value < 0) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\treturn mid;\n\t\t}\n\t}\n\n\treturn high;\n};\n\n/**\n * Return whether or not this zone uses DST in the given year.\n *\n * @param {Date} date the Gregorian date to test\n * @returns {boolean} true if the zone uses DST in the given year\n */\nZoneInfoFile.prototype.usesDST = function(date) {\n\tvar thisYear = date.getTime();\n\tvar nextYear = thisYear + 31536000000; // this is the number of ms in 1 Gregorian year\n\n\t// search for the zone that was effective Jan 1 of this year\n\t// to Jan 1 of next year, and if any of the infos is DST, then\n\t// this zone supports DST in the given year.\n\n\tvar index = this.bsearch(thisYear, this.transitionTimes);\n\tif (index !== -1) {\n\t\twhile (index < this.transitionTimes.length && this.transitionTimes[index] < nextYear) {\n\t\t\tif (this.ruleIndex[index++].isdst) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn false;\n};\n\n/**\n * Return the raw offset from UTC that this zone uses at the given time.\n *\n * @param {Date} date the Gregorian date to test\n * @returns {number} offset from from UTC in number of minutes. Negative\n * numbers are west of Greenwich, positive are east of Greenwich\n */\nZoneInfoFile.prototype.getRawOffset = function(date) {\n\tvar thisYear = date.getTime();\n\tvar nextYear = thisYear + 31536000000; // this is the number of ms in 1 Gregorian year\n\n\tvar index = this.bsearch(thisYear, this.transitionTimes);\n\n\tvar offset = this.defaultTime.offset;\n\tif (index > -1) {\n\t\twhile (index < this.transitionTimes.length && this.ruleIndex[index].isdst && this.transitionTimes[index+1] < nextYear) {\n\t\t\tindex++;\n\t\t}\n\n\t\tif (index < this.transitionTimes.length && !this.ruleIndex[index].isdst) {\n\t\t\toffset = this.ruleIndex[index].offset;\n\t\t}\n\t}\n\n\treturn offset;\n};\n\n/**\n * If this zone uses DST in the given year, return the DST savings\n * in use. If the zone does not use DST in the given year, this\n * method will return 0.\n *\n * @param {Date} date the Gregorian date to test\n * @returns {number} number of minutes in DST savings if the zone\n * uses DST in the given year, or zero otherwise\n */\nZoneInfoFile.prototype.getDSTSavings = function(date) {\n\tvar thisYear = date.getTime();\n\tvar nextYear = thisYear + 31536000000; // this is the number of ms in 1 Gregorian year\n\n\t// search for all transitions between now and one year \n\t// from now, and calculate the difference in DST (if any)\n\n\tvar index = this.bsearch(thisYear, this.transitionTimes);\n\tvar savings = 0;\n\tif (index > -1) {\n\t\twhile (index < this.transitionTimes.length && !this.ruleIndex[index].isdst && this.transitionTimes[index+1] < nextYear) {\n\t\t\tindex++;\n\t\t}\n\n\t\tif (index < this.transitionTimes.length && this.ruleIndex[index].isdst) {\n\t\t\tsavings = this.ruleIndex[index].savings;\n\t\t}\n\t}\n\n\treturn savings;\n};\n\n/**\n * Return the start date/time of DST if this zone uses\n * DST in the given year.\n *\n * @param {Date} date the Gregorian date to test\n * @returns {number} unixtime representation of the start\n * of DST in the given year, or -1 if the zone does not\n * use DST in the given year\n */\nZoneInfoFile.prototype.getDSTStartDate = function(date) {\n\tvar year = date.getFullYear();\n\tvar thisYear = new Date(year, 0, 1).getTime();\n\tvar nextYear = new Date(year+1, 0, 1).getTime();\n\n\t// search for all transitions between Jan 1 of this year\n\t// to Jan 1 of next year, and calculate the difference\n\t// in DST (if any)\n\n\tvar index = this.bsearch(thisYear, this.transitionTimes);\n\tvar startDate = -1;\n\tif (index > -1) {\n\t\tif (this.transitionTimes[index] < thisYear) {\n\t\t\tindex++; // start in this year instead of the previous year\n\t\t}\n\t\twhile (index < this.transitionTimes.length && !this.ruleIndex[index].isdst && this.transitionTimes[index+1] < nextYear) {\n\t\t\tindex++;\n\t\t}\n\n\t\tif (index < this.transitionTimes.length && this.ruleIndex[index].isdst) {\n\t\t\tstartDate = this.transitionTimes[index];\n\t\t}\n\t}\n\n\treturn startDate;\n};\n\n/**\n * Return the end date/time of DST if this zone uses\n * DST in the given year.\n *\n * @param {Date} date the Gregorian date to test\n * @returns {number} unixtime representation of the end\n * of DST in the given year, or -1 if the zone does not\n * use DST in the given year\n */\nZoneInfoFile.prototype.getDSTEndDate = function(date) {\n\tvar year = date.getFullYear();\n\tvar thisYear = new Date(year, 0, 1).getTime();\n\tvar nextYear = new Date(year+1, 0, 1).getTime();\n\n\t// search for all transitions between Jan 1 of this year\n\t// to Jan 1 of next year, and calculate the difference\n\t// in DST (if any)\n\n\tvar index = this.bsearch(thisYear, this.transitionTimes);\n\tvar endDate = -1;\n\tif (index > -1) {\n\t\tif (this.transitionTimes[index] < thisYear) {\n\t\t\tindex++; // start in this year instead of the previous year\n\t\t}\n\t\twhile (index < this.transitionTimes.length && this.ruleIndex[index].isdst && this.transitionTimes[index+1] < nextYear) {\n\t\t\tindex++;\n\t\t}\n\n\t\tif (index < this.transitionTimes.length && !this.ruleIndex[index].isdst) {\n\t\t\tendDate = this.transitionTimes[index];\n\t\t}\n\t}\n\n\treturn endDate;\n};\n\n/**\n * Return the abbreviation used by this zone in standard\n * time.\n *\n * @param {Date} date the Gregorian date to test\n * @returns {string} a string representing the abbreviation\n * used in this time zone during standard time\n */\nZoneInfoFile.prototype.getAbbreviation = function(date) {\n\tvar thisYear = date.getTime();\n\tvar nextYear = thisYear + 31536000000; // this is the number of ms in 1 Gregorian year\n\n\t// search for all transitions between now and one year from now, and calculate the difference\n\t// in DST (if any)\n\tvar abbr;\n\tif (this.transitionTimes.length > 0) {\n\t\tvar index = this.bsearch(thisYear, this.transitionTimes);\n\t\tabbr = this.ruleIndex[index].abbreviation;\n\t\tif (index > -1) {\n\t\t\twhile (index < this.transitionTimes.length && this.ruleIndex[index].isdst && this.transitionTimes[index+1] < nextYear) {\n\t\t\t\tindex++;\n\t\t\t}\n\n\t\t\tif (index < this.transitionTimes.length && !this.ruleIndex[index].isdst) {\n\t\t\t\tabbr = this.ruleIndex[index].abbreviation;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tabbr = this.standardTime.abbreviation;\n\t}\n\n\treturn abbr;\n};\n\n/**\n * Return the abbreviation used by this zone in daylight\n * time. If the zone does not use DST in the given year,\n * this returns the same thing as getAbbreviation().\n *\n * @param {Date} date the Gregorian date to test\n * @returns {string} a string representing the abbreviation\n * used in this time zone during daylight time\n */\nZoneInfoFile.prototype.getDSTAbbreviation = function(date) {\n\tvar thisYear = date.getTime();\n\tvar nextYear = thisYear + 31536000000; // this is the number of ms in 1 Gregorian year\n\n\t// search for all transitions between now and one year from now, and calculate the difference\n\t// in DST (if any)\n\n\tvar abbr;\n\tif (this.transitionTimes.length > 0) {\n\t\tvar index = this.bsearch(thisYear, this.transitionTimes);\n\t\tabbr = this.ruleIndex[index].abbreviation;\n\t\tif (index > -1) {\n\t\t\twhile (index < this.transitionTimes.length && !this.ruleIndex[index].isdst && this.transitionTimes[index+1] < nextYear) {\n\t\t\t\tindex++;\n\t\t\t}\n\n\t\t\tif (index < this.transitionTimes.length && this.ruleIndex[index].isdst) {\n\t\t\t\tabbr = this.ruleIndex[index].abbreviation;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tabbr = this.standardTime.abbreviation;\n\t}\n\n\treturn abbr;\n};\n\n/**\n * Return the zone information for the given date in ilib\n * format.\n *\n * @param {Date} date the Gregorian date to test\n * @returns {Object} an object containing the zone information\n * for the given date in the format that ilib can use directly\n */\nZoneInfoFile.prototype.getIlibZoneInfo = function(date) {\n\tfunction minutesToStr(min) {\n\t\tvar hours = Math.floor(min / 60);\n\t\tvar minutes = min - hours * 60;\n\n\t\treturn hours + \":\" + minutes;\n\t}\n\n\tfunction unixtimeToJD(millis) {\n\t\treturn 2440587.5 + millis / 86400000;\n\t}\n\tvar res = {\n\t\t\"o\": minutesToStr(this.getRawOffset(date))\n\t};\n\tif (this.usesDST(date)) {\n\t\tres.f = \"{c}\";\n\t\tres.e = {\n\t\t\t\"c\": this.getAbbreviation(date),\n\t\t\t\"j\": unixtimeToJD(this.getDSTEndDate(date))\n\t\t};\n\t\tres.s = {\n\t\t\t\"c\": this.getDSTAbbreviation(date),\n\t\t\t\"j\": unixtimeToJD(this.getDSTStartDate(date)),\n\t\t\t\"v\": minutesToStr(this.getDSTSavings(date))\n\t\t};\n\t} else {\n\t\tres.f = this.getAbbreviation(date);\n\t}\n\n\treturn res;\n};\n\nmodule.exports.ZoneInfoFile = ZoneInfoFile;","require('../../enyo');\n\n/**\n* The available options used by {@link enyo.Ajax} and {@link enyo.WebService}.\n*\n* @namespace enyo.AjaxProperties\n* @public\n*/\nmodule.exports = /** @lends enyo.AjaxProperties */ {\n\t\n\t/**\n\t* When `true`, appends a random number as a parameter for `GET` requests to try to\n\t* force a new fetch of the resource instead of reusing a local cache.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tcacheBust: true,\n\t\n\t/**\n\t* The URL for the service. This may be a relative URL if used to fetch resources bundled\n\t* with the application.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\turl: '',\n\t\n\t/**\n\t* The HTTP method to use for the request; defaults to `'GET'`.  Supported values include\n\t* `'GET'`, `'POST'`, `'PUT'`, and `'DELETE'`.\n\t*\n\t* @type {String}\n\t* @default 'GET'\n\t* @public\n\t*/\n\tmethod: 'GET', // {value: 'GET', options: ['GET', 'POST', 'PUT', 'DELETE']}\n\t\n\t/**\n\t* How the response will be handled. Supported values are `'json'`, `'text'`, and `'xml'`.\n\t*\n\t* @type {String}\n\t* @default 'json'\n\t* @public\n\t*/\n\thandleAs: 'json', // {value: 'json', options: ['text', 'json', 'xml']}\n\t\n\t/**\n\t* The `Content-Type` header for the request as a String.\n\t*\n\t* @type {String}\n\t* @default 'application/x-www-form-urlencoded'\n\t* @public\n\t*/\n\tcontentType: 'application/x-www-form-urlencoded',\n\t\n\t/**\n\t* If `true`, makes a synchronous (blocking) call, if supported.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tsync: false,\n\t\n\t/**\n\t* Optional additional request headers as a [hash]{@glossary Object}, or `null`.\n\t\n\t* ```javascript\n\t* { 'X-My-Header': 'My Value', 'Mood': 'Happy' }\n\t* ```\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\theaders: null,\n\t\n\t/**\n\t* The content for the request body for `POST/PUT` methods. When `postBody` is a\n\t* [buffer]{@glossary Buffer} or a [string]{@glossary String}, it is passed\n\t* verbatim in the request body. When it is a [hash]{@glossary Object}, the way it is\n\t* encoded depends on the `contentType`:\n\t*\n\t* - `'application/json'` => [JSON.stringify()]{@glossary JSON.stringify}\n\t* - `'application/x-www-urlencoded'` => url-encoded parameters\n\t* - `'multipart/form-data'` => passed as fields in {@link enyo.FormData} (XHR2 emulation)\n\t*\n\t* @type {(String|Buffer|Object)}\n\t* @default ''\n\t* @public\n\t*/\n\tpostBody: '',\n\n\t/**\n\t* The optional username to use for authentication purposes.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tusername: '',\n\t\n\t/**\n\t* The optional password to use for authentication purposes.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tpassword: '',\n\t\n\t/**\n\t* Optional [hash]{@glossary Object} with fields to pass directly to the underlying XHR\n\t* object. One example is the `withCredentials` flag used for cross-origin requests.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\txhrFields: null,\n\t\n\t/**\n\t* Optional [string]{@glossary String} to override the `MIME-Type` header.\n\t*\n\t* @type {String}\n\t* @default null\n\t* @public\n\t*/\n\tmimeType: null\n};","require('../../enyo');\n\n/**\n* A special type of [array]{@glossary Array} used internally by data layer\n* [kinds]{@glossary kind}.\n*\n* @class enyo.ModelList\n* @protected\n*/\nfunction ModelList (args) {\n\tArray.call(this);\n\tthis.table = {};\n\tif (args) this.add(args, 0);\n}\n\nModelList.prototype = Object.create(Array.prototype);\n\nmodule.exports = ModelList;\n\n/**\n* Adds [models]{@link enyo.Model} to the [list]{@link enyo.ModelList}, updating an\n* internal table by the model's [primaryKey]{@link enyo.Model#primaryKey} (if\n* possible) and its [euid]{@glossary euid}.\n*\n* @name enyo.ModelList#add\n* @method\n* @param {(enyo.Model|enyo.Model[])} models The [model or models]{@link enyo.Model}\n*\tto add to the [list]{@link enyo.ModelList}.\n* @param {Number} [idx] - If provided and valid, the models will be\n* [spliced]{@glossary Array.splice} into the list at this position.\n* @returns {enyo.Model[]} An immutable [array]{@glossary Array} of models\n* that were actually added to the list.\n* @protected\n*/\nModelList.prototype.add = function (models, idx) {\n\tvar table = this.table,\n\t\tadded = [],\n\t\tmodel,\n\t\teuid,\n\t\tid,\n\t\ti = 0;\n\t\n\tif (models && !(models instanceof Array)) models = [models];\n\t\n\tfor (; (model = models[i]); ++i) {\n\t\teuid = model.euid;\n\t\t\n\t\t// we only want to actually add models we haven't already seen...\n\t\tif (!table[euid]) {\n\t\t\tid = model.get(model.primaryKey);\n\t\t\n\t\t\tif (id != null) {\n\t\t\t\n\t\t\t\t// @TODO: For now if we already have an entry for a model by its supposed unique\n\t\t\t\t// identifier but it isn't the instance we just found we can't just\n\t\t\t\t// overwrite the previous instance so we mark the new one as headless\n\t\t\t\tif (table[id] && table[id] !== model) model.headless = true;\n\t\t\t\t// otherwise we do the normal thing and add the entry for it\n\t\t\t\telse table[id] = model; \n\t\t\t}\n\t\t\n\t\t\t// nomatter what though the euid should be unique\n\t\t\ttable[euid] = model;\n\t\t\tadded.push(model);\n\t\t}\n\t}\n\t\n\tif (added.length) {\n\t\tidx = !isNaN(idx) ? Math.min(Math.max(0, idx), this.length) : 0;\n\t\tadded.unshift(0);\n\t\tadded.unshift(idx);\n\t\tthis.splice.apply(this, added);\n\t}\n\t\n\tif (added.length > 0) added = added.slice(2);\n\tadded.at = idx;\n\t\n\treturn added;\n};\n\n/**\n* Removes the specified [models]{@link enyo.Model} from the [list]{@link enyo.ModelList}.\n*\n* @name enyo.ModelList#remove\n* @method\n* @param {(enyo.Model|enyo.Model[])} models The [model or models]{@link enyo.Model}\n*\tto remove from the [list]{@link enyo.ModelList}.\n* @returns {enyo.Model[]} An immutable [array]{@glossary Array} of\n*\tmodels that were actually removed from the list.\n* @protected\n*/\nModelList.prototype.remove = function (models) {\n\tvar table = this.table,\n\t\tremoved = [],\n\t\tmodel,\n\t\tidx,\n\t\tid,\n\t\ti,\n\t\t\n\t\t// these modifications are made to allow more performant logic to take place in\n\t\t// views that may need to know this information\n\t\tlow = Infinity,\n\t\thigh = -1,\n\t\tindices = [];\n\t\n\tif (models && !(models instanceof Array)) models = [models];\n\t\n\t// we start at the end to ensure that you could even pass the list itself\n\t// and it will work\n\tfor (i = models.length - 1; (model = models[i]); --i) {\n\t\ttable[model.euid] = null;\n\t\tid = model.get(model.primaryKey);\n\t\t\n\t\tif (id != null) table[id] = null;\n\t\t\n\t\tidx = models === this ? i : this.indexOf(model);\n\t\tif (idx > -1) {\t\t\t\t\n\t\t\tif (idx < low) low = idx;\n\t\t\tif (idx > high) high = idx;\n\t\t\t\n\t\t\tthis.splice(idx, 1);\n\t\t\tremoved.push(model);\n\t\t\tindices.push(idx);\n\t\t}\n\t}\n\t\n\t// since this is a separate array we will add this property to it for internal use only\n\tremoved.low = low;\n\tremoved.high = high;\n\tremoved.indices = indices;\n\t\n\treturn removed;\n};\n\n/**\n* Determines whether the specified [model]{@link enyo.Model} is present in the\n* [list]{@link enyo.ModelList}. Will attempt to resolve a [string]{@glossary String}\n* or [number]{@glossary Number} to either a [primaryKey]{@link enyo.Model#primaryKey}\n* or [euid]{@glossary euid}.\n*\n* @name enyo.ModelList#has\n* @method\n* @param {(enyo.Model|String|Number)} model An identifier representing either the\n*\t[model]{@link enyo.Model} instance, its [primaryKey]{@link enyo.Model#primaryKey},\n* or its [euid]{@glossary euid}.\n* @returns {Boolean} Whether or not the model is present in the [list]{@link enyo.ModelList}.\n* @protected\n*/\nModelList.prototype.has = function (model) {\n\tif (model === undefined || model === null) return false;\n\t\n\tif (typeof model == 'string' || typeof model == 'number') {\n\t\treturn !! this.table[model];\n\t} else return this.indexOf(model) > -1;\n};\n\n/**\n* Given an identifier, attempts to return the associated [model]{@link enyo.Model}.\n* The identifier should be a [string]{@glossary String} or [number]{@glossary Number}.\n*\n* @name enyo.ModelList#resolve\n* @method\n* @param {(String|Number)} model - An identifier (either a\n*\t[primaryKey]{@link enyo.Model#primaryKey} or an [euid]{@glossary euid}).\n* @returns {(undefined|null|enyo.Model)} If the identifier could be resolved, a\n*\t[model]{@link enyo.Model} instance is returned; otherwise, `undefined`, or\n* possibly `null` if the model once belonged to the [list]{@link enyo.ModelList}.\n* @protected\n*/\nModelList.prototype.resolve = function (model) {\n\tif (typeof model == 'string' || typeof model == 'number') {\n\t\treturn this.table[model];\n\t} else return model;\n};\n\n/**\n* Copies the current [list]{@link enyo.ModelList} and returns an shallow copy. This\n* method differs from the [slice()]{@glossary Array.slice} method inherited from\n* native [Array]{@glossary Array} in that this returns an {@link enyo.ModelList},\n* while `slice()` returns an array.\n* \n* @name enyo.ModelList#copy\n* @method\n* @returns {enyo.ModelList} A shallow copy of the callee.\n* @protected\n*/\nModelList.prototype.copy = function () {\n\treturn new ModelList(this);\n};","require('../../enyo');\n\n/**\n* Shared values for various [kinds]{@glossary kind} used to indicate a state or\n* (multiple, simultaneous) states. These flags are binary values represented by\n* hexadecimal numerals. They may be modified and compared (or even extended) using\n* [bitwise operations]{@glossary bitwise} or various\n* [API methods]{@link enyo.StateSupport} available to the kinds that support them.\n* Make sure to explore the documentation for individual kinds, as they may have\n* specific uses for a given flag.\n* \n* As a cursory overview, here is a table of the values already declared by built-in flags.\n* Each hexadecimal numeral represents a unique power of 2 in binary, from which we can use\n* [bitwise masks]{@glossary bitwise} to determine if a particular value is present.\n* \n* ```javascript\n* HEX             DEC             BIN\n* 0x0001             1            0000 0000 0000 0001\n* 0x0002             2            0000 0000 0000 0010\n* 0x0004             4            0000 0000 0000 0100\n* 0x0008             8            0000 0000 0000 1000\n* 0x0010            16            0000 0000 0001 0000\n* 0x0020            32            0000 0000 0010 0000\n* 0x0040            64            0000 0000 0100 0000\n* 0x0080           128            0000 0000 1000 0000\n* 0x0100           256            0000 0001 0000 0000\n* 0x0200           512            0000 0010 0000 0000\n* 0x0400          1024            0000 0100 0000 0000\n* 0x0800          2048            0000 1000 0000 0000\n* \n* ...\n* \n* 0x1000          4096            0001 0000 0000 0000\n* ```\n*\n* As a hint, converting (HEX) 0x0800 to DEC do:\n*\n* ```javascript\n* (0*16^3) + (8*16^2) + (0*16^1) + (0*16^0) = 2048\n* ```\n*\n* As a hint, converting (HEX) 0x0800 to BIN do:\n*\n* ```javascript\n* 0    8    0    0    (HEX)\n* ---- ---- ---- ----\n* 0000 1000 0000 0000 (BIN)\n* ```\n*\n* @name enyo.States\n* @enum {Number}\n* @public\n* @memberof enyo\n* @see enyo.StateSupport\n*/\nmodule.exports = {\n\t\n\t/**\n\t* Only exists in the client and was created during the runtime of the\n\t* [application]{@glossary application}.\n\t*\n\t* @name enyo.States.NEW\n\t* @default 1\n\t*/\n\tNEW: 0x0001,\n\t\n\t/**\n\t* Has been modified locally only.\n\t*\n\t* @name enyo.States.DIRTY\n\t* @default 2\n\t*/\n\tDIRTY: 0x0002,\n\t\n\t/**\n\t* Has not been modified locally.\n\t*\n\t* @name enyo.States.CLEAN\n\t* @default 4\n\t*/\n\tCLEAN: 0x0004,\n\t\n\t/**\n\t* Can no longer be modified.\n\t*\n\t* @default 8\n\t*/\n\tDESTROYED: 0x0008,\n\t\n\t/**\n\t* Currently attempting to fetch.\n\t* \n\t* @see enyo.Model.fetch\n\t* @see enyo.RelationalModel.fetch\n\t* @see enyo.Collection.fetch\n\t*\n\t* @default 16\n\t*/\n\tFETCHING: 0x0010,\n\t\n\t/**\n\t* Currently attempting to commit.\n\t* \n\t* @see enyo.Model.commit\n\t* @see enyo.RelationalModel.commit\n\t* @see enyo.Collection.commit\n\t*\n\t* @default 32\n\t*/\n\tCOMMITTING: 0x0020,\n\t\n\t/**\n\t* Currently attempting to destroy.\n\t* \n\t* @see enyo.Model.destroy\n\t* @see enyo.RelationalModel.destroy\n\t* @see enyo.Collection.destroy\n\t*\n\t* @default 64\n\t*/\n\tDESTROYING: 0x0040,\n\t\n\t/**\n\t* There was an error during commit.\n\t* \n\t* @see enyo.Model.commit\n\t* @see enyo.RelationalModel.commit\n\t* @see enyo.Collection.commit\n\t*\n\t* @default 128\n\t*/\n\tERROR_COMMITTING: 0x0080,\n\t\n\t/**\n\t* There was an error during fetch.\n\t* \n\t* @see enyo.Model.fetch\n\t* @see enyo.RelationalModel.fetch\n\t* @see enyo.Collection.fetch\n\t*\n\t* @default 256\n\t*/\n\tERROR_FETCHING: 0x0100,\n\t\n\t/**\n\t* There was an error during destroy.\n\t* \n\t* @see enyo.Model.destroy\n\t* @see enyo.RelationalModel.destroy\n\t* @see enyo.Collection.destroy\n\t*\n\t* @default 512\n\t*/\n\tERROR_DESTROYING: 0x0200,\n\t\n\t/**\n\t* An error was encountered for which there was no exact flag, or an invalid error was\n\t* specified.\n\t*\n\t* @default 1024\n\t*/\n\tERROR_UNKNOWN: 0x0400,\n\t\n\t/**\n\t* A multi-state [bitmask]{@glossary bitwise}. Compares a given flag to the states\n\t* included in the definition of `BUSY`. By default, this is one of\n\t* [FETCHING]{@link enyo.States.FETCHING}, [COMMITTING]{@link enyo.States.COMMITTING}, or\n\t* [DESTROYING]{@link enyo.States.DESTROYING}. It may be extended to include additional\n\t* values using the [bitwise]{@glossary bitwise} `OR` operator (`|`).\n\t*\n\t* @default 112\n\t*/\n\tBUSY: 0x0010 | 0x0020 | 0x0040,\n\t\n\t/**\n\t* A multi-state [bitmask]{@glossary bitwise}. Compares a given flag to the states\n\t* included in the definition of `ERROR`. By default, this is one of\n\t* [ERROR_FETCHING]{@link enyo.States.ERROR_FETCHING},\n\t* [ERROR_COMMITTING]{@link enyo.States.ERROR_COMMITTING},\n\t* [ERROR_DESTROYING]{@link enyo.States.ERROR_DESTROYING}, or\n\t* [ERROR_UNKNOWN]{@link enyo.States.ERROR_UNKNOWN}. It may be extended to include\n\t* additional values using the [bitwise]{@glossary bitwise} `OR` operator (`|`).\n\t*\n\t* @name enyo.States.ERROR\n\t* @default 1920\n\t*/\n\tERROR: 0x0080 | 0x0100 | 0x0200 | 0x0400,\n\t\n\t/**\n\t* A multi-state [bitmask]{@glossary bitwise}. Compares a given flag to the states\n\t* included in the definition of `READY`. By default, this is the inverse of any\n\t* values included in [BUSY]{@link enyo.States.BUSY} or [ERROR]{@link enyo.States.ERROR}.\n\t*\n\t* @name enyo.States.READY\n\t* @default -2041\n\t*/\n\tREADY: ~(0x0008 | 0x0010 | 0x0020 | 0x0040 | 0x0080 | 0x0100 | 0x0200 | 0x0400)\n};","require('../../enyo');\n\n\n/**\n* [JSON]{@glossary JSON} related methods and wrappers.\n*\n* @namespace enyo.json\n* @public\n*/\nmodule.exports = /** @lends enyo.json */ {\n\t\n\t/**\n\t* Wrapper for [JSON.stringify()]{@glossary JSON.stringify}. Creates a\n\t* [JSON]{@glossary JSON} [string]{@glossary String} from an\n\t* [object]{@glossary Object}.\n\t*\n\t* @see {@glossary JSON.stringify}\n\t* @param {Object} value - The [object]{@glossary Object} to convert to a\n\t*\t[JSON]{@glossary JSON} [string]{@glossary String}.\n\t* @param {(Function|String[])} [replacer] An optional parameter indicating either an\n\t*\t[array]{@glossary Array} of keys to include in the final output or a\n\t*\t[function]{@glossary Function} that will have the opportunity to dynamically return\n\t*\tvalues to include for keys.\n\t* @param {(Number|String)} [space] - Determines the spacing (if any) for pretty-printed\n\t*\toutput of the JSON string. A [number]{@glossary Number} indicates the number of\n\t* spaces to use in the output, while a string will be used verbatim.\n\t* @returns {String} The JSON string for the given object.\n\t* @public\n\t*/\n\tstringify: function(value, replacer, space) {\n\t\treturn JSON.stringify(value, replacer, space);\n\t},\n\t\n\t/**\n\t* Wrapper for [JSON.parse()]{@glossary JSON.parse}. Parses a valid\n\t* [JSON]{@glossary JSON} [string]{@glossary String} and returns an\n\t* [object]{@glossary Object}, or `null` if the parameters are invalid.\n\t*\n\t* @see {@glossary JSON.parse}\n\t* @param {String} json - The [JSON]{@glossary JSON} [string]{@glossary String} to\n\t*\tparse into an [object]{@glossary Object}.\n\t* @param {Function} [reviver] - The optional [function]{@glossary Function} to use to\n\t*\tparse individual keys of the return object.\n\t* @returns {(Object|null)} If parameters are valid, an [object]{@glossary Object}\n\t* is returned; otherwise, `null`.\n\t* @public\n\t*/\n\tparse: function(json, reviver) {\n\t\treturn json ? JSON.parse(json, reviver) : null;\n\t}\n};","require('../../enyo');\n\n// we need to register appropriately to know when\n// the document is officially ready, to ensure that\n// client code is only going to execute at the\n// appropriate time\n\nvar doc = global.document;\nvar queue = [];\nvar ready = (\"complete\" === doc.readyState);\nvar run;\nvar init;\nvar remove;\nvar add;\nvar flush;\nvar flushScheduled = false;\n\n/**\n* Registers a callback (and optional `this` context) to run after all the Enyo and library code\n* has loaded and the `DOMContentLoaded` event (or equivalent on older browsers) has been sent.\n* \n* If called after the system is in a ready state, runs the supplied code asynchronously at the\n* earliest opportunity.\n*\n* @name enyo.ready\n* @method\n* @param {Function} fn - The method to execute when the DOM is ready.\n* @param {Object} [context] - The optional context (`this`) under which to execute the\n*\tcallback method.\n* @public\n*/\nmodule.exports = function (fn, context) {\n\tqueue.push([fn, context]);\n\t// schedule another queue flush if needed to run new ready calls\n\tif (ready && !flushScheduled) {\n\t\tsetTimeout(flush, 0);\n\t\tflushScheduled = true;\n\t}\n};\n\n/**\n* @private\n*/\nrun = function (fn, context) {\n\tfn.call(context || global);\n};\n\n/**\n* @private\n*/\ninit = function (event) {\n\t// if we're interactive, it should be safe to move\n\t// forward because the content has been parsed\n\tif ((ready = (\"interactive\" === doc.readyState))) {\n\t\tif (\"DOMContentLoaded\" !== event.type && \"readystatechange\" !== event.type) {\n\t\t\tremove(event.type, init);\n\t\t\tflush();\n\t\t}\n\t}\n\t// for an IE8 fallback and legacy WebKit (including webOS 3.x and less) and assurance\n\tif ((ready = (\"complete\" === doc.readyState || \"loaded\" === doc.readyState))) {\n\t\tremove(event.type, init);\n\t\tflush();\n\t}\n};\n\n/**\n* @private\n*/\nadd = function (event, fn) {\n\tvar name = doc.addEventListener? \"addEventListener\": \"attachEvent\";\n\tvar on = name === \"attachEvent\"? \"on\": \"\";\n\tdoc[name](on + event, fn, false);\n};\n\n/**\n* @private\n*/\nremove = function (event, fn) {\n\tvar name = doc.addEventListener? \"removeEventListener\": \"detachEvent\";\n\tvar on = name === \"detachEvent\"? \"on\": \"\";\n\tdoc[name](on + event, fn, false);\n};\n\n/**\n* @private\n*/\nflush = function () {\n\tif (ready && queue.length) {\n\t\twhile (queue.length) {\n\t\t\trun.apply(global, queue.shift());\n\t\t}\n\t}\n\tflushScheduled = false;\n};\n\n// ok, let's hook this up\nadd(\"DOMContentLoaded\", init);\nadd(\"readystatechange\", init);","require('../../enyo');\n\n/**\n* @private\n*/\nvar callbacks = [],\n\troots = [];\n\nexports.roots = roots;\n\n/**\n* Registers a single callback to be executed whenever a root view is rendered.\n* \n* @name enyo.rendered\n* @method\n* @param {Function} method - The callback to execute.\n* @param {Object} [context=enyo.global] The context under which to execute the callback.\n* @public\n*/\nexports.rendered = function (method, context) {\n\tcallbacks.push({method: method, context: context || global});\n};\n\n/**\n* @private\n*/\nexports.roots = roots;\n\n/**\n* Invokes all known callbacks (if any) against the root view once it has been rendered.\n* This method is not likely to be executed very often.\n* \n* @private\n*/\nfunction invoke (root) {\n\tcallbacks.forEach(function (ln) {\n\t\tln.method.call(ln.context, root);\n\t});\n}\n\n/**\n* @private\n*/\nexports.addToRoots = function (view) {\n\tvar rendered,\n\t\tdestroy;\n\t\n\t// since it is possible to call renderInto more than once on a given view we ensure we\n\t// don't register it twice unnecessarily\n\tif (roots.indexOf(view) === -1) {\n\t\t\n\t\troots.push(view);\n\t\t\n\t\t// hijack the rendered method\n\t\trendered = view.rendered;\n\t\t\n\t\t// hijack the destroy method\n\t\tdestroy = view.destroy;\n\t\t\n\t\t// supply our rendered hook\n\t\tview.rendered = function () {\n\t\t\t// we call the original first\n\t\t\trendered.apply(this, arguments);\n\t\t\t\n\t\t\t// and now we invoke the known callbacks against this root\n\t\t\tinvoke(this);\n\t\t};\n\t\t\n\t\t// supply our destroy hook\n\t\tview.destroy = function () {\n\t\t\tvar idx = roots.indexOf(this);\n\t\t\t\n\t\t\t// remove it from the roots array\n\t\t\tif (idx > -1) roots.splice(idx, 1);\n\t\t\t\n\t\t\t// now we can call the original\n\t\t\tdestroy.apply(this, arguments);\n\t\t};\n\t}\n};","require('../../enyo');\n\n\n/**\n* A polyfill for platforms that don't yet support\n* [bind()]{@glossary Function.prototype.bind}. As explained in the linked article, this\n* polyfill handles the general use case but cannot exactly mirror the ECMA-262 version 5\n* implementation specification. This is an adaptation of the example promoted\n* [here]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind}.\n*/\nif (!Function.prototype.bind) {\n\tFunction.prototype.bind = function (ctx) {\n\t\t// deliberately used here...\n\t\tvar args = Array.prototype.slice.call(arguments, 1),\n\t\t\tscop = this,\n\t\t\tnop = function () {},\n\t\t\tret;\n\t\t\n\t\t// as-per MDN's explanation of this polyfill we're filling in for the IsCallable\n\t\t// internal (we can't access it)\n\t\tif (typeof this != 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind called on non-callable object.');\n\t\t}\n\t\t\n\t\tret = function () {\n\t\t\tvar largs = args.concat(Array.prototype.slice.call(arguments)),\n\t\t\t\tlctx = this instanceof nop && ctx ? this : ctx;\n\t\t\t\n\t\t\treturn scop.apply(lctx, largs);\n\t\t};\n\t\t\n\t\tnop.prototype = this.prototype;\n\t\t\n\t\t/*jshint -W055 */\n\t\tret.prototype = new nop();\n\t\t/*jshint +W055 */\n\t\t\n\t\treturn ret;\n\t};\n}\n\n/**\n* @private\n*/\nexports.nop = function () {};\n\n/**\n* @private\n*/\nexports.nob = {};\n\n/**\n* @private\n*/\nexports.nar = [];\n\n/**\n* This name is reported in inspectors as the type of objects created via delegate;\n* otherwise, we would just use {@link enyo.nop}.\n*\n* @private\n*/\nvar Instance = exports.instance = function () {};\n\t\n/**\n* @private\n*/\nvar setPrototype = exports.setPrototype = function (ctor, proto) {\n\tctor.prototype = proto;\n};\n\n/**\n* Boodman/crockford delegation w/cornford optimization\n* \n* @private\n*/\nexports.delegate = function (proto) {\n\tsetPrototype(Instance, proto);\n\treturn new Instance();\n};\n\n// ----------------------------------\n// General Functions\n// ----------------------------------\n\n/**\n* Determines whether a variable is defined.\n* \n* @param {*} target - Anything that can be compared to `undefined`.\n* @returns {Boolean} `true` if defined, `false` otherwise.\n* @public\n*/\nvar exists = exports.exists = function (target) {\n\treturn (target !== undefined);\n};\n\nvar uidCounter = 0;\n\n/**\n* Creates a unique identifier (with an optional prefix) and returns the identifier as a string.\n*\n* @param {String} [prefix] - The prefix to prepend to the generated unique id.\n* @returns {String} An optionally-prefixed identifier.\n* @public\n*/\nexports.uid = function (prefix) {\n\treturn String((prefix? prefix: '') + uidCounter++);\n};\n\n/**\n* RFC4122 uuid generator for the browser.\n*\n* @returns {String} An [RFC4122]{@glossary UUID}-compliant, universally unique identifier.\n* @public\n*/\nexports.uuid = function () {\n\t// @TODO: Could possibly be faster\n\tvar t, p = (\n\t\t(Math.random().toString(16).substr(2,8)) + '-' +\n\t\t((t=Math.random().toString(16).substr(2,8)).substr(0,4)) + '-' +\n\t\t(t.substr(4,4)) +\n\t\t((t=Math.random().toString(16).substr(2,8)).substr(0,4)) + '-' +\n\t\t(t.substr(4,4)) +\n\t\t(Math.random().toString(16).substr(2,8))\n\t);\n\treturn p;\n};\n\n/**\n* Generates a random number using [Math.random]{@glossary Math.random}.\n*\n* @param {Number} bound - The multiplier used to generate the product.\n* @returns {Number} A random number.\n* @public\n*/\nexports.irand = function (bound) {\n\treturn Math.floor(Math.random() * bound);\n};\n\nvar toString = Object.prototype.toString;\n\n/**\n* Determines whether a given variable is a [String]{@glossary String}.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is a [String]{@glossary String};\n* otherwise, `false`.\n* @public\n*/\nexports.isString = function (it) {\n\treturn toString.call(it) === '[object String]';\n};\n\n/**\n* Determines whether a given variable is a [Function]{@glossary Function}.\n* \n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is a [Function]{@glossary Function};\n* otherwise, `false`.\n* @public\n*/\nexports.isFunction = function (it) {\n\treturn toString.call(it) === '[object Function]';\n};\n\n/**\n* Determines whether a given variable is an [Array]{@glossary Array}.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is an [Array]{@glossary Array};\n* otherwise, `false`.\n* @method\n* @public\n*/\nvar isArray = exports.isArray = Array.isArray || function (it) {\n\treturn toString.call(it) === '[object Array]';\n};\n\n/**\n* Determines whether a given variable is an [Object]{@glossary Object}.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is an [Object]{@glossary Object};\n* otherwise, `false`.\n* @method\n* @public\n*/\nexports.isObject = Object.isObject || function (it) {\n\t// explicit null/undefined check for IE8 compatibility\n\treturn (it != null) && (toString.call(it) === '[object Object]');\n};\n\n/**\n* Determines whether a given variable is an explicit boolean `true`.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is an explicit `true`; otherwise,\n* `false`.\n* @public\n*/\nexports.isTrue = function (it) {\n\treturn !(it === 'false' || it === false || it === 0 || it === null || it === undefined);\n};\n\n/**\n* Determines whether a given variable is a numeric value.\n*\n* @param {*} it - The variable to be tested.\n* @returns {Boolean} `true` if variable is a numeric value; otherwise,\n* `false`.\n* @public\n*/\nexports.isNumeric = function (it) {\n\t// borrowed from jQuery\n\treturn !isArray(it) && (it - parseFloat(it) + 1) >= 0;\n};\n\n/**\n* Binds the `this` context of any method to a scope and a variable number of provided initial\n* parameters.\n*\n* @param {Object} scope - The `this` context for the method.\n* @param {(Function|String)} method - A Function or the name of a method to bind.\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\n*                      enclosed method.\n* @returns {Function} The bound method/closure.\n* @public\n*/\nvar bind = exports.bind = function (scope, method) {\n\tif (!method) {\n\t\tmethod = scope;\n\t\tscope = null;\n\t}\n\tscope = scope || global;\n\tif (typeof method == 'string') {\n\t\tif (scope[method]) {\n\t\t\tmethod = scope[method];\n\t\t} else {\n\t\t\tthrow('enyo.bind: scope[\"' + method + '\"] is null (scope=\"' + scope + '\")');\n\t\t}\n\t}\n\tif (typeof method == 'function') {\n\t\tvar args = cloneArray(arguments, 2);\n\t\tif (method.bind) {\n\t\t\treturn method.bind.apply(method, [scope].concat(args));\n\t\t} else {\n\t\t\treturn function() {\n\t\t\t\tvar nargs = cloneArray(arguments);\n\t\t\t\t// invoke with collected args\n\t\t\t\treturn method.apply(scope, args.concat(nargs));\n\t\t\t};\n\t\t}\n\t} else {\n\t\tthrow('enyo.bind: scope[\"' + method + '\"] is not a function (scope=\"' + scope + '\")');\n\t}\n};\n\n/**\n* Binds a callback to a scope. If the object has a `destroyed` property that's truthy, then the\n* callback will not be run if called. This can be used to implement both\n* {@link enyo.Object.bindSafely} and {@link enyo.Object}-like objects like\n* {@link enyo.Model} and {@link enyo.Collection}.\n*\n* @param {Object} scope - The `this` context for the method.\n* @param {(Function|String)} method - A Function or the name of a method to bind.\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\n*                      enclosed method.\n* @returns {Function} The bound method/closure.\n* @public\n*/\nexports.bindSafely = function (scope, method) {\n\tif (typeof method == 'string') {\n\t\tif (scope[method]) {\n\t\t\tmethod = scope[method];\n\t\t} else {\n\t\t\tthrow('enyo.bindSafely: scope[\"' + method + '\"] is null (this=\"' + this + '\")');\n\t\t}\n\t}\n\tif (typeof method == 'function') {\n\t\tvar args = cloneArray(arguments, 2);\n\t\treturn function() {\n\t\t\tif (scope.destroyed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar nargs = cloneArray(arguments);\n\t\t\treturn method.apply(scope, args.concat(nargs));\n\t\t};\n\t} else {\n\t\tthrow('enyo.bindSafely: scope[\"' + method + '\"] is not a function (this=\"' + this + '\")');\n\t}\n};\n\n/**\n* Calls the provided `method` on `scope`, asynchronously.\n*\n* Uses [window.setTimeout()]{@glossary window.setTimeout} with minimum delay,\n* usually around 10ms.\n*\n* Additional arguments are passed to `method` when it is invoked.\n*\n* If only a single argument is supplied, will just call that function asynchronously without\n* doing any additional binding.\n*\n* @param {Object} scope - The `this` context for the method.\n* @param {(Function|String)} method - A Function or the name of a method to bind.\n* @param {...*} [args] Any arguments that will be provided as the initial arguments to the\n*                      enclosed method.\n* @returns {Number} The `setTimeout` id.\n* @public\n*/\nexports.asyncMethod = function (scope, method) {\n\tif (!method) {\n\t\t// passed just a single argument\n\t\treturn setTimeout(scope, 1);\n\t} else {\n\t\treturn setTimeout(bind.apply(scope, arguments), 1);\n\t}\n};\n\n/**\n* Calls the provided `method` ([String]{@glossary String}) on `scope` with optional\n* arguments `args` ([Array]{@glossary Array}), if the object and method exist.\n*\n* @example\n* \tenyo.call(myWorkObject, 'doWork', [3, 'foo']);\n*\n* @param {Object} scope - The `this` context for the method.\n* @param {(Function|String)} method - A Function or the name of a method to bind.\n* @param {Array} [args] - An array of arguments to pass to the method.\n* @returns {*} The return value of the method.\n* @public\n*/\nexports.call = function (scope, method, args) {\n\tvar context = scope || this;\n\tif (method) {\n\t\tvar fn = context[method] || method;\n\t\tif (fn && fn.apply) {\n\t\t\treturn fn.apply(context, args || []);\n\t\t}\n\t}\n};\n\n/**\n* Returns the current time in milliseconds. On platforms that support it,\n* [Date.now()]{@glossary Date.now} will be used; otherwise this will\n* be equivalent to [new Date().getTime()]{@glossary Date.getTime}.\n* \n* @returns {Number} Number of milliseconds representing the current time.\n* @method\n* @public\n*/\n\nvar now = exports.now = Date.now || function () {\n\treturn new Date().getTime();\n};\n\n/**\n* When [window.performance]{@glossary window.performance} is available, supplies\n* a high-precision, high-performance monotonic timestamp, which is independent of\n* changes to the system clock and thus safer for use in animation, etc. Falls back to\n* [enyo.now()]{@link enyo#now} (based on the JavaScript [Date]{@glossary Date}\n* object), which is subject to system time changes.\n* \n* @returns {Number} Number of milliseconds representing the current time or time since\n*                   start of application execution as reported by the platform.\n* @method\n* @public\n*/\nexports.perfNow = (function () {\n\t// we have to check whether or not the browser has supplied a valid\n\t// method to use\n\tvar perf = window.performance || {};\n\t// test against all known vendor-specific implementations, but use\n\t// a fallback just in case\n\tperf.now = perf.now || perf.mozNow || perf.msNow || perf.oNow || perf.webkitNow || now;\n\treturn function () {\n\t\treturn perf.now();\n\t};\n}());\n\n/**\n* A fast-path enabled global getter that takes a string path, which may be a full path (from\n* context window/Enyo) or a relative path (to the execution context of the method). It knows how\n* to check for and call the backwards-compatible generated getters, as well as how to handle\n* computed properties. Returns `undefined` if the object at the given path cannot be found. May\n* safely be called on non-existent paths.\n*\t\n* @param {String} path - The path from which to retrieve a value.\n* @returns {*} The value for the given path, or `undefined` if the path could not be\n*                  completely resolved.\n* @method enyo.getPath\n* @public\n*/\nvar getPath = exports.getPath = function (path) {\n\t// we're trying to catch only null/undefined not empty string or 0 cases\n\tif (!path && path !== null && path !== undefined) return path;\n\t\n\tvar next = this,\n\t\tparts,\n\t\tpart,\n\t\tgetter,\n\t\tprev;\n\t\n\t// obviously there is a severe penalty for requesting get with a path lead\n\t// by unnecessary relative notation...\n\tif (path[0] == '.') path = path.replace(/^\\.+/, '');\n\t\n\t// here's where we check to make sure we have a truthy string-ish\n\tif (!path) return;\n\t\n\tparts = path.split('.');\n\tpart = parts.shift();\n\t\n\tdo {\n\t\tprev = next;\n\t\t// for constructors we must check to make sure they are undeferred before\n\t\t// looking for static properties\n\t\t// for the auto generated or provided published property support we have separate\n\t\t// routines that must be called to preserve compatibility\n\t\tif (next._getters && ((getter = next._getters[part])) && !getter.generated) next = next[getter]();\n\t\t// for all other special cases to ensure we use any overloaded getter methods\n\t\telse if (next.get && next !== this && next.get !== getPath) next = next.get(part);\n\t\t// and for regular cases\n\t\telse next = next[part];\n\t} while (next && (part = parts.shift()));\n\t\t\t\n\t// if necessary we ensure we've undeferred any constructor that we're\n\t// retrieving here as a final property as well\n\treturn next;\n};\n\n/**\n* @private\n*/\ngetPath.fast = function (path) {\n\t// the current context\n\tvar b = this, fn, v;\n\tif (b._getters && (fn = b._getters[path])) {\n\t\tv = b[fn]();\n\t} else {\n\t\tv = b[path];\n\t}\n\t\n\treturn v;\n};\n\n/**\n* @TODO: Out of date...\n* A global setter that takes a string path (relative to the method's execution context) or a\n* full path (relative to window). Attempts to automatically retrieve any previously existing\n* value to supply to any observers. If the context is an {@link enyo.Object} or subkind, the\n* {@link enyo.ObserverSupport.notify} method is used to notify listeners for the path's being\n* set. If the previous value is equivalent to the newly set value, observers will not be\n* triggered by default. If the third parameter is present and is an explicit boolean true, the\n* observers will be triggered regardless. Returns the context from which the method was executed.\n*\n* @param {String} path - The path for which to set the given value.\n* @param {*} is - The value to set.\n* @param {Object} [opts] - An options hash.\n* @returns {this} Whatever the given context was when executed.\n* @method enyo.setPath\n* @public\n*/\nvar setPath = exports.setPath = function (path, is, opts) {\n\t// we're trying to catch only null/undefined not empty string or 0 cases\n\tif (!path || (!path && path !== null && path !== undefined)) return this;\n\t\n\tvar next = this,\n\t\toptions = {create: true, silent: false, force: false},\n\t\tbase = next,\n\t\tparts,\n\t\tpart,\n\t\twas,\n\t\tforce,\n\t\tcreate,\n\t\tsilent,\n\t\tcomparator;\n\t\n\tif (typeof opts == 'object') opts = mixin({}, [options, opts]);\n\telse {\n\t\tforce = opts;\n\t\topts = options;\n\t}\n\t\n\tif (opts.force) force = true;\n\tsilent = opts.silent;\n\tcreate = opts.create;\n\tcomparator = opts.comparator;\n\t\n\t\n\t// obviously there is a severe penalty for requesting get with a path lead\n\t// by unnecessary relative notation...\n\tif (path[0] == '.') path = path.replace(/^\\.+/, '');\n\t\n\t// here's where we check to make sure we have a truthy string-ish\n\tif (!path) return next;\n\t\n\tparts = path.split('.');\n\tpart = parts.shift();\n\t\n\tdo {\n\t\t\n\t\tif (!parts.length) was = next.get && next.get !== getPath? next.get(part): next[part];\n\t\telse {\n\t\t\t// this allows us to ensure that if we're setting a static property of a constructor we have the\n\t\t\t// correct constructor\n\t\t\t// @TODO: It seems ludicrous to have to check this on every single part of a chain; if we didn't have\n\t\t\t// deferred constructors this wouldn't be necessary and is expensive - unnecessarily so when speed is so important\n\t\t\tif (next !== base && next.set && next.set !== setPath) {\n\t\t\t\tparts.unshift(part);\n\t\t\t\tnext.set(parts.join('.'), is, opts);\n\t\t\t\treturn base;\n\t\t\t}\n\t\t\tif (next !== base && next.get) next = (next.get !== getPath? next.get(part): next[part]) || (create && (next[part] = {}));\n\t\t\telse next = next[part] || (create && (next[part] = {}));\n\t\t}\n\t\t\n\t} while (next && parts.length && (part = parts.shift()));\n\t\n\tif (!next) return base;\n\t\n\t// now update to the new value\n\tif (next !== base && next.set && next.set !== setPath) {\n\t\tnext.set(part, is, opts);\n\t\treturn base;\n\t} else next[part] = is;\n\t\n\t// if possible we notify the changes but this change is notified from the immediate\n\t// parent not the root object (could be the same)\n\tif (next.notify && !silent && (force || was !== is || (comparator && comparator(was, is)))) next.notify(part, was, is, opts);\n\t// we will always return the original root-object of the call\n\treturn base;\n};\n\n/**\n* @private\n*/\nsetPath.fast = function (path, value) {\n\t// the current context\n\tvar b = this,\n\t\t// the previous value and helper variable\n\t\trv, fn;\n\t// we have to check and ensure that we're not setting a computed property\n\t// and if we are, do nothing\n\tif (b._computed && b._computed[path] !== undefined) {\n\t\treturn b;\n\t}\n\tif (b._getters && (fn=b._getters[path])) {\n\t\trv = b[fn]();\n\t} else {\n\t\trv = b[path];\n\t}\n\t// set the new value now that we can\n\tb[path] = value;\n\t\n\t// this method is only ever called from the context of enyo objects\n\t// as a protected method\n\tif (rv !== value) { b.notifyObservers(path, rv, value); }\n\t// return the context\n\treturn b;\n};\n\n// ----------------------------------\n// String Functions\n// ----------------------------------\n\n/**\n* Uppercases a given string. Will coerce to a [String]{@glossary String}\n* if possible/necessary.\n*\n* @param {String} str - The string to uppercase.\n* @returns {String} The uppercased string.\n* @public\n*/\nexports.toUpperCase = function (str) {\n\tif (str != null) {\n\t\treturn str.toString().toUpperCase();\n\t}\n\treturn str;\n};\n\n/**\n* Lowercases a given string. Will coerce to a [String]{@glossary String}\n* if possible/necessary.\n*\n* @param {String} str - The string to lowercase.\n* @returns {String} The lowercased string.\n* @public\n*/\nexports.toLowerCase = function (str) {\n\tif (str != null) {\n\t\treturn str.toString().toLowerCase();\n\t}\n\treturn str;\n};\n\n/**\n* Capitalizes a given string.\n*\n* @param {String} str - The string to capitalize.\n* @returns {String} The capitalized string.\n* @public\n*/\nexports.cap = function (str) {\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\n};\n\n/**\n* Un-capitalizes a given string.\n* \n* @param {String} str - The string to un-capitalize.\n* @returns {String} The un-capitalized string.\n* @public\n*/\nexports.uncap = function (str) {\n\treturn str.slice(0, 1).toLowerCase() + str.slice(1);\n};\n\n/**\n* Injects an arbitrary number of values, in order, into a template string at\n* positions marked by `\"%.\"`.\n*\n* @param {String} template - The string template to inject with values.\n* @param {...String} val The values to inject into the template.\n* @returns {String} A copy of the template populated with values.\n* @public\n*/\nexports.format = function (template) {\n\tvar pattern = /\\%./g,\n\t\targ = 0,\n\t\ttmp = template,\n\t\targs = arguments,\n\t\treplacer;\n\t\n\treplacer = function () {\n\t\treturn args[++arg];\n\t};\n\t\n\treturn tmp.replace(pattern, replacer);\n};\n\n/**\n* @private\n*/\nString.prototype.trim = String.prototype.trim || function () {\n\treturn this.replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n* Takes a string and trims leading and trailing spaces. Strings with no length,\n* non-strings, and falsy values will be returned without modification.\n*\n* @param {String} str - The string from which to remove whitespace.\n* @returns {String} The trimmed string.\n* @public\n*/\nexports.trim = function (str) {\n\treturn (typeof str == 'string' && str.trim()) || str;\n};\n\n// ----------------------------------\n// Object Functions\n// ----------------------------------\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Object.create()]{@glossary Object.create}.\n*/\nObject.create = Object.create || (function () {\n\tvar Anon = function () {};\n\treturn function (obj) {\n\t\t// in the polyfill we can't support the additional features so we are ignoring\n\t\t// the extra parameters\n\t\tif (!obj || obj === null || typeof obj != 'object') throw 'Object.create: Invalid parameter';\n\t\tAnon.prototype = obj;\n\t\treturn new Anon();\n\t};\n})();\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Object.keys()]{@glossary Object.keys}.\n*/\nObject.keys = Object.keys || function (obj) {\n\tvar results = [];\n\tvar hop = Object.prototype.hasOwnProperty;\n\tfor (var prop in obj) {\n\t\tif (hop.call(obj, prop)) {\n\t\t\tresults.push(prop);\n\t\t}\n\t}\n\t// *sigh* IE 8\n\tif (!({toString: null}).propertyIsEnumerable('toString')) {\n\t\tvar dontEnums = [\n\t\t\t'toString',\n\t\t\t'toLocaleString',\n\t\t\t'valueOf',\n\t\t\t'hasOwnProperty',\n\t\t\t'isPrototypeOf',\n\t\t\t'propertyIsEnumerable',\n\t\t\t'constructor'\n\t\t];\n\t\tfor (var i = 0, p; (p = dontEnums[i]); i++) {\n\t\t\tif (hop.call(obj, p)) {\n\t\t\t\tresults.push(p);\n\t\t\t}\n\t\t}\n\t}\n\treturn results;\n};\n\n/**\n* Returns an array of all known enumerable properties found on a given object.\n*\n* @alias Object.keys.\n* @method enyo.keys\n* @public\n*/\nexports.keys = Object.keys;\n\n/**\n* Convenience method that takes an [array]{@glossary Array} of properties\n* and an [object]{@glossary Object} as parameters. Returns a new object\n* with only those properties named in the array that are found to exist on the\n* base object. If the third parameter is `true`, falsy values will be ignored.\n*\n* @param {String[]} properties The properties to include on the returned object.\n* @param {Object} object - The object from which to retrieve values for the requested properties.\n* @param {Boolean} [ignore=false] Whether or not to ignore copying falsy values.\n* @returns {Object} A new object populated with the requested properties and values from\n*                     the given object.\n* @public\n*/\nexports.only = function (properties, object, ignore) {\n\tvar ret = {},\n\t\tprop,\n\t\tlen,\n\t\ti;\n\t\n\tfor (i = 0, len = properties.length >>> 0; i < len; ++i) {\n\t\tprop = properties[i];\n\t\t\n\t\tif (ignore && (object[prop] === undefined || object[prop] === null)) continue;\n\t\tret[prop] = object[prop];\n\t}\n\t\n\treturn ret;\n};\n\n/**\n* Convenience method that takes two [objects]{@glossary Object} as parameters.\n* For each key from the first object, if the key also exists in the second object,\n* a mapping of the key from the first object to the key from the second object is\n* added to a result object, which is eventually returned. In other words, the\n* returned object maps the named properties of the first object to the named\n* properties of the second object. The optional third parameter is a boolean\n* designating whether to pass unknown key/value pairs through to the new object.\n* If `true`, those keys will exist on the returned object.\n*\n* @param {Object} map - The object with key/value pairs.\n* @param {Object} obj - The object whose values will be used.\n* @param {Boolean} [pass=false] Whether or not to pass unnamed properties through\n*                               from the given object.\n* @returns {Object} A new object whose properties have been mapped.\n* @public\n*/\nexports.remap = function (map, obj, pass) {\n\tvar ret = pass ? clone(obj) : {},\n\t\tkey;\n\t\n\tfor (key in map) {\n\t\tif (key in obj) ret[map[key]] = obj.get ? obj.get(key) : obj[key];\n\t}\n\treturn ret;\n};\n\n/**\n* Helper method that accepts an [array]{@glossary Array} of\n* [objects]{@glossary Object} and returns a hash of those objects indexed\n* by the specified `property`. If a `filter` is provided, the filter should\n* accept four parameters: the key, the value (object), the current mutable map\n* reference, and an immutable copy of the original array of objects for\n* comparison.\n*\n* @param {String} property - The property to index the array by.\n* @param {Array} array - An array of property objects.\n* @param {Function} [filter] - The filter function to use; accepts four arguments.\n* @returns {Object} A hash (object) indexed by the `property` argument\n* @public\n*/\nexports.indexBy = function (property, array, filter) {\n\t// the return value - indexed map from the given array\n\tvar map = {},\n\t\tvalue,\n\t\tlen,\n\t\tidx = 0;\n\t// sanity check for the array with an efficient native array check\n\tif (!exists(array) || !(array instanceof Array)) {\n\t\treturn map;\n\t}\n\t// sanity check the property as a string\n\tif (!exists(property) || 'string' !== typeof property) {\n\t\treturn map;\n\t}\n\t// the immutable copy of the array\n\tvar copy = clone(array);\n\t// test to see if filter actually exsits\n\tfilter = exists(filter) && 'function' === typeof filter ? filter : undefined;\n\tfor (len = array.length; idx < len; ++idx) {\n\t\t// grab the value from the array\n\t\tvalue = array[idx];\n\t\t// make sure that it exists and has the requested property at all\n\t\tif (exists(value) && exists(value[property])) {\n\t\t\tif (filter) {\n\t\t\t\t// if there was a filter use it - it is responsible for\n\t\t\t\t// updating the map accordingly\n\t\t\t\tfilter(property, value, map, copy);\n\t\t\t} else {\n\t\t\t\t// use the default behavior - check to see if the key\n\t\t\t\t// already exists on the map it will be overwritten\n\t\t\t\tmap[value[property]] = value;\n\t\t\t}\n\t\t}\n\t}\n\t// go ahead and return our modified map\n\treturn map;\n};\n\n/**\n* Creates and returns a shallow copy of an [Object]{@glossary Object} or an\n* [Array]{@glossary Array}. For objects, by default, properties will be scanned and\n* copied directly to the clone such that they would pass the\n* [hasOwnProperty()]{@glossary Object.hasOwnProperty} test. This is expensive and often not\n* required. In this case, the optional second parameter may be used to allow a more efficient\n* [copy]{@link Object.create} to be made.\n* \n* @param {(Object|Array)} base - The [Object]{@glossary Object} or\n*                              [Array]{@glossary Array} to be cloned.\n* @param {Boolean} [quick] - If `true`, when cloning objects, a faster [copy]{@link Object.create}\n*                          method will be used. This parameter has no meaning when cloning arrays.\n* @returns {*} A clone of the provided `base` if `base` is of the correct type; otherwise,\n*              returns `base` as it was passed in.\n* @public\n*/\nvar clone = exports.clone = function (base, quick) {\n\tif (base) {\n\t\t\n\t\t// avoid the overhead of calling yet another internal function to do type-checking\n\t\t// just copy the array and be done with it\n\t\tif (base instanceof Array) return base.slice();\n\t\telse if (base instanceof Object) {\n\t\t\treturn quick ? Object.create(base) : mixin({}, base);\n\t\t}\n\t}\n\t\n\t// we will only do this if it is not an array or native object\n\treturn base;\n};\n\nvar empty = {};\nvar mixinDefaults = {\n\texists: false,\n\tignore: false,\n\tfilter: null\n};\n\n/**\n\t@todo Rewrite with appropriate documentation for options parameter (typedef)\n\t@todo document 'quick' option\n\n\tWill take a variety of options to ultimately mix a set of properties\n\tfrom objects into single object. All configurations accept a boolean as\n\tthe final parameter to indicate whether or not to ignore _truthy_/_existing_\n\tvalues on any _objects_ prior.\n\n\tIf _target_ exists and is an object, it will be the base for all properties\n\tand the returned value. If the parameter is used but is _falsy_, a new\n\tobject will be created and returned. If no such parameter exists, the first\n\tparameter must be an array of objects and a new object will be created as\n\tthe _target_.\n\n\tThe _source_ parameter may be an object or an array of objects. If no\n\t_target_ parameter is provided, _source_ must be an array of objects.\n\n\tThe _options_ parameter allows you to set the _ignore_ and/or _exists_ flags\n\tsuch that if _ignore_ is true, it will not override any truthy values in the\n\ttarget, and if _exists_ is true, it will only use truthy values from any of\n\tthe sources. You may optionally add a _filter_ method-option that returns a\n\ttrue or false value to indicate whether the value should be used. It receives\n\tparameters in this order: _property_, _source value_, _source values_,\n\t_target_, _options_. Note that modifying the target in the filter method can\n\thave unexpected results.\n\n\tSetting _options_ to true will set all options to true.\n\n* @method enyo.mixin\n* @public\n*/\nvar mixin = exports.mixin = function () {\n\tvar ret = arguments[0],\n\t\tsrc = arguments[1],\n\t\topts = arguments[2],\n\t\tval;\n\t\n\tif (!ret) ret = {};\n\telse if (ret instanceof Array) {\n\t\topts = src;\n\t\tsrc = ret;\n\t\tret = {};\n\t}\n\t\n\tif (!opts || opts === true) opts = mixinDefaults;\n\n\tif (src instanceof Array) for (var i=0, it; (it=src[i]); ++i) mixin(ret, it, opts);\n\telse {\n\t\tfor (var key in src) {\n\t\t\tval = src[key];\n\t\t\t\n\t\t\t// quickly ensure the property isn't a default\n\t\t\tif (empty[key] !== val) {\n\t\t\t\tif (\n\t\t\t\t\t(!opts.exists || val) &&\n\t\t\t\t\t(!opts.ignore || !ret[key]) &&\n\t\t\t\t\t(opts.filter? opts.filter(key, val, src, ret, opts): true)\n\t\t\t\t) {\n\t\t\t\t\tret[key] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn ret;\n};\n\n/**\n* Returns an [array]{@glossary Array} of the values of all properties in an\n* [object]{@glossary Object}.\n*\n* @param {Object} obj - The [Object]{@glossary Object} to read the values from.\n* @returns {Array} An [array]{@glossary Array} with the values from the `obj`.\n* @public\n*/\nexports.values = function (obj) {\n\tvar ret = [];\n\tfor (var key in obj) {\n\t\tif (obj.hasOwnProperty(key)) ret.push(obj[key]);\n\t}\n\treturn ret;\n};\n\n// ----------------------------------\n// Array Functions\n// ----------------------------------\n\n/**\n* Because our older API parameters are not consistent with other array API methods, and also\n* because only [IE8 lacks integrated support]{@glossary polyfill} for\n* [indexOf()]{@linkcode external:Array.indexOf}, we ensure it is defined (only IE8) and advise,\n* moving forward, that the built-in method be used. But to preserve our original API, it will\n* simply call this method, knowing it exists.\n*\n* @private\n*/\nArray.prototype.indexOf = Array.prototype.indexOf || function (el, offset) {\n\tvar len = this.length >>> 0;\n\t\n\toffset = +offset || 0;\n\t\n\tif (Math.abs(offset) === Infinity) offset = 0;\n\tif (offset < 0) offset += len;\n\tif (offset < 0) offset = 0;\n\t\n\tfor (; offset < len; ++offset) {\n\t\tif (this[offset] === el) return offset;\n\t}\n\t\n\treturn -1;\n};\n\n/**\n* Because our older API parameters are not consistent with other array API methods, and also\n* because only [IE8 lacks integrated support]{@glossary polyfill} for\n* [lastIndexOf()]{@glossary Array.lastIndexOf} we ensure it is defined (only IE8) and\n* advise, moving forward, that the built-in method be used. But to preserve our original API, it\n* will simply call this method, knowing it exists.\n*\n* @private\n*/\nArray.prototype.lastIndexOf = Array.prototype.lastIndexOf || function (el, offset) {\n\tvar array = Object(this)\n\t\t, len = array.length >>> 0;\n\t\t\n\tif (len === 0) return -1;\n\t\n\tif (offset !== undefined) {\n\t\toffset = Number(offset);\n\t\tif (Math.abs(offset) > len) offset = len;\n\t\tif (offset === Infinity || offset === -Infinity) offset = len;\n\t\tif (offset < 0) offset += len;\n\t} else offset = len;\n\t\n\tfor (; offset > -1; --offset) {\n\t\tif (array[offset] === el) return offset;\n\t}\n\t\n\treturn -1;\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.findIndex()]{@glossary Array.findIndex}.\n*/\nArray.prototype.findIndex = Array.prototype.findIndex || function (fn, ctx) {\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\n\t\tif (fn.call(ctx, this[i], i, this)) return i;\n\t}\n\treturn -1;\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.find()]{@glossary Array.find}.\n*/\nArray.prototype.find = Array.prototype.find || function (fn, ctx) {\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\n\t\tif (fn.call(ctx, this[i], i, this)) return this[i];\n\t}\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.forEach()]{@glossary Array.forEach}.\n*/\nArray.prototype.forEach = Array.prototype.forEach || function (fn, ctx) {\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) fn.call(ctx, this[i], this);\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.map()]{@glossary Array.map}.\n*/\nArray.prototype.map = Array.prototype.map || function (fn, ctx) {\n\tvar ret = [];\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\n\t\tret.push(fn.call(ctx, this[i], i, this));\n\t}\n\treturn ret;\n};\n\n/**\n* A [polyfill]{@glossary polyfill} for platforms that don't support\n* [Array.filter()]{@glossary Array.filter}.\n*/\nArray.prototype.filter = Array.prototype.filter || function (fn, ctx) {\n\tvar ret = [];\n\tfor (var i=0, len=this.length >>> 0; i<len; ++i) {\n\t\tfn.call(ctx, this[i], i, this) && ret.push(this[i]);\n\t}\n\treturn ret;\n};\n\n/**\n* An Enyo convenience method reference to [Array.indexOf()]{@glossary Array.indexOf}.\n* \n* This also supports the legacy Enyo argument order `el.indexOf(array, offset)` and can\n* differentiate between this and the standard `array.indexOf(el, offset)`.\n*\n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n*\n* @public\n*/\nexports.indexOf = function (array, el, offset) {\n\tif (!(array instanceof Array)) return el.indexOf(array, offset);\n\treturn array.indexOf(el, offset);\n};\n\n/**\n* An Enyo convenience method reference to [Array.lastIndexOf()]{@glossary Array.lastIndexOf}.\n* \n* This also supports the legacy Enyo argument order `el.lastIndexOf(array, offset)` and can\n* differentiate between this and the standard `array.lastIndexOf(el, offset)`.\n*\n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n*\n* @public\n*/\nexports.lastIndexOf = function (array, el, offset) {\n\tif (!(array instanceof Array)) return el.lastIndexOf(array, offset);\n\treturn array.lastIndexOf(el, offset);\n};\n\n/**\n* An Enyo convenience method reference to [Array.findIndex()]{@glossary Array.findIndex}.\n* \n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n* \n* @public\n*/\nexports.findIndex = function (array, fn, ctx) {\n\treturn array.findIndex(fn, ctx);\n};\n\n/**\n* An Enyo convenience method reference to [Array.find()]{@glossary Array.find}.\n* \n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n* \n* @method enyo.find\n* @public\n*/\nvar find = exports.find = function (array, fn, ctx) {\n\treturn array.find(fn, ctx);\n};\n\n/**\n* @alias enyo.find\n* @method enyo.where\n* @public\n*/\nexports.where = find;\n\n/**\n* An Enyo convenience method reference to [Array.forEach()]{@glossary Array.forEach}.\n* \n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n* \n* @public\n*/\nexports.forEach = function (array, fn, ctx) {\n\treturn array.forEach(fn, ctx);\n};\n\n/**\n* An Enyo convenience method reference to [Array.map()]{@glossary Array.map}.\n*\n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n*\n* @public\n*/\nexports.map = function (array, fn, ctx) {\n\treturn array.map(fn, ctx);\n};\n\n/**\n* An Enyo convenience method reference to [Array.filter()]{@glossary Array.filter}.\n*\n* **When possible, you should use the native equivalent.**\n* \n* This method supports the same arguments as the native version, plus an extra argument at the\n* beginning referring to the [array]{@glossary Array} to run this method on.\n*\n* @public\n*/\nexports.filter = function (array, fn, ctx) {\n\treturn array.filter(fn, ctx);\n};\n\n/**\n* When given an [array]{@glossary Array} of [objects]{@glossary Object},\n* searches through the array's objects; each object with a property name matching\n* `prop` has its value for that property compiled into a result array, which is\n* eventually returned. For each array object that doesn't have a matching property,\n* an `undefined` placeholder element is added to the result array, such that the\n* returned result array has the same length as the passed-in `array` parameter.\n* \n* @param {Array} array - The [array]{@glossary Array} of [objects]{@glossary Object}\n*                      in which the `prop` will be searched for.\n* @param {String} prop - A string containing the name of the property to search for.\n* @returns {Array} An array of all the values of the named property from\n*                     objects contained in the `array`.\n* @public\n*/\nexports.pluck = function (array, prop) {\n\tif (!(array instanceof Array)) {\n\t\tvar tmp = array;\n\t\tarray = prop;\n\t\tprop = tmp;\n\t}\n\t\n\tvar ret = [];\n\tfor (var i=0, len=array.length >>> 0; i<len; ++i) {\n\t\tret.push(array[i]? array[i][prop]: undefined);\n\t}\n\treturn ret;\n};\n\n/**\n* Concatenates a variable number of [arrays]{@glossary Array}, removing any duplicate\n* entries.\n* \n* @returns {Array} The unique values from all [arrays]{@glossary Array}.\n* @public\n*/\nexports.merge = function (/* _arrays_ */) {\n\tvar ret = [],\n\t\tvalues = Array.prototype.concat.apply([], arguments);\n\tfor (var i=0, len=values.length >>> 0; i<len; ++i) {\n\t\tif (!~ret.indexOf(values[i])) ret.push(values[i]);\n\t}\n\treturn ret;\n};\n\n/**\n* Clones an existing [Array]{@glossary Array}, or converts an array-like\n* object into an Array.\n* \n* If `offset` is non-zero, the cloning starts from that index in the source\n* Array. The clone may be appended to an existing Array by passing in the\n* existing Array as `initialArray`.\n* \n* Array-like objects have `length` properties, and support square-bracket\n* notation `([])`. Array-like objects often do not support Array methods\n* such as `push()` or `concat()`, and so must be converted to Arrays before\n* use.\n* \n* The special `arguments` variable is an example of an array-like object.\n*\n* @public\n*/\nvar cloneArray = exports.cloneArray = function (array, offset, initialArray) {\n\tvar ret = initialArray || [];\n\tfor(var i = offset || 0, l = array.length; i<l; i++){\n\t\tret.push(array[i]);\n\t}\n\t// Alternate smarter implementation:\n\t// return Array.prototype.slice.call(array, offset);\n\t// Array.of\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of\n\treturn ret;\n};\n\n/**\n* @alias cloneArray\n* @method enyo.toArray\n* @public\n*/\nexports.toArray = cloneArray;\n\n/**\n* Within a given [array]{@glossary Array}, removes the first\n* [strictly equal to]{@glossary ===} occurrence of `el`.\n* Note that `array` is modified directly.\n*\n* @param {Array} array - The [Array]{@glossary Array} to look through.\n* @param {*} el - The element to search for and remove.\n* @public\n*/\nexports.remove = function (array, el) {\n\tif (!(array instanceof Array)) {\n\t\tvar tmp = array;\n\t\tarray = el;\n\t\tel = tmp;\n\t}\n\t\n\tvar i = array.indexOf(el);\n\tif (-1 < i) array.splice(i, 1);\n\treturn array;\n};\n\n/**\n* This regex pattern is used by the [enyo.isRtl()]{@link enyo.isRtl} function.\n* \n* Arabic: \\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFE\n* Hebrew: \\u0590-\\u05FF\\uFB1D-\\uFB4F\n* \n* @private\n*/\nvar rtlPattern = /[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFE\\u0590-\\u05FF\\uFB1D-\\uFB4F]/;\n\n/**\n* Takes content `str` and determines whether or not it is [RTL]{@glossary RTL}.\n*\n* @param {String} str - A [String]{@glossary String} to check the [RTL]{@glossary RTL}-ness of.\n* @return {Boolean} `true` if `str` should be RTL; `false` if not.\n* @public\n*/\nexports.isRtl = function (str) {\n\treturn rtlPattern.test(str);\n};\n","require('../../enyo');\n\nvar\n\tStates = require('./States');\n\n/**\n* Provides generic API methods related to using {@link enyo.States}.\n*\n* @mixin enyo.StateSupport\n* @public\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'StateSupport',\n\t\n\t/**\n\t* The given status. This property will be modified by the other API methods of\n\t* {@link enyo.StateSupport}.\n\t*\n\t* @type enyo.States\n\t* @default null\n\t*/\n\tstatus: null,\n\t\n\t/**\n\t* Will remove any [error flags]{@link enyo.States.ERROR} from the given\n\t* [status]{@link enyo.StateSupport.status}.\n\t*\n\t* @public\n\t*/\n\tclearError: function () {\n\t\tthis.status = this.status & ~States.ERROR;\n\t},\n\t\n\t/**\n\t* Convenience method to avoid using [bitwise]{@glossary bitwise} comparison for the\n\t* [status]{@link enyo.StateSupport.status}. Determines whether the current status\n\t* (or the optional passed-in value) is an [error state]{@link enyo.States.ERROR}.\n\t* The passed-in value will only be used if it is a [Number]{@glossary Number}.\n\t*\n\t* @param {enyo.States} [status] - The specific value to compare as an\n\t*\t[error state]{@link enyo.States.ERROR}.\n\t* @returns {Boolean} Whether the value is an [error state]{@link enyo.States.ERROR} or not.\n\t* @public\n\t*/\n\tisError: function (status) {\n\t\treturn !! ((isNaN(status) ? this.status : status) & States.ERROR);\n\t},\n\t\n\t/**\n\t* Convenience method to avoid using [bitwise]{@glossary bitwise} comparison for the\n\t* [status]{@link enyo.StateSupport.status}. Determines whether the current status\n\t* (or the optional passed-in value) is a [busy state]{@link enyo.States.BUSY}. The\n\t* passed-in value will only be used if it is a [Number]{@glossary Number}.\n\t*\n\t* @param {enyo.States} [status] - The specific value to compare as a\n\t*\t[busy state]{@link enyo.States.BUSY}.\n\t* @returns {Boolean} Whether the value is a [busy state]{@link enyo.States.BUSY} or not.\n\t* @public\n\t*/\n\tisBusy: function (status) {\n\t\treturn !! ((isNaN(status) ? this.status : status) & States.BUSY);\n\t},\n\t\n\t/**\n\t* Convenience method to avoid using [bitwise]{@glossary bitwise} comparison for the\n\t* [status]{@link enyo.StateSupport.status}. Determines whether the current status\n\t* (or the optional passed-in value) is a [ready state]{@link enyo.States.READY}. The\n\t* passed-in value will only be used if it is a [Number]{@glossary Number}.\n\t*\n\t* @param {enyo.States} [status] - The specific value to compare as a\n\t*\t[ready state]{@link enyo.States.READY}.\n\t* @returns {Boolean} Whether the value is a [ready state]{@link enyo.States.BUSY} or not.\n\t* @public\n\t*/\n\tisReady: function (status) {\n\t\treturn !! ((isNaN(status) ? this.status : status) & States.READY);\n\t}\n};","require('../../enyo');\n\nvar\n\tutils = require('./utils');\n\nvar\n\teventTable = {};\n\n/**\n* @private\n*/\nfunction addListener(obj, e, fn, ctx) {\n\n\tobj.listeners().push({\n\t\tevent: e,\n\t\tmethod: fn,\n\t\tctx: ctx || obj\n\t});\n\t\n\treturn obj;\n}\n\n/**\n* @private\n*/\nfunction removeListener(obj, e, fn, ctx) {\n\tvar listeners = obj.listeners()\n\t\t, idx;\n\t\t\n\tif (listeners.length) {\n\t\tidx = listeners.findIndex(function (ln) {\n\t\t\treturn ln.event == e && ln.method === fn && (ctx? ln.ctx === ctx: true);\n\t\t});\n\t\tidx >= 0 && listeners.splice(idx, 1);\n\t}\n\t\n\treturn obj;\n}\n\n/**\n* @private\n*/\nfunction emit(obj, args) {\n\tvar len = args.length\n\t\t, e = args[0]\n\t\t, listeners = obj.listeners(e);\n\t\t\n\tif (listeners.length) {\n\t\tif (len > 1) {\n\t\t\targs = utils.toArray(args);\n\t\t\targs.unshift(obj);\n\t\t} else {\n\t\t\targs = [obj, e];\n\t\t}\n\n\t\tfor (var i=0, ln; (ln=listeners[i]); ++i) ln.method.apply(ln.ctx, args);\n\t\t\n\t\treturn true;\n\t}\n\t\n\treturn false;\n}\n\n/**\n* {@link enyo.EventEmitter} is a {@glossary mixin} that adds support for\n* registered {@glossary event} listeners. These events are different from\n* bubbled events (e.g., DOM events and [handlers]{@link enyo.Component#handlers}).\n* When [emitted]{@link enyo.EventEmitter#emit}, these events **do not bubble**\n* and will only be handled by [registered listeners]{@link enyo.EventEmitter#on}.\n*\n* @mixin enyo.EventEmitter\n* @public\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'EventEmitter',\n\t\n\t/**\n\t* @private\n\t*/\n\t_silenced: false,\n\t\n\t/**\n\t* @private\n\t*/\n\t_silenceCount: 0,\n\t\n\t/**\n\t* Disables propagation of [events]{@glossary event}. This is a counting\n\t* semaphor and [unsilence()]{@link enyo.EventEmitter#unsilence} will need to\n\t* be called the same number of times that this method is called.\n\t*\n\t* @see enyo.EventEmitter.unsilence\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsilence: function () {\n\t\tthis._silenced = true;\n\t\tthis._silenceCount++;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Enables propagation of [events]{@glossary event}. This is a counting\n\t* semaphor and this method will need to be called the same number of times\n\t* that [silence()]{@link enyo.EventEmitter#silence} was called.\n\t*\n\t* @see enyo.EventEmitter.silence\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tunsilence: function (force) {\n\t\tif (force) {\n\t\t\tthis._silenceCount = 0;\n\t\t\tthis._silenced = false;\n\t\t} else {\n\t\t\tthis._silenceCount && this._silenceCount--;\n\t\t\tthis._silenceCount === 0 && (this._silenced = false);\n\t\t}\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Determines whether the callee is currently [silenced]{@link enyo.EventEmitter#silence}.\n\t*\n\t* @returns {Boolean} Whether or not the callee is\n\t*\t[silenced]{@link enyo.EventEmitter.silence}.\n\t* @public\n\t*/\n\tisSilenced: function () {\n\t\treturn this._silenced;\n\t},\n\t\n\t/**\n\t* @alias enyo.EventEmitter.on\n\t* @deprecated\n\t* @public\n\t*/\n\taddListener: function (e, fn, ctx) {\n\t\treturn addListener(this, e, fn, ctx);\n\t},\n\t\n\t/**\n\t* Adds an {@glossary event} listener. Until [removed]{@link enyo.EventEmitter#off},\n\t* this listener will fire every time the event is\n\t* [emitted]{@link enyo.EventEmitter#emit}.\n\t*\n\t* @param {String} e - The {@glossary event} name to register for.\n\t* @param {Function} fn - The listener.\n\t* @param {Object} [ctx] - The optional context under which to execute the listener.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\ton: function (e, fn, ctx) {\n\t\treturn addListener(this, e, fn, ctx);\n\t},\n\t\n\t/**\n\t* @alias enyo.EventEmitter.off\n\t* @deprecated\n\t* @public\n\t*/\n\tremoveListener: function (e, fn, ctx) {\n\t\treturn removeListener(this, e, fn, ctx);\n\t},\n\t\n\t/**\n\t* Removes an {@glossary event} listener.\n\t*\n\t* @param {String} e - The {@glossary event} name.\n\t* @param {Function} fn - The listener to unregister.\n\t* @param {Object} [ctx] - If the listener was registered with a context, it\n\t* should be provided when unregistering as well.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\toff: function (e, fn, ctx) {\n\t\treturn removeListener(this, e, fn, ctx);\n\t},\n\t\n\t/**\n\t* Removes all listeners, or all listeners for a given {@glossary event}.\n\t*\n\t* @param {String} [e] - The optional target {@glossary event}.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tremoveAllListeners: function (e) {\n\t\tvar euid = this.euid\n\t\t\t, loc = euid && eventTable[euid];\n\t\t\n\t\tif (loc) {\n\t\t\tif (e) {\n\t\t\t\teventTable[euid] = loc.filter(function (ln) {\n\t\t\t\t\treturn ln.event != e;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\teventTable[euid] = null;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Primarily intended for internal use, this method returns an immutable copy\n\t* of all listeners, or all listeners for a particular {@glossary event} (if any).\n\t*\n\t* @param {String} [e] - The targeted {@glossary event}.\n\t* @returns {Object[]} Event listeners are stored in [hashes]{@glossary Object}.\n\t*\tThe return value will be an [array]{@glossary Array} of these hashes\n\t* if any listeners exist.\n\t* @public\n\t*/\n\tlisteners: function (e) {\n\t\tvar euid = this.euid || (this.euid = utils.uid('e'))\n\t\t\t, loc = eventTable[euid] || (eventTable[euid] = []);\n\t\t\n\t\treturn !e? loc: loc.filter(function (ln) {\n\t\t\treturn ln.event == e || ln.event == '*';\n\t\t});\n\t},\n\t\n\t/**\n\t* @alias enyo.EventEmitter.emit\n\t* @deprecated\n\t* @public\n\t*/\n\ttriggerEvent: function () {\n\t\treturn !this._silenced? emit(this, arguments): false;\n\t},\n\t\n\t/**\n\t* Emits the named {@glossary event}. All subsequent arguments will be passed\n\t* to the event listeners.\n\t*\n\t* @param {String} e - The {@glossary event} to emit.\n\t* @param {...*} args All subsequent arguments will be passed to the event listeners.\n\t* @returns {Boolean} Whether or not any listeners were notified.\n\t* @public\n\t*/\n\temit: function () {\n\t\treturn !this._silenced? emit(this, arguments): false;\n\t}\n};","require('../../enyo');\n\nvar\n\tutils = require('./utils');\n\n/**\n* An [XHR2]{@linkplain http://www.w3.org/TR/XMLHttpRequest/} FormData implementation.\n* It is used to send `multipart/form-data` [Ajax]{@glossary ajax} requests. The\n* internal `enyo.Blob` [kind]{@glossary kind} is the content provider for file-parts.\n*\n* Note that in Internet Explorer < 10, both {@link enyo.FormData} and `enyo.Blob` are\n* limited to [string]{@glossary String} content and `enyo.Blob` may only be\n* instantiated using an [array]{@glossary Array} or [string]{@glossary String}.\n*\n* This implementation is inspired by\n* [html5-formdata]{@linkplain https://github.com/francois2metz/html5-formdata/blob/master/formdata.js}.\n*\n* ```\n* Emulate FormData for some browsers\n* MIT License\n* (c) 2010 Francois de Metz\n* ```\n*\n* @class enyo.FormData\n* @public\n*/\nexports = null;\n\nif (typeof FormData != 'undefined') {\n\ttry {\n\t\tnew FormData();\n\t\t\n\t\texports = module.exports = FormData;\n\t// Android Chrome 18 will throw an error trying to create this\n\t} catch (e) {}\n}\n\nif (!exports) {\n\n\t/*jshint -W082 */\n\tfunction FormData() {\n\t\tthis.fake = true;\n\t\tthis._fields = [];\n\t\t// This generates a 50 character boundary similar to\n\t\t// those used by Firefox.  They are optimized for\n\t\t// boyer-moore parsing.\n\t\tthis.boundary = '--------------------------';\n\t\tfor (var i = 0; i < 24; i++) {\n\t\t\tthis.boundary += Math.floor(Math.random() * 10).toString(16);\n\t\t}\n\t}\n\tFormData.prototype.getContentType = function() {\n\t\treturn \"multipart/form-data; boundary=\" + this.boundary;\n\t};\n\tFormData.prototype.append = function(key, value, filename) {\n\t\tthis._fields.push([key, value, filename]);\n\t};\n\tFormData.prototype.toString = function() {\n\t\tvar boundary = this.boundary;\n\t\tvar body = \"\";\n\t\tutils.forEach(this._fields, function(field) {\n\t\t\tbody += \"--\" + boundary + \"\\r\\n\";\n\t\t\tif (field[2] || field[1].name) {\n\t\t\t\t// file upload\n\t\t\t\tvar file = field[1], filename = field[2] || file.name;\n\t\t\t\tbody += \"Content-Disposition: form-data; name=\\\"\"+ field[0] +\"\\\"; filename=\\\"\"+ filename +\"\\\"\\r\\n\";\n\t\t\t\tbody += \"Content-Type: \"+ file.type +\"\\r\\n\\r\\n\";\n\t\t\t\tbody += file.getAsBinary() + \"\\r\\n\";\n\t\t\t} else {\n\t\t\t\t// key-value field\n\t\t\t\tbody += \"Content-Disposition: form-data; name=\\\"\"+ field[0] +\"\\\";\\r\\n\\r\\n\";\n\t\t\t\tbody += field[1] + \"\\r\\n\";\n\t\t\t}\n\t\t});\n\t\tbody += \"--\" + boundary +\"--\";\n\t\treturn body;\n\t};\n\t/*jshint +W082 */\n\t\n\tmodule.exports = FormData;\n}","require('../../enyo');\n\nvar utils = require('./utils');\n\n/**\n* Determines OS versions of platforms that need special treatment. Can have one of the following\n* properties:\n*\n* * android\n* * androidChrome (Chrome on Android, standard starting in 4.1)\n* * androidFirefox\n* * ie\n* * ios\n* * webos\n* * windowsPhone\n* * blackberry\n* * tizen\n* * safari (desktop version)\n* * chrome (desktop version)\n* * firefox (desktop version)\n* * firefoxOS\n*\n* If the property is defined, its value will be the major version number of the platform.\n*\n* Example:\n* ```javascript\n* // android 2 does not have 3d css\n* if (enyo.platform.android < 3) {\n* \tt = 'translate(30px, 50px)';\n* } else {\n* \tt = 'translate3d(30px, 50px, 0)';\n* }\n* this.applyStyle('-webkit-transform', t);\n* ```\n*\n* @name enyo.platform\n*/\nexports = module.exports = \n\t/** @lends enyo.platform */ {\n\t//* `true` if the platform has native single-finger [events]{@glossary event}.\n\ttouch: Boolean(('ontouchstart' in window) || window.navigator.msMaxTouchPoints),\n\t//* `true` if the platform has native double-finger [events]{@glossary event}.\n\tgesture: Boolean(('ongesturestart' in window) || window.navigator.msMaxTouchPoints)\n};\n\n/**\n* @private\n*/\nvar ua = navigator.userAgent;\nvar ep = exports;\nvar platforms = [\n\t// Android 4+ using Chrome\n\t{platform: 'androidChrome', regex: /Android .* Chrome\\/(\\d+)[.\\d]+/},\n\t// Android 2 - 4\n\t{platform: 'android', regex: /Android (\\d+)/},\n\t// Kindle Fire\n\t// Force version to 2, (desktop mode does not list android version)\n\t{platform: 'android', regex: /Silk\\/1./, forceVersion: 2, extra: {silk: 1}},\n\t// Kindle Fire HD (Silk versions 2 or 3)\n\t// Force version to 4\n\t{platform: 'android', regex: /Silk\\/2./, forceVersion: 4, extra: {silk: 2}},\n\t{platform: 'android', regex: /Silk\\/3./, forceVersion: 4, extra: {silk: 3}},\n\t// Windows Phone 7 - 8\n\t{platform: 'windowsPhone', regex: /Windows Phone (?:OS )?(\\d+)[.\\d]+/},\n\t// IE 8 - 10\n\t{platform: 'ie', regex: /MSIE (\\d+)/},\n\t// IE 11\n\t{platform: 'ie', regex: /Trident\\/.*; rv:(\\d+)/},\n\t// iOS 3 - 5\n\t// Apple likes to make this complicated\n\t{platform: 'ios', regex: /iP(?:hone|ad;(?: U;)? CPU) OS (\\d+)/},\n\t// webOS 1 - 3\n\t{platform: 'webos', regex: /(?:web|hpw)OS\\/(\\d+)/},\n\t// webOS 4 / OpenWebOS\n\t{platform: 'webos', regex: /WebAppManager|Isis|webOS\\./, forceVersion: 4},\n\t// Open webOS release LuneOS\n\t{platform: 'webos', regex: /LuneOS/, forceVersion: 4, extra: {luneos: 1}},\n\t// desktop Safari\n\t{platform: 'safari', regex: /Version\\/(\\d+)[.\\d]+\\s+Safari/},\n\t// desktop Chrome\n\t{platform: 'chrome', regex: /Chrome\\/(\\d+)[.\\d]+/},\n\t// Firefox on Android\n\t{platform: 'androidFirefox', regex: /Android;.*Firefox\\/(\\d+)/},\n\t// FirefoxOS\n\t{platform: 'firefoxOS', regex: /Mobile;.*Firefox\\/(\\d+)/},\n\t// desktop Firefox\n\t{platform: 'firefox', regex: /Firefox\\/(\\d+)/},\n\t// Blackberry Playbook\n\t{platform: 'blackberry', regex: /PlayBook/i, forceVersion: 2},\n\t// Blackberry 10+\n\t{platform: 'blackberry', regex: /BB1\\d;.*Version\\/(\\d+\\.\\d+)/},\n\t// Tizen\n\t{platform: 'tizen', regex: /Tizen (\\d+)/}\n];\nfor (var i = 0, p, m, v; (p = platforms[i]); i++) {\n\tm = p.regex.exec(ua);\n\tif (m) {\n\t\tif (p.forceVersion) {\n\t\t\tv = p.forceVersion;\n\t\t} else {\n\t\t\tv = Number(m[1]);\n\t\t}\n\t\tep[p.platform] = v;\n\t\tif (p.extra) {\n\t\t\tutils.mixin(ep, p.extra);\n\t\t}\n\t\tep.platformName = p.platform;\n\t\tbreak;\n\t}\n}\n","require('../../enyo');\n\nvar\n\tplatform = require('./platform'),\n\tutils = require('./utils');\n\nvar ms = Math.round(1000/60);\nvar prefix = ['webkit', 'moz', 'ms', 'o', ''];\nvar r = 'requestAnimationFrame';\nvar c = 'cancel' + utils.cap(r);\n\n/*\n* Fallback on setTimeout\n*\n* @private\n*/\nvar _requestFrame = function(inCallback) {\n\treturn global.setTimeout(inCallback, ms);\n};\n\n/*\n* Fallback on clearTimeout\n*\n* @private\n*/\nvar _cancelFrame = function(inId) {\n\treturn global.clearTimeout(inId);\n};\n\nfor (var i = 0, pl = prefix.length, p, wc, wr; (p = prefix[i]) || i < pl; i++) {\n\t// if we're on ios 6 just use setTimeout, requestAnimationFrame has some kinks currently\n\tif (platform.ios >= 6) {\n\t\tbreak;\n\t}\n\n\t// if prefixed, becomes Request and Cancel\n\twc = p ? (p + utils.cap(c)) : c;\n\twr = p ? (p + utils.cap(r)) : r;\n\t// Test for cancelRequestAnimationFrame, because some browsers (Firefix 4-10) have a request without a cancel\n\tif (global[wc]) {\n\t\t_cancelFrame = global[wc];\n\t\t_requestFrame = global[wr];\n\t\tif (p == 'webkit') {\n\t\t\t/*\n\t\t\t\tNote: In Chrome, the first return value of webkitRequestAnimationFrame is 0.\n\t\t\t\tWe make 1 bogus call so the first used return value of webkitRequestAnimationFrame is > 0, as the spec requires.\n\t\t\t\tThis makes it so that the requestId is always truthy.\n\t\t\t\t(we choose to do this rather than wrapping the native function to avoid the overhead)\n\t\t\t*/\n\t\t\t_cancelFrame(_requestFrame(utils.nop));\n\t\t}\n\t\tbreak;\n\t}\n}\n/**\n* Requests an animation callback.\n*\n* On compatible browsers, if `node` is defined, the [callback]{@glossary callback} will\n* fire only if `node` is visible.\n*\n* @param {Function} callback - A [callback]{@glossary callback} to be executed on the\n*                            animation frame.\n* @param {Node} node - The DOM node to request the animation frame for.\n* @returns {Object} A request id to be used with\n*                     [enyo.cancelRequestAnimationFrame()]{@link enyo.cancelRequestAnimationFrame}.\n* @public\n*/\nexports.requestAnimationFrame = function(callback, node) {\n\treturn _requestFrame(callback, node);\n};\n/**\n* Cancels a requested animation callback with the specified id.\n*\n* @public\n*/\nexports.cancelRequestAnimationFrame = function(inId) {\n\treturn _cancelFrame(inId);\n};\n\n/**\n* A set of interpolation functions for animations, similar in function to CSS3\n* transitions.\n*\n* These are intended for use with {@link enyo.easedLerp}. Each easing function\n* accepts one (1) [Number]{@glossary Number} parameter and returns one (1)\n* [Number]{@glossary Number} value.\n*\n* @namespace enyo.easing\n* @public\n*/\nexports.easing = /** @lends enyo.easing */ {\n\t/**\n\t* cubicIn\n\t*\n\t* @public\n\t*/\n\tcubicIn: function(n) {\n\t\treturn Math.pow(n, 3);\n\t},\n\t/**\n\t* cubicOut\n\t*\n\t* @public\n\t*/\n\tcubicOut: function(n) {\n\t\treturn Math.pow(n - 1, 3) + 1;\n\t},\n\t/**\n\t* expoOut\n\t*\n\t* @public\n\t*/\n\texpoOut: function(n) {\n\t\treturn (n == 1) ? 1 : (-1 * Math.pow(2, -10 * n) + 1);\n\t},\n\t/**\n\t* quadInOut\n\t*\n\t* @public\n\t*/\n\tquadInOut: function(n) {\n\t\tn = n * 2;\n\t\tif (n < 1) {\n\t\t\treturn Math.pow(n, 2) / 2;\n\t\t}\n\t\treturn -1 * ((--n) * (n - 2) - 1) / 2;\n\t},\n\t/**\n\t* linear\n\t*\n\t* @public\n\t*/\n\tlinear: function(n) {\n\t\treturn n;\n\t}\n};\n\n/**\n* Gives an interpolation of an animated transition's distance from 0 to 1.\n*\n* Given a start time (`t0`) and an animation duration (`duration`), this\n* method applies the `easing` function to the percentage of time elapsed\n* divided by duration, capped at 100%.\n*\n* @param {Number} t0 - Start time.\n* @param {Number} duration - Duration in milliseconds.\n* @param {Function} easing - An easing [function]{@glossary Function} reference from\n*\t{@link enyo.easing}.\n* @param {Boolean} reverse - Whether the animation will run in reverse.\n* @returns {Number} The resulting position, capped at a maximum of 100%.\n* @public\n*/\nexports.easedLerp = function(t0, duration, easing, reverse) {\n\tvar lerp = (utils.perfNow() - t0) / duration;\n\tif (reverse) {\n\t\treturn lerp >= 1 ? 0 : (1 - easing(1 - lerp));\n\t} else {\n\t\treturn lerp >= 1 ? 1 : easing(lerp);\n\t}\n};\n\n/**\n* Gives an interpolation of an animated transition's distance from\n* `startValue` to `valueChange`.\n*\n* Applies the `easing` function with a wider range of variables to allow for\n* more complex animations.\n*\n* @param {Number} t0 - Start time.\n* @param {Number} duration - Duration in milliseconds.\n* @param {Function} easing - An easing [function]{@glossary Function} reference from\n*\t{@link enyo.easing}.\n* @param {Boolean} reverse - Whether the animation will run in reverse.\n* @param {Number} time\n* @param {Number} startValue - Starting value.\n* @param {Number} valueChange\n* @returns {Number} The resulting position, capped at a maximum of 100%.\n* @public\n*/\nexports.easedComplexLerp = function(t0, duration, easing, reverse, time, startValue, valueChange) {\n\tvar lerp = (utils.perfNow() - t0) / duration;\n\tif (reverse) {\n\t\treturn easing(1 - lerp, time, startValue, valueChange, duration);\n\t} else {\n\t\treturn easing(lerp, time, startValue, valueChange, duration);\n\t}\n};","require('../../enyo');\n\nvar\n\troots = require('./roots'),\n\tutils = require('./utils'),\n\tplatform = require('./platform');\n\n/**\n* @namespace enyo.dom\n*/\nvar dom = module.exports =\n\t/** @lends enyo.dom */ {\n\n\t/**\n\t* Shortcut for `document.getElementById()` if `id` is a string; otherwise,\n\t* returns `id`. Uses `global.document` unless a document is specified in the\n\t* (optional) `doc` parameter.\n\t*\n\t* ```javascript\n\t* // find 'node' if it's a string id, or return it unchanged if it's already a node reference\n\t* var domNode = enyo.dom.byId(node);\n\t* ```\n\t*\n\t* @param {String} id - The document element ID to get.\n\t* @param {Node} [doc] - A [node]{@glossary Node} to search in. Default is the whole\n\t*\tdocument.\n\t* @returns {Element} A reference to a DOM element.\n\t* @public\n\t*/\n\tbyId: function(id, doc){\n\t\treturn (typeof id == 'string') ? (doc || document).getElementById(id) : id;\n\t},\n\n\t/**\n\t* Returns a string with ampersand, less-than, and greater-than characters replaced with HTML\n\t* entities, e.g.,\n\t* ```\n\t* '&lt;code&gt;'This &amp; That'&lt;/code&gt;'\n\t* ```\n\t* becomes\n\t* ```\n\t* '&amp;lt;code&amp;gt;'This &amp;amp; That'&amp;lt;/code&amp;gt;'\n\t* ```\n\t*\n\t* @param {String} text - A string with entities you'd like to escape/convert.\n\t* @returns {String} A string that is properly escaped (the above characters.)\n\t* @public\n\t*/\n\tescape: function(text) {\n\t\treturn text !== null ? String(text).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;') : '';\n\t},\n\n\t/**\n\t* Returns an object describing the geometry of this node.\n\t*\n\t* @param {Node} n - The [node]{@glossary Node} to measure.\n\t* @returns {Object} An object containing the properties `top`, `left`,\n\t* `height`, and `width`.\n\t* @public\n\t*/\n\tgetBounds: function(n) {\n\t\tif (n) {\n\t\t\treturn {left: n.offsetLeft, top: n.offsetTop, width: n.offsetWidth, height: n.offsetHeight};\n\t\t}\n\t\telse {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t* This is designed to be copied into the `computedStyle` object.\n\t*\n\t* @private\n\t*/\n\t_ie8GetComputedStyle: function(prop) {\n\t\tvar re = /(\\-([a-z]){1})/g;\n\t\tif (prop === 'float') {\n\t\t\tprop = 'styleFloat';\n\t\t} else if (re.test(prop)) {\n\t\t\tprop = prop.replace(re, function () {\n\t\t\t\treturn arguments[2].toUpperCase();\n\t\t\t});\n\t\t}\n\t\treturn this[prop] !== undefined ? this[prop] : null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetComputedStyle: function(node) {\n\t\tif(platform.ie < 9 && node && node.currentStyle) {\n\t\t\t//simple global.getComputedStyle polyfill for IE8\n\t\t\tvar computedStyle = utils.clone(node.currentStyle);\n\t\t\tcomputedStyle.getPropertyValue = this._ie8GetComputedStyle;\n\t\t\tcomputedStyle.setProperty = function() {\n\t\t\t\treturn node.currentStyle.setExpression.apply(node.currentStyle, arguments);\n\t\t\t};\n\t\t\tcomputedStyle.removeProperty = function() {\n\t\t\t\treturn node.currentStyle.removeAttribute.apply(node.currentStyle, arguments);\n\t\t\t};\n\t\t\treturn computedStyle;\n\t\t} else {\n\t\t\treturn global.getComputedStyle && node && global.getComputedStyle(node, null);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetComputedStyleValue: function(node, property, computedStyle) {\n\t\tvar s   = computedStyle || this.getComputedStyle(node),\n\t\t\tnIE = platform.ie;\n\n\t\ts = s ? s.getPropertyValue(property) : null;\n\n\t\tif (nIE) {\n\t\t\tvar oConversion = {\n\t\t\t\t'thin'   : (nIE > 8 ? 2 : 1) + 'px',\n\t\t\t\t'medium' : (nIE > 8 ? 4 : 3) + 'px',\n\t\t\t\t'thick'  : (nIE > 8 ? 6 : 5) + 'px',\n\t\t\t\t'none'   : '0'\n\t\t\t};\n\t\t\tif (typeof oConversion[s] != 'undefined') {\n\t\t\t\ts = oConversion[s];\n\t\t\t}\n\n\t\t\tif (s == 'auto') {\n\t\t\t\tswitch (property) {\n\t\t\t\tcase 'width':\n\t\t\t\t\ts = node.offsetWidth;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'height':\n\t\t\t\t\ts = node.offsetHeight;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn s;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetFirstElementByTagName: function(tagName) {\n\t\tvar e = document.getElementsByTagName(tagName);\n\t\treturn e && e[0];\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tapplyBodyFit: function() {\n\t\tvar h = this.getFirstElementByTagName('html');\n\t\tif (h) {\n\t\t\tthis.addClass(h, 'enyo-document-fit');\n\t\t}\n\t\tdom.addBodyClass('enyo-body-fit');\n\t\tdom.bodyIsFitting = true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetWindowWidth: function() {\n\t\tif (global.innerWidth) {\n\t\t\treturn global.innerWidth;\n\t\t}\n\t\tif (document.body && document.body.offsetWidth) {\n\t\t\treturn document.body.offsetWidth;\n\t\t}\n\t\tif (document.compatMode=='CSS1Compat' &&\n\t\t\tdocument.documentElement &&\n\t\t\tdocument.documentElement.offsetWidth ) {\n\t\t\treturn document.documentElement.offsetWidth;\n\t\t}\n\t\treturn 320;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetWindowHeight: function() {\n\t\tif (global.innerHeight) {\n\t\t\treturn global.innerHeight;\n\t\t}\n\t\tif (document.body && document.body.offsetHeight) {\n\t\t\treturn document.body.offsetHeight;\n\t\t}\n\t\tif (document.compatMode=='CSS1Compat' &&\n\t\t\tdocument.documentElement &&\n\t\t\tdocument.documentElement.offsetHeight ) {\n\t\t\treturn document.documentElement.offsetHeight;\n\t\t}\n\t\treturn 480;\n\t},\n\n\t/**\n\t* The proportion by which the `body` tag differs from the global size, in both X and Y\n\t* dimensions. This is relevant when we need to scale the whole interface down from 1920x1080\n\t* (1080p) to 1280x720 (720p), for example.\n\t*\n\t* @private\n\t*/\n\t_bodyScaleFactorY: 1,\n\t_bodyScaleFactorX: 1,\n\tupdateScaleFactor: function() {\n\t\tvar bodyBounds = this.getBounds(document.body);\n\t\tthis._bodyScaleFactorY = bodyBounds.height / this.getWindowHeight();\n\t\tthis._bodyScaleFactorX = bodyBounds.width / this.getWindowWidth();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t// Workaround for lack of compareDocumentPosition support in IE8\n\t// Code MIT Licensed, John Resig; source: http://ejohn.org/blog/comparing-document-position/\n\tcompareDocumentPosition: function(a, b) {\n\t\treturn a.compareDocumentPosition ?\n\t\ta.compareDocumentPosition(b) :\n\t\ta.contains ?\n\t\t\t(a != b && a.contains(b) && 16) +\n\t\t\t(a != b && b.contains(a) && 8) +\n\t\t\t(a.sourceIndex >= 0 && b.sourceIndex >= 0 ?\n\t\t\t\t(a.sourceIndex < b.sourceIndex && 4) +\n\t\t\t\t(a.sourceIndex > b.sourceIndex && 2) :\n\t\t\t\t1) +\n\t\t\t0 :\n\t\t\t0;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t// moved from FittableLayout.js into common protected code\n\t_ieCssToPixelValue: function(node, value) {\n\t\tvar v = value;\n\t\t// From the awesome hack by Dean Edwards\n\t\t// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n\t\tvar s = node.style;\n\t\t// store style and runtime style values\n\t\tvar l = s.left;\n\t\tvar rl = node.runtimeStyle && node.runtimeStyle.left;\n\t\t// then put current style in runtime style.\n\t\tif (rl) {\n\t\t\tnode.runtimeStyle.left = node.currentStyle.left;\n\t\t}\n\t\t// apply given value and measure its pixel value\n\t\ts.left = v;\n\t\tv = s.pixelLeft;\n\t\t// finally restore previous state\n\t\ts.left = l;\n\t\tif (rl) {\n\t\t\ts.runtimeStyle.left = rl;\n\t\t}\n\t\treturn v;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_pxMatch: /px/i,\n\tgetComputedBoxValue: function(node, prop, boundary, computedStyle) {\n\t\tvar s = computedStyle || this.getComputedStyle(node);\n\t\tif (s && (!platform.ie || platform.ie >= 9)) {\n\t\t\tvar p = s.getPropertyValue(prop + '-' + boundary);\n\t\t\treturn p === 'auto' ? 0 : parseInt(p, 10);\n\t\t} else if (node && node.currentStyle) {\n\t\t\tvar v = node.currentStyle[prop + utils.cap(boundary)];\n\t\t\tif (!v.match(this._pxMatch)) {\n\t\t\t\tv = this._ieCssToPixelValue(node, v);\n\t\t\t}\n\t\t\treturn parseInt(v, 0);\n\t\t}\n\t\treturn 0;\n\t},\n\n\t/**\n\t* Gets the boundaries of a [node's]{@glossary Node} `margin` or `padding` box.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\n\t* @param {Node} box - The boundary to measure from ('padding' or 'margin').\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\n\t*\t`left`.\n\t* @public\n\t*/\n\tcalcBoxExtents: function(node, box) {\n\t\tvar s = this.getComputedStyle(node);\n\t\treturn {\n\t\t\ttop: this.getComputedBoxValue(node, box, 'top', s),\n\t\t\tright: this.getComputedBoxValue(node, box, 'right', s),\n\t\t\tbottom: this.getComputedBoxValue(node, box, 'bottom', s),\n\t\t\tleft: this.getComputedBoxValue(node, box, 'left', s)\n\t\t};\n\t},\n\n\t/**\n\t* Gets the calculated padding of a node. Shortcut for\n\t* [enyo.dom.calcBoxExtents()]{@link enyo.dom.calcBoxExtents}.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\n\t*\t`left`.\n\t* @public\n\t*/\n\tcalcPaddingExtents: function(node) {\n\t\treturn this.calcBoxExtents(node, 'padding');\n\t},\n\n\t/**\n\t* Gets the calculated margin of a node. Shortcut for\n\t* [enyo.dom.calcBoxExtents()]{@link enyo.dom.calcBoxExtents}.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, and\n\t*\t`left`.\n\t* @public\n\t*/\n\tcalcMarginExtents: function(node) {\n\t\treturn this.calcBoxExtents(node, 'margin');\n\t},\n\t/**\n\t* Returns an object like `{top: 0, left: 0, bottom: 100, right: 100, height: 10, width: 10}`\n\t* that represents the object's position relative to `relativeToNode` (suitable for absolute\n\t* positioning within that parent node). Negative values mean part of the object is not\n\t* visible. If you leave `relativeToNode` as `undefined` (or it is not a parent element), then\n\t* the position will be relative to the viewport and suitable for absolute positioning in a\n\t* floating layer.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to measure.\n\t* @param {Node} relativeToNode - The [node]{@glossary Node} to measure the distance from.\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, `left`,\n\t*\t`height`, and `width`.\n\t* @public\n\t*/\n\tcalcNodePosition: function(targetNode, relativeToNode) {\n\t\t// Parse upward and grab our positioning relative to the viewport\n\t\tvar top = 0,\n\t\t\tleft = 0,\n\t\t\tnode = targetNode,\n\t\t\twidth = node.offsetWidth,\n\t\t\theight = node.offsetHeight,\n\t\t\ttransformProp = dom.getStyleTransformProp(),\n\t\t\txregex = /translateX\\((-?\\d+)px\\)/i,\n\t\t\tyregex = /translateY\\((-?\\d+)px\\)/i,\n\t\t\tborderLeft = 0, borderTop = 0,\n\t\t\ttotalHeight = 0, totalWidth = 0,\n\t\t\toffsetAdjustLeft = 0, offsetAdjustTop = 0;\n\n\t\tif (relativeToNode) {\n\t\t\ttotalHeight = relativeToNode.offsetHeight;\n\t\t\ttotalWidth = relativeToNode.offsetWidth;\n\t\t} else {\n\t\t\ttotalHeight = (document.body.parentNode.offsetHeight > this.getWindowHeight() ? this.getWindowHeight() - document.body.parentNode.scrollTop : document.body.parentNode.offsetHeight);\n\t\t\ttotalWidth = (document.body.parentNode.offsetWidth > this.getWindowWidth() ? this.getWindowWidth() - document.body.parentNode.scrollLeft : document.body.parentNode.offsetWidth);\n\t\t}\n\n\t\tif (node.offsetParent) {\n\t\t\tdo {\n\t\t\t\t// Adjust the offset if relativeToNode is a child of the offsetParent\n\t\t\t\t// For IE 8 compatibility, have to use integer 8 instead of Node.DOCUMENT_POSITION_CONTAINS\n\t\t\t\tif (relativeToNode && this.compareDocumentPosition(relativeToNode, node.offsetParent) & 8) {\n\t\t\t\t\toffsetAdjustLeft = relativeToNode.offsetLeft;\n\t\t\t\t\toffsetAdjustTop = relativeToNode.offsetTop;\n\t\t\t\t}\n\t\t\t\t// Ajust our top and left properties based on the position relative to the parent\n\t\t\t\tleft += node.offsetLeft - (node.offsetParent ? node.offsetParent.scrollLeft : 0) - offsetAdjustLeft;\n\t\t\t\tif (transformProp && xregex.test(node.style[transformProp])) {\n\t\t\t\t\tleft += parseInt(node.style[transformProp].replace(xregex, '$1'), 10);\n\t\t\t\t}\n\t\t\t\ttop += node.offsetTop - (node.offsetParent ? node.offsetParent.scrollTop : 0) - offsetAdjustTop;\n\t\t\t\tif (transformProp && yregex.test(node.style[transformProp])) {\n\t\t\t\t\ttop += parseInt(node.style[transformProp].replace(yregex, '$1'), 10);\n\t\t\t\t}\n\t\t\t\t// Need to correct for borders if any exist on parent elements\n\t\t\t\tif (node !== targetNode) {\n\t\t\t\t\tif (node.currentStyle) {\n\t\t\t\t\t\t// Oh IE, we do so love working around your incompatibilities\n\t\t\t\t\t\tborderLeft = parseInt(node.currentStyle.borderLeftWidth, 10);\n\t\t\t\t\t\tborderTop = parseInt(node.currentStyle.borderTopWidth, 10);\n\t\t\t\t\t} else if (global.getComputedStyle) {\n\t\t\t\t\t\tborderLeft = parseInt(global.getComputedStyle(node, '').getPropertyValue('border-left-width'), 10);\n\t\t\t\t\t\tborderTop = parseInt(global.getComputedStyle(node, '').getPropertyValue('border-top-width'), 10);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No computed style options, so try the normal style object (much less robust)\n\t\t\t\t\t\tborderLeft = parseInt(node.style.borderLeftWidth, 10);\n\t\t\t\t\t\tborderTop = parseInt(node.style.borderTopWidth, 10);\n\t\t\t\t\t}\n\t\t\t\t\tif (borderLeft) {\n\t\t\t\t\t\tleft += borderLeft;\n\t\t\t\t\t}\n\t\t\t\t\tif (borderTop) {\n\t\t\t\t\t\ttop += borderTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Continue if we have an additional offsetParent, and either don't have a relativeToNode or the offsetParent is contained by the relativeToNode (if offsetParent contains relativeToNode, then we have already calculated up to the node, and can safely exit)\n\t\t\t\t// For IE 8 compatibility, have to use integer 16 instead of Node.DOCUMENT_POSITION_CONTAINED_BY\n\t\t\t} while ((node = node.offsetParent) && (!relativeToNode || this.compareDocumentPosition(relativeToNode, node) & 16));\n\t\t}\n\t\treturn {\n\t\t\t'top': top,\n\t\t\t'left': left,\n\t\t\t'bottom': totalHeight - top - height,\n\t\t\t'right': totalWidth - left - width,\n\t\t\t'height': height,\n\t\t\t'width': width\n\t\t};\n\t},\n\n\t/**\n\t* Sets the `innerHTML` property of the specified `node` to `html`.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to set.\n\t* @param {String} html - An HTML string.\n\t* @public\n\t*/\n\tsetInnerHtml: function(node, html) {\n\t\tnode.innerHTML = html;\n\t},\n\n\t/**\n\t* Checks a [DOM]{@glossary Node} [node]{@glossary Node} for a specific CSS class.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to set.\n\t* @param {String} s - The class name to check for.\n\t* @returns {(Boolean|undefined)} `true` if `node` has the `s` class; `undefined`\n\t* if there is no `node` or it has no `className` property.\n\t* @public\n\t*/\n\thasClass: function(node, s) {\n\t\tif (!node || !node.className) { return; }\n\t\treturn (' ' + node.className + ' ').indexOf(' ' + s + ' ') >= 0;\n\t},\n\n\t/**\n\t* Uniquely adds a CSS class to a DOM node.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} to set.\n\t* @param {String} s - The class name to add.\n\t* @public\n\t*/\n\taddClass: function(node, s) {\n\t\tif (node && !this.hasClass(node, s)) {\n\t\t\tvar ss = node.className;\n\t\t\tnode.className = (ss + (ss ? ' ' : '') + s);\n\t\t}\n\t},\n\n\t/**\n\t* Removes a CSS class from a DOM node if it exists.\n\t*\n\t* @param {Node} node - The [node]{@glossary Node} from which to remove the class.\n\t* @param {String} s - The class name to remove from `node`.\n\t* @public\n\t*/\n\tremoveClass: function(node, s) {\n\t\tif (node && this.hasClass(node, s)) {\n\t\t\tvar ss = node.className;\n\t\t\tnode.className = (' ' + ss + ' ').replace(' ' + s + ' ', ' ').slice(1, -1);\n\t\t}\n\t},\n\n\t/**\n\t* Adds a class to `document.body`. This defers the actual class change if nothing has been\n\t* rendered into `body` yet.\n\t*\n\t* @param {String} s - The class name to add to the document's `body`.\n\t* @public\n\t*/\n\taddBodyClass: function(s) {\n\t\tif (!utils.exists(roots.roots) || roots.roots.length === 0) {\n\t\t\tif (dom._bodyClasses) {\n\t\t\t\tdom._bodyClasses.push(s);\n\t\t\t} else {\n\t\t\t\tdom._bodyClasses = [s];\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdom.addClass(document.body, s);\n\t\t}\n\t},\n\n\t/**\n\t* Returns an object describing the absolute position on the screen, relative to the top left\n\t* corner of the screen. This function takes into account account absolute/relative\n\t* `offsetParent` positioning, `scroll` position, and CSS transforms (currently\n\t* `translateX`, `translateY`, and `matrix3d`).\n\t*\n\t* ```javascript\n\t* {top: ..., right: ..., bottom: ..., left: ..., height: ..., width: ...}\n\t* ```\n\t*\n\t* Values returned are only valid if `hasNode()` is truthy. If there's no DOM node for the\n\t* object, this returns a bounds structure with `undefined` as the value of all fields.\n\t*\n\t* @param {Node} n - The [node]{@glossary Node} to measure.\n\t* @returns {Object} An object containing the properties `top`, `right`, `bottom`, `left`,\n\t*\t`height`, and `width`.\n\t* @public\n\t*/\n\tgetAbsoluteBounds: function(targetNode) {\n\t\treturn utils.clone(targetNode.getBoundingClientRect());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tflushBodyClasses: function() {\n\t\tif (dom._bodyClasses) {\n\t\t\tfor (var i = 0, c; (c=dom._bodyClasses[i]); ++i) {\n\t\t\t\tdom.addClass(document.body, c);\n\t\t\t}\n\t\t\tdom._bodyClasses = null;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_bodyClasses: null,\n\n\t/**\n\t* Convert to various unit formats. Useful for converting pixels to a resolution-independent\n\t* measurement method, like \"rem\". Other units are available if defined in the\n\t* [enyo.dom.unitToPixelFactors]{@link enyo.dom.unitToPixelFactors} object.\n\t*\n\t* ```javascript\n\t* // Do calculations and get back the desired CSS unit.\n\t* var frameWidth = 250,\n\t*     frameWithMarginInches = enyo.dom.unit( 10 + frameWidth + 10, 'in' ),\n\t*     frameWithMarginRems = enyo.dom.unit( 10 + frameWidth + 10, 'rem' );\n\t* // '2.8125in' == frameWithMarginInches\n\t* // '22.5rem' == frameWithMarginRems\n\t* ```\n\t*\n\t* @param {(String|Number)} pixels - The the pixels or math to convert to the unit.\n\t*\t(\"px\" suffix in String format is permitted. ex: `'20px'`)\n\t* @param {(String)} toUnit - The name of the unit to convert to.\n\t* @returns {(Number|undefined)} Resulting conversion, in case of malformed input, `undefined`\n\t* @public\n\t*/\n\tunit: function (pixels, toUnit) {\n\t\tif (!toUnit || !this.unitToPixelFactors[toUnit]) return;\n\t\tif (typeof pixels == 'string' && pixels.substr(-2) == 'px') pixels = parseInt(pixels.substr(0, pixels.length - 2), 10);\n\t\tif (typeof pixels != 'number') return;\n\n\t\treturn (pixels / this.unitToPixelFactors[toUnit]) + '' + toUnit;\n\t},\n\n\t/**\n\t* Object that stores all of the pixel conversion factors to each keyed unit.\n\t*\n\t* @public\n\t*/\n\tunitToPixelFactors: {\n\t\t'rem': 12,\n\t\t'in': 96\n\t}\n};\n\n// override setInnerHtml for Windows 8 HTML applications\nif (typeof global.MSApp !== 'undefined') {\n\tdom.setInnerHtml = function(node, html) {\n\t\tglobal.MSApp.execUnsafeLocalFunction(function() {\n\t\t\tnode.innerHTML = html;\n\t\t});\n\t};\n}\n\n// use faster classList interface if it exists\nif (document.head && document.head.classList) {\n\tdom.hasClass = function(node, s) {\n\t\tif (node) {\n\t\t\treturn node.classList.contains(s);\n\t\t}\n\t};\n\tdom.addClass = function(node, s) {\n\t\tif (node) {\n\t\t\treturn node.classList.add(s);\n\t\t}\n\t};\n\tdom.removeClass = function (node, s) {\n\t\tif (node) {\n\t\t\treturn node.classList.remove(s);\n\t\t}\n\t};\n}\n\n/**\n* Allows bootstrapping in environments that do not have a global object right away.\n*\n* @param {Function} func - The function to run\n* @public\n*/\ndom.requiresWindow = function(func) {\n\tfunc();\n};\n\n\nvar cssTransformProps = ['transform', '-webkit-transform', '-moz-transform', '-ms-transform', '-o-transform'],\n\tstyleTransformProps = ['transform', 'webkitTransform', 'MozTransform', 'msTransform', 'OTransform'];\n\n/**\n* @private\n*/\ndom.calcCanAccelerate = function() {\n\t/* Android 2 is a liar: it does NOT support 3D transforms, even though Perspective is the best check */\n\tif (platform.android <= 2) {\n\t\treturn false;\n\t}\n\tvar p$ = ['perspective', 'WebkitPerspective', 'MozPerspective', 'msPerspective', 'OPerspective'];\n\tfor (var i=0, p; (p=p$[i]); i++) {\n\t\tif (typeof document.body.style[p] != 'undefined') {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n/**\n* @private\n*/\ndom.getCssTransformProp = function() {\n\tif (this._cssTransformProp) {\n\t\treturn this._cssTransformProp;\n\t}\n\tvar i = utils.indexOf(this.getStyleTransformProp(), styleTransformProps);\n\tthis._cssTransformProp = cssTransformProps[i];\n\treturn this._cssTransformProp;\n};\n\n/**\n* @private\n*/\ndom.getStyleTransformProp = function() {\n\tif (this._styleTransformProp || !document.body) {\n\t\treturn this._styleTransformProp;\n\t}\n\tfor (var i = 0, p; (p = styleTransformProps[i]); i++) {\n\t\tif (typeof document.body.style[p] != 'undefined') {\n\t\t\tthis._styleTransformProp = p;\n\t\t\treturn this._styleTransformProp;\n\t\t}\n\t}\n};\n\n/**\n* @private\n*/\ndom.domTransformsToCss = function(inTransforms) {\n\tvar n, v, text = '';\n\tfor (n in inTransforms) {\n\t\tv = inTransforms[n];\n\t\tif ((v !== null) && (v !== undefined) && (v !== '')) {\n\t\t\ttext +=  n + '(' + v + ') ';\n\t\t}\n\t}\n\treturn text;\n};\n\n/**\n* @private\n*/\ndom.transformsToDom = function(control) {\n\tvar css = this.domTransformsToCss(control.domTransforms),\n\t\tstyleProp;\n\n\tif (control.hasNode()) {\n\t\tstyleProp = this.getStyleTransformProp();\n\t} else {\n\t\tstyleProp = this.getCssTransformProp();\n\t}\n\n\tif (styleProp) control.applyStyle(styleProp, css);\n};\n\n/**\n* Returns `true` if the platform supports CSS3 Transforms.\n*\n* @returns {Boolean} `true` if platform supports CSS `transform` property;\n* otherwise, `false`.\n* @public\n*/\ndom.canTransform = function() {\n\treturn Boolean(this.getStyleTransformProp());\n};\n\n/**\n* Returns `true` if platform supports CSS3 3D Transforms.\n*\n* Typically used like this:\n* ```\n* if (dom.canAccelerate()) {\n* \tdom.transformValue(this.$.slidingThing, 'translate3d', x + ',' + y + ',' + '0')\n* } else {\n* \tdom.transformValue(this.$.slidingThing, 'translate', x + ',' + y);\n* }\n* ```\n*\n* @returns {Boolean} `true` if platform supports CSS3 3D Transforms;\n* otherwise, `false`.\n* @public\n*/\ndom.canAccelerate = function() {\n\treturn (this.accelerando !== undefined) ? this.accelerando : document.body && (this.accelerando = this.calcCanAccelerate());\n};\n\n/**\n* Applies a series of transforms to the specified {@link enyo.Control}, using\n* the platform's prefixed `transform` property.\n*\n* **Note:** Transforms are not commutative, so order is important.\n*\n* Transform values are updated by successive calls, so\n* ```javascript\n* dom.transform(control, {translate: '30px, 40px', scale: 2, rotate: '20deg'});\n* dom.transform(control, {scale: 3, skewX: '-30deg'});\n* ```\n*\n* is equivalent to:\n* ```javascript\n* dom.transform(control, {translate: '30px, 40px', scale: 3, rotate: '20deg', skewX: '-30deg'});\n* ```\n*\n* When applying these transforms in a WebKit browser, this is equivalent to:\n* ```javascript\n* control.applyStyle('-webkit-transform', 'translate(30px, 40px) scale(3) rotate(20deg) skewX(-30deg)');\n* ```\n*\n* And in Firefox, this is equivalent to:\n* ```javascript\n* control.applyStyle('-moz-transform', 'translate(30px, 40px) scale(3) rotate(20deg) skewX(-30deg)');\n* ```\n*\n* @param {enyo.Control} control - The {@link enyo.Control} to transform.\n* @param {Object} transforms - The set of transforms to apply to `control`.\n* @public\n*/\ndom.transform = function(control, transforms) {\n\tvar d = control.domTransforms = control.domTransforms || {};\n\tutils.mixin(d, transforms);\n\tthis.transformsToDom(control);\n};\n\n/**\n* Applies a single transform to the specified {@link enyo.Control}.\n*\n* Example:\n* ```\n* tap: function(inSender, inEvent) {\n* \tvar c = inEvent.originator;\n* \tvar r = c.rotation || 0;\n* \tr = (r + 45) % 360;\n* \tc.rotation = r;\n* \tdom.transformValue(c, 'rotate', r);\n* }\n* ```\n*\n* This will rotate the tapped control by 45 degrees clockwise.\n*\n* @param {enyo.Control} control - The {@link enyo.Control} to transform.\n* @param {String} transform - The name of the transform function.\n* @param {(String|Number)} value - The value to apply to the transform.\n* @public\n*/\ndom.transformValue = function(control, transform, value) {\n\tvar d = control.domTransforms = control.domTransforms || {};\n\td[transform] = value;\n\tthis.transformsToDom(control);\n};\n\n/**\n* Applies a transform that should trigger GPU compositing for the specified\n* {@link enyo.Control}. By default, the acceleration is only applied if the\n* browser supports it. You may also optionally force-set `value` directly, to\n* be applied to `translateZ(value)`.\n*\n* @param {enyo.Control} control - The {@link enyo.Control} to accelerate.\n* @param {(String|Number)} [value] - An optional value to apply to the acceleration transform\n*\tproperty.\n* @public\n*/\ndom.accelerate = function(control, value) {\n\tvar v = value == 'auto' ? this.canAccelerate() : value;\n\tthis.transformValue(control, 'translateZ', v ? 0 : null);\n};\n\n\n/**\n * The CSS `transition` property name for the current browser/platform, e.g.:\n *\n * * `-webkit-transition`\n * * `-moz-transition`\n * * `transition`\n *\n * @type {String}\n * @private\n */\ndom.transition = (platform.ios || platform.android || platform.chrome || platform.androidChrome || platform.safari)\n\t? '-webkit-transition'\n\t: (platform.firefox || platform.firefoxOS || platform.androidFirefox)\n\t\t? '-moz-transition'\n\t\t: 'transition';","require('../../enyo');\n\nvar\n\tjson = require('./json'),\n\tutils = require('./utils'),\n\tplatform = require('./platform');\n\n/**\n* These platforms only allow one argument for [console.log()]{@glossary console.log}:\n*\n* * android\n* * ios\n* * webos\n*\n* @private\n*/\nvar dumbConsole = Boolean(platform.android || platform.ios || platform.webos);\n\n/**\n* Internally used methods and properties associated with logging.\n*\n* @namespace exports.logging\n* @public\n*/\nexports = module.exports = /** @lends exports.logging */ {\n\t\n\t/**\n\t* The log level to use. Can be a value from -1 to 99, where -1 disables all\n\t* logging, 0 is 'error', 10 is 'warn', and 20 is 'log'. It is preferred that\n\t* this value be set using the [exports.setLogLevel()]{@link enyo~setLogLevel}\n\t* method.\n\t*\n\t* @type {Number}\n\t* @default 99\n\t* @public\n\t*/\n\tlevel: 99,\n\t\n\t/**\n\t* The known levels.\n\t*\n\t* @private\n\t*/\n\tlevels: {log: 20, warn: 10, error: 0},\n\t\n\t/**\n\t* @private\n\t*/\n\tshouldLog: function (fn) {\n\t\tvar ll = parseInt(this.levels[fn], 0);\n\t\treturn (ll <= this.level);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tvalidateArgs: function (args) {\n\t\t// gracefully handle and prevent circular reference errors in objects\n\t\tfor (var i=0, l=args.length, item; (item=args[i]) || i<l; i++) {\n\t\t\ttry {\n\t\t\t\tif (typeof item === 'object') {\n\t\t\t\t\targs[i] = json.stringify(item);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\targs[i] = 'Error: ' + e.message;\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_log: function (fn, args) {\n\t\t// avoid trying to use console on IE instances where the object hasn't been\n\t\t// created due to the developer tools being unopened\n\t\tvar console = global.console;\n\t\tif (typeof console === 'undefined') {\n            return;\n        }\n\t\t//var a$ = utils.logging.formatArgs(fn, args);\n\t\tvar a$ = utils.isArray(args) ? args : utils.cloneArray(args);\n\t\tif (platform.androidFirefox) {\n\t\t\t// Firefox for Android's console does not handle objects with circular references\n\t\t\tthis.validateArgs(a$);\n\t\t}\n\t\tif (dumbConsole) {\n\t\t\t// at least in early versions of webos, console.* only accept a single argument\n\t\t\ta$ = [a$.join(' ')];\n\t\t}\n\t\tvar fn$ = console[fn];\n\t\tif (fn$ && fn$.apply) {\n\t\t\t// some consoles support 'warn', 'info', and so on\n\t\t\tfn$.apply(console, a$);\n\t\t} else if (console.log.apply) {\n\t\t\t// some consoles support console.log.apply\n\t\t\tconsole.log.apply(console, a$);\n\t\t} else {\n\t\t\t// otherwise, do our own formatting\n\t\t\tconsole.log(a$.join(' '));\n\t\t}\n\t},\n\t\n\t/**\n\t* This is exposed elsewhere.\n\t*\n\t* @private\n\t*/\n\tlog: function (fn, args) {\n\n\t\tif (fn != 'log' && fn != 'warn' && fn != 'error') {\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\t\tfn = 'log';\n\t\t}\n\n\t\tvar console = global.console;\n\t\tif (typeof console !== 'undefined') {\n\t\t\tif (this.shouldLog(fn)) {\n\t\t\t\tthis._log(fn, args);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n* Sets the log level to the given value. This will restrict the amount of output depending on\n* the settings. The higher the value, the more output that will be allowed. The default is\n* 99. The value, -1, would silence all logging, even 'error' (0).\n* Without the 'see': {@link exports.log}.\n*\n* @see exports.logging.level\n* @see exports.log\n* @see exports.warn\n* @see exports.error\n* @param {Number} level - The level to set logging to.\n*/\nexports.setLogLevel = function (level) {\n\tvar ll = parseInt(level, 0);\n\tif (isFinite(ll)) {\n\t\tthis.level = ll;\n\t}\n};\n\n/**\n* A wrapper for [console.log()]{@glossary console.log}, compatible\n* across supported platforms. Will output only if the current\n* [log level]{@link exports.logging.level} allows it. [Object]{@glossary Object}\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\n* automatically.\n*\n* @utility\n* @see {@glossary console.log}\n* @param {...*} - The arguments to be logged.\n* @public\n*/\n\n/**\n* A wrapper for [console.warn()]{@glossary console.warn}, compatible\n* across supported platforms. Will output only if the current\n* [log level]{@link exports.logging.level} allows it. [Object]{@glossary Object}\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\n* automatically.\n*\n* @utility\n* @see {@glossary console.warn}\n* @param {...*} - The arguments to be logged.\n* @public\n*/\nexports.warn = function () {\n\tthis.log('warn', arguments);\n};\n\n/**\n* A wrapper for [console.error()]{@glossary console.error}, compatible\n* across supported platforms. Will output only if the current\n* [log level]{@link exports.logging.level} allows it. [Object]{@glossary Object}\n* parameters will be serialized via [JSON.stringify()]{@glossary JSON.stringify}\n* automatically.\n*\n* @utility\n* @see {@glossary console.error}\n* @param {...*} - The arguments to be logged.\n* @public\n*/\nexports.error = function () {\n\tthis.log('error', arguments);\n};","require('../../enyo');\n\nvar\n\tutils = require('./utils'),\n\tplatform = require('./platform'),\n\tpath = require('./pathResolver');\n\n/**\n* Parameters and options for the [enyo.xhr.request()]{@link enyo.xhr.request} method.\n*\n* @typedef {Object} enyo.xhr.request~Options\n* @property {String} url - The URL to request (required).\n* @property {String} method - One of `'GET'`, `'POST'`, `'DELETE'`, `'UPDATE'`, or\n* custom methods; defaults to `'GET'`.\n* @property {Function} callback - Optional callback method to fire when complete.\n* @property {Object} body - Optional serializable body for `POST` requests.\n* @property {Object} headers - Optional header overrides; defaults to `null`.\n* @property {String} username - Optional username to provide for authentication purposes.\n* @property {String} password - Optional password to provide for authentication purposes.\n* @property {Object} xhrFields - Optional key/value pairs to apply directly to the request.\n* @property {String} mimeType - Optional specification for the `MIME-Type` of the request.\n* @property {Boolean} mozSystem - Optional boolean to create cross-domain XHR (Firefox OS only).\n* @property {Boolean} mozAnon - Optional boolean to create anonymous XHR that does not send\n*\tcookies or authentication headers (Firefox OS only).\n* @private\n*/\n\n/**\n* An internally-used namespace for XHR-related methods and wrappers.\n*\n* @namespace enyo.xhr\n* @private\n*/\nmodule.exports = /** @lends enyo.xhr */ {\n\t\n\t/**\n\t* Internally-used method to execute XHR requests.\n\t*\n\t* Note that we explicitly add a `'cache-control: no-cache'` header for iOS 6 for any\n\t* non-`GET` requests to work around a system bug causing non-cachable requests to be\n\t* cached. To disable this, use the `header` property to specify an object where\n\t* `cache-control` is set to `null`.\n\t*\n\t* @param {enyo.xhr.request~Options} params - The options and properties for this XHR request.\n\t* @returns {XMLHttpRequest} The XHR request object.\n\t* @private\n\t*/\n\trequest: function (params) {\n\t\tvar xhr = this.getXMLHttpRequest(params);\n\t\tvar url = this.simplifyFileURL(path.rewrite(params.url));\n\t\t//\n\t\tvar method = params.method || 'GET';\n\t\tvar async = !params.sync;\n\t\t//\n\t\tif (params.username) {\n\t\t\txhr.open(method, url, async, params.username, params.password);\n\t\t} else {\n\t\t\txhr.open(method, url, async);\n\t\t}\n\t\t//\n\t\tutils.mixin(xhr, params.xhrFields);\n\t\t// only setup handler when we have a callback\n\t\tif (params.callback) {\n\t\t\tthis.makeReadyStateHandler(xhr, params.callback);\n\t\t}\n\t\t//\n\t\tparams.headers = params.headers || {};\n\t\t// work around iOS 6.0 bug where non-GET requests are cached\n\t\t// see http://www.einternals.com/blog/web-development/ios6-0-caching-ajax-post-requests\n\t\tif (method !== 'GET' && platform.ios && platform.ios == 6) {\n\t\t\tif (params.headers['cache-control'] !== null) {\n\t\t\t\tparams.headers['cache-control'] = params.headers['cache-control'] || 'no-cache';\n\t\t\t}\n\t\t}\n\t\t// user-set headers override any platform-default\n\t\tif (xhr.setRequestHeader) {\n\t\t\tfor (var key in params.headers) {\n\t\t\t\tif (params.headers[key]) {\n\t\t\t\t\txhr.setRequestHeader(key, params.headers[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//\n\t\tif((typeof xhr.overrideMimeType == 'function') && params.mimeType) {\n\t\t\txhr.overrideMimeType(params.mimeType);\n\t\t}\n\t\t//\n\t\txhr.send(params.body || null);\n\t\tif (!async && params.callback) {\n\t\t\txhr.onreadystatechange(xhr);\n\t\t}\n\t\treturn xhr;\n\t},\n\t\n\t/**\n\t* Removes any callbacks that might be set from Enyo code for an existing XHR\n\t* and stops the XHR from completing (if possible).\n\t*\n\t* @param {XMLHttpRequest} The - request to cancel.\n\t* @private\n\t*/\n\tcancel: function (xhr) {\n\t\tif (xhr.onload) {\n\t\t\txhr.onload = null;\n\t\t}\n\t\tif (xhr.onreadystatechange) {\n\t\t\txhr.onreadystatechange = null;\n\t\t}\n\t\tif (xhr.abort) {\n\t\t\txhr.abort();\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tmakeReadyStateHandler: function (inXhr, inCallback) {\n\t\tif (global.XDomainRequest && inXhr instanceof global.XDomainRequest) {\n\t\t\tinXhr.onload = function() {\n\t\t\t\tvar data;\n\t\t\t\tif (inXhr.responseType === 'arraybuffer') {\n\t\t\t\t\tdata = inXhr.response;\n\t\t\t\t} else if (typeof inXhr.responseText === 'string') {\n\t\t\t\t\tdata = inXhr.responseText;\n\t\t\t\t}\n\t\t\t\tinCallback.apply(null, [data, inXhr]);\n\t\t\t\tinXhr = null;\n\t\t\t};\n\t\t} else {\n\t\t\tinXhr.onreadystatechange = function() {\n\t\t\t\tif (inXhr && inXhr.readyState == 4) {\n\t\t\t\t\tvar data;\n\t\t\t\t\tif (inXhr.responseType === 'arraybuffer') {\n\t\t\t\t\t\tdata = inXhr.response;\n\t\t\t\t\t} else if (typeof inXhr.responseText === 'string') {\n\t\t\t\t\t\tdata = inXhr.responseText;\n\t\t\t\t\t}\n\t\t\t\t\tinCallback.apply(null, [data, inXhr]);\n\t\t\t\t\tinXhr = null;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tinOrigin: function (url) {\n\t\tvar a = document.createElement('a'), result = false;\n\t\ta.href = url;\n\t\t// protocol is ':' for relative URLs\n\t\tif (a.protocol === ':' ||\n\t\t\t\t(a.protocol === global.location.protocol &&\n\t\t\t\t\ta.hostname === global.location.hostname &&\n\t\t\t\t\ta.port === (global.location.port ||\n\t\t\t\t\t\t(global.location.protocol === 'https:' ? '443' : '80')))) {\n\t\t\tresult = true;\n\t\t}\n\t\treturn result;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tsimplifyFileURL: function (url) {\n\t\tvar a = document.createElement('a');\n\t\ta.href = url;\n\t\t// protocol is ':' for relative URLs\n\t\tif (a.protocol === 'file:' ||\n\t\t\ta.protocol === ':' && global.location.protocol === 'file:') {\n\t\t\t// leave off search and hash parts of the URL\n\t\t\t// and work around a bug in webOS 3 where the app's host has a domain string\n\t\t\t// in it that isn't resolved as a path\n\t\t\tvar host = (platform.webos < 4) ? '' : a.host;\n\t\t\treturn a.protocol + '//' + host + a.pathname;\n\t\t} else if (a.protocol === ':' && global.location.protocol === 'x-wmapp0:') {\n\t\t\t// explicitly return absolute URL for Windows Phone 8, as an absolute path is required for local files\n\t\t\treturn global.location.protocol + '//' + global.location.pathname.split('/')[0] + '/' + a.host + a.pathname;\n\t\t} else {\n\t\t\treturn url;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgetXMLHttpRequest: function (params) {\n\t\ttry {\n\t\t\t// only use XDomainRequest when it exists, no extra headers were set, and the\n\t\t\t// target URL maps to a domain other than the document origin.\n\t\t\tif (platform.ie < 10 && global.XDomainRequest && !params.headers &&\n\t\t\t\t!this.inOrigin(params.url) && !/^file:\\/\\//.test(global.location.href)) {\n\t\t\t\treturn new global.XDomainRequest();\n\t\t\t}\n\t\t} catch(e) {}\n\t\ttry {\n\n\t\t\tif (platform.firefoxOS) {\n\t\t\t\tvar shouldCreateNonStandardXHR = false; // flag to decide if we're creating the xhr or not\n\t\t\t\tvar xhrOptions = {};\n\n\t\t\t\t// mozSystem allows you to do cross-origin requests on Firefox OS\n\t\t\t\t// As seen in:\n\t\t\t\t//   https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#Non-standard_properties\n\t\t\t\tif (params.mozSystem) {\n\t\t\t\t\txhrOptions.mozSystem = true;\n\t\t\t\t\tshouldCreateNonStandardXHR = true;\n\t\t\t\t}\n\n\t\t\t\t// mozAnon allows you to send a request without cookies or authentication headers\n\t\t\t\t// As seen in:\n\t\t\t\t//   https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#Non-standard_properties\n\t\t\t\tif (params.mozAnon) {\n\t\t\t\t\txhrOptions.mozAnon = true;\n\t\t\t\t\tshouldCreateNonStandardXHR = true;\n\t\t\t\t}\n\n\t\t\t\tif (shouldCreateNonStandardXHR) {\n\t\t\t\t\treturn new XMLHttpRequest(xhrOptions);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new XMLHttpRequest();\n\t\t} catch(e) {}\n\t\treturn null;\n\t}\n};","require('../../enyo');\n\nvar\n\tDom = require('./dom');\n\nvar selfClosing = {img: 1, hr: 1, br: 1, area: 1, base: 1, basefont: 1, input: 1, link: 1,\n\tmeta: 1, command: 1, embed: 1, keygen: 1, wbr: 1, param: 1, source: 1, track: 1, col: 1};\n\n/**\n* This is the default render delegate used by {@link enyo.Control}. It\n* generates the HTML [string]{@glossary String} content and correctly inserts\n* it into the DOM. A string-concatenation technique is used to perform DOM\n* insertion in batches.\n*\n* @name enyo.HTMLStringDelegate\n* @type Object\n* @public\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tinvalidate: function (control, item) {\n\t\tswitch (item) {\n\t\tcase 'content':\n\t\t\tthis.renderContent(control);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcontrol.tagsValid = false;\n\t\t\tbreak;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trender: function (control) {\n\t\tif (control.parent) {\n\t\t\tcontrol.parent.beforeChildRender(control);\n\t\t\t\n\t\t\tif (!control.parent.generated) return;\n\t\t\tif (control.tag === null) return control.parent.render();\n\t\t}\n\t\t\n\t\tif (!control.hasNode()) this.renderNode(control);\n\t\tif (control.hasNode()) {\n\t\t\tthis.renderDom(control);\n\t\t\tif (control.generated) control.rendered();\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderInto: function (control, parentNode) {\n\t\tparentNode.innerHTML = this.generateHtml(control);\n\t\t\n\t\tif (control.generated) control.rendered();\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderNode: function (control) {\n\t\tthis.teardownRender(control);\n\t\tcontrol.node = document.createElement(control.tag);\n\t\tcontrol.addNodeToParent();\n\t\tcontrol.set('generated', true);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderDom: function (control) {\n\t\tthis.renderAttributes(control);\n\t\tthis.renderStyles(control);\n\t\tthis.renderContent(control);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderStyles: function (control) {\n\t\tvar style = control.style;\n\t\t\n\t\t// we can safely do this knowing it will synchronize properly without a double\n\t\t// set in the DOM because we're flagging the internal property\n\t\tif (control.hasNode()) {\n\t\t\tcontrol.node.style.cssText = style;\n\t\t\t// retrieve the parsed value for synchronization\n\t\t\tcontrol.cssText = style = control.node.style.cssText;\n\t\t\t// now we set it knowing they will be synchronized and everybody that is listening\n\t\t\t// will also be updated to know about the change\n\t\t\tcontrol.set('style', style);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderAttributes: function (control) {\n\t\tvar attrs = control.attributes,\n\t\t\tnode = control.hasNode(),\n\t\t\tkey,\n\t\t\tval;\n\t\t\n\t\tif (node) {\n\t\t\tfor (key in attrs) {\n\t\t\t\tval = attrs[key];\n\t\t\t\tif (val === null || val === false || val === \"\") {\n\t\t\t\t\tnode.removeAttribute(key);\n\t\t\t\t} else {\n\t\t\t\t\tnode.setAttribute(key, val);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trenderContent: function (control) {\n\t\tif (control.generated) this.teardownChildren(control);\n\t\tif (control.hasNode()) control.node.innerHTML = this.generateInnerHtml(control);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgenerateHtml: function (control) {\n\t\tvar content,\n\t\t\thtml;\n\t\t\n\t\tif (control.canGenerate === false) {\n\t\t\treturn '';\n\t\t}\n\t\t// do this first in case content generation affects outer html (styles or attributes)\n\t\tcontent = this.generateInnerHtml(control);\n\t\t// generate tag, styles, attributes\n\t\thtml = this.generateOuterHtml(control, content);\n\t\t// NOTE: 'generated' is used to gate access to findNodeById in\n\t\t// hasNode, because findNodeById is expensive.\n\t\t// NOTE: we typically use 'generated' to mean 'created in DOM'\n\t\t// but that has not actually happened at this point.\n\t\t// We set 'generated = true' here anyway to avoid having to walk the\n\t\t// control tree a second time (to set it later).\n\t\t// The contract is that insertion in DOM will happen synchronously\n\t\t// to generateHtml() and before anybody should be calling hasNode().\n\t\tcontrol.set('generated', true);\n\t\treturn html;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgenerateOuterHtml: function (control, content) {\n\t\tif (!control.tag) return content;\n\t\tif (!control.tagsValid) this.prepareTags(control);\n\t\treturn control._openTag + content + control._closeTag;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgenerateInnerHtml: function (control) {\n\t\tvar allowHtml = control.allowHtml,\n\t\t\tcontent;\n\t\t\n\t\t// flow can alter the way that html content is rendered inside\n\t\t// the container regardless of whether there are children.\n\t\tcontrol.flow();\n\t\tif (control.children.length) return this.generateChildHtml(control);\n\t\telse {\n\t\t\tcontent = control.get('content');\n\t\t\treturn allowHtml ? content : Dom.escape(content);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgenerateChildHtml: function (control) {\n\t\tvar child,\n\t\t\thtml = '',\n\t\t\ti = 0,\n\t\t\tdelegate;\n\t\t\n\t\tfor (; (child = control.children[i]); ++i) {\n\t\t\tdelegate = child.renderDelegate || this;\n\t\t\thtml += delegate.generateHtml(child);\n\t\t}\n\t\t\n\t\treturn html;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tprepareTags: function (control) {\n\t\tvar html = '';\n\t\t\n\t\t// open tag\n\t\thtml += '<' + control.tag + (control.style ? ' style=\"' + control.style + '\"' : '');\n\t\thtml += this.attributesToHtml(control.attributes);\n\t\tif (selfClosing[control.tag]) {\n\t\t\tcontrol._openTag = html + '/>';\n\t\t\tcontrol._closeTag = '';\n\t\t} else {\n\t\t\tcontrol._openTag = html + '>';\n\t\t\tcontrol._closeTag = '</' + control.tag + '>';\n\t\t}\n\t\t\n\t\tcontrol.tagsValid = true;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tattributesToHtml: function(attrs) {\n\t\tvar key,\n\t\t\tval,\n\t\t\thtml = '';\n\t\t\t\n\t\tfor (key in attrs) {\n\t\t\tval = attrs[key];\n\t\t\tif (val != null && val !== false && val !== '') {\n\t\t\t\thtml += ' ' + key + '=\"' + this.escapeAttribute(val) + '\"';\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn html;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tescapeAttribute: function (text) {\n\t\tif (typeof text != 'string') return text;\n\t\n\t\treturn String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;');\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tteardownRender: function (control, cache) {\n\t\tif (control.generated) this.teardownChildren(control, cache);\n\t\tcontrol.node = null;\n\t\tcontrol.set('generated', false);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tteardownChildren: function (control, cache) {\n\t\tvar child,\n\t\t\ti = 0;\n\t\t\t\n\t\tfor (; (child = control.children[i]); ++i) {\n\t\t\tchild.teardownRender(cache);\n\t\t}\n\t}\n};","require('../../enyo');\n\nvar\n\tlogger = require('./logger'),\n\tutils = require('./utils');\n\nvar defaultCtor = null;\n\n/**\n* Creates a JavaScript [constructor]{@glossary constructor} function with\n* a prototype defined by `props`. **All constructors must have a unique name.**\n*\n* `enyo.kind()` makes it easy to build a constructor-with-prototype (like a\n* class) that has advanced features like prototype-chaining\n* ([inheritance]{@glossary inheritance}).\n*\n* A plug-in system is included for extending the abilities of the\n* [kind]{@glossary kind} generator, and constructors are allowed to\n* perform custom operations when subclassed.\n*\n* If you make changes to `enyo.kind()`, be sure to add or update the appropriate\n* [unit tests](@link https://github.com/enyojs/enyo/tree/master/tools/test/core/tests).\n*\n* For more information, see the documentation on\n* [Kinds]{@linkplain $dev-guide/key-concepts/kinds.html} in the Enyo Developer Guide.\n*\n* @namespace enyo.kind\n* @param {Object} props - A [hash]{@glossary Object} of properties used to define and create\n*\tthe [kind]{@glossary kind}\n* @public\n*/\n/*jshint -W120*/\nvar kind = exports = module.exports = function (props) {\n/*jshint +W120*/\n\t// extract 'name' property\n\tvar name = props.name || '';\n\tdelete props.name;\n\t// extract 'kind' property\n\tvar hasKind = ('kind' in props);\n\tvar kindName = props.kind;\n\tdelete props.kind;\n\t// establish base class reference\n\tvar base = constructorForKind(kindName);\n\tvar isa = base && base.prototype || null;\n\t// if we have an explicit kind property with value undefined, we probably\n\t// tried to reference a kind that is not yet in scope\n\tif (hasKind && kindName === undefined || base === undefined) {\n\t\tvar problem = kindName === undefined ? 'undefined kind' : 'unknown kind (' + kindName + ')';\n\t\tthrow 'enyo.kind: Attempt to subclass an ' + problem + '. Check dependencies for [' + (name || '<unnamed>') + '].';\n\t}\n\t// make a boilerplate constructor\n\tvar ctor = kind.makeCtor();\n\t// semi-reserved word 'constructor' causes problems with Prototype and IE, so we rename it here\n\tif (props.hasOwnProperty('constructor')) {\n\t\tprops._constructor = props.constructor;\n\t\tdelete props.constructor;\n\t}\n\t// create our prototype\n\t//ctor.prototype = isa ? enyo.delegate(isa) : {};\n\tutils.setPrototype(ctor, isa ? utils.delegate(isa) : {});\n\t// there are special cases where a base class has a property\n\t// that may need to be concatenated with a subclasses implementation\n\t// as opposed to completely overwriting it...\n\tkind.concatHandler(ctor, props);\n\n\t// put in our props\n\tutils.mixin(ctor.prototype, props);\n\t// alias class name as 'kind' in the prototype\n\t// but we actually only need to set this if a new name was used,\n\t// not if it is inheriting from a kind anonymously\n\tif (name) {\n\t\tctor.prototype.kindName = name;\n\t}\n\t// this is for anonymous constructors\n\telse {\n\t\tctor.prototype.kindName = base && base.prototype? base.prototype.kindName: '';\n\t}\n\t// cache superclass constructor\n\tctor.prototype.base = base;\n\t// reference our real constructor\n\tctor.prototype.ctor = ctor;\n\t// support pluggable 'features'\n\tutils.forEach(kind.features, function(fn){ fn(ctor, props); });\n\t\n\tif (name) kindCtors[name] = ctor;\n\t\n\treturn ctor;\n};\n\nexports.setDefaultCtor = function (ctor) {\n\tdefaultCtor = ctor;\n};\n\nvar getDefaultCtor = exports.getDefaultCtor = function () {\n\treturn defaultCtor;\n};\n\n/**\n* @private\n*/\nvar concatenated = exports.concatenated = [];\n\n/**\n* Creates a singleton of a given [kind]{@glossary kind} with a given\n* definition. **The `name` property will be the instance name of the singleton\n* and must be unique.**\n*\n* ```javascript\n*\tenyo.singleton({\n*\t\tkind: 'enyo.Control',\n*\t\tname: 'app.MySingleton',\n*\t\tpublished: {\n*\t\t\tvalue: 'foo'\n*\t\t},\n*\t\tmakeSomething: function() {\n*\t\t\t//...\n*\t\t}\n*\t});\n*\n*\tapp.MySingleton.makeSomething();\n*\tapp.MySingleton.setValue('bar');\n*```\n*\n* @public\n*/\nexports.singleton = function (conf, context) {\n\t// extract 'name' property (the name of our singleton)\n\tvar name = conf.name;\n\tdelete(conf.name);\n\t// create an unnamed kind and save its constructor's function\n\tvar Kind = kind(conf);\n\tvar inst;\n\t// create the singleton with the previous name and constructor\n\tutils.setPath.call(context || global, name, (inst = new Kind()));\n\treturn inst;\n};\n\n/**\n* @private\n*/\nkind.makeCtor = function () {\n\tvar enyoConstructor = function () {\n\t\tif (!(this instanceof enyoConstructor)) {\n\t\t\tthrow 'enyo.kind: constructor called directly, not using \"new\"';\n\t\t}\n\n\t\t// two-pass instantiation\n\t\tvar result;\n\t\tif (this._constructor) {\n\t\t\t// pure construction\n\t\t\tresult = this._constructor.apply(this, arguments);\n\t\t}\n\t\t// defer initialization until entire constructor chain has finished\n\t\tif (this.constructed) {\n\t\t\t// post-constructor initialization\n\t\t\tthis.constructed.apply(this, arguments);\n\t\t}\n\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t};\n\treturn enyoConstructor;\n};\n\n/**\n* Classes referenced by name may omit this namespace (e.g., \"Button\" instead of \"enyo.Button\")\n*\n* @private\n*/\nkind.defaultNamespace = 'enyo';\n\n/**\n* Feature hooks for the oop system\n*\n* @private\n*/\nkind.features = [];\n\n/**\n* Used internally by several mechanisms to allow safe and normalized handling for extending a\n* [kind's]{@glossary kind} super-methods. It can take a\n* [constructor]{@glossary constructor}, a [prototype]{@glossary Object.prototype}, or an\n* instance.\n*\n* @private\n*/\nkind.extendMethods = function (ctor, props, add) {\n\tvar proto = ctor.prototype || ctor,\n\t\tb = proto.base;\n\tif (!proto.inherited && b) {\n\t\tproto.inherited = kind.inherited;\n\t}\n\t// rename constructor to _constructor to work around IE8/Prototype problems\n\tif (props.hasOwnProperty('constructor')) {\n\t\tprops._constructor = props.constructor;\n\t\tdelete props.constructor;\n\t}\n\t// decorate function properties to support inherited (do this ex post facto so that\n\t// ctor.prototype is known, relies on elements in props being copied by reference)\n\tfor (var n in props) {\n\t\tvar p = props[n];\n\t\tif (isInherited(p)) {\n\t\t\t// ensure that if there isn't actually a super method to call, it won't\n\t\t\t// fail miserably - while this shouldn't happen often, it is a sanity\n\t\t\t// check for mixin-extensions for kinds\n\t\t\tif (add) {\n\t\t\t\tp = proto[n] = p.fn(proto[n] || utils.nop);\n\t\t\t} else {\n\t\t\t\tp = proto[n] = p.fn(b? (b.prototype[n] || utils.nop): utils.nop);\n\t\t\t}\n\t\t}\n\t\tif (utils.isFunction(p)) {\n\t\t\tif (add) {\n\t\t\t\tproto[n] = p;\n\t\t\t\tp.displayName = n + '()';\n\t\t\t} else {\n\t\t\t\tp._inherited = b? b.prototype[n]: null;\n\t\t\t\t// FIXME: we used to need some extra values for inherited, then inherited got cleaner\n\t\t\t\t// but in the meantime we used these values to support logging in Object.\n\t\t\t\t// For now we support this legacy situation, by suppling logging information here.\n\t\t\t\tp.displayName = proto.kindName + '.' + n + '()';\n\t\t\t}\n\t\t}\n\t}\n};\nkind.features.push(kind.extendMethods);\n\n/**\n* Called by {@link enyo.Object} instances attempting to access super-methods\n* of a parent class ([kind]{@glossary kind}) by calling\n* `this.inherited(arguments)` from within a kind method. This can only be done\n* safely when there is known to be a super class with the same method.\n*\n* @private\n*/\nkind.inherited = function (originals, replacements) {\n\t// one-off methods are the fast track\n\tvar target = originals.callee;\n\tvar fn = target._inherited;\n\n\t// regardless of how we got here, just ensure we actually\n\t// have a function to call or else we throw a console\n\t// warning to notify developers they are calling a\n\t// super method that doesn't exist\n\tif ('function' === typeof fn) {\n\t\tvar args = originals;\n\t\tif (replacements) {\n\t\t\t// combine the two arrays, with the replacements taking the first\n\t\t\t// set of arguments, and originals filling up the rest.\n\t\t\targs = [];\n\t\t\tvar i = 0, l = replacements.length;\n\t\t\tfor (; i < l; ++i) {\n\t\t\t\targs[i] = replacements[i];\n\t\t\t}\n\t\t\tl = originals.length;\n\t\t\tfor (; i < l; ++i) {\n\t\t\t\targs[i] = originals[i];\n\t\t\t}\n\t\t}\n\t\treturn fn.apply(this, args);\n\t} else {\n\t\tlogger.warn('enyo.kind.inherited: unable to find requested ' +\n\t\t\t'super-method from -> ' + originals.callee.displayName + ' in ' + this.kindName);\n\t}\n};\n\n// dcl inspired super-inheritance\n\n/**\n* @private\n*/\nvar Inherited = function (fn) {\n\tthis.fn = fn;\n};\n\n/**\n* When defining a method that overrides an existing method in a [kind]{@glossary kind}, you\n* can wrap the definition in this function and it will decorate it appropriately for inheritance\n* to work.\n*\n* The older `this.inherited(arguments)` method still works, but this version results in much\n* faster code and is the only one supported for kind [mixins]{@glossary mixin}.\n*\n* @param {Function} fn - A [function]{@glossary Function} that takes a single\n*   argument (usually named `sup`) and returns a function where\n*   `sup.apply(this, arguments)` is used as a mechanism to make the\n*   super-call.\n* @public\n*/\nexports.inherit = function (fn) {\n\treturn new Inherited(fn);\n};\n\n/**\n* @private\n*/\nvar isInherited = exports.isInherited = function (fn) {\n\treturn fn && (fn instanceof Inherited);\n};\n\n\n//\n// 'statics' feature\n//\nkind.features.push(function(ctor, props) {\n\t// install common statics\n\tif (!ctor.subclass) {\n\t\tctor.subclass = kind.statics.subclass;\n\t}\n\tif (!ctor.extend) {\n\t\tctor.extend = kind.statics.extend;\n\t}\n\t// move props statics to constructor\n\tif (props.statics) {\n\t\tutils.mixin(ctor, props.statics);\n\t\tdelete ctor.prototype.statics;\n\t}\n\t// also support protectedStatics which won't interfere with defer\n\tif (props.protectedStatics) {\n\t\tutils.mixin(ctor, props.protectedStatics);\n\t\tdelete ctor.prototype.protectedStatics;\n\t}\n\t// allow superclass customization\n\tvar base = ctor.prototype.base;\n\twhile (base) {\n\t\tbase.subclass(ctor, props);\n\t\tbase = base.prototype.base;\n\t}\n});\n\n/**\n* @private\n*/\nkind.statics = {\n\n\t/**\n\t* A [kind]{@glossary kind} may set its own `subclass()` method as a\n\t* static method for its [constructor]{@glossary constructor}. Whenever\n\t* it is subclassed, the constructor and properties will be passed through\n\t* this method for special handling of important features.\n\t*\n\t* @param {Function} ctor - The [constructor]{@glossary constructor} of the\n\t*\t[kind]{@glossary kind} being subclassed.\n\t* @param {Object} props - The properties of the kind being subclassed.\n\t* @memberof enyo.kind\n\t* @public\n\t*/\n\tsubclass: function (ctor, props) {},\n\n\t/**\n\t* Allows for extension of the current [kind]{@glossary kind} without\n\t* creating a new kind. This method is available on all\n\t* [constructors]{@glossary constructor}, although calling it on a\n\t* [deferred]{@glossary deferred} constructor will force it to be\n\t* resolved at that time. This method does not re-run the\n\t* {@link enyo.kind.features} against the constructor or instance.\n\t*\n\t* @param {Object|Object[]} props A [hash]{@glossary Object} or [array]{@glossary Array}\n\t*\tof [hashes]{@glossary Object}. Properties will override\n\t*\t[prototype]{@glossary Object.prototype} properties. If a\n\t*\tmethod that is being added already exists, the new method will\n\t*\tsupersede the existing one. The method may call\n\t*\t`this.inherited()` or be wrapped with `kind.inherit()` to call\n\t*\tthe original method (this chains multiple methods tied to a\n\t*\tsingle [kind]{@glossary kind}).\n\t* @param {Object} [target] - The instance to be extended. If this is not specified, then the\n\t*\t[constructor]{@glossary constructor} of the\n\t*\t[object]{@glossary Object} this method is being called on will\n\t*\tbe extended.\n\t* @returns {Object} The constructor of the class, or specific\n\t*\tinstance, that has been extended.\n\t* @memberof enyo.kind\n\t* @public\n\t*/\n\textend: function (props, target) {\n\t\tvar ctor = this\n\t\t\t, exts = utils.isArray(props)? props: [props]\n\t\t\t, proto, fn;\n\n\t\tfn = function (key, value) {\n\t\t\treturn !(typeof value == 'function' || isInherited(value)) && concatenated.indexOf(key) === -1;\n\t\t};\n\n\t\tproto = target || ctor.prototype;\n\t\tfor (var i=0, ext; (ext=exts[i]); ++i) {\n\t\t\tconcatHandler(proto, ext, true);\n\t\t\tkind.extendMethods(proto, ext, true);\n\t\t\tutils.mixin(proto, ext, {filter: fn});\n\t\t}\n\n\t\treturn target || ctor;\n\t}\n};\n\n/**\n* @private\n*/\nvar concatHandler = exports.concatHandler = function (ctor, props, instance) {\n\tvar proto = ctor.prototype || ctor\n\t\t, base = proto.ctor;\n\n\twhile (base) {\n\t\tif (base.concat) base.concat(ctor, props, instance);\n\t\tbase = base.prototype.base;\n\t}\n};\n\n/**\n* Factory for [kinds]{@glossary kind} identified by [strings]{@glossary String}.\n*\n* @private\n*/\nvar kindCtors = exports._kindCtors = {};\n\n/**\n* @private\n*/\nvar constructorForKind = exports.constructorForKind = function (kind) {\n\tif (kind === null) {\n\t\treturn kind;\n\t} else if (kind === undefined) {\n\t\treturn getDefaultCtor();\n\t}\n\telse if (utils.isFunction(kind)) {\n\t\treturn kind;\n\t}\n\n\t// use memoized constructor if available...\n\tvar ctor = kindCtors[kind];\n\tif (ctor) {\n\t\treturn ctor;\n\t}\n\t// otherwise look it up and memoize what we find\n\t//\n\t// if kind is an object in enyo, say \"Control\", then ctor = enyo[\"Control\"]\n\t// if kind is a path under enyo, say \"Heritage.Button\", then ctor = enyo[\"Heritage.Button\"] || enyo.Heritage.Button\n\t// if kind is a fully qualified path, say \"enyo.Heritage.Button\", then ctor = enyo[\"enyo.Heritage.Button\"] || enyo.enyo.Heritage.Button || enyo.Heritage.Button\n\t//\n\t// Note that kind \"Foo\" will resolve to enyo.Foo before resolving to global \"Foo\".\n\t// This is important so \"Image\" will map to built-in Image object, instead of enyo.Image control.\n\tctor = Theme[kind] || (global.enyo && global.enyo[kind]) || utils.getPath.call(global, 'enyo.' + kind) || global[kind] || utils.getPath.call(global, kind);\n\n\t// If what we found at this namespace isn't a function, it's definitely not a kind constructor\n\tif (!utils.isFunction(ctor)) {\n\t\tthrow '[' + kind + '] is not the name of a valid kind.';\n\t}\n\tkindCtors[kind] = ctor;\n\treturn ctor;\n};\n\n/**\n* Namespace for current theme (`enyo.Theme.Button` references the Button specialization for the\n* current theme).\n*\n* @private\n*/\nvar Theme = exports.Theme = {};\n\n/**\n* @private\n*/\nexports.registerTheme = function (ns) {\n\tutils.mixin(Theme, ns);\n};\n\n/**\n* @private\n*/\nexports.createFromKind = function (nom, param) {\n\tvar Ctor = nom && constructorForKind(nom);\n\tif (Ctor) {\n\t\treturn new Ctor(param);\n\t}\n};","require('../../enyo');\n\nvar kind = require('./kind');\n\n/**\n* An internally-used support {@glossary mixin} that is applied to all\n* [components]{@link enyo.Component} of an {@link enyo.Application} instance\n* (and to their components, recursively). This mixin adds an `app` property to\n* each component--a local reference to the `enyo.Application` instance that\n* the component belongs to.\n* \n* @mixin enyo.ApplicationSupport\n* @protected\n*/\nmodule.exports = {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'ApplicationSupport',\n\n\t/**\n\t* @private\n\t*/\n\tadjustComponentProps: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tprops.app = props.app || this.app;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// release the reference to the application\n\t\t\tthis.app = null;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t})\n\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\n/**\n* All {@link enyo.Binding} instances are stored in this list and may be retrieved via the\n* {@link enyo.Binding.find} method using an {@link enyo.Binding#id} identifier.\n*\n* @name enyo.bindings\n* @public\n*/\nvar bindings = [];\n\nvar DIRTY_FROM = 0x01\n\t, DIRTY_TO = 0x02;\n\n/**\n* Used to determine if an {@link enyo.Binding} is actually ready.\n*\n* @private\n*/\nfunction ready (binding) {\n\tvar rdy = binding.ready;\n\t\n\tif (!rdy) {\n\t\t\n\t\tvar from = binding.from || '',\n\t\t\tto = binding.to || '',\n\t\t\tsource = binding.source,\n\t\t\ttarget = binding.target,\n\t\t\towner = binding.owner,\n\t\t\ttwoWay = !binding.oneWay,\n\t\t\ttoTarget;\n\t\t\n\t\tif (typeof from != 'string') from = '';\n\t\tif (typeof to != 'string') to = '';\n\t\t\n\t\tif (!source) {\n\t\t\t\n\t\t\t// the worst case scenario here is for backward compatibility purposes\n\t\t\t// we have to at least be able to derive the source via the from string\n\t\t\tif (from[0] == '^') {\n\t\t\t\t\n\t\t\t\t// this means we're reaching for a global\n\t\t\t\tvar fromParts = from.split('.');\n\t\t\t\tfrom = fromParts.pop();\n\t\t\t\tsource = utils.getPath.call(global, fromParts.join('.').slice(1));\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\tsource = owner;\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\tif (!target) {\n\t\t\t\n\t\t\t// same worst case as above, for backwards compatibility purposes\n\t\t\t// we have to at least be able to derive the target via the to string\n\t\t\tif (to[0] == '^') {\n\t\t\t\t\n\t\t\t\t// this means we're reaching for a global\n\t\t\t\tvar toParts = to.split('.');\n\t\t\t\tto = toParts.pop();\n\t\t\t\ttarget = utils.getPath.call(global, toParts.join('.').slice(1));\n\t\t\t} else {\n\t\t\t\ttarget = owner;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// we do this so we don't overwrite the originals in case we need to reset later\n\t\tbinding._target = target;\n\t\tbinding._source = source;\n\t\tbinding._from = from[0] == '.'? from.slice(1): from;\n\t\tbinding._to = to[0] == '.'? to.slice(1): to;\n\t\t\n\t\tif (!twoWay) {\n\t\t\ttoTarget = binding._to.split('.');\n\t\t\tif (toTarget.length > 2) {\n\t\t\t\ttoTarget.pop();\n\t\t\t\tbinding._toTarget = toTarget.join('.');\n\t\t\t}\n\t\t}\n\t\t\n\t\t// now our sanitization\n\t\trdy = !! (\n\t\t\t(source && (typeof source == 'object')) &&\n\t\t\t(target && (typeof target == 'object')) &&\n\t\t\t(from) &&\n\t\t\t(to)\n\t\t);\n\t}\n\t\n\t/*jshint -W093 */\n\treturn (binding.ready = rdy);\n\t/*jshint +W093 */\n}\n\n/**\n* The details for an {@link enyo.Binding#transform} [function]{@glossary Function}, \n* including the available parameters and how they can be used.\n* \n* @callback enyo.Binding~Transform\n* @param {*} value - The value being synchronized.\n* @param {Number} direction - The direction of synchronization; will be either\n* \t1 (source value has changed and will be written to target) or 2 (target\n* \tvalue has changed and will be written to source).\n* @param {Object} binding - A reference to the associated [binding]{@link enyo.Binding}. In cases \n* \twhere the binding should be interrupted and not propagate the synchronization at all, call\n* \tthe [stop()]{@link enyo.Binding#stop} method on the passed-in binding reference.\n*/\n\n/**\n* {@link enyo.Binding} is a mechanism used to keep properties synchronized. A \n* binding may be used to link two properties on different\n* [objects]{@glossary Object}, or even two properties on the same object.\n* Once a binding has been established, it will wait for change notifications;\n* when a notification arrives, the binding will synchronize the value between\n* the two ends. Note that bindings may be either\n* [one-way]{@link enyo.Binding#oneWay} (the default) or\n* [two-way]{@link enyo.Binding#oneWay}.\n* \n* Usually, you will not need to create Binding objects arbitrarily, but will\n* instead rely on the public [BindingSupport API]{@link enyo.BindingSupport},\n* which is applied to [enyo.Object]{@link enyo.Object} and so is available on\n* all of its [subkinds]{@glossary subkind}.\n* \n* @class enyo.Binding\n* @public\n*/\nvar Binding = module.exports = kind(\n\t/** @lends enyo.Binding.prototype */ {\n\t\n\tname: 'enyo.Binding',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* If a [binding]{@link enyo.Binding} is one-way, this flag should be `true` (the default). \n\t* If this flag is set to `false`, the binding will be two-way.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\toneWay: true,\n\t\n\t/**\n\t* If the [binding]{@link enyo.Binding} was able to resolve both ends (i.e., its \n\t* [source]{@link enyo.Binding#source} and [target]{@link enyo.Binding#target} \n\t* [objects]{@glossary Object}), this value will be `true`. Setting this manually will\n\t* have undesirable effects.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tconnected: false,\n\t\n\t/**\n\t* This property is used extensively for various purposes within a\n\t* [binding]{@link enyo.Binding}. One primary purpose is to serve as a root\n\t* [object]{@glossary Object} from which to\tsearch for the binding's ends (the\n\t* [source]{@link enyo.Binding#source} and/or [target]{@link enyo.Binding#target}).\n\t* If the owner created the binding, it will also be responsible for destroying \n\t* it (automatically).\n\t*\n\t* @type {enyo.Object}\n\t* @default null\n\t* @public\n\t*/\n\towner: null,\n\t\n\t/**\n\t* By default, a [binding]{@link enyo.Binding} will attempt to connect to both ends \n\t* ([source]{@link enyo.Binding#source} and [target]{@link enyo.Binding#target}). If this \n\t* process should be deferred, set this flag to `false`.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tautoConnect: true,\n\t\n\t/**\n\t* By default, a [binding]{@link enyo.Binding} will attempt to synchronize its values from \n\t* its [source]{@link enyo.Binding#source} to its [target]{@link enyo.Binding#target}. If \n\t* this process should be deferred, set this flag to `false`.\n\t* \n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tautoSync: true,\n\t\n\t/**\n\t* Set this only to a reference for an [object]{@glossary Object} to use\n\t* as the source for the [binding]{@link enyo.Binding}. If this is not a\n\t* [bindable]{@link enyo.BindingSupport} object, the source will be derived\n\t* from the [from]{@link enyo.Binding#from} property during initialization.\n\t* \n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tsource: null,\n\t\n\t/**\n\t* Set this only to a reference for an [object]{@glossary Object} to use\n\t* as the target for the [binding]{@link enyo.Binding}. If this is not a\n\t* [bindable]{@link enyo.BindingSupport} object, the target will will be\n\t* derived from the [to]{@link enyo.Binding#to} property during initialization.\n\t* \n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\ttarget: null,\n\t\n\t/**\n\t* A path in which the property of the [source]{@link enyo.Binding#source} to\n\t* bind from may be found. If the source is explicitly provided and the path\n\t* is relative (i.e., it begins with a `\".\"`), it is relative to the source;\n\t* otherwise, it is relative to the [owner]{@link enyo.Binding#owner} of the\n\t* [binding]{@link enyo.Binding}. To have a binding be evaluated from the\n\t* global scope, prefix the path with a `\"^\"`. If the source and the `\"^\"`\n\t* are used in tandem, the `\"^\"` will be ignored and the path will be assumed\n\t* to be relative to the provided source.\n\t* \n\t* @type {String}\n\t* @default null\n\t* @public\n\t*/\n\tfrom: null,\n\t\n\t/**\n\t* The `dirty` property represents the changed value state of both the property designated by\n\t* the [from]{@link enyo.Binding#from} path and the property designated by the \n\t* [to]{@link enyo.Binding#to} path.\n\t*\n\t* @type {Number}\n\t* @default enyo.Binding.DIRTY_FROM\n\t* @public\n\t*/\n\tdirty: DIRTY_FROM,\n\t\n\t/**\n\t* A path in which the property of the [target]{@link enyo.Binding#target} to\n\t* bind from may be found. If the target is explicitly provided and the path\n\t* is relative (i.e., it begins with a `\".\"`), it is relative to the target;\n\t* otherwise, it is relative to the owner of the [binding]{@link enyo.Binding}.\n\t* To have a binding be evaluated from the global scope, prefix the path with\n\t* a `\"^\"`. If the target and the `\"^\"` are used in tandem, the `\"^\"` will be\n\t* ignored and the path will be assumed to be relative to the provided target.\n\t* \n\t* @type {String}\n\t* @default null\n\t* @public\n\t*/\n\tto: null,\n\n\t/**\n\t* Set this to a [function]{@glossary Function} or the name of a method on\n\t* the [owner]{@link enyo.Binding#owner} of this [binding]{@link enyo.Binding}.\n\t* The transform is used to programmatically modify the value being synchronized.\n\t* See {@link enyo.Binding~Transform} for detailed information on the parameters\n\t* that are available to `transform`.\n\t* \n\t* @type {enyo.Binding~Transform}\n\t* @default null\n\t* @public\n\t*/\n\ttransform: null,\n\t\n\t/**\n\t* Indicates whether the [binding]{@link enyo.Binding} is currently connected.\n\t*\n\t* @returns {Boolean} `true` if connected; otherwise, `false`.\n\t* @public\n\t*/\n\tisConnected: function () {\n\t\tvar from = this._from,\n\t\t\tto = this.oneWay ? (this._toTarget || this._to) : this._to,\n\t\t\tsource = this._source,\n\t\t\ttarget = this._target,\n\t\t\ttoChain,\n\t\t\tfromChain;\n\t\t\t\n\t\tif (from && to && source && target) {\n\t\t\tif (!this.oneWay || this._toTarget) toChain = target.getChains()[to];\n\t\t\tfromChain = source.getChains()[from];\n\t\t\t\n\t\t\treturn this.connected\n\t\t\t\t&& (fromChain ? fromChain.isConnected() : true)\n\t\t\t\t&& (toChain ? toChain.isConnected() : true);\n\t\t}\n\t\t\n\t\treturn false;\n\t},\n\t\n\t/**\n\t* Causes a single propagation attempt to fail. Typically not called outside\n\t* the scope of a [transform]{@link enyo.Binding#transform}.\n\t* \n\t* @public\n\t*/\n\tstop: function () {\n\t\tthis._stop = true;\n\t},\n\t\n\t/**\n\t* Indicates whether the [binding]{@link enyo.Binding} is actually ready.\n\t* \n\t* @returns {Boolean} `true` if ready; otherwise, `false`.\n\t* @public\n\t*/\n\tisReady: function () {\n\t\treturn this.ready || ready(this);\n\t},\n\t\n\t/**\n\t* Resets all properties to their original state.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\treset: function () {\n\t\tthis.disconnect();\n\t\tthis.ready = null;\n\t\tthis._source = this._target = this._to = this._from = this._toTarget = null;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Rebuilds the entire [binding]{@link enyo.Binding}. Will synchronize if it is able to \n\t* connect and the [autoSync]{@link enyo.Binding#autoSync} flag is `true`.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trebuild: function () {\n\t\treturn this.reset().connect();\n\t},\n\t\n\t/**\n\t* Connects the ends (i.e., the [source]{@link enyo.Binding#source} and\n\t* [target]{@link enyo.Binding#target}) of the [binding]{@link enyo.Binding}. While you\n\t* typically won't need to call this method, it is safe to call even when the ends are\n\t* already established. Note that if one or both of the ends does become connected and the\n\t* [autoSync]{@link enyo.Binding#autoSync} flag is `true`, the ends will automatically be\n\t* synchronized.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tconnect: function () {\n\t\tif (!this.isConnected()) {\n\t\t\tif (this.isReady()) {\n\t\t\t\tthis._source.observe(this._from, this._sourceChanged, this, {priority: true});\n\t\t\t\t\n\t\t\t\t// for two-way bindings we register to observe changes\n\t\t\t\t// from the target\n\t\t\t\tif (!this.oneWay) this._target.observe(this._to, this._targetChanged, this);\n\t\t\t\telse if (this._toTarget) {\n\t\t\t\t\tthis._target.observe(this._toTarget, this._toTargetChanged, this, {priority: true});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// we flag it as having been connected\n\t\t\t\tthis.connected = true;\n\t\t\t\tif (this.isConnected() && this.autoSync) this.sync(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Disconnects from the ends (i.e., the [source]{@link enyo.Binding#source} and \n\t* [target]{@link enyo.Binding#target}) if a connection exists at either end. This method \n\t* will most likely not need to be called directly.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdisconnect: function () {\n\t\tif (this.isConnected()) {\n\t\t\tthis._source.unobserve(this._from, this._sourceChanged, this);\n\t\t\t\n\t\t\t// for two-way bindings we unregister the observer from\n\t\t\t// the target as well\n\t\t\tif (!this.oneWay) this._target.unobserve(this._to, this._targetChanged, this);\n\t\t\telse if (this._toTarget) {\n\t\t\t\tthis._target.unobserve(this._toTarget, this._toTargetChanged, this);\n\t\t\t}\n\t\t\t\n\t\t\tthis.connected = false;\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Synchronizes values from the [source]{@link enyo.Binding#source} to the\n\t* [target]{@link enyo.Binding#target}. This usually will not need to be called manually.\n\t* [Two-way bindings]{@link enyo.Binding#oneWay} will automatically synchronize from the\n\t* target end once they are connected.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsync: function (force) {\n\t\tvar source = this._source,\n\t\t\ttarget = this._target,\n\t\t\tfrom = this._from,\n\t\t\tto = this._to,\n\t\t\txform = this.getTransform(),\n\t\t\tval;\n\t\t\n\t\tif (this.isReady() && this.isConnected()) {\n\t\t\t\t\n\t\t\tswitch (this.dirty || (force && DIRTY_FROM)) {\n\t\t\tcase DIRTY_TO:\n\t\t\t\tval = target.get(to);\n\t\t\t\tif (xform) val = xform.call(this.owner || this, val, DIRTY_TO, this);\n\t\t\t\tif (!this._stop) source.set(from, val, {create: false});\n\t\t\t\tbreak;\n\t\t\tcase DIRTY_FROM:\n\t\t\t\t\n\t\t\t// @TODO: This should never need to happen but is here just in case\n\t\t\t// it is ever arbitrarily called not having been dirty?\n\t\t\t// default:\n\t\t\t\tval = source.get(from);\n\t\t\t\tif (xform) val = xform.call(this.owner || this, val, DIRTY_FROM, this);\n\t\t\t\tif (!this._stop) target.set(to, val, {create: false});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.dirty = null;\n\t\t\tthis._stop = null;\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Releases all of the [binding's]{@link enyo.Binding} parts and unregisters its \n\t* [observers]{@link enyo.ObserverSupport}. Typically, this method will not need to be called \n\t* directly unless the binding was created without an [owner]{@link enyo.Binding#owner}.\n\t* \n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroy: function () {\n\t\tvar owner = this.owner,\n\t\t\tidx;\n\t\t\n\t\tthis.disconnect();\n\t\tthis.owner = null;\n\t\tthis.source = this._source = null;\n\t\tthis.target = this._target = null;\n\t\tthis.ready = null;\n\t\tthis.destroyed = true;\n\t\t\n\t\t// @todo: remove me or postpone operation?\n\t\tidx = bindings.indexOf(this);\n\t\tif (idx > -1) bindings.splice(idx, 1);\n\t\t\n\t\tif (owner && !owner.destroyed) owner.removeBinding(this);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgetTransform: function () {\n\t\treturn this._didInitTransform ? this.transform : (function (bnd) {\n\t\t\tbnd._didInitTransform = true;\n\t\t\t\n\t\t\tvar xform = bnd.transform,\n\t\t\t\towner = bnd.owner,\n\t\t\t\txformOwner = owner && owner.bindingTransformOwner;\n\t\t\t\n\t\t\tif (xform) {\n\t\t\t\tif (typeof xform == 'string') {\n\t\t\t\t\tif (xformOwner && xformOwner[xform]) {\n\t\t\t\t\t\txform = xformOwner[xform];\n\t\t\t\t\t} else if (owner && owner[xform]) {\n\t\t\t\t\t\txform = owner[xform];\n\t\t\t\t\t} else {\n\t\t\t\t\t\txform = utils.getPath.call(global, xform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t/*jshint -W093 */\n\t\t\t\treturn (bnd.transform = (typeof xform == 'function' ? xform : null));\n\t\t\t\t/*jshint +W093 */\n\t\t\t}\n\t\t})(this);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (props) {\n\t\tbindings.push(this);\n\t\t\n\t\tif (props) utils.mixin(this, props);\n\t\t\n\t\tif (!this.euid) this.euid = utils.uid('b');\n\t\tif (this.autoConnect) this.connect();\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_sourceChanged: function (was, is, path) {\n\t\t// @TODO: Should it...would it benefit from using these passed in values?\n\t\tthis.dirty = this.dirty == DIRTY_TO ? null : DIRTY_FROM;\n\t\treturn this.dirty == DIRTY_FROM && this.sync();\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_targetChanged: function (was, is, path) {\n\t\t// @TODO: Same question as above, it seems useful but would it affect computed\n\t\t// properties or stale values?\n\t\tthis.dirty = this.dirty == DIRTY_FROM ? null : DIRTY_TO;\n\t\treturn this.dirty == DIRTY_TO && this.sync();\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_toTargetChanged: function (was, is, path) {\n\t\tthis.dirty = DIRTY_FROM;\n\t\tthis.reset().connect();\n\t}\n});\n\n/**\n* Retrieves a [binding]{@link enyo.Binding} by its global id.\n*\n* @param {String} euid - The [Enyo global id]{@glossary EUID} by which to retrieve a \n*\t[binding]{@link enyo.Binding}.\n* @returns {enyo.Binding|undefined} A reference to the binding if the id \n*\tis found; otherwise, it will return [undefined]{@glossary undefined}.\n* \n* @static\n* @public\n*/\nBinding.find = function (euid) {\n\treturn bindings.find(function (ln) {\n\t\treturn ln.euid == euid;\n\t});\n};\n\nBinding.bindings = bindings;\n\n/**\n* Possible value of the [dirty]{@link enyo.Binding#dirty} property, indicating that the value \n* of the [binding source]{@link enyo.Binding#source} has changed.\n* \n* @static\n* @public\nBindingB.DindingIRTY_FROM = DIRTY_FROM;\n\n/**\n* Possible value of the [dirty]{@link enyo.Binding#dirty} property, indicating that the value\n* of the [binding target]{@link enyo.Binding#target} has changed.\n* \n* @static\n* @public\n*/\nBinding.DIRTY_TO = DIRTY_TO;\n\n/**\n* The default [kind]{@glossary kind} that provides [binding]{@link enyo.Binding} \n* functionality.\n* \n* static\n* public\n*/\nBinding.defaultBindingKind = Binding;","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\n/**\n* An internally-used {@glossary mixin} applied to {@link enyo.Component}\n* instances to better support [bindings]{@link enyo.Binding}.\n*\n* @mixin enyo.ComponentBindingSupport\n* @protected\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'ComponentBindingSupport',\n\t\n\t/**\n\t* @private\n\t*/\n\tadjustComponentProps: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tprops.bindingTransformOwner || (props.bindingTransformOwner = this.getInstanceOwner());\n\t\t};\n\t})\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar extend = kind.statics.extend;\n\t\nkind.concatenated.push('computed');\n\n/**\n* @private\n*/\nfunction getComputedValue (obj, path) {\n\tvar cache = obj._getComputedCache(path)\n\t\t, isCached = obj._isComputedCached(path);\n\t\n\t// in the end, for efficiency and completeness in other situations\n\t// it is better to know the returned value of all computed properties\n\t// but in cases where they are set as cached we will sometimes use\n\t// that value\n\tif (cache.dirty || cache.dirty === undefined) {\n\t\tisCached && (cache.dirty = false);\n\t\tcache.previous = cache.value;\n\t\tcache.value = obj[path]();\n\t}\n\t\n\treturn cache.value;\n}\n\n/**\n* @private\n*/\nfunction queueComputed (obj, path) {\n\tvar queue = obj._computedQueue || (obj._computedQueue = [])\n\t\t, deps = obj._computedDependencies[path];\n\t\t\n\tif (deps) {\n\t\tfor (var i=0, dep; (dep=deps[i]); ++i) {\n\t\t\tif (!queue.length || -1 == queue.indexOf(dep)) queue.push(dep);\n\t\t}\n\t}\n}\n\n/**\n* @private\n*/\nfunction flushComputed (obj) {\n\tvar queue = obj._computedQueue;\n\tobj._computedQueue = null;\n\tif (queue && obj.isObserving()) {\n\t\tfor (var i=0, ln; (ln=queue[i]); ++i) {\n\t\t\tobj.notify(ln, obj._getComputedCache(ln).value, getComputedValue(obj, ln));\n\t\t}\n\t}\n}\n\n/**\n* A {@glossary mixin} that adds API methods to support\n* [computed properties]{@glossary \"computed property\"}. Unlike other support mixins,\n* this mixin does not need to be explicitly included by a [kind]{@glossary kind}. If the\n* `computed` [array]{@glossary Array} is found in a kind definition, this mixin will\n* automatically be included.\n*\n* @mixin enyo.ComputedSupport\n* @public\n*/\nvar ComputedSupport = module.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'ComputedSupport',\n\t\n\t/**\n\t* @private\n\t*/\n\t_computedRecursion: 0,\n\t\n\t/**\n\t* Primarily intended for internal use, this method determines whether the\n\t* given path is a known [computed property]{@glossary \"computed property\"}.\n\t*\n\t* @param {String} path - The property or path to test.\n\t* @returns {Boolean} Whether or not the `path` is a\n\t*\t[computed property]{@glossary \"computed property\"}.\n\t* @public\n\t*/\n\tisComputed: function (path) {\n\t\t// if it exists it will be explicitly one of these cases and it is cheaper than hasOwnProperty\n\t\treturn this._computed && (this._computed[path] === true || this._computed[path] === false);\n\t},\n\t\n\t/**\n\t* Primarily intended for internal use, this method determines whether the\n\t* given path is a known dependency of a\n\t* [computed property]{@glossary \"computed property\"}.\n\t*\n\t* @param {String} path - The property or path to test.\n\t* @returns {Boolean} Whether or not the `path` is a dependency of a\n\t*\t[computed property]{@glossary \"computed property\"}.\n\t* @public\n\t*/\n\tisComputedDependency: function (path) {\n\t\treturn !! (this._computedDependencies? this._computedDependencies[path]: false);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tget: kind.inherit(function (sup) {\n\t\treturn function (path) {\n\t\t\treturn this.isComputed(path)? getComputedValue(this, path): sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tset: kind.inherit(function (sup) {\n\t\treturn function (path) {\n\t\t\t// we do not accept parameters for computed properties\n\t\t\treturn this.isComputed(path)? this: sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tnotifyObservers: function () {\n\t\treturn this.notify.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tnotify: kind.inherit(function (sup) {\n\t\treturn function (path, was, is) {\n\t\t\tthis.isComputedDependency(path) && queueComputed(this, path);\n\t\t\tthis._computedRecursion++;\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis._computedRecursion--;\n\t\t\tthis._computedQueue && this._computedRecursion === 0 && flushComputed(this);\n\t\t\treturn this;\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\t_isComputedCached: function (path) {\n\t\treturn this._computed[path];\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_getComputedCache: function (path) {\n\t\tvar cache = this._computedCache || (this._computedCache = {});\n\t\treturn cache[path] || (cache[path] = {});\n\t}\n};\n\n\n/**\n* Hijack the original so we can add additional default behavior.\n*/\nvar sup = kind.concatHandler;\n\n// @NOTE: It seems like a lot of work but it really won't happen that much and the more\n// we push to kind-time the better for initialization time\n\n/**\n* @private\n*/\nkind.concatHandler = function (ctor, props, instance) {\n\n\tsup.call(this, ctor, props, instance);\n\n\t// only matters if there are computed properties to manage\n\tif (props.computed) {\n\t\t\n\t\tvar proto = ctor.prototype || ctor\n\t\t\t, computed = proto._computed? Object.create(proto._computed): {}\n\t\t\t, dependencies = proto._computedDependencies? Object.create(proto._computedDependencies): {};\n\t\t\n\t\t// if it hasn't already been applied we need to ensure that the prototype will\n\t\t// actually have the computed support mixin present, it will not apply it more\n\t\t// than once to the prototype\n\t\textend(ComputedSupport, proto);\n\t\n\t\t// @NOTE: This is the handling of the original syntax provided for computed properties in 2.3.ish...\n\t\t// All we do here is convert it to a structure that can be used for the other scenario and preferred\n\t\t// computed declarations format\n\t\tif (!props.computed || !(props.computed instanceof Array)) {\n\t\t\t(function () {\n\t\t\t\tvar tmp = [], deps, name, conf;\n\t\t\t\t// here is the slow iteration over the properties...\n\t\t\t\tfor (name in props.computed) {\n\t\t\t\t\t// points to the dependencies of the computed method\n\t\t\t\t\tdeps = props.computed[name];\n\t\t\t\t\t/*jshint -W083 */\n\t\t\t\t\tconf = deps && deps.find(function (ln) {\n\t\t\t\t\t\t// we deliberately remove the entry here and forcibly return true to break\n\t\t\t\t\t\treturn typeof ln == 'object'? (utils.remove(deps, ln) || true): false;\n\t\t\t\t\t});\n\t\t\t\t\t/*jshint +W083 */\n\t\t\t\t\t// create a single entry now for the method/computed with all dependencies\n\t\t\t\t\ttmp.push({method: name, path: deps, cached: conf? conf.cached: null});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// note that we only do this one so even for a mixin that is evaluated several\n\t\t\t\t// times this would only happen once\n\t\t\t\tprops.computed = tmp;\n\t\t\t}());\n\t\t}\n\t\t\n\t\tvar addDependency = function (path, dep) {\n\t\t\t// its really an inverse look at the original\n\t\t\tvar deps;\n\t\t\t\n\t\t\tif (dependencies[path] && !dependencies.hasOwnProperty(path)) dependencies[path] = dependencies[path].slice();\n\t\t\tdeps = dependencies[path] || (dependencies[path] = []);\n\t\t\tdeps.push(dep);\n\t\t};\n\t\t\n\t\t// now we handle the new computed properties the way we intended to\n\t\tfor (var i=0, ln; (ln=props.computed[i]); ++i) {\n\t\t\t// if the entry already exists we are merely updating whether or not it is\n\t\t\t// now cached\n\t\t\tcomputed[ln.method] = !! ln.cached;\n\t\t\t// we must now look to add an entry for any given dependencies and map them\n\t\t\t// back to the computed property they will trigger\n\t\t\t/*jshint -W083 */\n\t\t\tif (ln.path && ln.path instanceof Array) ln.path.forEach(function (dep) { addDependency(dep, ln.method); });\n\t\t\t/*jshint +W083 */\n\t\t\telse if (ln.path) addDependency(ln.path, ln.method);\n\t\t}\n\t\t\n\t\t// arg, free the key from the properties so it won't be applied later...\n\t\t// delete props.computed;\n\t\t// make sure to reassign the correct items to the prototype\n\t\tproto._computed = computed;\n\t\tproto._computedDependencies = dependencies;\n\t}\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\n/**\n* An abstract linked-list node.\n*\n* @class enyo.LinkedListNode\n* @private\n*/\nmodule.exports = kind(\n\t/** @lends enyo.LinkedListNode.prototype */ {\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* @private\n\t*/\n\tprev: null,\n\t\n\t/**\n\t* @private\n\t*/\n\tnext: null,\n\t\n\t/**\n\t* @private\n\t*/\n\tcopy: function () {\n\t\tvar cpy = new this.ctor();\n\t\tcpy.prev = this.prev;\n\t\tcpy.next = this.next;\n\t\treturn cpy;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (props) {\n\t\tprops && utils.mixin(this, props);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\t// clear reference to previous node\n\t\tthis.prev = null;\n\t\t\n\t\t// if we have a reference to our next node\n\t\t// we continue down the chain\n\t\tthis.next && this.next.destroy();\n\t\t\n\t\t// clear our reference to the next node\n\t\tthis.next = null;\n\t}\n});","require('../../enyo');\n\n\nvar\n\tutils = require('./utils'),\n\tkind = require('./kind'),\n\tlogger = require('./logger');\n\nkind.concatenated.push('mixins');\n\nvar sup = kind.statics.extend;\n\n/**\n* @private\n*/\nvar extend = kind.statics.extend = function extend (args, target) {\n\tif (utils.isArray(args)) return utils.forEach(args, function (ln) { extend.call(this, ln, target); }, this);\n\tif (typeof args == 'string') apply(target || this.prototype, args);\n\telse {\n\t\tif (args.mixins) feature(target || this, args);\n\t\n\t\t// this allows for mixins to apply mixins which...is less than ideal but possible\n\t\tif (args.name) apply(target || this.prototype, args);\n\t\telse sup.apply(this, arguments);\n\t}\n};\n\n/**\n* Applies, with safeguards, a given mixin to an object.\n*\n* @private\n*/\nfunction apply (proto, props) {\n\tvar applied = proto._mixins? (proto._mixins = proto._mixins.slice()): (proto._mixins = [])\n\t\t, name = utils.isString(props)? props: props.name\n\t\t, idx = utils.indexOf(name, applied);\n\tif (idx < 0) {\n\t\tname == props && (props = utils.getPath(name));\n\t\t// if we could not resolve the requested mixin (should never happen)\n\t\t// we throw a simple little error\n\t\t// @TODO: Normalize error format\n\t\t!props && logger.error('Could not find the mixin ' + name);\n\t\t\n\t\t// it should be noted that this ensures it won't recursively re-add the same mixin but\n\t\t// since it is possible for mixins to apply mixins the names will be out of order\n\t\t// this name is pushed on but the nested mixins are applied before this one\n\t\tname && applied.push(name);\n\t\t\n\t\tprops = utils.clone(props);\n\t\t\n\t\t// we need to temporarily move the constructor if it has one so it\n\t\t// will override the correct method - this is a one-time permanent\n\t\t// runtime operation so subsequent additions of the mixin don't require\n\t\t// it again\n\t\tif (props.hasOwnProperty('constructor')) {\n\t\t\tprops._constructor = props.constructor;\n\t\t\tdelete props.constructor;\n\t\t}\n\t\t\n\t\tdelete props.name;\n\t\textend(props, proto);\n\t\t\n\t\t// now put it all back the way it was\n\t\tprops.name = name;\n\t}\n}\n\n/**\n* @private\n*/\nfunction feature (ctor, props) {\n\tif (props.mixins) {\n\t\tvar proto = ctor.prototype || ctor\n\t\t\t, mixins = props.mixins;\n\t\t\n\t\t// delete props.mixins;\n\t\t// delete proto.mixins;\n\t\t\n\t\tproto._mixins && (proto._mixins = proto._mixins.slice());\n\t\tutils.forEach(mixins, function (ln) { apply(proto, ln); });\n\t}\n}\n\nkind.features.push(feature);\n\n/**\n* An internally-used support {@glossary mixin} that adds API methods to aid in\n* using and applying mixins to [kinds]{@glossary kind}.\n*\n* @mixin enyo.MixinSupport\n* @protected\n*/\nmodule.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'MixinSupport',\n\t\n\t/**\n\t* Extends the instance with the given properties.\n\t*\n\t* @param {Object} props - The property [hash]{@glossary Object} from which to extend\n\t*\tthe callee.\n\t*/\n\textend: function (props) {\n\t\tprops && apply(this, props);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\timportProps: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tprops && props.mixins && feature(this, props);\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t})\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tlogger = require('./logger');\n\n/**\n* All of the known, instanced [sources]{@link enyo.Source}, by name.\n*\n* @name enyo~sources\n* @type {Object}\n* @readonly\n*/\nvar sources = {};\n\n/**\n* This is an abstract base class. A [source]{@link enyo.Source} is a communication\n* layer used by data layer [kinds]{@glossary kind} to retrieve and persist data and\n* application state via its abstract API methods.\n*\n* @class enyo.Source\n* @public\n*/\nvar Source = module.exports = kind(\n\t/** @lends enyo.Source.prototype */ {\n\t\n\tname: 'enyo.Source',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* When initialized, the source should be passed properties to set on itself.\n\t* These properties should include the name by which it will be referenced in\n\t* the application.\n\t*\n\t* @param {Object} [props] - The properties to set on itself.\n\t* @public\n\t*/\n\tconstructor: function (props) {\n\t\tif (props) this.importProps(props);\n\t\t// automatic coersion of name removing prefix\n\t\tthis.name || (this.name = this.kindName.replace(/^(.*)\\./, \"\"));\n\t\t// now add to the global registry of sources\n\t\tsources[this.name] = this;\n\t},\n\t\n\t/**\n\t* Overload this method to handle retrieval of data. This method should accept an options\n\t* [hash]{@glossary Object} with additional configuration properties, including `success`\n\t* and `error` callbacks to handle the result.\n\t*\n\t* @virtual\n\t* @param {(enyo.Model|enyo.Collection)} model The [model]{@link enyo.Model} or\n\t*\t[collection]{@link enyo.Collection} to be retrieved.\n\t* @param {Object} opts - The configuration options [hash]{@glossary Object}, including\n\t*\t`success` and `error` callbacks.\n\t*/\n\tfetch: function (model, opts) {\n\t\t//\n\t},\n\t\n\t/**\n\t* Overload this method to handle persisting of data. This method should accept an options\n\t* [hash]{@glossary Object} with additional configuration properties, including `success`\n\t* and `error` callbacks to handle the result.\n\t*\n\t* @virtual\n\t* @param {(enyo.Model|enyo.Collection)} model The [model]{@link enyo.Model} or\n\t*\t[collection]{@link enyo.Collection} to be persisted.\n\t* @param {Object} opts - The configuration options [hash]{@glossary Object}, including\n\t*\t`success` and `error` callback.\n\t*/\n\tcommit: function (model, opts) {\n\t\t//\n\t},\n\t\n\t/**\n\t* Overload this method to handle deletion of data. This method should accept an options\n\t* [hash]{@glossary Object} with additional configuration properties, including `success`\n\t* and `error` callbacks to handle the result. If called without parameters, it will\n\t* instead destroy itself and be removed from [enyo.sources]{@link enyo~sources}, rendering\n\t* itself unavailable for further operations.\n\t*\n\t* @param {(enyo.Model|enyo.Collection)} model The [model]{@link enyo.Model} or\n\t*\t[collection]{@link enyo.Collection} to be deleted.\n\t* @param {Object} opts - The configuration options [hash]{@glossary Object}, including\n\t*\t`success` and `error` callbacks.\n\t*/\n\tdestroy: function (model, opts) {\n\t\t\n\t\t// if called with no parameters we actually just breakdown the source and remove\n\t\t// it as being available\n\t\tif (!arguments.length) {\n\t\t\tsources[this.name] = null;\n\t\t\tthis.name = null;\n\t\t}\n\t},\n\t\n\t/**\n\t* Overload this method to handle querying of data based on the passed-in constructor. This\n\t* method should accept an options [hash]{@glossary Object} with additional configuration\n\t* properties, including `success` and `error` callbacks to handle the result.\n\t*\n\t* @virtual\n\t* @param {Function} ctor - The constructor for the [kind]{@glossary kind} of\n\t*\t{@link enyo.Model} or {@link enyo.Collection} to be queried.\n\t* @param {Object} opts - The configuration options [hash]{@glossary Object}, including\n\t*\t`success` and `error` callbacks.\n\t*/\n\tfind: function (ctor, opts) {\n\t\t//\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\timportProps: function (props) {\n\t\tprops && utils.mixin(this, props);\n\t},\n\t\n\t/**\n\t* @see enyo.getPath\n\t* @method\n\t* @public\n\t*/\n\tget: utils.getPath,\n\t\n\t/**\n\t* @see enyo.setPath\n\t* @method\n\t* @public\n\t*/\n\tset: utils.setPath\n});\n\n/**\n* Creates an instance of {@link enyo.Source} with the given properties. These\n* properties should include a `kind` property with the name of the\n* [kind]{@glossary kind} of source and a `name` for the instance. This static\n* method is also available on all [subkinds]{@glossary subkind} of\n* `enyo.Source`. The instance will automatically be added to the\n* [enyo.sources]{@link enyo~sources} [object]{@glossary Object} and may be\n* referenced by its `name`.\n*\n* @name enyo.Source.create\n* @static\n* @method\n* @param {Object} props - The properties to pass to the constructor for the requested\n*\t[kind]{@glossary kind} of [source]{@link enyo.Source}.\n* @returns {enyo.Source} An instance of the requested kind of source.\n* @public\n*/\nSource.create = function (props) {\n\tvar Ctor = (props && props.kind) || this;\n\t\n\tif (typeof Ctor == 'string') Ctor = kind.constructorForKind(Ctor);\n\t\n\treturn new Ctor(props);\n};\n\n/**\n* @static\n* @private\n*/\nSource.concat = function (ctor, props) {\n\t\n\t// force noDefer so that we can actually set this method on the constructor\n\tif (props) props.noDefer = true;\n\t\n\tctor.create = Source.create;\n};\n\n/**\n* @static\n* @private\n*/\nSource.execute = function (action, model, opts) {\n\tvar source = opts.source || model.source,\n\t\n\t\t// we need to be able to bind the success and error callbacks for each of the\n\t\t// sources we'll be using\n\t\toptions = utils.clone(opts, true),\n\t\tnom = source,\n\t\tmsg;\n\t\n\tif (source) {\n\t\t\n\t\t// if explicitly set to true then we need to use all available sources in the\n\t\t// application\n\t\tif (source === true) {\n\t\t\t\n\t\t\tfor (nom in sources) {\n\t\t\t\tsource = sources[nom];\n\t\t\t\tif (source[action]) {\n\t\t\t\t\t\n\t\t\t\t\t// bind the source name to the success and error callbacks\n\t\t\t\t\toptions.success = opts.success.bind(null, nom);\n\t\t\t\t\toptions.error = opts.error.bind(null, nom);\n\t\t\t\t\t\n\t\t\t\t\tsource[action](model, options);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// if it is an array of specific sources to use we, well, will only use those!\n\t\telse if (source instanceof Array) {\n\t\t\tsource.forEach(function (nom) {\n\t\t\t\tvar src = typeof nom == 'string' ? sources[nom] : nom;\n\t\t\t\t\n\t\t\t\tif (src && src[action]) {\n\t\t\t\t\t// bind the source name to the success and error callbacks\n\t\t\t\t\toptions.success = opts.success.bind(null, src.name);\n\t\t\t\t\toptions.error = opts.error.bind(null, src.name);\n\t\t\t\t\t\n\t\t\t\t\tsrc[action](model, options);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\t// if it is an instance of a source\n\t\telse if (source instanceof Source && source[action]) {\n\t\t\t\n\t\t\t// bind the source name to the success and error callbacks\n\t\t\toptions.success = opts.success.bind(null, source.name);\n\t\t\toptions.error = opts.error.bind(null, source.name);\n\t\t\t\n\t\t\tsource[action](model, options);\n\t\t}\n\t\t\n\t\t// otherwise only one was specified and we attempt to use that\n\t\telse if ((source = sources[nom]) && source[action]) {\n\t\t\t\n\t\t\t// bind the source name to the success and error callbacks\n\t\t\toptions.success = opts.success.bind(null, nom);\n\t\t\toptions.error = opts.error.bind(null, nom);\n\t\t\t\n\t\t\tsource[action](model, options);\n\t\t}\n\t\t\n\t\t// we could not resolve the requested source\n\t\telse {\n\t\t\tmsg = 'enyo.Source.execute(): requested source(s) could not be found for ' +\n\t\t\t\tmodel.kindName + '.' + action + '()';\n\t\t\t\n\t\t\tlogger.warn(msg);\n\t\t\t\n\t\t\t// we need to fail the attempt and let it be handled\n\t\t\topts.error(nom ? typeof nom == 'string' ? nom : nom.name : 'UNKNOWN', msg);\n\t\t}\n\t} else {\n\t\tmsg = 'enyo.Source.execute(): no source(s) provided for ' + model.kindName + '.' +\n\t\t\taction + '()';\n\t\t\t\n\t\tlogger.warn(msg);\n\t\t\n\t\t// we need to fail the attempt and let it be handled\n\t\topts.error(nom ? typeof nom == 'string' ? nom : nom.name : 'UNKNOWN', msg);\n\t}\n};\n\nSource.sources = sources;","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tplatform = require('./platform');\n\nmodule.exports = function (Control) {\n\t/**\n\t* {@link enyo.FloatingLayer} is a [control]{@link enyo.Control} that provides a layer for\n\t* controls that should be displayed above an [application]{@link enyo.Application}. The\n\t* `floatingLayer` singleton can be set as a control's parent to have the control float\n\t* above the application, e.g.:\n\t*\n\t* ```\n\t* create: kind.inherit(function (sup) {\n\t*\treturn function() {\n\t*\t\tsup.apply(this, arguments);\n\t*\t\tthis.setParent(enyo.floatingLayer);\n\t*\t}\n\t* });\n\t* ```\n\t*\n\t* Note: `enyo.FloatingLayer` is not meant to be instantiated by users.\n\t*\n\t* @class enyo.FloatingLayer\n\t* @extends enyo.Control\n\t* @ui\n\t* @protected\n\t*/\n\treturn kind(\n\t\t/** @lends enyo.FloatingLayer.prototype */ {\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tkind: Control,\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tclasses: 'enyo-fit enyo-clip enyo-untouchable',\n\n\t\t/**\n\t\t* @method\n\t\t* @private\n\t\t*/\n\t\tcreate: kind.inherit(function (sup) {\n\t\t\treturn function() {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t\tthis.setParent(null);\n\n\t\t\t\tif (platform.ie < 11) {\n\t\t\t\t\tthis.removeClass('enyo-fit');\n\t\t\t\t}\n\t\t\t};\n\t\t}),\n\n\t\t/**\n\t\t* Detects when [node]{@glossary Node} is detatched due to `document.body` being stomped.\n\t\t*\n\t\t* @method\n\t\t* @private\n\t\t*/\n\t\thasNode: kind.inherit(function (sup) {\n\t\t\treturn function() {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t\tif (this.node && !this.node.parentNode) {\n\t\t\t\t\tthis.teardownRender();\n\t\t\t\t}\n\t\t\t\treturn this.node;\n\t\t\t};\n\t\t}),\n\n\t\t/**\n\t\t* @method\n\t\t* @private\n\t\t*/\n\t\trender: kind.inherit(function (sup) {\n\t\t\treturn function() {\n\t\t\t\tthis.parentNode = document.body;\n\t\t\t\treturn sup.apply(this, arguments);\n\t\t\t};\n\t\t}),\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tgenerateInnerHtml: function () {\n\t\t\treturn '';\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tbeforeChildRender: function () {\n\t\t\tif (!this.hasNode()) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tteardownChildren: function () {\n\t\t}\n\t});\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tBinding = require('./Binding');\n\nkind.concatenated.push('bindings');\n\n/**\n* An internally-used {@glossary mixin} that is added to {@link enyo.Object}\n* and its [subkinds]{@glossary subkind}. It includes public and protected API\n* methods for working with [bindings]{@link enyo.Binding}.\n*\n* @mixin enyo.BindingSupport\n* @protected\n*/\nexports = module.exports = {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: 'BindingSupport',\n\t\n\t/**\n\t* @private\n\t*/\n\t_bindingSupportInitialized: false,\n\t\n\t/**\n\t* Imperatively creates a [binding]{@link enyo.Binding}. Merges a variable\n\t* number of [hashes]{@glossary Object} and instantiates a binding that\n\t* will have its [owner]{@link enyo.Binding#owner} property set to the callee\n\t* (the current {@link enyo.Object}). Bindings created in this way will be\n\t* [destroyed]{@link enyo.Binding#destroy} when their `owner` is\n\t* [destroyed]{@link enyo.Object#destroy}.\n\t*\n\t* @param {...Object} props A variable number of [hashes]{@glossary Object} that will\n\t*\tbe merged into the properties applied to the {@link enyo.Binding} instance.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tbinding: function () {\n\t\tvar args = utils.toArray(arguments)\n\t\t\t, props = utils.mixin(args)\n\t\t\t, bindings = this.bindings || (this.bindings = [])\n\t\t\t, Ctor, bnd;\n\t\t\t\n\t\tprops.owner = props.owner || this;\n\t\tCtor = props.kind = props.kind || this.defaultBindingKind || Binding.defaultBindingKind;\n\t\t\n\t\tif (this._bindingSupportInitialized) {\n\t\t\tutils.isString(Ctor) && (Ctor = props.kind = kind.constructorForKind(Ctor));\n\t\t\tbnd = new Ctor(props);\n\t\t\tbindings.push(bnd);\n\t\t\treturn bnd;\n\t\t} else bindings.push(props);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Removes and [destroys]{@link enyo.Binding#destroy} all of, or a subset of,\n\t* the [bindings]{@link enyo.Binding} belonging to the callee.\n\t*\n\t* @param {enyo.Binding[]} [subset] - The optional [array]{@glossary Array} of\n\t*\t[bindings]{@link enyo.Binding} to remove.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tclearBindings: function (subset) {\n\t\tvar bindings = subset || (this.bindings && this.bindings.slice());\n\t\tbindings.forEach(function (bnd) {\n\t\t\tbnd.destroy();\n\t\t});\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Removes a single {@link enyo.Binding} from the callee. (This does not\n\t* [destroy]{@link enyo.Binding#destroy} the binding.) Also removes the\n\t* [owner]{@link enyo.Binding#owner} reference if it is the callee.\n\t*\n\t* It should be noted that when a binding is destroyed, it is automatically\n\t* removed from its owner.\n\t*\n\t* @param {enyo.Binding} binding - The {@link enyo.Binding} instance to remove.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tremoveBinding: function (binding) {\n\t\tutils.remove(binding, this.bindings);\n\t\t\n\t\tif (binding.owner === this) binding.owner = null;\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar bindings = this.bindings;\n\t\t\tthis._bindingSupportInitialized = true;\n\t\t\tbindings && (this.bindings = []) && bindings.forEach(function (def) {\n\t\t\t\tthis.binding(def);\n\t\t\t}, this);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.bindings && this.bindings.length && this.clearBindings();\n\t\t\tthis.bindings = null;\n\t\t};\n\t})\n};\n\n/**\n\tHijack the original so we can add additional default behavior.\n*/\nvar sup = kind.concatHandler\n\t, flags = {ignore: true};\n\n/**\n* @private\n*/\nkind.concatHandler = function (ctor, props, instance) {\n\tvar proto = ctor.prototype || ctor\n\t\t, kind = props && (props.defaultBindingKind || Binding.defaultBindingKind)\n\t\t, defaults = props && props.bindingDefaults;\n\t\n\tsup.call(this, ctor, props, instance);\n\tif (props.bindings) {\n\t\tprops.bindings.forEach(function (bnd) {\n\t\t\tdefaults && utils.mixin(bnd, defaults, flags);\n\t\t\tbnd.kind || (bnd.kind = kind); \n\t\t});\n\t\t\n\t\tproto.bindings = proto.bindings? proto.bindings.concat(props.bindings): props.bindings;\n\t\tdelete props.bindings;\n\t}\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tBinding = require('./Binding');\n\n/**\n* The {@link enyo.RepeaterChildSupport} [mixin]{@glossary mixin} contains methods and\n* properties that are automatically applied to all children of {@link enyo.DataRepeater}\n* to assist in selection support. (See {@link enyo.DataRepeater} for details on how to\n* use selection support.) This mixin also [adds]{@link enyo.Repeater#decorateEvent} the\n* `model`, `child` ([control]{@link enyo.Control} instance), and `index` properties to\n* all [events]{@glossary event} emitted from the repeater's children.\n*\n* @mixin enyo.RepeaterChildSupport\n* @public\n*/\nmodule.exports = {\n\n\t/*\n\t* @private\n\t*/\n\tname: 'RepeaterChildSupport',\n\n\t/**\n\t* Indicates whether the current child is selected in the [repeater]{@link enyo.DataRepeater}.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tselected: false,\n\n\t/**\n\t* Setting cachePoint: true ensures that events from the repeater child's subtree will\n\t* always bubble up through the child, allowing the events to be decorated with repeater-\n\t* related metadata and references.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @private\n\t*/\n\tcachePoint: true,\n\t\n\t/*\n\t* @method\n\t* @private\n\t*/\n\tselectedChanged: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this.repeater.selection) {\n\t\t\t\tthis.addRemoveClass(this.selectedClass || 'selected', this.selected);\n\t\t\t\t// for efficiency purposes, we now directly call this method as opposed to\n\t\t\t\t// forcing a synchronous event dispatch\n\t\t\t\tvar idx = this.repeater.collection.indexOf(this.model);\n\t\t\t\tif (this.selected && !this.repeater.isSelected(this.model)) {\n\t\t\t\t\tthis.repeater.select(idx);\n\t\t\t\t} else if (!this.selected && this.repeater.isSelected(this.model)) {\n\t\t\t\t\tthis.repeater.deselect(idx);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @method\n\t* @private\n\t*/\n\tdecorateEvent: kind.inherit(function (sup) {\n\t\treturn function (sender, event) {\n\t\t\tevent.model = this.model;\n\t\t\tevent.child = this;\n\t\t\tevent.index = this.repeater.collection.indexOf(this.model);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\t_selectionHandler: function () {\n\t\tif (this.repeater.selection && !this.get('disabled')) {\n\t\t\tif (this.repeater.selectionType != 'group' || !this.selected) {\n\t\t\t\tthis.set('selected', !this.selected);\n\t\t\t}\n\t\t}\n\t},\n\t/**\n\t* Deliberately used to supersede the default method and set \n\t* [owner]{@link enyo.Component#owner} to this [control]{@link enyo.Control} so that there \n\t* are no name collisions in the instance [owner]{@link enyo.Component#owner}, and also so \n\t* that [bindings]{@link enyo.Binding} will correctly map to names.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tcreateClientComponents: kind.inherit(function () {\n\t\treturn function (components) {\n\t\t\tthis.createComponents(components, {owner: this});\n\t\t};\n\t}),\n\t/**\n\t* Used so that we don't stomp on any built-in handlers for the `ontap`\n\t* {@glossary event}.\n\t*\n\t* @method\n\t* @private\n\t*/\n\tdispatchEvent: kind.inherit(function (sup) {\n\t\treturn function (name, event, sender) {\n\t\t\tvar owner;\n\t\t\t\n\t\t\t// if the event is coming from a child of the repeater-child (this...) and has a\n\t\t\t// delegate assigned to it there is a distinct possibility it is supposed to be\n\t\t\t// targeting the instanceOwner of repeater-child not the repeater-child itself\n\t\t\t// so we have to check this case and treat it as expected - if there is a handler\n\t\t\t// and it returns true then we must skip the normal flow\n\t\t\tif (event.originator !== this && event.delegate && event.delegate.owner === this) {\n\t\t\t\tif (typeof this[name] != 'function') {\n\t\t\t\t\t// ok we don't have the handler here let's see if our owner does\n\t\t\t\t\towner = this.getInstanceOwner();\n\t\t\t\t\tif (owner && owner !== this) {\n\t\t\t\t\t\tif (typeof owner[name] == 'function') {\n\t\t\t\t\t\t\t// alright it appears that we're supposed to forward this to the\n\t\t\t\t\t\t\t// next owner instead\n\t\t\t\t\t\t\treturn owner.dispatch(name, event, sender);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (!event._fromRepeaterChild) {\n\t\t\t\tif (!!~utils.indexOf(name, this.repeater.selectionEvents)) {\n\t\t\t\t\tthis._selectionHandler();\n\t\t\t\t\tevent._fromRepeaterChild = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @method\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar r = this.repeater,\n\t\t\t\ts = r.selectionProperty;\n\t\t\t// this property will only be set if the instance of the repeater needs\n\t\t\t// to track the selected state from the view and model and keep them in sync\n\t\t\tif (s) {\n\t\t\t\tvar bnd = this.binding({\n\t\t\t\t\tfrom: 'model.' + s,\n\t\t\t\t\tto: 'selected',\n\t\t\t\t\toneWay: false/*,\n\t\t\t\t\tkind: enyo.BooleanBinding*/\n\t\t\t\t});\n\t\t\t\tthis._selectionBindingId = bnd.euid;\n\t\t\t}\n\t\t};\n\t}),\n\n\t/*\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this._selectionBindingId) {\n\t\t\t\tvar b$ = Binding.find(this._selectionBindingId);\n\t\t\t\tif (b$) {\n\t\t\t\t\tb$.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/*\n\t* @private\n\t*/\n\t_selectionBindingId: null\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\nvar\n\tLinkedListNode = require('./LinkedListNode');\n\n/**\n* An abstract linked-list.\n*\n* @class enyo.LinkedList\n* @private\n*/\nmodule.exports = kind(\n\t/** @lends enyo.LinkedList.prototype */ {\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* @private\n\t*/\n\tnodeKind: LinkedListNode,\n\t\n\t/**\n\t* @private\n\t*/\n\thead: null,\n\t\n\t/**\n\t* @private\n\t*/\n\ttail: null,\n\t\n\t/**\n\t* @private\n\t*/\n\tlength: 0,\n\t\n\t/**\n\t* @private\n\t*/\n\tclear: function () {\n\t\tif (this.head) {\n\t\t\t// this will trigger a chain event down the list\n\t\t\tthis.head.destroy();\n\t\t}\n\t\tthis.head = null;\n\t\tthis.tail = null;\n\t\tthis.length = 0;\t\t\t\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tslice: function (fromNode, toNode) {\n\t\tvar node = fromNode || this.head\n\t\t\t, list = new this.ctor()\n\t\t\t, cpy;\n\t\t\n\t\t// ensure we have a final node or our tail\n\t\ttoNode = toNode || this.tail;\n\t\t\n\t\tif (node && node !== toNode) {\n\t\t\tdo {\n\t\t\t\tcpy = node.copy();\n\t\t\t\tlist.appendNode(cpy);\n\t\t\t} while ((node = node.next) && node !== toNode);\n\t\t}\n\t\t\n\t\treturn list;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: function () {\n\t\tthis.clear();\n\t\tthis.destroyed = true;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tcreateNode: function (props) {\n\t\treturn new this.nodeKind(props);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdeleteNode: function (node) {\n\t\tthis.removeNode(node);\n\t\t\n\t\t// can't chain destruct because we removed its chain references\n\t\tnode.destroy();\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tremoveNode: function (node) {\n\t\tvar prev = node.prev\n\t\t\t, next = node.next;\n\t\t\t\n\t\tprev && (prev.next = next);\n\t\tnext && (next.prev = prev);\n\t\tthis.length--;\n\t\tnode.next = node.prev = null;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tappendNode: function (node, targetNode) {\n\t\ttargetNode = targetNode || this.tail;\n\t\t\n\t\tif (targetNode) {\n\t\t\tif (targetNode.next) {\n\t\t\t\tnode.next = targetNode.next;\n\t\t\t}\n\t\t\t\n\t\t\ttargetNode.next = node;\n\t\t\tnode.prev = targetNode;\n\t\t\t\n\t\t\tif (targetNode === this.tail) {\n\t\t\t\tthis.tail = node;\n\t\t\t}\n\t\t\t\n\t\t\tthis.length++;\n\t\t} else {\n\t\t\t\n\t\t\tthis.head = this.tail = node;\n\t\t\tnode.prev = node.next = null;\n\t\t\tthis.length = 1;\n\t\t}\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tfind: function (fn, ctx, targetNode) {\n\t\tvar node = targetNode || this.head;\n\t\tif (node) {\n\t\t\tdo {\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\t\t\t} while ((node = node.next));\n\t\t}\n\t\t// if no node qualified it returns false\n\t\treturn false;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tforward: function (fn, ctx, targetNode) {\n\t\tvar node = targetNode || this.head;\n\t\tif (node) {\n\t\t\tdo {\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} while ((node = node.next));\n\t\t}\n\t\t// returns the last node (if any) that was processed in the chain\n\t\treturn node;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tbackward: function (fn, ctx, targetNode) {\n\t\tvar node = targetNode || this.tail;\n\t\tif (node) {\n\t\t\tdo {\n\t\t\t\tif (fn.call(ctx || this, node, this)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} while ((node = node.prev));\n\t\t}\n\t\t// returns the last node (if any) that was processed in the chain\n\t\treturn node;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: function () {\n\t\tthis.nodeType = kind.constructorForKind(this.nodeType);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\nvar\n\tLinkedListNode = require('./LinkedListNode');\n\nfunction get (base, prop) {\n\treturn base && /*isObject(base)*/ (typeof base == 'object')? (\n\t\tbase.get? base.get(prop): base[prop]\n\t): undefined;\n}\n\n/**\n* An internally used {@glossary kind}.\n*\n* @class enyo.ObserverChainNode\n* @extends enyo.LinkedListNode\n* @private\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ObserverChainNode.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tkind: LinkedListNode,\n\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.connect();\n\t\t};\n\t}),\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.disconnect();\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.observer = null;\n\t\t\tthis.list = null;\n\t\t\tthis.object = null;\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tconnect: function () {\n\t\tvar obj = this.object\n\t\t\t, obs = this._changed\n\t\t\t, prop = this.property;\n\t\tif (obj) {\n\t\t\tif (obj.observe) obj.observe(prop, obs, this, {noChain: true, priority: true});\n\t\t\tthis.connected = true;\n\t\t\tthis.list.connected++;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tdisconnect: function () {\n\t\tvar obj = this.object\n\t\t\t, obs = this._changed\n\t\t\t, prop = this.property\n\t\t\t, was = this.connected;\n\t\tobj && obj.unobserve && obj.unobserve(prop, obs, this);\n\t\tthis.connected = null;\n\t\tif (was) this.list.connected--;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tsetObject: function (object) {\n\t\tvar cur = this.object\n\t\t\t, prop = this.property\n\t\t\t, was, is;\n\t\t\n\t\tif (cur !== object) {\n\t\t\tthis.disconnect();\n\t\t\tthis.object = object;\n\t\t\tthis.connect();\n\t\t\t\n\t\t\tif (this.list.tail === this) {\n\t\t\t\twas = get(cur, prop);\n\t\t\t\tis = get(object, prop);\n\t\t\t\t// @TODO: It would be better to somehow cache values\n\t\t\t\t// such that it could intelligently derive the difference\n\t\t\t\t// without needing to continuously look it up with get\n\t\t\t\twas !== is && this.list.observed(this, was, is);\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_changed: function (was, is) {\n\t\tthis.list.observed(this, was, is);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\n\nvar\n\tLinkedList = require('./LinkedList'),\n\tObserverChainNode = require('./ObserverChainNode');\n\nfunction get (base, prop) {\n\treturn base && /*isObject(base)*/ (typeof base == 'object')? (\n\t\tbase.get? base.get(prop): base[prop]\n\t): undefined;\n}\n\n/**\n* An internally used {@glossary kind}.\n*\n* @class enyo.ObserverChain\n* @extends enyo.LinkedList\n* @private\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ObserverChain.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tkind: LinkedList,\n\n\t/**\n\t* @private\n\t*/\n\tnodeKind: ObserverChainNode,\n\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* @private\n\t*/\n\tconnected: 0,\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: function (path, object) {\n\t\tthis.object = object;\n\t\tthis.path = path;\n\t\tthis.parts = path.split('.');\n\t\tthis.createChain();\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.object = null;\n\t\t\tthis.parts = null;\n\t\t\tthis.path = null;\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\trebuild: function (target) {\n\t\tif (!this.rebuilding) {\n\t\t\tthis.rebuilding = true;\n\t\t\tthis.forward(function (node) {\n\t\t\t\tif (node !== this.head) {\n\t\t\t\t\tvar src = node.prev.object\n\t\t\t\t\t\t, prop = node.prev.property;\n\t\t\t\t\tnode.setObject(get(src, prop));\n\t\t\t\t}\n\t\t\t}, this, target);\n\t\t\tthis.rebuilding = false;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tisConnected: function () {\n\t\treturn !! (this.connected === this.length && this.length);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tbuildPath: function (target) {\n\t\tvar str = '';\n\t\t\n\t\tthis.backward(function (node) {\n\t\t\tstr = node.property + (str? ('.' + str): str);\n\t\t}, this, target);\n\t\t\n\t\treturn str;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tcreateChain: function () {\n\t\tvar parts = this.parts\n\t\t\t, next = this.object\n\t\t\t, $ = false\n\t\t\t, node, prop;\n\t\t\t\n\t\tfor (var i=0; (prop=parts[i]); ++i) {\n\t\t\t\n\t\t// forEach(parts, function (prop, idx) {\n\t\t\t// we create a special case for the $ hash property\n\t\t\tif (prop == '$') {\n\t\t\t\t$ = true;\n\t\t\t} else {\n\t\t\t\t// in cases where the chain has the $ property we arbitrarily\n\t\t\t\t// force it onto our current nodes property and let the special handling\n\t\t\t\t// in ObserverChainNode and ObserverSupport handle the rest\n\t\t\t\t$ && (prop = '$.' + prop);\n\t\t\t\tnode = this.createNode({property: prop, object: next, list: this});\n\t\t\t\tthis.appendNode(node);\n\t\t\t\tnext = get(next, prop);\n\t\t\t\t$ = false;\n\t\t\t}\n\t\t// }, this);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tobserved: function (node, was, is) {\n\t\tthis.object.stopNotifications();\n\t\t// @NOTE: About the following two cases, they are mutually exclusive and this seems perfect\n\t\t// that we don't see double notifications\n\t\t// @TODO: Only notify if it was the full property path? This is far more efficient after\n\t\t// testing but not as flexible...\n\t\tnode === this.tail /*&& was !== is*/ && this.object.notify(this.buildPath(node), was, is);\n\t\t// @TODO: It seems the same case across the board that the rebuild only needs to take place\n\t\t// from the beginning to the second-to-last elem\n\t\tnode !== this.tail && was !== is && this.rebuild(node);\n\t\tthis.object.startNotifications();\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tObserverChain = require('./ObserverChain');\n\nvar observerTable = {};\n\t\nkind.concatenated.push(\"observers\");\n\n/**\n* Responds to changes in one or more properties.\n* [Observers]{@link enyo.ObserverSupport~observer} may be registered in\n* several different ways. See the {@link enyo.ObserverSupport} documentation\n* for more details. Also note that, while observers should not be called\n* directly, if defined on a [kind]{@glossary kind}, they may be\n* overloaded for special behavior.\n*\n* @see enyo.ObserverSupport\n* @see enyo.ObserverSupport.observe\n* @callback enyo.ObserverSupport~Observer\n* @param {*} was - The previous value of the property that has changed.\n* @param {*} is - The current value of the property that has changed.\n* @param {String} prop - The name of the property that has changed.\n* @public\n*/\n\n/**\n* @private\n*/\nfunction addObserver (path, fn, ctx, opts) {\n\t\n\tvar observers = this.getObservers(),\n\t\tchains = this.getChains(),\n\t\tparts = path.split('.'),\n\t\tprio = opts && opts.priority,\n\t\tentries,\n\t\tnoChain;\n\t\t\n\tnoChain = (opts && opts.noChain) ||\n\t\t\tchains[path] ||\n\t\t\tparts.length < 2 ||\n\t\t\t(parts.length === 2 && path[0] == '$');\n\t\n\tif (observers[path] && !observers.hasOwnProperty(path)) {\n\t\tobservers[path] = observers[path].slice();\n\t}\n\t\n\tentries = observers[path] || (observers[path] = []);\n\tentries[prio ? 'unshift' : 'push']({method: fn, ctx: ctx || this});\n\t\n\tif (!noChain) {\n\t\tthis.getChains()[path] = new ObserverChain(path, this);\n\t}\n\t\n\treturn this;\n}\n\n/**\n* @private\n*/\nfunction removeObserver (obj, path, fn, ctx) {\n\tvar observers = obj.getObservers(path)\n\t\t, chains = obj.getChains()\n\t\t, idx, chain;\n\t\t\n\tif (observers && observers.length) {\n\t\tidx = observers.findIndex(function (ln) {\n\t\t\treturn ln.method === fn && (ctx? ln.ctx === ctx: true);\n\t\t});\n\t\tidx > -1 && observers.splice(idx, 1);\n\t}\n\t\n\tif ((chain = chains[path]) && !observers.length) {\n\t\tchain.destroy();\n\t}\n\t\n\treturn obj;\n}\n\n/**\n* @private\n*/\nfunction notifyObservers (obj, path, was, is, opts) {\n\tif (obj.isObserving()) {\n\t\tvar observers = obj.getObservers(path);\n\t\t\n\t\tif (observers && observers.length) {\n\t\t\tfor (var i=0, ln; (ln=observers[i]); ++i) {\n\t\t\t\tif (typeof ln.method == \"string\") obj[ln.method](was, is, path, opts);\n\t\t\t\telse ln.method.call(ln.ctx || obj, was, is, path, opts);\n\t\t\t}\n\t\t}\n\t} else enqueue(obj, path, was, is, opts);\n\t\n\treturn obj;\n}\n\n/**\n* @private\n*/\nfunction enqueue (obj, path, was, is, opts) {\n\tif (obj._notificationQueueEnabled) {\n\t\tvar queue = obj._notificationQueue || (obj._notificationQueue = {})\n\t\t\t, ln = queue[path] || (queue[path] = {});\n\t\n\t\tln.was = was;\n\t\tln.is = is;\n\t\tln.opts = opts;\n\t}\n}\n\n/**\n* @private\n*/\nfunction flushQueue (obj) {\n\tvar queue = obj._notificationQueue\n\t\t, path, ln;\n\t\n\tif (queue) {\n\t\tobj._notificationQueue = null;\n\t\t\n\t\tfor (path in queue) {\n\t\t\tln = queue[path];\n\t\t\tobj.notify(path, ln.was, ln.is, ln.opts);\n\t\t}\n\t}\n}\n\t\n/**\n* Adds support for notifications on property changes. Most\n* [kinds]{@glossary kind} (including all kinds that inherit from\n* {@link enyo.Object}) already have this {@glossary mixin} applied.\n* This allows for\n* [observers]{@link enyo.ObserverSupport~Observer} to be\n* [declared]{@link enyo.ObserverSupport.observers} or \"implied\" (see below).\n*\n* Implied observers are not declared, but derived from their `name`. They take\n* the form `<property>Changed`, where `<property>` is the property to\n* [observe]{@link enyo.ObserverSupport.observe}. For example:\n*\n* ```javascript\n* enyo.kind({\n* \tname: 'MyKind',\n*\n* \t// some local property\n* \tvalue: true,\n*\n* \t// and the implied observer of that property\n* \tvalueChanged: function (was, is) {\n* \t\t// do something now that it has changed\n* \t\tenyo.log('value was \"' + was + '\" but now it is \"' + is + '\"');\n* \t}\n* });\n*\n* var mine = new MyKind();\n* mine.set('value', false); // -> value was \"true\" but now it is \"false\"\n* ```\n*\n* Using the `observers` property for its declarative syntax, an observer may\n* observe any property (or properties), regardless of its `name`. For example:\n*\n* ```javascript\n* enyo.kind({\n* \tname: 'MyKind',\n*\n* \t// some local property\n* \tvalue: true,\n*\n* \t// another local property\n* \tcount: 1,\n*\n* \t// declaring the observer\n* \tobservers: [\n* \t\t// the path can be a single string or an array of strings\n* \t\t{method: 'myObserver', path: ['value', 'count']}\n* \t],\n*\n* \t// now this observer will be notified of changes to both properties\n* \tmyObserver: function (was, is, prop) {\n* \t\t// do something now that it changed\n* \t\tenyo.log(prop + ' was \"' + was + '\" but now it is \"' + is + '\"');\n* \t}\n* });\n*\n* var mine = new MyKind();\n* mine.set('value', false); // -> value was \"true\" but now it is \"false\"\n* mine.set('count', 2); // -> count was \"1\" but now it is \"2\"\n* ```\n*\n* While observers may be [notified]{@link enyo.ObserverSupport.notify} of\n* changes to multiple properties, this is not a typical use case for implied\n* observers, since, by convention, they are only registered for the named\n* property.\n*\n* There is one additional way to use observers, if necessary. You may use the\n* API methods [observe()]{@link enyo.ObserverSupport.observe} and\n* [unobserve()]{@link enyo.ObserverSupport.unobserve} to dynamically\n* register and unregister observers as needed. For example:\n*\n* ```javascript\n* var object = new enyo.Object({value: true});\n* var observer = function (was, is) {\n* \tenyo.log('value was \"' + was + '\" but now it is \"' + is + '\"');\n* };\n*\n* object.observe('value', observer);\n* object.set('value', false); // -> value was \"true\" but now it is \"false\"\n* object.unobserve('value', observer);\n* object.set('value', true); // no output because there is no observer\n* ```\n*\n* Be sure to read the documentation for these API methods; proper usage of\n* these methods is important for avoiding common pitfalls and memory leaks.\n*\n* @mixin enyo.ObserverSupport\n* @public\n*/\nvar ObserverSupport = module.exports = /** @lends enyo.ObserverSupport */ {\n\t\n\t/**\n\t* @private\n\t*/\n\tname: \"ObserverSupport\",\n\t\n\t/**\n\t* @private\n\t*/\n\t_observing: true,\n\t\n\t/**\n\t* @private\n\t*/\n\t_observeCount: 0,\n\t\n\t/**\n\t* @private\n\t*/\n\t_notificationQueue: null,\n\t\n\t/**\n\t* @private\n\t*/\n\t_notificationQueueEnabled: true,\n\t\n\t/**\n\t* Determines whether `_observing` is enabled. If\n\t* [stopNotifications()]{@link enyo.ObserverSupport.stopNotifications} has\n\t* been called, then this will return `false`.\n\t*\n\t* @see enyo.ObserverSupport.stopNotifications\n\t* @see enyo.ObserverSupport.startNotifications\n\t* @returns {Boolean} Whether or not the callee is observing.\n\t*/\n\tisObserving: function () {\n\t\treturn this._observing;\n\t},\n\t\n\t/**\n\t* Returns an immutable list of [observers]{@link enyo.ObserverSupport~Observer}\n\t* for the given `path`, or all observers for the callee.\n\t*\n\t* @param {String} [path] - Path or property path for which\n\t* [observers]{@link enyo.ObserverSupport~Observer} will be returned. If not\n\t* specified, all observers for the callee will be returned.\n\t*\n\t* @returns {enyo.ObserverSupport~Observer[]} The immutable\n\t* [array]{@glossary Array} of observers.\n\t* @public\n\t*/\n\tgetObservers: function (path) {\n\t\tvar euid = this.euid || (this.euid = utils.uid('o')),\n\t\t\tret,\n\t\t\tloc;\n\t\t\t\n\t\tloc = observerTable[euid] || (observerTable[euid] = (\n\t\t\tthis._observers? Object.create(this._observers): {}\n\t\t));\n\t\t\n\t\tif (!path) return loc;\n\t\t\n\t\tret = loc[path];\n\t\t\n\t\t// if the special property exists...\n\t\tif (loc['*']) ret = ret ? ret.concat(loc['*']) : loc['*'].slice();\n\t\treturn ret;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tgetChains: function () {\n\t\treturn this._observerChains || (this._observerChains = {});\n\t},\n\t\n\t/**\n\t* @deprecated\n\t* @alias enyo.ObserverSupport.observe\n\t* @public\n\t*/\n\taddObserver: function () {\n\t\t// @NOTE: In this case we use apply because of internal variable use of parameters\n\t\treturn addObserver.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* Registers an [observer]{@link enyo.ObserverSupport~Observer} to be\n\t* [notified]{@link enyo.ObserverSupport.notify} when the given property has\n\t* been changed. It is important to note that it is possible to register the\n\t* same observer multiple times (although this is never the intention), so\n\t* care should be taken to avoid that scenario. It is also important to\n\t* understand how observers are stored and unregistered\n\t* ([unobserved]{@link enyo.ObserverSupport.unobserve}). The `ctx` (context)\n\t* parameter is stored with the observer reference. **If used when\n\t* registering, it should also be used when unregistering.**\n\t*\n\t* @see enyo.ObserverSupport.unobserve\n\t* @param {String} path - The property or property path to observe.\n\t* @param {enyo.ObserverSupport~Observer} fn - The\n\t*\t[observer]{@link enyo.ObserverSupport~Observer} method that responds to changes.\n\t* @param {*} [ctx] - The `this` (context) under which to execute the observer.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tobserve: function () {\n\t\t// @NOTE: In this case we use apply because of internal variable use of parameters\n\t\treturn addObserver.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* @deprecated\n\t* @alias enyo.ObserverSupport.unobserve\n\t* @public\n\t*/\n\tremoveObserver: function (path, fn, ctx) {\n\t\treturn removeObserver(this, path, fn);\n\t},\n\t\n\t/**\n\t* Unregisters an [observer]{@link enyo.ObserverSupport~Observer}. If a `ctx`\n\t* (context) was supplied to [observe()]{@link enyo.ObserverSupport.observe},\n\t* then it should also be supplied to this method.\n\t*\n\t* @see enyo.ObserverSupport.observe\n\t* @param {String} path - The property or property path to unobserve.\n\t* @param {enyo.ObserverSupport~Observer} fn - The\n\t*\t[observer]{@link enyo.ObserverSupport~Observer} method that responds to changes.\n\t* @param {*} [ctx] - The `this` (context) under which to execute the observer.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tunobserve: function (path, fn, ctx) {\n\t\treturn removeObserver(this, path, fn, ctx);\n\t},\n\t\n\t/**\n\t* Removes all [observers]{@link enyo.ObserverSupport~Observer} from the\n\t* callee. If a `path` parameter is provided, observers will only be removed\n\t* from that path (or property).\n\t*\n\t* @param {String} [path] - A property or property path from which to remove all\n\t*\t[observers]{@link enyo.ObserverSupport~Observer}.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tremoveAllObservers: function (path) {\n\t\tvar euid = this.euid\n\t\t\t, loc = euid && observerTable[euid];\n\t\t\n\t\tif (loc) {\n\t\t\tif (path) {\n\t\t\t\tloc[path] = null;\n\t\t\t} else {\n\t\t\t\tobserverTable[euid] = null;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @deprecated\n\t* @alias enyo.ObserverSupport.notify\n\t* @public\n\t*/\n\tnotifyObservers: function (path, was, is, opts) {\n\t\treturn notifyObservers(this, path, was, is, opts);\n\t},\n\t\n\t/**\n\t* Triggers any [observers]{@link enyo.ObserverSupport~Observer} for the\n\t* given `path`. The previous and current values must be supplied. This\n\t* method is typically called automatically, but it may also be called\n\t* forcibly by [setting]{@link enyo.Object#set} a value with the\n\t* `force` option.\n\t*\n\t* @param {String} path - The property or property path to notify.\n\t* @param {*} was - The previous value.\n\t* @param {*} is - The current value.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tnotify: function (path, was, is, opts) {\n\t\treturn notifyObservers(this, path, was, is, opts);\n\t},\n\t\n\t/**\n\t* Stops all [notifications]{@link enyo.ObserverSupport.notify} from\n\t* propagating. By default, all notifications will be queued and flushed once\n\t* [startNotifications()]{@link enyo.ObserverSupport.startNotifications}\n\t* has been called. Setting the optional `noQueue` flag will also disable the\n\t* queue, or you can use the\n\t* [disableNotificationQueue()]{@link enyo.ObserverSupport.disableNotificationQueue} and\n\t* [enableNotificationQueue()]{@link enyo.ObserverSupport.enableNotificationQueue}\n\t* API methods. `startNotifications()` will need to be called the same number\n\t* of times that this method has been called.\n\t*\n\t* @see enyo.ObserverSupport.startNotifications\n\t* @see enyo.ObserverSupport.disableNotificationQueue\n\t* @see enyo.ObserverSupport.enableNotificationQueue\n\t* @param {Boolean} [noQueue] - If `true`, this will also disable the notification queue.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tstopNotifications: function (noQueue) {\n\t\tthis._observing = false;\n\t\tthis._observeCount++;\n\t\tnoQueue && this.disableNotificationQueue();\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Starts [notifications]{@link enyo.ObserverSupport.notify} if they have\n\t* been [disabled]{@link enyo.ObserverSupport.stopNotifications}. If the\n\t* notification queue was not disabled, this will automatically flush the\n\t* queue of all notifications that were encountered while stopped. This\n\t* method must be called the same number of times that\n\t* [stopNotifications()]{@link enyo.ObserverSupport.stopNotifications} was\n\t* called.\n\t*\n\t* @see enyo.ObserverSupport.stopNotifications\n\t* @see enyo.ObserverSupport.disableNotificationQueue\n\t* @see enyo.ObserverSupport.enableNotificationQueue\n\t* @param {Boolean} [queue] - If `true` and the notification queue is disabled,\n\t* the queue will be re-enabled.\n\t* @returns {this} The callee for chaining.\n\t*/\n\tstartNotifications: function (queue) {\n\t\tthis._observeCount && this._observeCount--;\n\t\tthis._observeCount === 0 && (this._observing = true);\n\t\tqueue && this.enableNotificationQueue();\n\t\tthis.isObserving() && flushQueue(this);\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Re-enables the notification queue, if it was disabled.\n\t*\n\t* @see enyo.ObserverSupport.disableNotificationQueue\n\t* @returns {this} The callee for chaining.\n\t*/\n\tenableNotificationQueue: function () {\n\t\tthis._notificationQueueEnabled = true;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* If the notification queue is enabled (the default), it will be disabled\n\t* and any notifications in the queue will be removed.\n\t*\n\t* @see enyo.ObserverSupport.enableNotificationQueue\n\t* @returns {this} The callee for chaining.\n\t*/\n\tdisableNotificationQueue: function () {\n\t\tthis._notificationQueueEnabled = false;\n\t\tthis._notificationQueue = null;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar chains, chain, path, entries, i;\n\t\t\t\n\t\t\t// if there are any observers that need to create dynamic chains\n\t\t\t// we look for and instance those now\n\t\t\tif (this._observerChains) {\n\t\t\t\tchains = this._observerChains;\n\t\t\t\tthis._observerChains = {};\n\t\t\t\tfor (path in chains) {\n\t\t\t\t\tentries = chains[path];\n\t\t\t\t\tfor (i = 0; (chain = entries[i]); ++i) this.observe(path, chain.method);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tvar chains = this._observerChains,\n\t\t\t\tpath,\n\t\t\t\tchain;\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\tif (chains) {\n\t\t\t\tfor (path in chains) {\n\t\t\t\t\tchain = chains[path];\n\t\t\t\t\tchain.destroy();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis._observerChains = null;\n\t\t\t}\n\t\t};\n\t})\n\t\n};\n\n/**\n* Hijack the original so we can add additional default behavior.\n*\n* @private\n*/\nvar sup = kind.concatHandler;\n\n// @NOTE: It seems like a lot of work but it really won't happen that much and the more\n// we push to kind-time the better for initialization time\n\n/** @private */\nkind.concatHandler = function (ctor, props, instance) {\n\t\n\tsup.call(this, ctor, props, instance);\n\t\n\tif (props === ObserverSupport) return;\n\n\tvar proto = ctor.prototype || ctor\n\t\t, observers = proto._observers? Object.create(proto._observers): null\n\t\t, incoming = props.observers\n\t\t, chains = proto._observerChains && Object.create(proto._observerChains);\n\t\t\n\tif (!observers) {\n\t\tif (proto.kindName) observers = {};\n\t\telse return;\n\t}\n\t\t\n\tif (incoming && !(incoming instanceof Array)) {\n\t\t(function () {\n\t\t\tvar tmp = [], deps, name;\n\t\t\t// here is the slow iteration over the properties...\n\t\t\tfor (name in props.observers) {\n\t\t\t\t// points to the dependencies of the computed method\n\t\t\t\tdeps = props.observers[name];\n\t\t\t\t// create a single entry now for the method/computed with all dependencies\n\t\t\t\ttmp.push({method: name, path: deps});\n\t\t\t}\n\t\t\tincoming = tmp;\n\t\t}());\n\t\t// we need to ensure we don't modify the fixed array of a mixin or reused object\n\t\t// because it could wind up inadvertantly adding the same entry multiple times\n\t} else if (incoming) incoming = incoming.slice();\n\t\n\t// this scan is required to figure out what auto-observers might be present\n\tfor (var key in props) {\n\t\tif (key.slice(-7) == \"Changed\") {\n\t\t\tincoming || (incoming = []);\n\t\t\tincoming.push({method: key, path: key.slice(0, -7)});\n\t\t}\n\t}\n\t\n\tvar addObserverEntry = function (path, method) {\n\t\tvar obs;\n\t\t// we have to make sure that the path isn't a chain because if it is we add it\n\t\t// to the chains instead\n\t\tif (path.indexOf(\".\") > -1) {\n\t\t\tif (!chains) chains = {};\n\t\t\tobs = chains[path] || (chains[path] = []);\n\t\t\tobs.push({method: method});\n\t\t} else {\n\t\t\tif (observers[path] && !observers.hasOwnProperty(path)) observers[path] = observers[path].slice();\n\t\t\tobs = observers[path] || (observers[path] = []);\n\t\t\tif (!obs.find(function (ln) { return ln.method == method; })) obs.push({method: method});\n\t\t}\n\t};\n\t\n\tif (incoming) {\n\t\tincoming.forEach(function (ln) {\n\t\t\t// first we determine if the path itself is an array of paths to observe\n\t\t\tif (ln.path && ln.path instanceof Array) ln.path.forEach(function (en) { addObserverEntry(en, ln.method); });\n\t\t\telse addObserverEntry(ln.path, ln.method);\n\t\t});\n\t}\n\t\n\t// we clear the key so it will not be added to the prototype\n\t// delete props.observers;\n\t// we update the properties to whatever their new values may be\n\tproto._observers = observers;\n\tproto._observerChains = chains;\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tlogger = require('./logger'),\n\tutils = require('./utils');\n\nvar\n\tMixinSupport = require('./MixinSupport'),\n\tObserverSupport = require('./ObserverSupport'),\n\tBindingSupport = require('./BindingSupport');\n\t\n/**\n* Used by all [objects]{@link enyo.Object} and [subkinds]{@glossary subkind} when using the\n* {@link enyo.Object#log}, {@link enyo.Object#warn} and {@link enyo.Object#error} methods.\n*\n* @private\n*/\nfunction log (method, args) {\n\tif (logger.shouldLog(method)) {\n\t\ttry {\n\t\t\tthrow new Error();\n\t\t} catch(err) {\n\t\t\tlogger._log(method, [args.callee.caller.displayName + ': ']\n\t\t\t\t.concat(utils.cloneArray(args)));\n\t\t\tlogger.log(err.stack);\n\t\t}\n\t}\n}\n\n/**\n* {@link enyo.Object} lies at the heart of the Enyo framework's implementations of property\n* publishing, computed properties (via the {@link enyo.ComputedSupport} {@glossary mixin}),\n* and data binding (via the {@link enyo.BindingSupport} mixin and {@link enyo.Binding}\n* object). It also provides several utility [functions]{@glossary Function} for its\n* [subkinds]{@glossary subkind}.\n*\n* @class enyo.Object\n* @mixes enyo.MixinSupport\n* @mixes enyo.ObserverSupport\n* @mixes enyo.BindingSupport\n* @public\n*/\nvar CoreObject = module.exports = kind(\n\t/** @lends enyo.Object.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Object',\n\n\t/**\n\t* @private\n\t*/\n\tkind: null,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* Will be `true` if the [destroy()]{@link enyo.Object#destroy} method has been called;\n\t* otherwise, `false`.\n\t*\n\t* @readonly\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tdestroyed: false,\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [MixinSupport, ObserverSupport, BindingSupport],\n\n\t/**\n\t* @private\n\t*/\n\tconstructor: function (props) {\n\t\tthis.importProps(props);\n\t},\n\n\t/**\n\t* Imports the values from the given [object]{@glossary Object}. Automatically called\n\t* from the [constructor]{@link enyo.Object#constructor}.\n\t*\n\t* @param {Object} props - If provided, the [object]{@glossary Object} from which to\n\t*\tretrieve [keys/values]{@glossary Object.keys} to mix in.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\timportProps: function (props) {\n\t\tvar key;\n\n\t\tif (props) {\n\t\t\tkind.concatHandler(this, props, true);\n\t\t\t// if props is a default hash this is significantly faster than\n\t\t\t// requiring the hasOwnProperty check every time\n\t\t\tif (!props.kindName) {\n\t\t\t\tfor (key in props) {\n\t\t\t\t\tkind.concatenated.indexOf(key) === -1 && (this[key] = props[key]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (key in props) {\n\t\t\t\t\tif (kind.concatenated.indexOf(key) === -1 && props.hasOwnProperty(key)) {\n\t\t\t\t\t\tthis[key] = props[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Calls the [destroy()]{@link enyo.Object#destroy} method for the named {@link enyo.Object} \n\t* property.\n\t*\n\t* @param {String} name - The name of the property to destroy, if possible.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroyObject: function (name) {\n\t\tif (this[name] && this[name].destroy) {\n\t\t\tthis[name].destroy();\n\t\t}\n\t\tthis[name] = null;\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Sends a log message to the [console]{@glossary console}, prepended with the name\n\t* of the {@glossary kind} and method from which `log()` was invoked. Multiple\n\t* {@glossary arguments} are coerced to {@glossary String} and\n\t* [joined with spaces]{@glossary Array.join}.\n\t*\n\t* ```javascript\n\t* enyo.kind({\n\t*\tname: 'MyObject',\n\t*\tkind: 'enyo.Object',\n\t*\thello: function() {\n\t*\t\tthis.log('says', 'hi');\n\t*\t\t// shows in the console: MyObject.hello: says hi\n\t*\t}\n\t* });\n\t* ```\n\t* @public\n\t*/\n\tlog: function () {\n\t\tvar acc = arguments.callee.caller,\n\t\t\tnom = ((acc ? acc.displayName : '') || '(instance method)') + ':',\n\t\t\targs = Array.prototype.slice.call(arguments);\n\t\targs.unshift(nom);\n\t\tlogger.log('log', args);\n\t},\n\t\n\t/**\n\t* Same as [log()]{@link enyo.Object#log}, except that it uses the \n\t* console's [warn()]{@glossary console.warn} method (if it exists).\n\t*\n\t* @public\n\t*/\n\twarn: function () {\n\t\tlog('warn', arguments);\n\t},\n\t\n\t/**\n\t* Same as [log()]{@link enyo.Object#log}, except that it uses the \n\t* console's [error()]{@glossary console.error} method (if it exists).\n\t*\n\t* @public\n\t*/\n\terror: function () {\n\t\tlog('error', arguments);\n\t},\n\n\t/**\n\t* Retrieves the value for the given path. The value may be retrieved as long as the given \n\t* path is resolvable relative to the given {@link enyo.Object}. See\n\t* [enyo.getPath()]{@link enyo.getPath} for complete details.\n\t*\n\t* This method is backwards-compatible and will automatically call any existing getter\n\t* method that uses the \"getProperty\" naming convention. (Moving forward, however, Enyo code\n\t* should use [computed properties]{@link enyo.ComputedSupport} instead of relying on the \n\t* getter naming convention.)\n\t*\n\t* @param {String} path - The path from which to retrieve a value.\n\t* @returns {*} The value for the given path or [undefined]{@glossary undefined} if \n\t*\tthe path could not be completely resolved.\n\t* @public\n\t*/\n\tget: function () {\n\t\treturn utils.getPath.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* Updates the value for the given path. The value may be set as long as the\n\t* given path is resolvable relative to the given {@link enyo.Object}. See\n\t* [enyo.setPath()]{@link enyo.setPath} for complete details.\n\t*\n\t* @param {String} path - The path for which to set the given value.\n\t* @param {*} value - The value to set.\n\t* @param {Object} [opts] - An options hash.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tset: function () {\n\t\treturn utils.setPath.apply(this, arguments);\n\t},\n\n\t/**\n\t* Binds a [callback]{@glossary callback} to this [object]{@link enyo.Object}.\n\t* If the object has been destroyed, the bound method will be aborted cleanly,\n\t* with no value returned.\n\t*\n\t* This method should generally be used instead of {@link enyo.bind} for running\n\t* code in the context of an instance of {@link enyo.Object} or one of its\n\t* [subkinds]{@glossary subkind}.\n\t*\n\t* @alias enyo.bindSafely\n\t* @public\n\t*/\n\tbindSafely: function () {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift(this);\n\t\treturn utils.bindSafely.apply(null, args);\n\t},\n\t\n\t/**\n\t* An abstract method (primarily) that sets the [destroyed]{@link enyo.Object#destroyed} \n\t* property to `true`.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroy: function () {\n\t\t\n\t\t// Since JS objects are never truly destroyed (GC'd) until all references are\n\t\t// gone, we might have some delayed action on this object that needs access\n\t\t// to this flag.\n\t\t// Using this.set to make the property observable\n\t\treturn this.set('destroyed', true);\n\t}\n});\n\n/**\n* @private\n*/\nCoreObject.concat = function (ctor, props) {\n\tvar pubs = props.published,\n\t\tcpy,\n\t\tprop;\n\t\t\n\tif (pubs) {\n\t\tcpy = ctor.prototype || ctor;\n\t\tfor (prop in pubs) {\n\t\t\t// need to make sure that even though a property is 'published'\n\t\t\t// it does not overwrite any computed properties\n\t\t\tif (props[prop] && typeof props[prop] == 'function') continue;\n\t\t\taddGetterSetter(prop, pubs[prop], cpy);\n\t\t}\n\t}\n};\n\n/**\n* This method creates a getter/setter for a published property of an {@link enyo.Object}, but is\n* deprecated. It is maintained for purposes of backwards compatibility. The preferred method is \n* to mark public and protected (private) methods and properties using documentation or other \n* means and rely on the [get]{@link enyo.Object#get} and [set]{@link enyo.Object#set} methods of\n* {@link enyo.Object} instances.\n*\n* @private\n*/\nfunction addGetterSetter (prop, value, proto) {\n\t\n\t// so we don't need to re-execute this over and over and over...\n\tvar cap = utils.cap(prop),\n\t\tgetName = 'get' + cap,\n\t\tsetName = 'set' + cap,\n\t\tgetters = proto._getters || (proto._getters = {}),\n\t\tsetters = proto._setters || (proto._setters = {}),\n\t\tfn;\n\t\n\t// we assign the default value from the published block to the prototype\n\t// so it will be initialized properly\n\tproto[prop] = value;\n\t\n\t// check for a supplied getter and if there isn't one we create one otherwise\n\t// we mark the supplied getter in the tracking object so the global getPath will\n\t// know about it\n\tif (!(fn = proto[getName]) || typeof fn != 'function') {\n\t\tfn = proto[getName] = function () {\n\t\t\treturn utils.getPath.fast.call(this, prop);\n\t\t};\n\t\t\n\t\t// and we mark it as generated\n\t\tfn.generated = true;\n\t} else if (fn && typeof fn == 'function' && !fn.generated) getters[prop] = getName;\n\t\n\t// we need to do the same thing for the setters\n\tif (!(fn = proto[setName]) || typeof fn != 'function') {\n\t\tfn = proto[setName] = function (val) {\n\t\t\treturn utils.setPath.fast.call(this, prop, val);\n\t\t};\n\t\t\n\t\t// and we mark it as generated\n\t\tfn.generated = true;\n\t} else if (fn && typeof fn == 'function' && !fn.generated) setters[prop] = setName;\n}","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tCoreObject = require('./CoreObject');\n\n/**\n* An abstract [kind]{@glossary kind} designed to aid in handling asynchronous operations.\n* It represents a task that has not yet completed. Callback functions may be registered to be\n* notified when the task is complete.\n*\n* For more information, see the documentation on [Consuming Web\n* Services]{@linkplain $dev-guide/building-apps/managing-data/consuming-web-services.html}\n* in the Enyo Developer Guide.\n*\n* @class enyo.Async\n* @extends enyo.Object\n* @public\n*/\nvar Async = module.exports = kind(\n\t/** @lends enyo.Async.prototype */ {\n\t\n\tname: 'enyo.Async',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: CoreObject,\n\t\n\t/**\n\t* @private\n\t*/\n\tpublished: {\n\t\t\n\t\t/**\n\t\t* The number of milliseconds to wait after [execution]{@link enyo.Async#go} begins\n\t\t* before failing with a timeout error. If set to `0` (the default), will not\n\t\t* automatically throw a timeout error.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @memberof enyo.Aysnc.prototype\n\t\t* @public\n\t\t*/\n\t\ttimeout: 0\n\t},\n\t\n\t/**\n\t* Will be `true` if an error has occurred and a handler calls the\n\t* [fail()]{@link enyo.Async#fail} method. Can be cleared using\n\t* [recover()]{@link enyo.Async#recover}.\n\t*\n\t* @readonly\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tfailed: false,\n\t\n\t/**\n\t* @private\n\t*/\n\tcontext: null,\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.responders = [];\n\t\t\tthis.errorHandlers = [];\n\t\t\tthis.progressHandlers = [];\n\t\t};\n\t}),\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this.timeoutJob) {\n\t\t\t\tthis.clearTimeout();\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\taccumulate: function (array, fn, ctx) {\n\t\tvar tmp;\n\t\t\n\t\t// to preserve backward compatibility we have to accept that the order of the arguments\n\t\t// might be different\n\t\tif (ctx && typeof ctx == 'function') {\n\t\t\ttmp = fn;\n\t\t\tfn = ctx;\n\t\t\tctx = tmp;\n\t\t}\n\t\t\n\t\t// we go ahead and bind the method to its context to preserve the original\n\t\t// implementation\n\t\tif (ctx) {\n\t\t\tif (typeof ctx == \"string\") {\n\t\t\t\tfn = utils.bind(fn, ctx);\n\t\t\t} else {\n\t\t\t\tfn = fn.bind(ctx);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// now store it for use later\n\t\tarray.push(fn);\n\t},\n\t\n\t/**\n\t* Registers a [function]{@glossary Function} to be fired when\n\t* [execution]{@link enyo.Async#go} is completed successfully. Parameters may be\n\t* in any order, to preserve backward compatibility.\n\t*\n\t* @param {Function} fn - The callback to register.\n\t* @param {Object} [ctx] - The optional context under which to execute the callback.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tresponse: function (fn, ctx) {\n\t\tthis.accumulate(this.responders, fn, ctx);\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Registers a [function]{@glossary Function} to be fired when\n\t* [execution]{@link enyo.Async#go} completes with an error. Parameters may be\n\t* in any order, to preserve backward compatibility.\n\t*\n\t* @param {Function} fn - The callback to register.\n\t* @param {Object} [ctx] - The optional context under which to execute the callback.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\terror: function (fn, ctx) {\n\t\tthis.accumulate(this.errorHandlers, fn, ctx);\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Registers a [function]{@glossary Function} to be fired on progress events.\n\t* Parameters may be in any order, to preserve backward compatibility.\n\t*\n\t* @param {Function} fn - The callback to register.\n\t* @param {Object} [ctx] - The optional context under which to execute the callback.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tprogress: function (fn, ctx) {\n\t\tthis.accumulate(this.progressHandlers, fn, ctx);\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\troute: function (async, value) {\n\t\tvar r = this.bindSafely('respond');\n\t\tasync.response(function (sender, value) {\n\t\t\tr(value);\n\t\t});\n\t\tvar f = this.bindSafely('fail');\n\t\tasync.error(function (sender, value) {\n\t\t\tf(value);\n\t\t});\n\t\tasync.go(value);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\thandle: function (value, handlers) {\n\t\tvar r = handlers.shift();\n\t\tif (r) {\n\t\t\tif (r instanceof Async) {\n\t\t\t\tthis.route(r, value);\n\t\t\t} else {\n\t\t\t\t// handler can return a new 'value'\n\t\t\t\tvar v = utils.call(this.context || this, r, [this, value]);\n\t\t\t\t// ... but only if it returns something other than undefined\n\t\t\t\tv = (v !== undefined) ? v : value;\n\t\t\t\t// next handler\n\t\t\t\t(this.failed ? this.fail : this.respond).call(this, v);\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tstartTimer: function () {\n\t\tthis.startTime = utils.perfNow();\n\t\tif (this.timeout) {\n\t\t\tthis.timeoutJob = setTimeout(this.bindSafely('timeoutComplete'), this.timeout);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tendTimer: function () {\n\t\tif (this.timeoutJob) {\n\t\t\tthis.endTime = utils.perfNow();\n\t\t\tclearTimeout(this.timeoutJob);\n\t\t\tthis.timeoutJob = null;\n\t\t\tthis.latency = this.endTime - this.startTime;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\ttimeoutComplete: function () {\n\t\tthis.timedout = true;\n\t\tthis.fail('timeout');\n\t},\n\t\n\t/**\n\t* Triggers the handler chain for valid outcomes.\n\t*\n\t* @private\n\t*/\n\trespond: function (value) {\n\t\tthis.failed = false;\n\t\tthis.endTimer();\n\t\tthis.handle(value, this.responders);\n\t},\n\n\t/**\n\t* Fails the [task]{@link enyo.Async} and triggers the error chain. May be called from any\n\t* handler.\n\t* \n\t* @param {*} err - The error value to pass to error handlers.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tfail: function (err) {\n\t\tthis.failed = true;\n\t\tthis.endTimer();\n\t\tthis.handle(err, this.errorHandlers);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Clears the error condition ([failed]{@link enyo.Async#failed}) by setting it to `false`.\n\t* If called while responding to handlers, it will continue.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trecover: function () {\n\t\tthis.failed = false;\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tsendProgress: function(current, min, max, sourceEvent) {\n\t\tvar event = utils.mixin({}, sourceEvent);\n\t\tevent.type = 'progress';\n\t\tevent.current = current;\n\t\tevent.min = min;\n\t\tevent.max = max;\n\t\tfor (var i = 0; i < this.progressHandlers.length; i++) {\n\t\t\tutils.call(this.context || this, this.progressHandlers[i], [this, event]);\n\t\t}\n\t},\n\t\n\t/**\n\t* Initiates the asynchronous routine, supplying the given value if it completes\n\t* successfully. This method is usually overloaded in [subkinds]{@glossary subkind}.\n\t*\n\t* @virtual\n\t* @param {*} - value The value to pass to responders.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tgo: function(value) {\n\t\tthis.sendProgress(0, 0, 1);\n\t\tutils.asyncMethod(this, function() {\n\t\t\tthis.sendProgress(1, 0, 1);\n\t\t\tthis.respond(value);\n\t\t});\n\t\treturn this;\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tModelList = require('./ModelList'),\n\tEventEmitter = require('./EventEmitter'),\n\tCoreObject = require('./CoreObject');\n\n/**\n* Only necessary because of the order in which mixins are applied.\n*\n* @class\n* @private\n*/\nvar BaseStore = kind({\n\tkind: CoreObject,\n\tmixins: [EventEmitter]\n});\n\n/**\n* This method should determine whether the given [model]{@link enyo.Model}\n* should be included in the filtered set for the [find()]{@link enyo.Store#find}\n* method.\n* \n* @callback enyo.Store~Filter\n* @param {enyo.Model} model - The [model]{@link enyo.Model} to filter.\n* @returns {Boolean} `true` if the model meets the filter requirements;\n* otherwise, `false`.\n*/\n\n/**\n* The configuration options for the [find()]{@link enyo.Store#find} method.\n* \n* @typedef {Object} enyo.Store~FindOptions\n* @property {Boolean} all=true - Whether or not to include more than one match for the\n*\tfilter method. If `true`, an array of matches is returned; otherwise, a single match.\n* @property {Object} context - If provided, it will be used as the `this` (context) of\n*\tthe filter method.\n*/\n\n/**\n* An anonymous kind used internally for the singleton {@link enyo.store}.\n* \n* @class enyo.Store\n* @mixes enyo.EventEmitter\n* @extends enyo.Object\n* @protected\n*/\nvar Store = kind(\n\t/** @lends enyo.Store.prototype */ {\n\t\n\tname: 'enyo.Store',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: BaseStore,\n\t\n\t/**\n\t* Finds a [model (or models)]{@link enyo.Model} of a certain [kind]{@glossary kind}.\n\t* It uses the return value from a filter method to determine whether a particular\n\t* model will be included. Set the optional `all` flag to `true` to ensure that\n\t* the method looks for all matches; otherwise, it will return the first positive\n\t* match.\n\t* \n\t* @see {@glossary Array.find}\n\t* @param {enyo.Model} ctor - The constructor for the [kind]{@glossary kind} of\n\t*\t[model]{@link enyo.Model} to be filtered.\n\t* @param {enyo.Store~Filter} fn - The filter method.\n\t* @param {enyo.Store~FindOptions} [opts] - The options parameter.\n\t* @returns {(enyo.Model|enyo.Model[]|undefined)} If the `all` flag is `true`,\n\t*\treturns an array of models; otherwise, returns the first model that returned\n\t*\tthat returned `true` from the filter method. Returns `undefined` if `all` is\n\t* `false` and no match could be found.\n\t* @public\n\t*/\n\tfind: function (ctor, fn, opts) {\n\t\tvar kindName = ctor.prototype.kindName,\n\t\t\tlist = this.models[kindName],\n\t\t\toptions = {all: true, context: this};\n\t\t\n\t\t// allows the method to be called with a constructor only and will return an\n\t\t// immutable copy of the array of all models of that type or an empty array\n\t\tif (arguments.length == 1 || typeof fn != 'function') {\n\t\t\treturn list ? list.slice() : [];\n\t\t}\n\t\t\n\t\t// ensure we use defaults with any provided options\n\t\topts = opts ? utils.mixin({}, [options, opts]) : options;\n\t\t\t\n\t\tif (list) return opts.all ? list.filter(fn, opts.context) : list.find(fn, opts.context);\n\t\t\n\t\t// if it happens it could not find a list for the requested kind we fudge the return\n\t\t// so it can keep on executing\n\t\telse return opts.all ? [] : undefined;\n\t},\n\t\n\t/**\n\t* This method is an alias for [find()]{@link enyo.Store#find}.\n\t*\n\t* @deprecated\n\t* @public\n\t*/\n\tfindLocal: function () {\n\t\treturn this.find.apply(this, arguments);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tadd: function (models, opts) {\n\t\tvar ctor = models && (models instanceof Array ? models[0].ctor : models.ctor),\n\t\t\tkindName = ctor && ctor.prototype.kindName,\n\t\t\tlist = kindName && this.models[kindName],\n\t\t\tadded,\n\t\t\ti;\n\t\t\t\n\t\t// if we were able to find the list then we go ahead and attempt to add the models\n\t\tif (list) {\n\t\t\tadded = list.add(models);\n\t\t\t// if we successfully added models and this was a default operation (not being\n\t\t\t// batched by a collection or other feature) we emit the event needed primarily\n\t\t\t// by relational models but could be useful other places\n\t\t\tif (added.length && (!opts || !opts.silent)) {\n\t\t\t\tfor (i = 0; i < added.length; ++i) {\n\t\t\t\t\tthis.emit(ctor, 'add', {model: added[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tremove: function (models, opts) {\n\t\tvar ctor = models && (models instanceof Array ? models[0].ctor : models.ctor),\n\t\t\tkindName = ctor && ctor.prototype.kindName,\n\t\t\tlist = kindName && this.models[kindName],\n\t\t\tremoved,\n\t\t\ti;\n\t\t\n\t\t// if we were able to find the list then we go ahead and attempt to remove the models\n\t\tif (list) {\n\t\t\tremoved = list.remove(models);\n\t\t\t// if we successfully removed models and this was a default operation (not being\n\t\t\t// batched by a collection or other feature) we emit the event. Needed primarily\n\t\t\t// by relational models but could be useful other places\n\t\t\tif (removed.length && (!opts || !opts.silent)) {\n\t\t\t\tfor (i = 0; i < removed.length; ++i) {\n\t\t\t\t\tthis.emit(ctor, 'remove', {model: removed[i]});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Determines, from the given parameters, whether the [store]{@link enyo.store}\n\t* has a specific [model]{@link enyo.Model}.\n\t*\n\t* @param {(Function|enyo.Model)} ctor Can be the constructor for an {@link enyo.Model}\n\t*\tor a model instance. Must be a constructor unless a model instance is passed as the\n\t* optional `model` parameter.\n\t* @param {(String|Number|enyo.Model)} [model] If the `ctor` parameter is a\n\t*\tconstructor, this may be a [Number]{@glossary Number} or a [String]{@glossary String}\n\t* representing a [primaryKey]{@link enyo.Model#primaryKey} for the given model, or an\n\t*\tinstance of a model.\n\t* @returns {Boolean} Whether or not the [store]{@link enyo.store} has the given\n\t*\t[model]{@link enyo.Model}.\n\t* @public\n\t*/\n\thas: function (ctor, model) {\n\t\tvar list;\n\t\t\n\t\tif (!model) {\n\t\t\tmodel = ctor;\n\t\t\tctor = model.ctor;\n\t\t}\n\t\t\n\t\tlist = this.models[ctor.prototype.kindName];\n\t\treturn list ? list.has(model) : false;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tresolve: function (ctor, model) {\n\t\tvar list = this.models[ctor && ctor.prototype.kindName];\n\t\treturn list? list.resolve(model): undefined;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\tthis._scopeListeners = [];\n\t\t\t\n\t\t\t// all future sub-kinds of enyo.Model that are processed will automatically\n\t\t\t// create/add their entries to this object in their concat method\n\t\t\tthis.models = {\n\t\t\t\t'enyo.Model': new ModelList()\n\t\t\t};\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tscopeListeners: function (scope, e) {\n\t\treturn !scope ? this._scopeListeners : this._scopeListeners.filter(function (ln) {\n\t\t\treturn ln.scope === scope ? !e ? true : ln.event == e : false;\n\t\t});\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\ton: kind.inherit(function (sup) {\n\t\treturn function (ctor, e, fn, ctx) {\n\t\t\tif (typeof ctor == 'function') {\n\t\t\t\tthis.scopeListeners().push({\n\t\t\t\t\tscope: ctor,\n\t\t\t\t\tevent: e,\n\t\t\t\t\tmethod: fn,\n\t\t\t\t\tctx: ctx || this\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\toff: kind.inherit(function (sup) {\n\t\treturn function (ctor, e, fn) {\n\t\t\tvar listeners,\n\t\t\t\tidx;\n\t\t\t\n\t\t\tif (typeof ctor == 'function') {\n\t\t\t\tlisteners = this.scopeListeners(ctor);\n\t\t\t\tif (listeners.length) {\n\t\t\t\t\tidx = listeners.findIndex(function (ln) {\n\t\t\t\t\t\treturn ln.event == e && ln.method === fn;\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// if it found the entry we remove it\n\t\t\t\t\tif (idx >= 0) listeners.splice(idx, 1);\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\temit: kind.inherit(function (sup) {\n\t\treturn function (ctor, e) {\n\t\t\tvar listeners,\n\t\t\t\targs;\n\t\t\t\n\t\t\tif (typeof ctor == 'function') {\n\t\t\t\tlisteners = this.scopeListeners(ctor, e);\n\t\t\t\t\n\t\t\t\tif (listeners.length) {\n\t\t\t\t\targs = utils.toArray(arguments).slice(1);\n\t\t\t\t\targs.unshift(this);\n\t\t\t\t\tlisteners.forEach(function (ln) {\n\t\t\t\t\t\tln.method.apply(ln.ctx, args);\n\t\t\t\t\t});\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t})\n});\n\n/**\n* A runtime database for working with [models]{@link enyo.Model}. It is primarily used\n* internally by data layer [kinds]{@glossary kind} ({@link enyo.Model},\n* {@link enyo.Collection}, and {@link enyo.RelationalModel}).\n* \n* @see enyo.Model\n* @see enyo.Collection\n* @see enyo.RelationalModel\n* @type enyo.Store\n* @memberof enyo\n* @public\n*/\nmodule.exports = new Store();","require('../../enyo');\n\nvar\n\tutils = require('./utils'),\n\tkind = require('./kind');\n\t\nvar CoreObject = require('./CoreObject');\n\n/**\n* The {@link enyo.jobs} singleton provides a mechanism for queueing tasks\n* (i.e., functions) for execution in order of priority. The execution of the\n* current job stack may be blocked programmatically by setting a priority\n* level (run level) below which no jobs are executed.\n*\n* At the moment, only {@link enyo.Animator} uses this interface, setting a\n* priority of 4, which blocks all low priority tasks from executing during\n* animations. To maintain backward compatibility, jobs are assigned a priority\n* of 5 by default; thus they are not blocked by animations.\n*\n* Normally, application code will not use `enyo.jobs` directly, but will\n* instead use the [job()]{@link enyo.Component#job} method of\n* {@link enyo.Component}.\n*\n* @name enyo.jobs\n* @public\n*/\nmodule.exports = kind.singleton(\n\t/** @lends enyo.jobs */ {\n\t\n\tkind: CoreObject,\n\t\n\t/**\n\t* @private\n\t*/\n\tpublished: /** @lends enyo.jobs */ {\n\t\t\n\t\t/**\n\t\t* The current priority level.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tpriorityLevel: 0\n\t},\n\t\n\t/**\n\t* Prioritized by index.\n\t*\n\t* @private\n\t*/\n\t_jobs: [ [], [], [], [], [], [], [], [], [], [] ],\n\t\n\t/**\n\t* @private\n\t*/\n\t_priorities: {},\n\t\n\t/**\n\t* @private\n\t*/\n\t_namedJobs: {},\n\t\n\t/**\n\t* @private\n\t*/\n\t_magicWords: {\n\t\t'low': 3,\n\t\t'normal': 5,\n\t\t'high': 7\n\t},\n\t\n\t/**\n\t* Adds a [job]{@link enyo.job} to the job queue. If the current priority\n\t* level is higher than this job's priority, this job gets deferred until the\n\t* job level drops; if it is lower, this job is run immediately.\n\t*\n\t* @param {Function} job - The actual {@glossary Function} to execute as the\n\t* [job]{@link enyo.job}.\n\t* @param {Number} priority - The priority of the job.\n\t* @param {String} nom - The name of the job for later reference.\n\t* @public\n\t*/\n\tadd: function (job, priority, nom) {\n\t\tpriority = priority || 5;\n\n\t\t// magic words: low = 3, normal = 5, high = 7\n\t\tpriority = utils.isString(priority) ? this._magicWords[priority] : priority;\n\n\t\t// if a job of the same name exists, remove it first (replace it)\n\t\tif(nom){\n\t\t\tthis.remove(nom);\n\t\t\tthis._namedJobs[nom] = priority;\n\t\t}\n\n\t\t// if the job is of higher priority than the current priority level then\n\t\t// there's no point in queueing it\n\t\tif(priority >= this.priorityLevel){\n\t\t\tjob();\n\t\t} else {\n\t\t\tthis._jobs[priority - 1].push({fkt: job, name: nom});\n\t\t}\n\t},\n\t\n\t/**\n\t* Will remove the named [job]{@link enyo.job} from the queue.\n\t*\n\t* @param {String} nom - The name of the [job]{@link enyo.job} to remove.\n\t* @returns {Array} An {@glossary Array} that will contain the removed job if\n\t* it was found, or empty if it was not found.\n\t* @public\n\t*/\n\tremove: function (nom) {\n\t\tvar jobs = this._jobs[this._namedJobs[nom] - 1];\n\t\tif(jobs){\n\t\t\tfor(var j = jobs.length-1; j >= 0; j--){\n\t\t\t\tif(jobs[j].name === nom){\n\t\t\t\t\treturn jobs.splice(j, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* Adds a new priority level at which jobs will be executed. If it is higher than the\n\t* highest current priority, the priority level rises. Newly added jobs below that priority\n\t* level are deferred until the priority is removed (i.e., unregistered).\n\t*\n\t* @param {Number} priority - The priority value to register.\n\t* @param {String} id - The name of the priority.\n\t* @public\n\t*/\n\tregisterPriority: function(priority, id) {\n\t\tthis._priorities[id] = priority;\n\t\tthis.setPriorityLevel( Math.max(priority, this.priorityLevel) );\n\t},\n\t\n\t/**\n\t* Removes a priority level. If the removed priority was previously the\n\t* highest priority, the priority level drops to the next highest priority\n\t* and queued jobs with a higher priority are executed.\n\t*\n\t* @param {String} id - The name of the priority level to remove.\n\t* @public\n\t*/\n\tunregisterPriority: function (id) {\n\t\tvar highestPriority = 0;\n\n\t\t// remove priority\n\t\tdelete this._priorities[id];\n\n\t\t// find new highest current priority\n\t\tfor( var i in this._priorities ){\n\t\t\thighestPriority = Math.max(highestPriority, this._priorities[i]);\n\t\t}\n\n\t\tthis.setPriorityLevel( highestPriority );\n\t},\n\t\n\t/**\n\t* Tries to run next job if priority level has dropped.\n\t*\n\t* @type {enyo.ObserverSupport~Observer}\n\t* @private\n\t*/\n\tpriorityLevelChanged: function (was) {\n\t\tif(was > this.priorityLevel){\n\t\t\tthis._doJob();\n\t\t}\n\t},\n\t\n\t/**\n\t* Finds and executes the job of highest priority; in this way, all jobs with priority\n\t* greater than or equal to the current level are run, in order of their priority (highest\n\t* to lowest).\n\t*\n\t* @private\n\t*/\n\t_doJob: function () {\n\t\tvar job;\n\t\t// find the job of highest priority above the current priority level\n\t\t// and remove from the job list\n\t\tfor (var i = 9; i >= this.priorityLevel; i--){\n\t\t\tif (this._jobs[i].length) {\n\t\t\t\tjob = this._jobs[i].shift();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// allow other events to pass through\n\t\tif (job) {\n\t\t\tjob.fkt();\n\t\t\tdelete this._namedJobs[job.name];\n\t\t\tsetTimeout(utils.bind(this, '_doJob'), 10);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tjson = require('./json'),\n\tlogger = require('./logger');\n\nvar\n\tAjaxProperties = require('./AjaxProperties'),\n\tAsync = require('./Async'),\n\t/*jshint -W079*/\n\t// this defaults to providing the native FormData if it exists\n\tFormData = require('./FormData'),\n\t/*jshint +W079*/\n\tXhr = require('./xhr');\n\t\n\n/**\n* A cache of response properties set on the {@link enyo.Ajax} instance once it has completed\n* its request.\n*\n* @typedef {Object} enyo.Ajax~xhrResponse\n* @property {Number} status - The response status.\n* @property {Object} headers - The headers used for the request.\n* @property {String} body - The request body.\n* @public\n*/\n\n/**\n* A [kind]{@glossary kind} designed to expose the native\n* [XMLHttpRequest]{@glossary XMLHttpRequest} API. Available configuration options\n* are exposed by {@link enyo.AjaxProperties}.\n*\n* This kind does not extend {@link enyo.Component} and cannot be used\n* in the [components block]{@link enyo.Component#components}.\n*\n* For more information, see the documentation on [Consuming Web\n* Services]{@linkplain $dev-guide/building-apps/managing-data/consuming-web-services.html}\n* in the Enyo Developer Guide.\n*\n* @class enyo.Ajax\n* @extends enyo.Async\n* @public\n*/\nvar Ajax = module.exports = kind(\n\t/** @lends enyo.Ajax.prototype */ {\n\t\n\tname: 'enyo.Async',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: Async,\n\t\n\t/**\n\t* @private\n\t*/\n\tpublished: AjaxProperties,\n\t\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function (inParams) {\n\t\t\tutils.mixin(this, inParams);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\t// explicilty release any XHR refs\n\t\t\tthis.xhr = null;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* This will be set once a request has completed (successfully or unsuccessfully).\n\t* It is a cache of the response values.\n\t*\n\t* @type enyo.Ajax~xhrResponse\n\t* @default null\n\t* @public\n\t*/\n\txhrResponse: null,\n\t\n\t/**\n\t* Executes the request with the given options. The parameter may be a\n\t* [hash]{@glossary Object} of properties or a [string]{@glossary String}. Both\n\t* represent the query string, with the hash being serialized and the string\n\t* being used directly.\n\t*\n\t* ```javascript\n\t* var query = {q: 'searchTerm'}; // -> \"?q=searchTerm\"\n\t* ```\n\t*\n\t* To provide a `POST` body, see {@link enyo.AjaxProperties.postBody}.\n\t*\n\t* When the request is completed, it will set the\n\t* [xhrResponse]{@link enyo.Ajax#xhrResponse} property.\n\t*\n\t* @see enyo.AjaxProperties\n\t* @see enyo.Ajax.xhrResponse\n\t* @see enyo.Ajax~xhrResponse\n\t* @param {(Object|String)} [params] - A [string]{@glossary String} or\n\t*\t[hash]{@glossary Object} to be used as the query string.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tgo: function (params) {\n\t\tthis.failed = false;\n\t\tthis.startTimer();\n\t\tthis.request(params);\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\trequest: function (params) {\n\t\tvar parts = this.url.split('?');\n\t\tvar uri = parts.shift() || '';\n\t\tvar args = parts.length ? (parts.join('?').split('&')) : [];\n\t\t//\n\t\tvar query = null;\n\t\t//\n\t\tif(utils.isString(params)){\n\t\t\t//If params parameter is a string, use it as request body\n\t\t\tquery = params;\n\t\t}\n\t\telse{\n\t\t\t//If params parameter is not a string, build a query from it\n\t\t\tif(params){\n\t\t\t\tquery = Ajax.objectToQuery(params);\n\t\t\t}\n\t\t}\n\t\t//\n\t\tif (query) {\n\t\t\targs.push(query);\n\t\t\tquery = null;\n\t\t}\n\t\tif (this.cacheBust) {\n\t\t\targs.push(Math.random());\n\t\t}\n\t\t//\n\t\tvar url = args.length ? [uri, args.join('&')].join('?') : uri;\n\t\t//\n\t\tvar xhr_headers = {};\n\t\tvar body;\n\t\tif (this.method != 'GET') {\n\t\t\tbody = this.postBody;\n\t\t\tif (this.method === 'POST' && body instanceof FormData) {\n\t\t\t\tif (body.fake) {\n\t\t\t\t\txhr_headers['Content-Type'] = body.getContentType();\n\t\t\t\t\tbody = body.toString();\n\t\t\t\t} else {\n\t\t\t\t\t// Nothing to do as the\n\t\t\t\t\t// content-type will be\n\t\t\t\t\t// automagically set according\n\t\t\t\t\t// to the FormData\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\txhr_headers['Content-Type'] = this.contentType;\n\t\t\t\tif (body instanceof Object) {\n\t\t\t\t\tif (this.contentType.match(/^application\\/json(;.*)?$/) !== null) {\n\t\t\t\t\t\tbody = JSON.stringify(body);\n\t\t\t\t\t} else if (this.contentType === 'application/x-www-form-urlencoded') {\n\t\t\t\t\t\tbody = Ajax.objectToQuery(body);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tbody = body.toString();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tutils.mixin(xhr_headers, this.headers);\n\t\t// don't pass in headers structure if there are no headers defined as this messes\n\t\t// up CORS code for IE8-9\n\t\tif (utils.keys(xhr_headers).length === 0) {\n\t\t\txhr_headers = undefined;\n\t\t}\n\t\t//\n\t\ttry {\n\t\t\tthis.xhr = Xhr.request({\n\t\t\t\turl: url,\n\t\t\t\tmethod: this.method,\n\t\t\t\tcallback: this.bindSafely('receive'),\n\t\t\t\tbody: body,\n\t\t\t\theaders: xhr_headers,\n\t\t\t\tsync: this.sync,\n\t\t\t\tusername: this.username,\n\t\t\t\tpassword: this.password,\n\t\t\t\txhrFields: utils.mixin({onprogress: this.bindSafely(this.updateProgress)}, this.xhrFields),\n\t\t\t\tmimeType: this.mimeType\n\t\t\t});\n\t\t}\n\t\tcatch (e) {\n\t\t\t// IE can throw errors here if the XHR would fail CORS checks,\n\t\t\t// so catch and turn into a failure.\n\t\t\tthis.fail(e);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\treceive: function (inText, inXhr) {\n\t\tif (!this.failed && !this.destroyed) {\n\t\t\tvar body;\n\t\t\tif (inXhr.responseType === 'arraybuffer') {\n\t\t\t\tbody = inXhr.response;\n\t\t\t} else if (typeof inXhr.responseText === 'string') {\n\t\t\t\tbody = inXhr.responseText;\n\t\t\t} else {\n\t\t\t\t// IE carrying a binary\n\t\t\t\tbody = inXhr.responseBody;\n\t\t\t}\n\t\t\tthis.xhrResponse = {\n\t\t\t\tstatus: inXhr.status,\n\t\t\t\theaders: Ajax.parseResponseHeaders(inXhr),\n\t\t\t\tbody: body\n\t\t\t};\n\t\t\tif (this.isFailure(inXhr)) {\n\t\t\t\tthis.fail(inXhr.status);\n\t\t\t} else {\n\t\t\t\tthis.respond(this.xhrToResponse(inXhr));\n\t\t\t}\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tfail: kind.inherit(function (sup) {\n\t\treturn function (inError) {\n\t\t\t// on failure, explicitly cancel the XHR to prevent\n\t\t\t// further responses.  cancellation also resets the\n\t\t\t// response headers & body,\n\t\t\tif (this.xhr) {\n\t\t\t\tXhr.cancel(this.xhr);\n\t\t\t\tthis.xhr = null;\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\txhrToResponse: function (inXhr) {\n\t\tif (inXhr) {\n\t\t\treturn this[(this.handleAs || 'text') + 'Handler'](inXhr);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tisFailure: function (inXhr) {\n\t\t// if any exceptions are thrown while checking fields in the xhr,\n\t\t// assume a failure.\n\t\ttry {\n\t\t\tif (inXhr.responseType === 'arraybuffer') {\n\t\t\t\t// if we are loading binary data, don't try to access inXhr.responseText\n\t\t\t\t// because that throws an exception on webkit. Instead, just look for\n\t\t\t\t// the response.\n\t\t\t\tif (inXhr.status === 0 && !inXhr.response) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar text = '';\n\t\t\t\t// work around IE8-9 bug where accessing responseText will thrown error\n\t\t\t\t// for binary requests.\n\t\t\t\tif (typeof inXhr.responseText === 'string') {\n\t\t\t\t\ttext = inXhr.responseText;\n\t\t\t\t}\n\t\t\t\t// Follow same failure policy as jQuery's Ajax code\n\t\t\t\t// CORS failures on FireFox will have status 0 and no responseText,\n\t\t\t\t// so treat that as failure.\n\t\t\t\tif (inXhr.status === 0 && text === '') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Otherwise, status 0 may be good for local file access.  We treat the range\n\t\t\t// 1-199 and 300+ as failure (only 200-series code are OK).\n\t\t\treturn (inXhr.status !== 0) && (inXhr.status < 200 || inXhr.status >= 300);\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn true;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\txmlHandler: function (inXhr) {\n\t\treturn inXhr.responseXML;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\ttextHandler: function (inXhr) {\n\t\treturn inXhr.responseText;\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tjsonHandler: function (inXhr) {\n\t\tvar r = inXhr.responseText;\n\t\ttry {\n\t\t\treturn r && json.parse(r);\n\t\t} catch (x) {\n\t\t\tlogger.warn('Ajax request set to handleAs JSON but data was not in JSON format');\n\t\t\treturn r;\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tbinaryHandler: function (inXhr) {\n\t\treturn inXhr.response;\n\t}, \n\t\n\t/**\n\t* @private\n\t*/\n\tupdateProgress: function (event) {\n\t\t// IE8 doesn't properly support progress events and doesn't pass an object to the\n\t\t// handlers so we'll check that before continuing.\n\t\tif (event) {\n\t\t\t// filter out 'input' as it causes exceptions on some Firefox versions\n\t\t\t// due to unimplemented internal APIs\n\t\t\tvar ev = {};\n\t\t\tfor (var k in event) {\n\t\t\t\tif (k !== 'input') {\n\t\t\t\t\tev[k] = event[k];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.sendProgress(event.loaded, 0, event.total, ev);\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tstatics: {\n\t\tobjectToQuery: function (/*Object*/ map) {\n\t\t\tvar enc = encodeURIComponent;\n\t\t\tvar pairs = [];\n\t\t\tvar backstop = {};\n\t\t\tfor (var name in map){\n\t\t\t\tvar value = map[name];\n\t\t\t\tif (value != backstop[name]) {\n\t\t\t\t\tvar assign = enc(name) + '=';\n\t\t\t\t\tif (utils.isArray(value)) {\n\t\t\t\t\t\tfor (var i=0; i < value.length; i++) {\n\t\t\t\t\t\t\tpairs.push(assign + enc(value[i]));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpairs.push(assign + enc(value));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn pairs.join('&');\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tprotectedStatics: {\n\t\tparseResponseHeaders: function (xhr) {\n\t\t\tvar headers = {};\n\t\t\tvar headersStr = [];\n\t\t\tif (xhr.getAllResponseHeaders) {\n\t\t\t\theadersStr = xhr.getAllResponseHeaders().split(/\\r?\\n/);\n\t\t\t}\n\t\t\tfor (var i = 0; i < headersStr.length; i++) {\n\t\t\t\tvar headerStr = headersStr[i];\n\t\t\t\tvar index = headerStr.indexOf(': ');\n\t\t\t\tif (index > 0) {\n\t\t\t\t\tvar key = headerStr.substring(0, index).toLowerCase();\n\t\t\t\t\tvar val = headerStr.substring(index + 2);\n\t\t\t\t\theaders[key] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn headers;\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tObserverSupport = require('./ObserverSupport'),\n\tComputedSupport = require('./ComputedSupport'),\n\tBindingSupport = require('./BindingSupport'),\n\tEventEmitter = require('./EventEmitter'),\n\tStateSupport = require('./StateSupport'),\n\tModelList = require('./ModelList'),\n\tSource = require('./Source'),\n\tStates = require('./States'),\n\tStore = require('./Store');\n\n/**\n* This is only necessary because of the order in which mixins are applied.\n*\n* @class\n* @private\n*/\nvar BaseModel = kind({\n\tkind: null,\n\tmixins: [ObserverSupport, ComputedSupport, BindingSupport, EventEmitter, StateSupport]\n});\n\n/**\n* The event emitted when [attributes]{@link enyo.Model#attributes} have been modified.\n* The event [object]{@glossary Object} will consist of key/value pairs of attributes\n* that changed and their new values.\n*\n* @event enyo.Model#change\n* @type {Object}\n* @public\n*/\n\n/**\n* The default configurable [options]{@link enyo.Model#options} used in certain API methods\n* of {@link enyo.Model}.\n*\n* @typedef {Object} enyo.Model~Options\n* @property {Boolean} silent=false - Keep events and notifications from being emitted.\n* @property {Boolean} commit=false - Immediately [commit]{@link enyo.Model#commit} changes\n*\tafter they have occurred. Also note that, if `true`, when the [model]{@link enyo.Model}\n* is [destroyed]{@link enyo.Model#destroy}, it will also be destroyed via any\n* [sources]{@link enyo.Model#source} it has.\n* @property {Boolean} parse=false - During initialization, [parse]{@link enyo.Model#parse}\n*\tany given [attributes]{@link enyo.Model#attributes}; after\n*\t[fetching]{@link enyo.Model#fetch}, parse the data before calling\n* [set()]{@link enyo.Model#set}.\n* @property {Boolean} fetch=false - Automatically call [fetch()]{@link enyo.Model#fetch}\n*\tduring initialization.\n*/\n\n/**\n* The configurable options for [fetch()]{@link enyo.Model#fetch},\n* [commit()]{@link enyo.Model#commit}, and [destroy()]{@link enyo.Model#destroy}.\n*\n* @typedef {enyo.Model~Options} enyo.Model~ActionOptions\n* @property {enyo.Model~Success} success - The callback executed upon successful\n*\tcompletion.\n* @property {enyo.Model~Error} error - The callback executed upon a failed attempt.\n*/\n\n/**\n* @callback enyo.Model~Success\n* @param {enyo.Model} model - The [model]{@link enyo.Model} that is returning successfully.\n* @param {enyo.Model~ActionOptions} opts - The original options passed to the action method\n*\tthat is returning successfully.\n* @param {*} res - The result, if any, returned by the [source]{@link enyo.Source} that\n*\texecuted it.\n* @param {String} source - The name of the [source]{@link enyo.Model#source} that has\n* returned successfully.\n*/\n\n/**\n* @callback enyo.Model~Error\n* @param {enyo.Model} model - The model that is returning an error.\n* @param {String} action - The name of the action that failed, one of `'FETCHING'`,\n*\t`'COMMITTING'`, or `'DESTROYING'`.\n* @param {enyo.Model~Options} opts - The original options passed to the action method\n*\tthat is returning an error.\n* @param {*} res - The result, if any, returned by the [source]{@link enyo.Source} that\n*\texecuted it.\n* @param {String} source - The name of the [source]{@link enyo.Model#source} that has\n*\treturned an error.\n*/\n\n/**\n* An [object]{@glossary Object} used to represent and maintain state. Usually,\n* an {@link enyo.Model} is used to expose data to the view layer. It keeps logic\n* related to the data (retrieving it, updating it, storing it, etc.) out of the\n* view, and the view can automatically update based on changes in the model.\n* Models have the ability to work with other data layer [kinds]{@glossary kind}\n* to provide more sophisticated implementations.\n*\n* Models have [bindable]{@link enyo.BindingSupport}\n* [attributes]{@link enyo.Model#attributes}. Models differs from other\n* bindable kinds in that attribute values are proxied from an internal\n* [hash]{@glossary Object} instead of being set on the target properties\n* directly.\n*\n* @see enyo.Store\n* @see enyo.Collection\n* @see enyo.RelationalModel\n* @see enyo.ModelController\n* @class enyo.Model\n* @mixes enyo.ObserverSupport\n* @mixes enyo.ComputedSupport\n* @mixes enyo.BindingSupport\n* @mixes enyo.EventEmitter\n* @mixes enyo.StateSupport\n* @public\n*/\nvar Model = module.exports = kind(\n\t/** @lends enyo.Model.prototype */ {\n\n\tname: 'enyo.Model',\n\n\t/**\n\t* @private\n\t*/\n\tkind: BaseModel,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* Used by various [sources]{@link enyo.Model#source} as part of the\n\t* [URI]{@glossary URI} from which they may be [fetched]{@link enyo.Model#fetch},\n\t* [committed]{@link enyo.Model#commit}, or [destroyed]{@link enyo.Model#destroy}.\n\t* Some sources may use this property in other ways.\n\t*\n\t* @see enyo.Model.getUrl\n\t* @see enyo.Source\n\t* @see enyo.AjaxSource\n\t* @see enyo.JsonpSource\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\turl: '',\n\n\t/**\n\t* Implement this method to be used by [sources]{@link enyo.Model#source} to\n\t* dynamically derive the [URI]{@glossary URI} from which they may be\n\t* [fetched]{@link enyo.Model#fetch}, [committed]{@link enyo.Model#commit},\n\t* or [destroyed]{@link enyo.Model#destroy}. Some sources may use this\n\t* property in other ways. Note that, if this method is implemented, the\n\t* [url]{@link enyo.Model#url} will not be used.\n\t*\n\t* @see enyo.Model.url\n\t* @see enyo.Source\n\t* @see enyo.AjaxSource\n\t* @see enyo.JsonpSource\n\t* @type {Function}\n\t* @default null\n\t* @virtual\n\t* @public\n\t*/\n\tgetUrl: null,\n\n\t/**\n\t* The [hash]{@glossary Object} of properties proxied by this [model]{@link enyo.Model}.\n\t* If defined on a [subkind]{@glossary subkind}, it may be assigned default values and\n\t* all instances will share its default structure. If no attributes are defined, an\n\t* empty [hash]{@glossary Object} will be assigned during initialization. It is not\n\t* necessary to pre-define the structure of a model; depending on the model's complexity,\n\t* pre-defining the structure may possibly hinder performance.\n\t*\n\t* It should also be noted that calls to [get()]{@link enyo.Model#get} or\n\t* [set()]{@link enyo.Model#set} will access and modify this property. This includes\n\t* the values to which (or from which) [bindings]{@link enyo.BindingSupport} are bound.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tattributes: null,\n\n\t/**\n\t* The [source(s)]{@link enyo.Source} to use when [fetching]{@link enyo.Model#fetch},\n\t* [committing]{@link enyo.Model#commit}, or [destroying]{@link enyo.Model#destroy}.\n\t* Any method that uses sources may override this default value in its configuration\n\t* options. This value may be a [string]{@glossary String}, an\n\t* [Array]{@glossary Array} of strings, an instance of {@link enyo.Source}, or an\n\t* array of `enyo.Source` instances.\n\t*\n\t* @see enyo.Source\n\t* @see enyo.Model.fetch\n\t* @see enyo.Model.commit\n\t* @see enyo.Model.destroy\n\t* @type {(String|String[]|enyo.Source|enyo.Source[])}\n\t* @default null\n\t* @public\n\t*/\n\tsource: null,\n\n\t/**\n\t* These [keys]{@glossary Object.keys} will be the only\n\t* [attributes]{@link enyo.Model#attributes} included if the\n\t* [model]{@link enyo.Model} is [committed]{@link enyo.Model#commit}. This\n\t* directly modifies the result of calling [raw()]{@link enyo.Model#raw}. If\n\t* not defined, all keys from the [attributes]{@link enyo.Model#attributes}\n\t* [hash]{@glossary Object} will be used.\n\t*\n\t* @see enyo.Model.raw\n\t* @see enyo.Model.toJSON\n\t* @type {String[]}\n\t* @default null\n\t* @public\n\t*/\n\tincludeKeys: null,\n\n\t/**\n\t* The inheritable default configuration options. These specify the behavior of particular\n\t* API features of {@link enyo.Model}. Any method that uses these options may override\n\t* the default values in its own configuration options. Note that setting an\n\t* [options hash]{@glossary Object} on a [subkind]{@glossary subkind} will result in\n\t* the new values' being merged with--not replacing--the\n\t* [superkind's]{@glossary superkind} own `options`.\n\t*\n\t* @type {enyo.Model~Options}\n\t* @public\n\t*/\n\toptions: {\n\t\tsilent: false,\n\t\tcommit: false,\n\t\tparse: false,\n\t\tfetch: false\n\t},\n\n\t/**\n\t* The current [state(s)]{@link enyo~States} possessed by the [model]{@link enyo.Model}.\n\t* There are limitations as to which state(s) the model may possess at any given time.\n\t* By default, a model is [NEW]{@link enyo~States.NEW} and [CLEAN]{@link enyo~States.CLEAN}.\n\t* Note that this is **not** a [bindable]{@link enyo.BindingSupport} property.\n\t*\n\t* @see enyo.States\n\t* @see enyo.StateSupport\n\t* @type {enyo.States}\n\t* @readonly\n\t* @public\n\t*/\n\tstatus: States.NEW | States.CLEAN,\n\n\t/**\n\t* The unique attribute by which the [model]{@link enyo.Model} may be indexed. The\n\t* attribute's value must be unique across all instances of the specific model\n\t* [kind]{@glossary kind}\n\t*\n\t* @type {String}\n\t* @default 'id'\n\t* @public\n\t*/\n\tprimaryKey: 'id',\n\n\t/**\n\t* Inspects and restructures incoming data prior to [setting]{@link enyo.Model#set} it on\n\t* the [model]{@link enyo.Model}. While this method may be called directly, it is most\n\t* often used via the [parse]{@link enyo.Model~Options.parse} option and executed\n\t* automatically, either during initialization or when [fetched]{@link enyo.Model#fetch}\n\t* (or, in some cases, both). This is a virtual method and must be provided to suit a\n\t* given implementation's needs.\n\t*\n\t* @see enyo.Model~Options.parse\n\t* @param {*} data - The incoming data that may need to be restructured or reduced prior to\n\t*\tbeing [set]{@link enyo.Model#set} on the [model]{@link enyo.Model}.\n\t* @returns {Object} The [hash]{@glossary Object} to apply to the\n\t*\tmodel via [set()]{@link enyo.Model#set}.\n\t* @virtual\n\t* @public\n\t*/\n\tparse: function (data) {\n\t\treturn data;\n\t},\n\n\t/**\n\t* Returns an [Object]{@glossary Object} that represents the underlying data structure\n\t* of the [model]{@link enyo.Model}. This is dependent on the current\n\t* [attributes]{@link enyo.Model#attributes} as well as the\n\t* [includeKeys]{@link enyo.Model#includeKeys}.\n\t* [Computed properties]{@link enyo.ComputedSupport} are **never** included.\n\t*\n\t* @see enyo.Model.includeKeys\n\t* @see enyo.Model.attributes\n\t* @returns {Object} The formatted [hash]{@glossary Object} representing the underlying\n\t*\tdata structure of the [model]{@link enyo.Model}.\n\t* @public\n\t*/\n\traw: function () {\n\t\tvar inc = this.includeKeys\n\t\t\t, attrs = this.attributes\n\t\t\t, keys = inc || Object.keys(attrs)\n\t\t\t, cpy = inc? utils.only(inc, attrs): utils.clone(attrs);\n\t\tkeys.forEach(function (key) {\n\t\t\tvar ent = this.get(key);\n\t\t\tif (typeof ent == 'function') cpy[key] = ent.call(this);\n\t\t\telse if (ent && ent.raw) cpy[key] = ent.raw();\n\t\t\telse cpy[key] = ent;\n\t\t}, this);\n\t\treturn cpy;\n\t},\n\n\t/**\n\t* Returns the [JSON]{@glossary JSON} serializable [raw()]{@link enyo.Model#raw} output\n\t* of the [model]{@link enyo.Model}. Will automatically be executed by\n\t* [JSON.parse()]{@glossary JSON.parse}.\n\t*\n\t* @see enyo.Model.raw\n\t* @returns {Object} The return value of [raw()]{@link enyo.Model#raw}.\n\t* @public\n\t*/\n\ttoJSON: function () {\n\n\t\t// @NOTE: Because this is supposed to return a JSON parse-able object\n\t\treturn this.raw();\n\t},\n\n\t/**\n\t* Restores an [attribute]{@link enyo.Model#attributes} to its previous value. If no\n\t* attribute is specified, all previous values will be restored.\n\t*\n\t* @see enyo.Model.set\n\t* @see enyo.Model.previous\n\t* @param {String} [prop] - The [attribute]{@link enyo.Model#attributes} to\n\t*\t[restore]{@link enyo.Model#restore}. If not provided, all attributes will be\n\t* restored to their previous values.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trestore: function (prop) {\n\n\t\t// we ensure that the property is forcibly notified (when possible) to ensure that\n\t\t// bindings or other observers will know it returned to that value\n\t\tif (prop) this.set(prop, this.previous[prop], {force: true});\n\t\telse this.set(this.previous);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Commits the [model]{@link enyo.Model} to a [source or sources]{@link enyo.Model#source}.\n\t* A model cannot be [committed]{@link enyo.Model#commit} if it is in an\n\t* [error]{@link enyo~States.ERROR} ({@link enyo.StateSupport.isError}) or\n\t* [busy]{@link enyo~States.BUSY} ({@link enyo.StateSupport.isBusy})\n\t* [state]{@link enyo.Model#status}. While executing, it will add the\n\t* [COMMITTING]{@link enyo~States.COMMITTING} flag to the model's\n\t* [status]{@link enyo.Model#status}. Once it has completed execution, it will\n\t* remove this flag (even if it fails).\n\t*\n\t* @see enyo.Model.committed\n\t* @see enyo.Model.status\n\t* @param {enyo.Model~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tcommit: function (opts) {\n\t\tvar options,\n\t\t\tsource,\n\t\t\tit = this;\n\n\t\t// if the current status is not one of the error or busy states we can continue\n\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\n\t\t\t// if there were options passed in we copy them quickly so that we can hijack\n\t\t\t// the success and error methods while preserving the originals to use later\n\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\n\t\t\t// make sure we keep track of how many sources we're requesting\n\t\t\tsource = options.source || this.source;\n\t\t\tif (source && ((source instanceof Array) || source === true)) {\n\t\t\t\tthis._waiting = source.length ? source.slice() : Object.keys(Source.sources);\n\t\t\t}\n\n\t\t\toptions.success = function (source, res) {\n\t\t\t\tit.committed(opts, res, source);\n\t\t\t};\n\n\t\t\toptions.error = function (source, res) {\n\t\t\t\tit.errored('COMMITTING', opts, res, source);\n\t\t\t};\n\n\t\t\t// set the state\n\t\t\tthis.status = this.status | States.COMMITTING;\n\n\t\t\t// now pass this on to the source to execute as it sees fit\n\t\t\tSource.execute('commit', this, options);\n\t\t} else this.errored(this.status, opts);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Fetches the [model]{@link enyo.Model} from a\n\t* [source or sources]{@link enyo.Model#source}. A model cannot be\n\t* [fetched]{@link enyo.Model#fetch} if it is in an\n\t* [error]{@link enyo~States.ERROR} ({@link enyo.StateSupport.isError}) or\n\t* [busy]{@link enyo~States.BUSY} ({@link enyo.StateSupport.isBusy})\n\t* [state]{@link enyo.Model#status}. While executing, it will add the\n\t* [FETCHING]{@link enyo~States.FETCHING} flag to the model's\n\t* [status]{@link enyo.Model#status}. Once it has completed execution, it will\n\t* remove this flag (even if it fails).\n\t*\n\t* @see enyo.Model.fetched\n\t* @see enyo.Model.status\n\t* @param {enyo.Model~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tfetch: function (opts) {\n\t\tvar options,\n\t\t\tsource,\n\t\t\tit = this;\n\n\t\t// if the current status is not one of the error or busy states we can continue\n\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\n\t\t\t// if there were options passed in we copy them quickly so that we can hijack\n\t\t\t// the success and error methods while preserving the originals to use later\n\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\n\t\t\t// make sure we keep track of how many sources we're requesting\n\t\t\tsource = options.source || this.source;\n\t\t\tif (source && ((source instanceof Array) || source === true)) {\n\t\t\t\tthis._waiting = source.length ? source.slice() : Object.keys(Source.sources);\n\t\t\t}\n\n\t\t\toptions.success = function (source, res) {\n\t\t\t\tit.fetched(opts, res, source);\n\t\t\t};\n\n\t\t\toptions.error = function (source, res) {\n\t\t\t\tit.errored('FETCHING', opts, res, source);\n\t\t\t};\n\n\t\t\t// set the state\n\t\t\tthis.status = this.status | States.FETCHING;\n\n\t\t\t// now pass this on to the source to execute as it sees fit\n\t\t\tSource.execute('fetch', this, options);\n\t\t} else this.errored(this.status, opts);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Destroys the [model]{@link enyo.Model}. By default, the model will only\n\t* be [destroyed]{@glossary destroy} in the client. To execute with a\n\t* [source or sources]{@link enyo.Model#source}, either the\n\t* [commit default option]{@link enyo.Model#options} must be `true` or a\n\t* `source` property must be explicitly provided in the `opts` parameter.\n\t* A model cannot be destroyed (using a source) if it is in an\n\t* [error]{@link enyo~States.ERROR} ({@link enyo.StateSupport.isError})\n\t* or [busy]{@link enyo~States.BUSY} ({@link enyo.StateSupport.isBusy})\n\t* [state]{@link enyo.Model#status}. While executing, it will add the\n\t* [DESTROYING]{@link enyo~States.DESTROYING} flag to the model's\n\t* [status]{@link enyo.Model#status}. Once it has completed execution, it\n\t* will remove this flag (even if it fails).\n\t*\n\t* @see enyo.Model.status\n\t* @param {enyo.Model~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroy: function (opts) {\n\t\tvar options = opts ? utils.mixin({}, [this.options, opts]) : this.options,\n\t\t\tit = this,\n\t\t\tidx;\n\n\t\t// this becomes an (potentially) async operation if we are committing this destroy\n\t\t// to a source and its kind of tricky to figure out because there are several ways\n\t\t// it could be flagged to do this\n\n\t\tif (options.commit || options.source) {\n\n\t\t\t// if the current status is not one of the error states we can continue\n\t\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\n\t\t\t\t// remap to the originals\n\t\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\n\t\t\t\toptions.success = function (source, res) {\n\n\t\t\t\t\tif (it._waiting) {\n\t\t\t\t\t\tidx = it._waiting.findIndex(function (ln) {\n\t\t\t\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (idx > -1) it._waiting.splice(idx, 1);\n\t\t\t\t\t\tif (!it._waiting.length) it._waiting = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// continue the operation this time with commit false explicitly\n\t\t\t\t\tif (!it._waiting) {\n\t\t\t\t\t\toptions.commit = options.source = null;\n\t\t\t\t\t\tit.destroy(options);\n\t\t\t\t\t}\n\t\t\t\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t\t\t\t};\n\n\t\t\t\toptions.error = function (source, res) {\n\n\t\t\t\t\tif (it._waiting) {\n\t\t\t\t\t\tidx = it._waiting.findIndex(function (ln) {\n\t\t\t\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (idx > -1) it._waiting.splice(idx, 1);\n\t\t\t\t\t\tif (!it._waiting.length) it._waiting = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// continue the operation this time with commit false explicitly\n\t\t\t\t\tif (!it._waiting) {\n\t\t\t\t\t\toptions.commit = options.source = null;\n\t\t\t\t\t\tit.destroy(options);\n\t\t\t\t\t}\n\n\t\t\t\t\t// we don't bother setting the error state if we aren't waiting because it\n\t\t\t\t\t// will be cleared to DESTROYED and it would be pointless\n\t\t\t\t\telse this.errored('DESTROYING', opts, res, source);\n\t\t\t\t};\n\n\t\t\t\tthis.status = this.status | States.DESTROYING;\n\n\t\t\t\tSource.execute('destroy', this, options);\n\t\t\t} else if (this.status & States.ERROR) this.errored(this.status, opts);\n\n\t\t\t// we don't allow the destroy to take place and we don't forcibly break-down\n\t\t\t// the collection errantly so there is an opportuniy to resolve the issue\n\t\t\t// before we lose access to the collection's content!\n\t\t\treturn this;\n\t\t}\n\n\n\t\t// we flag this early so objects that receive an event and process it\n\t\t// can optionally check this to support faster cleanup in some cases\n\t\t// e.g. Collection/Store don't need to remove listeners because it will\n\t\t// be done in a much quicker way already\n\t\tthis.destroyed = true;\n\t\tthis.status = States.DESTROYED;\n\t\tthis.unsilence(true).emit('destroy');\n\t\tthis.removeAllListeners();\n\t\tthis.removeAllObservers();\n\n\t\t// if this does not have the the batching flag (that would be set by a collection)\n\t\t// then we need to do the default of removing it from the store\n\t\tif (!opts || !opts.batching) this.store.remove(this);\n\t},\n\n\t/**\n\t* Retrieves the value for the given property or path. If the property is a\n\t* [computed property]{@link enyo.ComputedSupport.computed}, then it will return\n\t* that value; otherwise, it will attempt to retrieve the value from the\n\t* [attributes hash]{@link enyo.Model#attributes}.\n\t*\n\t* @param {String} path - The property to retrieve.\n\t* @returns {*} The value for the requested property or path, or `undefined` if\n\t* it cannot be found or does not exist.\n\t* @public\n\t*/\n\tget: function (path) {\n\t\treturn this.isComputed(path) ? this._getComputed(path) : this.attributes[path];\n\t},\n\n\t/**\n\t* Sets the requested `path` or [hash]{@glossary Object} of properties on the\n\t* [model]{@link enyo.Model}. Properties are applied to the\n\t* [attributes hash]{@link enyo.Model#attributes} and are retrievable via\n\t* [get()]{@link enyo.Model#get}. If properties were updated and the `silent`\n\t* option is not `true`, this method will emit a `change` event, as well as\n\t* individual [notifications]{@link enyo.ObserverSupport.notify} for the\n\t* properties that were modified.\n\t*\n\t* @fires enyo.Model#change\n\t* @see enyo.ObserverSupport\n\t* @see enyo.BindingSupport\n\t* @param {(String|Object)} path - Either the property name or a [hash]{@glossary Object}\n\t*\tof properties and values to set.\n\t* @param {(*|enyo.Model~Options)} is If `path` is a [string]{@glossary String},\n\t* this should be the value to set for the given property; otherwise, it should be\n\t* an optional hash of available [configuration options]{@link enyo.Model~Options}.\n\t* @param {enyo.Model~Options} [opts] - If `path` is a string, this should be the\n\t* optional hash of available configuration options; otherwise, it will not be used.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tset: function (path, is, opts) {\n\t\tif (!this.destroyed) {\n\n\t\t\tvar attrs = this.attributes,\n\t\t\t\toptions = this.options,\n\t\t\t\tchanged,\n\t\t\t\tincoming,\n\t\t\t\tforce,\n\t\t\t\tsilent,\n\t\t\t\tkey,\n\t\t\t\tvalue,\n\t\t\t\tcommit,\n\t\t\t\tfetched;\n\n\t\t\t// the default case for this setter is accepting an object of key->value pairs\n\t\t\t// to apply to the model in which case the second parameter is the optional\n\t\t\t// configuration hash\n\t\t\tif (typeof path == 'object') {\n\t\t\t\tincoming = path;\n\t\t\t\topts = opts || is;\n\t\t\t}\n\n\t\t\t// otherwise in order to have a single path here we flub it so it will keep on\n\t\t\t// going as expected\n\t\t\telse {\n\t\t\t\tincoming = {};\n\t\t\t\tincoming[path] = is;\n\t\t\t}\n\n\t\t\t// to maintain backward compatibility with the old setters that allowed the third\n\t\t\t// parameter to be a boolean to indicate whether or not to force notification of\n\t\t\t// change even if there was any\n\t\t\tif (opts === true) {\n\t\t\t\tforce = true;\n\t\t\t\topts = {};\n\t\t\t}\n\n\t\t\topts = opts ? utils.mixin({}, [options, opts]) : options;\n\t\t\tsilent = opts.silent;\n\t\t\tforce = force || opts.force;\n\t\t\tcommit = opts.commit;\n\t\t\tfetched = opts.fetched;\n\n\t\t\tfor (key in incoming) {\n\t\t\t\tvalue = incoming[key];\n\n\t\t\t\tif (value !== attrs[key] || force) {\n\t\t\t\t\t// to ensure we have an object to work with\n\t\t\t\t\t// note that we check inside this loop so we don't have to examine keys\n\t\t\t\t\t// later only the local variable changed\n\t\t\t\t\tchanged = this.changed || (this.changed = {});\n\t\t\t\t\t//store the previous attr value\n\t\t\t\t\tthis.previous[key] = attrs[key];\n\t\t\t\t\t//set new value\n\t\t\t\t\tchanged[key] = attrs[key] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (changed) {\n\n\t\t\t\t// we add dirty as a value of the status but clear the CLEAN bit if it\n\t\t\t\t// was set - this would allow it to be in the ERROR state and NEW and DIRTY\n\t\t\t\tif (!fetched) this.status = (this.status | States.DIRTY) & ~States.CLEAN;\n\n\t\t\t\tif (!silent) this.emit('change', changed, this);\n\n\t\t\t\tif (commit && !fetched) this.commit(opts);\n\n\t\t\t\t// reset value so subsequent changes won't be added to this change-set\n\t\t\t\tthis.changed = null;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* A bit of hackery to facade the normal [getter]{@link enyo.ComputedSupport.get}. Note that\n\t* we pass an arbitrary super-method that automatically returns `undefined`, which is\n\t* consistent with this use case and its intended purpose.\n\t*\n\t* @private\n\t*/\n\t_getComputed: ComputedSupport.get.fn(function () { return undefined; }),\n\n\t/**\n\t* Initializes the [model]{@link enyo.Model}. Unlike some methods, the parameters are not\n\t* interchangeable. If you are not using a particular (optional) parameter, pass in `null`.\n\t*\n\t* @param {Object} [attrs] - Optionally initialize the [model]{@link enyo.Model} with some\n\t*\t[attributes]{@link enyo.Model#attributes}.\n\t* @param {Object} [props] - Properties to apply directly to the [model]{@link enyo.Model} and\n\t*\tnot the [attributes hash]{@link enyo.Model#attributes}. If these properties contain an\n\t*\t`options` property (a [hash]{@glossary Object}) it will be merged with existing\n\t*\t[options]{@link enyo.Model#options}.\n\t* @param {enyo.Model~Options} [opts] - This is a one-time [options hash]{@link enyo.Model~Options} that\n\t*\tis only used during initialization and not applied as defaults.\n\t* @public\n\t*/\n\tconstructor: function (attrs, props, opts) {\n\n\t\t// in cases where there is an options hash provided in the _props_ param\n\t\t// we need to integrate it manually...\n\t\tif (props && props.options) {\n\t\t\tthis.options = utils.mixin({}, [this.options, props.options]);\n\t\t\tdelete props.options;\n\t\t}\n\n\t\t// the _opts_ parameter is a one-hit options hash it does not leave\n\t\t// behind its values as default options...\n\t\topts = opts? utils.mixin({}, [this.options, opts]): this.options;\n\n\t\t// go ahead and mix all of the properties in\n\t\tprops && utils.mixin(this, props);\n\n\t\tvar noAdd = opts.noAdd\n\t\t\t, commit = opts.commit\n\t\t\t, parse = opts.parse\n\t\t\t, fetch = this.options.fetch\n\t\t\t, defaults;\n\n\t\t// defaults = this.defaults && (typeof this.defaults == 'function'? this.defaults(attrs, opts): this.defaults);\n\t\tdefaults = this.defaults && typeof this.defaults == 'function'? this.defaults(attrs, opts): null;\n\n\t\t// ensure we have a unique identifier that could potentially\n\t\t// be used in remote systems\n\t\tthis.euid = this.euid || utils.uid('m');\n\n\t\t// if necessary we need to parse the incoming attributes\n\t\tattrs = attrs? parse? this.parse(attrs): attrs: null;\n\n\t\t// ensure we have the updated attributes\n\t\tthis.attributes = this.attributes? defaults? utils.mixin({}, [defaults, this.attributes]): utils.clone(this.attributes, true): defaults? utils.clone(defaults, true): {};\n\t\tattrs && utils.mixin(this.attributes, attrs);\n\t\tthis.previous = utils.clone(this.attributes);\n\n\t\t// now we need to ensure we have a store and register with it\n\t\tthis.store = this.store || Store;\n\n\t\t// @TODO: The idea here is that when batch instancing records a collection\n\t\t// should be intelligent enough to avoid doing each individually or in some\n\t\t// cases it may be useful to have a record that is never added to a store?\n\t\tif (!noAdd) this.store.add(this, opts);\n\n\t\tcommit && this.commit();\n\t\tfetch && this.fetch();\n\t},\n\n\t/**\n\t* Overloaded. We funnel arbitrary notification updates through here, as this\n\t* is faster than using the built-in notification updates for batch operations.\n\t*\n\t* @private\n\t*/\n\temit: kind.inherit(function (sup) {\n\t\treturn function (e, props) {\n\t\t\tif (e == 'change' && props && this.isObserving()) {\n\t\t\t\tfor (var key in props) this.notify(key, this.previous[key], props[key]);\n\t\t\t}\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Overloaded to alias the (also overloaded) [emit()]{@link enyo.Model#emit} method.\n\t*\n\t* @private\n\t*/\n\ttriggerEvent: function () {\n\t\treturn this.emit.apply(this, arguments);\n\t},\n\n\t/**\n\t* When a [fetch]{@link enyo.Model#fetch} has completed successfully, it is returned\n\t* to this method. This method handles special and important behavior; it should not be\n\t* called directly and, when overloading, care must be taken to ensure that you call\n\t* the super-method. This correctly sets the [status]{@link enyo.Model#status} and, in\n\t* cases where multiple [sources]{@link enyo.Model#source} were used, it waits until\n\t* all have responded before clearing the [FETCHING]{@link enyo~States.FETCHING} flag.\n\t* If a [success]{@link enyo.Model~Success} callback was provided, it will be called\n\t* once for each source.\n\t*\n\t* @param {enyo.Model~ActionOptions} opts - The original options passed to\n\t*\t[fetch()]{@link enyo.Model#fetch}, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given [source]{@link enyo.Model#source},\n\t* if any. This will vary depending on the source.\n\t* @param {String} source - The name of the source that has completed successfully.\n\t* @public\n\t*/\n\tfetched: function (opts, res, source) {\n\t\tvar idx,\n\t\t\toptions = this.options;\n\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\n\t\t// normalize options so we have values and ensure it knows it was just fetched\n\t\topts = opts ? utils.mixin({}, [options, opts]) : options;\n\t\topts.fetched = true;\n\n\t\t// for a special case purge to only use the result sub-tree of the fetched data for\n\t\t// the model attributes\n\t\tif (opts.parse) res = this.parse(res);\n\n\t\t// note this will not add the DIRTY state because it was fetched but also note that it\n\t\t// will not clear the DIRTY flag if it was already DIRTY\n\t\tif (res) this.set(res, opts);\n\n\t\t// clear the FETCHING and NEW state (if it was NEW) we do not set it as dirty as this\n\t\t// action alone doesn't warrant a dirty flag that would need to be set in the set method\n\t\tif (!this._waiting) this.status = this.status & ~(States.FETCHING | States.NEW);\n\n\t\t// now look for an additional success callback\n\t\tif (opts.success) opts.success(this, opts, res, source);\n\t},\n\n\t/**\n\t* When a [commit]{@link enyo.Model#commit} has completed successfully, it is returned\n\t* to this method. This method handles special and important behavior; it should not be\n\t* called directly and, when overloading, care must be taken to ensure that you call the\n\t* super-method. This correctly sets the [status]{@link enyo.Model#status} and, in cases\n\t* where multiple [sources]{@link enyo.Model#source} were used, it waits until all have\n\t* responded before clearing the [COMMITTING]{@link enyo~States.COMMITTING} flag. If a\n\t* [success]{@link enyo.Model~Success} callback was provided, it will be called once for\n\t* each source.\n\t*\n\t* @param {enyo.Model~ActionOptions} opts - The original options passed to\n\t*\t[commit()]{@link enyo.Model#commit}, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given [source]{@link enyo.Model#source},\n\t* if any. This will vary depending on the source.\n\t* @param {String} source - The name of the source that has completed successfully.\n\t* @public\n\t*/\n\tcommitted: function (opts, res, source) {\n\t\tvar idx;\n\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\n\t\tif (!this._waiting) {\n\t\t\t// we need to clear the COMMITTING bit and DIRTY bit as well as ensure that the\n\t\t\t// 'previous' hash is whatever the current attributes are\n\t\t\tthis.previous = utils.clone(this.attributes);\n\t\t\tthis.status = (this.status | States.CLEAN) & ~(States.COMMITTING | States.DIRTY);\n\t\t}\n\n\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t},\n\n\t/**\n\t* When an action ([fetch()]{@link enyo.Model#fetch}, [commit()]{@link enyo.Model#commit},\n\t* or [destroy()]{@link enyo.Model#destroy}) has failed, it will be passed to this method.\n\t* This method handles special and important behavior; it should not be called directly\n\t* and, when overloading, care must be taken to ensure that you call the super-method.\n\t* This correctly sets the [status]{@link enyo.Model#status} to the known\n\t* [error state]{@link enyo~States.ERROR}, or to the\n\t* [unknown error state]{@link enyo~States.ERROR_UNKNOWN} if it the error state could not\n\t* be determined. If an [error callback]{@link enyo.Model~Error} was provided, this method\n\t* will execute it.\n\t*\n\t* @see enyo.StateSupport.clearError\n\t* @param {String} action - The action (one of `'FETCHING'`, `'COMMITTING'`, or\n\t* `'DESTROYING'`) that failed and is now in an [error state]{@link enyo~States.ERROR}.\n\t* @param {enyo.Model~ActionOptions} opts - The original options passed to the `action`\n\t* method, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given [source]{@link enyo.Model#source},\n\t* if any. This will vary depending on the source.\n\t* @param {String} source - The name of the source that has returned an error.\n\t* @public\n\t*/\n\terrored: function (action, opts, res, source) {\n\t\tvar stat,\n\t\t\tidx;\n\n\t\t// if the error action is a status number then we don't need to update it otherwise\n\t\t// we set it to the known state value\n\t\tif (typeof action == 'string') {\n\n\t\t\t// all built-in errors will pass this as their values are > 0 but we go ahead and\n\t\t\t// ensure that no developer used the 0x00 for an error code\n\t\t\tstat = States['ERROR_' + action];\n\t\t} else stat = action;\n\n\t\tif (isNaN(stat) || (stat & ~States.ERROR)) stat = States.ERROR_UNKNOWN;\n\n\t\t// correctly set the current status and ensure we clear any busy flags\n\t\tthis.status = (this.status | stat) & ~States.BUSY;\n\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\n\t\t// we need to check to see if there is an options handler for this error\n\t\tif (opts && opts.error) opts.error(this, action, opts, res, source);\n\t}\n\n});\n\n/**\n* @name enyo.Model.concat\n* @static\n* @private\n*/\nModel.concat = function (ctor, props) {\n\tvar proto = ctor.prototype || ctor;\n\n\tif (props.options) {\n\t\tproto.options = utils.mixin({}, [proto.options, props.options]);\n\t\tdelete props.options;\n\t}\n};\n\n/**\n* @private\n*/\nkind.features.push(function (ctor) {\n\tif (ctor.prototype instanceof Model) {\n\t\t!Store.models[ctor.prototype.kindName] && (Store.models[ctor.prototype.kindName] = new ModelList());\n\t}\n});","require('../../enyo');\n\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tlogger = require('./logger');\n\nvar\n\tCoreObject = require('./CoreObject'),\n\tApplicationSupport = require('./ApplicationSupport'),\n\tComponentBindingSupport = require('./ComponentBindingSupport'),\n\tJobs = require('./jobs');\n\nvar\n\tkindPrefix = {},\n\tunnamedCounter = 0;\n\t\n/**\n* @callback enyo.Component~EventHandler\n* @param {enyo.Component} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @param {Object} event - An [object]{@glossary Object} containing\n*\tevent information.\n* @returns {Boolean} A value indicating whether the event has been\n*\thandled or not. If `true`, then bubbling is stopped.\n*/\n\n/**\n* A [hash]{@glossary Object} of references to all the [components]{@link enyo.Component}\n* owned by this component. This property is updated whenever a new\n* component is added; the new component may be accessed via its\n* [name]{@link enyo.Component#name} property. We may also observe changes on\n* properties of components referenced by the `$` property.\n*\n* Component access via the `$` hash:\n* ```javascript\n* var c = new enyo.Component({\n*\tname: 'me',\n*\tcomponents: [\n*\t\t{kind: 'Component', name: 'other'}\n*\t]\n* });\n*\n* // We can now access 'other' on the $ hash of 'c', via c.$.other\n* ```\n*\n* Observing changes on a component referenced by the `$` property:\n* ```javascript\n* var c = new enyo.Component({\n*\tname: 'me',\n*\tcomponents: [\n*\t\t{kind: 'Component', name: 'other'}\n*\t]\n* });\n*\n* c.addObserver('$.other.active', function() {\n*\t// do something to respond to the \"active\" property of \"other\" changing\n* })\n*\n* c.$.other.set('active', true); // this will trigger the observer to run its callback\n* ```\n*\n* @name $\n* @type {Object}\n* @default null\n* @memberof enyo.Component.prototype\n* @readonly\n* @public\n*/\n\n/**\n* If `true`, this [component's]{@link enyo.Component} [owner]{@link enyo.Component#owner} will\n* have a direct name reference to the owned component.\n*\n* @example\n* var c = new enyo.Component({\n*\tname: 'me',\n*\tcomponents: [\n*\t\t{kind: 'Component', name: 'other', publish: true}\n*\t]\n* });\n*\n* // We can now access 'other' directly, via c.other\n*\n* @name publish\n* @type {Boolean}\n* @default undefined\n* @memberOf enyo.Component.prototype\n* @public\n*/\n\n/**\n* If `true`, the [layout]{@glossary layout} strategy will adjust the size of this\n* [component]{@link enyo.Component} to occupy the remaining available space.\n*\n* @name fit\n* @type {Boolean}\n* @default undefined\n* @memberOf enyo.Component.prototype\n* @public\n*/\n\n/**\n* {@link enyo.Component} is the fundamental building block for Enyo applications.\n* Components are designed to fit together, allowing complex behaviors to\n* be fashioned from smaller bits of functionality.\n*\n* Component [constructors]{@glossary constructor} take a single\n* argument (sometimes called a [component configuration]{@glossary configurationBlock}),\n* a JavaScript [object]{@glossary Object} that defines various properties to be initialized on the\n* component.  For example:\n*\n* ```javascript\n* // create a new component, initialize its name property to 'me'\n* var c = new enyo.Component({\n*\tname: 'me'\n* });\n* ```\n*\n* When a component is instantiated, items configured in its\n* `components` property are instantiated, too:\n*\n* ```javascript\n* // create a new component, which itself has a component\n* var c = new enyo.Component({\n*\tname: 'me',\n*\tcomponents: [\n*\t\t{kind: 'Component', name: 'other'}\n*\t]\n* });\n* ```\n*\n* In this case, when `me` is created, `other` is also created, and we say that `me` owns `other`.\n* In other words, the [owner]{@link enyo.Component#owner} property of `other` equals `me`.\n* Notice that you can specify the [kind]{@glossary kind} of `other` explicitly in its\n* configuration block, to tell `me` what constructor to use to create `other`.\n*\n* Note that [kind]{@glossary kind} values may be references to actual\n* kinds or string-names of kinds. Kind names that do not resolve directly to kinds\n* are looked up in default namespaces. In this case, `kind: 'Component'` resolves to\n* `enyo.Component`.\n*\n* To move a component, use the `setOwner()` method to change the\n* component's owner. If you want a component to be unowned, use `setOwner(null)`.\n*\n* If you make changes to `enyo.Component`, be sure to add or update the appropriate\n* {@linkplain https://github.com/enyojs/enyo/tree/master/tools/test/core/tests unit tests}.\n*\n* For more information, see the documentation on\n* [Components]{@linkplain $dev-guide/key-concepts/components.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Component\n* @extends enyo.Object\n* @mixes enyo.ApplicationSupport\n* @mixes enyo.ComponentBindingSupport\n* @public\n*/\nvar Component = module.exports = kind(\n\t/** @lends enyo.Component.prototype */ {\n\n\tname: 'enyo.Component',\n\n\t/**\n\t* @private\n\t*/\n\tkind: CoreObject,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* @private\n\t*/\n\tcachedBubble: true,\n\n\t/**\n\t* @private\n\t*/\n\tcachePoint: false,\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.Component.prototype */ {\n\n\t\t/**\n\t\t* A unique name for the [component]{@link enyo.Component} within its\n\t\t* [owner]{@link enyo.Component#owner}. This is used to set the access name in the\n\t\t* owner's [$ hash]{@link enyo.Component#$}. If not\n\t\t* specified, a default name will be provided based on the name of the\n\t\t* [object's]{@link enyo.Object} [kind]{@glossary kind}, with a numeric\n\t\t* suffix appended if more than one instance exists in the owner.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tname: '',\n\n\t\t/**\n\t\t* A unique id for the [component]{@link enyo.Component}, usually automatically generated\n\t\t* based on its position within the component hierarchy, although\n\t\t* it may also be directly specified. {@link enyo.Control} uses this `id` value for the\n\t\t* DOM [id]{@link enyo.Control#id} attribute.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tid: '',\n\n\t\t/**\n\t\t* The [component]{@link enyo.Component} that owns this component.\n\t\t* It is usually defined implicitly at creation time based on the\n\t\t* [createComponent()]{@link enyo.Component#createComponent} call or\n\t\t* the `components` hash.\n\t\t*\n\t\t* @type {enyo.Component}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\towner: null,\n\n\t\t/**\n\t\t* This can be a [hash]{@glossary Object} of features to apply to\n\t\t* [chrome]{@glossary chrome} [components]{@link enyo.Component} of the base\n\t\t* [kind]{@glossary kind}. They are matched by [name]{@link enyo.Component#name}\n\t\t* (if the component you wish to modify does not have a name, this will not work).\n\t\t* You can modify any properties of the component except for methods. Setting a\n\t\t* value for `componentOverrides` at runtime will have no effect.\n\t\t*\n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tcomponentOverrides: null\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: 'enyo.Component',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {},\n\n\t/**\n\t* @private\n\t*/\n\tmixins: [ApplicationSupport, ComponentBindingSupport],\n\n\t/**\n\t* @private\n\t*/\n\ttoString: function () {\n\t\treturn this.id + ' [' + this.kindName + ']';\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\t// initialize instance objects\n\t\t\tthis._componentNameMap = {};\n\t\t\tthis.$ = {};\n\t\t\tthis.cachedBubbleTarget = {};\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\t// perform initialization\n\t\t\tthis.create(props);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcreate: function () {\n\t\t// stop and queue all of the notifications happening synchronously to allow\n\t\t// responders to only do single passes on work traversing the tree\n\t\tthis.stopNotifications();\n\t\tthis.ownerChanged();\n\t\tthis.initComponents();\n\t\t// release the kraken!\n\t\tthis.startNotifications();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\t// The _components_ property in kind declarations is renamed to\n\t\t// _kindComponents_ by the Component subclass mechanism.  This makes it\n\t\t// easy for the developer to distinguish kindComponents from the components\n\t\t// in _this.components_, without having to worry about the actual difference.\n\t\t//\n\t\t// Specifically, the difference is that kindComponents are constructed as\n\t\t// owned by this control (whereas components in _this.components_ are not).\n\t\t// In addition, kindComponents are marked with the _isChrome: true_ flag.\n\t\tthis.createChrome(this.kindComponents);\n\t\tthis.createClientComponents(this.components);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateChrome: function (comps) {\n\t\tthis.createComponents(comps, {isChrome: true});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateClientComponents: function (comps) {\n\t\tthis.createComponents(comps, {owner: this.getInstanceOwner()});\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetInstanceOwner: function () {\n\t\treturn (!this.owner || this.owner.notInstanceOwner) ? this : this.owner;\n\t},\n\n\t/**\n\t* Removes this [component]{@link enyo.Component} from its\n\t* [owner]{@link enyo.Component#owner} (setting `owner` to `null`)\n\t* and does any necessary cleanup. The component is flagged with\n\t* `destroyed: true`. Usually, the component will be suitable for garbage\n\t* collection after being destroyed, unless user code keeps a reference\n\t* to it.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @method\n\t* @public\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis.destroyComponents();\n\t\t\tthis.setOwner(null);\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.stopAllJobs();\n\t\t\treturn this;\n\t\t};\n\t}),\n\n\t/**\n\t* Destroys all owned [components]{@link enyo.Component}.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tdestroyComponents: function () {\n\t\tvar comps = this.getComponents(),\n\t\t\tcomp,\n\t\t\ti;\n\n\t\tfor (i = 0; i < comps.length; ++i) {\n\t\t\tcomp = comps[i];\n\t\t\t// @todo: previous comment said list might be stale and ownership may have caused\n\t\t\t// components to be destroyed as a result of some inner-container...look into this\n\t\t\t// because that seems incorrect or avoidable\n\t\t\tif (!comp.destroyed) comp.destroy();\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmakeId: function() {\n\t\tvar delim = '_', pre = this.owner && this.owner.getId(),\n\t\t\tbaseName = this.name || ('@@' + (++unnamedCounter));\n\t\treturn (pre ? pre + delim : '') + baseName;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\townerChanged: function (was) {\n\t\tif (was && was.removeComponent) was.removeComponent(this);\n\t\tif (this.owner && this.owner.addComponent) this.owner.addComponent(this);\n\t\tif (!this.id) this.id = this.makeId();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnameComponent: function (comp) {\n\t\tvar pre = prefixFromKindName(comp.kindName),\n\t\t\tlast = this._componentNameMap[pre] || 0,\n\t\t\tnom;\n\n\t\tdo {\n\t\t\tnom = pre + (++last > 1 ? String(last) : '');\n\t\t} while (this.$[nom]);\n\n\t\tthis._componentNameMap[pre] = Number(last);\n\t\t/*jshint -W093 */\n\t\treturn (comp.name = nom);\n\t},\n\n\t/**\n\t* Adds a [component]{@link enyo.Component} to the list of components\n\t* owned by the current component (i.e., [this.$]{@link enyo.Component#$}).\n\t*\n\t* @param {enyo.Component} comp - The [component]{@link enyo.Component} to add.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddComponent: function (comp) {\n\t\tvar nom = comp.get('name');\n\n\t\t// if there is no name we have to come up with a generic name\n\t\tif (!nom) nom = this.nameComponent(comp);\n\n\t\t// if there already was a component by that name we issue a warning\n\t\t// @todo: if we're going to name rules being violated we need to normalize this approach\n\t\t// and ensure we have one for every warning/error we throw\n\t\tif (this.$[nom]) this.warn(\n\t\t\t'Duplicate component name ' + nom + ' in owner ' + this.id + ' violates ' +\n\t\t\t'unique-name-under-owner rule, replacing existing component in the hash and ' +\n\t\t\t'continuing, but this is an error condition and should be fixed.'\n\t\t);\n\n\t\tthis.$[nom] = comp;\n\t\tthis.notify('$.' + nom, null, comp);\n\n\t\t// if the component has the `publish` true property then we also create a reference to\n\t\t// it directly on the owner (this)\n\t\tif (comp.publish) {\n\t\t\tthis[nom] = comp;\n\n\t\t\t// and to ensure that bindings are aware we have to notify them as well\n\t\t\tthis.notify(nom, null, comp);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Removes the passed-in [component]{@link enyo.Component} from those known\n\t* to be owned by this component. The component will be removed from the\n\t* [$ hash]{@link enyo.Component#$}, and from the [owner]{@link enyo.Component#owner}\n\t* directly if [publish]{@link enyo.Component#publish} is set to `true`.\n\t*\n\t* @param {enyo.Component} comp - The component to remove.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tremoveComponent: function (comp) {\n\t\tvar nom = comp.get('name');\n\n\t\t// remove it from the hash if it existed\n\t\tdelete this.$[nom];\n\n\t\t// if it was published remove it from the component proper\n\t\tif (comp.publish) delete this[nom];\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Returns an [array]{@glossary Array} of owned [components]{@link enyo.Component}; in\n\t* other words, converts the [$ hash]{@link enyo.Component#$} into an array\n\t* and returns the array.\n\t*\n\t* @returns {enyo.Component[]} The [components]{@link enyo.Component} found in the\n\t*\t[$ hash]{@link enyo.Component#$}.\n\t* @public\n\t*/\n\tgetComponents: function () {\n\t\treturn utils.values(this.$);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tadjustComponentProps: function (props) {\n\t\tif (this.defaultProps) utils.mixin(props, this.defaultProps, {ignore: true});\n\t\tprops.kind = props.kind || props.isa || this.defaultKind;\n\t\tprops.owner = props.owner || this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_createComponent: function (props, ext) {\n\t\tvar def = ext ? utils.mixin({}, [ext, props]) : utils.clone(props);\n\n\t\t// always adjust the properties according to the needs of the kind and parent kinds\n\t\tthis.adjustComponentProps(def);\n\n\t\t// pass along for the final stage\n\t\treturn Component.create(def);\n\t},\n\n\t/**\n\t* Creates and returns a [component]{@link enyo.Component} as defined by the combination of\n\t* a base and an additional property [hash]{@glossary Object}. The properties provided\n\t* in the standard property hash override those provided in the\n\t* additional property hash.\n\t*\n\t* The created component passes through initialization machinery\n\t* provided by the creating component, which may supply special\n\t* handling. Unless the [owner]{@link enyo.Component#owner} is explicitly specified, the new\n\t* component will be owned by the instance on which this method is called.\n\t*\n\t* @example\n\t* // Create a new component named 'dynamic', owned by 'this'\n\t* // (will be available as this.$.dynamic).\n\t* this.createComponent({name: 'dynamic'});\n\t*\n\t* @example\n\t* // Create a new component named 'another' owned by 'other'\n\t* // (will be available as other.$.another).\n\t* this.createComponent({name: 'another'}, {owner: other});\n\t*\n\t* @param {Object} props - The declarative [kind]{@glossary kind} definition.\n\t* @param {Object} ext - Additional properties to be applied (defaults).\n\t* @returns {enyo.Component} The instance created with the given parameters.\n\t* @public\n\t*/\n\tcreateComponent: function (props, ext) {\n\t\t// createComponent and createComponents both delegate to the protected method\n\t\t// (_createComponent), allowing overrides to customize createComponent and\n\t\t// createComponents separately.\n\t\treturn this._createComponent(props, ext);\n\t},\n\n\t/**\n\t* Creates [components]{@link enyo.Component} as defined by the [arrays]{@glossary Array}\n\t* of base and additional property [hashes]{@glossary Object}. The standard and\n\t* additional property hashes are combined as described in\n\t* [createComponent()]{@link enyo.Component#createComponent}.\n\t*\n\t* @example\n\t* // ask foo to create components 'bar' and 'zot', but set the owner of\n\t* // both components to 'this'.\n\t* this.$.foo.createComponents([\n\t*\t{name: 'bar'},\n\t*\t{name: 'zot'}\n\t* ], {owner: this});\n\t*\n\t* @param {Object[]} props The array of {@link enyo.Component} definitions to be created.\n\t* @param {Object} ext - Additional properties to be supplied as defaults for each.\n\t* @returns {enyo.Component[]} The array of [components]{@link enyo.Component} that were\n\t*\tcreated.\n\t* @public\n\t*/\n\tcreateComponents: function (props, ext) {\n\t\tvar comps = [],\n\t\t\tcomp,\n\t\t\ti;\n\n\t\tif (props) {\n\t\t\tfor (i = 0; i < props.length; ++i) {\n\t\t\t\tcomp = props[i];\n\t\t\t\tcomps.push(this._createComponent(comp, ext));\n\t\t\t}\n\t\t}\n\n\t\treturn comps;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetBubbleTarget: function (nom, event) {\n\t\tif (event.delegate) return this.owner;\n\t\telse {\n\t\t\treturn (\n\t\t\t\tthis.bubbleTarget\n\t\t\t\t|| (this.cachedBubble && this.cachedBubbleTarget[nom])\n\t\t\t\t|| this.owner\n\t\t\t);\n\t\t}\n\t},\n\n\t/**\n\t* Bubbles an {@glossary event} up an [object]{@glossary Object} chain,\n\t* starting with `this`.\n\t*\n\t* A handler for an event may be specified. See {@link enyo.Component~EventHandler}\n\t* for complete details.\n\t*\n\t* @param {String} nom - The name of the {@glossary event} to bubble.\n\t* @param {Object} [event] - The event [object]{@glossary Object} to be passed along\n\t* while bubbling.\n\t* @param {enyo.Component} [sender=this] - The {@link enyo.Component} responsible for\n\t*\tbubbling the event.\n\t* @returns {Boolean} `false` if unhandled or uninterrupted; otherwise, `true`.\n\t* @public\n\t*/\n\tbubble: function (nom, event, sender) {\n\t\tif (!this._silenced) {\n\t\t\tevent = event || {};\n\t\t\tevent.lastHandledComponent = null;\n\t\t\tevent.bubbling = true;\n\t\t\t// deliberately done this way\n\t\t\tif (event.originator == null) event.originator = sender || this;\n\t\t\treturn this.dispatchBubble(nom, event, sender || this);\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Bubbles an {@glossary event} up an [object]{@glossary Object} chain,\n\t* starting **above** `this`.\n\t*\n\t* A handler for an event may be specified. See {@link enyo.Component~EventHandler}\n\t* for complete details.\n\t*\n\t* @param {String} nom - The name of the {@glossary event}.\n\t* @param {Object} [event] - The event properties to pass along while bubbling.\n\t* @returns {Boolean} `false` if unhandled or uninterrupted; otherwise, `true`.\n\t* @public\n\t*/\n\tbubbleUp: function (nom, event) {\n\t\tvar next;\n\n\t\tif (!this._silenced) {\n\t\t\tevent = event || {};\n\t\t\tevent.bubbling = true;\n\t\t\tnext = this.getBubbleTarget(nom, event);\n\t\t\tif (next) {\n\t\t\t\t// use delegate as sender if it exists to preserve illusion\n\t\t\t\t// that event is dispatched directly from that, but we still\n\t\t\t\t// have to bubble to get decorations\n\t\t\t\treturn next.dispatchBubble(nom, event, event.delegate || this);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Sends an {@glossary event} to a named [delegate]{@glossary delegate}.\n\t* This [object]{@glossary Object} may dispatch an event to\n\t* itself via a [handler]{@link enyo.Component~EventHandler}, or to its\n\t* [owner]{@link enyo.Component#owner} via an event property, e.g.:\n\t*\n\t*\thandlers {\n\t*\t\t// 'tap' events dispatched to this.tapHandler\n\t*\t\tontap: 'tapHandler'\n\t*\t}\n\t*\n\t*\t// 'tap' events dispatched to 'tapHandler' delegate in this.owner\n\t*\tontap: 'tapHandler'\n\t*\n\t* @private\n\t*/\n\tdispatchEvent: function (nom, event, sender) {\n\t\tvar delegate,\n\t\t\tret;\n\n\t\tif (!this._silenced) {\n\t\t\t// if the event has a delegate associated with it we grab that\n\t\t\t// for reference\n\t\t\t// NOTE: This is unfortunate but we can't use a pooled object here because\n\t\t\t// we don't know where to release it\n\t\t\tdelegate = (event || (event = {})).delegate;\n\n\t\t\t// bottleneck event decoration w/ optimization to avoid call to empty function\n\t\t\tif (this.decorateEvent !== Component.prototype.decorateEvent) {\n\t\t\t\tthis.decorateEvent(nom, event, sender);\n\t\t\t}\n\n\t\t\t// first, handle any delegated events intended for this object\n\t\t\tif (delegate && delegate.owner === this) {\n\t\t\t\t// the most likely case is that we have a method to handle this\n\t\t\t\tif (this[nom] && 'function' === typeof this[nom]) {\n\t\t\t\t\treturn this.dispatch(nom, event, sender);\n\t\t\t\t}\n\t\t\t\t// but if we don't, just stop the event from going further\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// for non-delgated events, try the handlers block if possible\n\t\t\tif (!delegate) {\n\t\t\t\tvar bHandler = this.handlers && this.handlers[nom];\n\t\t\t\tvar bDelegatedFunction = this[nom] && utils.isString(this[nom]);\n\t\t\t\tvar cachePoint = this.cachePoint || bHandler || bDelegatedFunction || this.id === \"master\" ;\n\n\t\t\t\tif (event.bubbling) {\n\t\t\t\t\tif (event.lastHandledComponent && cachePoint) {\n\t\t\t\t\t\tevent.lastHandledComponent.cachedBubbleTarget[nom] = this;\n\t\t\t\t\t\tevent.lastHandledComponent = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (!event.lastHandledComponent && this.id !== \"master\") {\n\t\t\t\t\t\tevent.lastHandledComponent = this;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (bHandler && this.dispatch(bHandler, event, sender)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tif (bDelegatedFunction) {\n\t\t\t\t\t// we dispatch it up as a special delegate event with the\n\t\t\t\t\t// component that had the delegation string property stored in\n\t\t\t\t\t// the 'delegate' property\n\t\t\t\t\tevent.delegate = this;\n\t\t\t\t\tret = this.bubbleUp(this[nom], event, sender);\n\t\t\t\t\tdelete event.delegate;\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Internal - try dispatching {@glossary event} to self; if that fails,\n\t* [bubble it up]{@link enyo.Component#bubbleUp} the tree.\n\t*\n\t* @private\n\t*/\n\tdispatchBubble: function (nom, event, sender) {\n\t\tif (!this._silenced) {\n\t\t\t// Try to dispatch from here, stop bubbling on truthy return value\n\t\t\tif (this.dispatchEvent(nom, event, sender)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// Bubble to next target\n\t\t\treturn this.bubbleUp(nom, event, sender);\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdecorateEvent: function (nom, event, sender) {\n\t\t// an event may float by us as part of a dispatchEvent chain\n\t\t// both call this method so intermediaries can decorate inEvent\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstopAllJobs: function () {\n\t\tvar job;\n\n\t\tif (this.__jobs) for (job in this.__jobs) this.stopJob(job);\n\t},\n\n\t/**\n\t* Dispatches the {@glossary event} to named [delegate]{@glossary delegate} `nom`,\n\t* if it exists. [Subkinds]{@glossary subkind} may re-route dispatches. Note that\n\t* both 'handlers' events and events delegated from owned controls arrive here.\n\t* If you need to handle these types of events differently, you may also need to\n\t* override [dispatchEvent()]{@link enyo.Component#dispatchEvent}.\n\t*\n\t* @param {String} nom - The method name to dispatch the {@glossary event}.\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\n\t* @param {enyo.Component} [sender=this] - The originator of the event.\n\t* @public\n\t*/\n\tdispatch: function (nom, event, sender) {\n\t\tvar fn;\n\n\t\tif (!this._silenced) {\n\t\t\tfn = nom && this[nom];\n\t\t\tif (fn && typeof fn == 'function') {\n\t\t\t\t// @todo: deprecate sender\n\t\t\t\treturn fn.call(this, sender || this, event);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t* Triggers the [handler]{@link enyo.Component~EventHandler} for a given\n\t* {@glossary event} type.\n\t*\n\t* @example\n\t* myControl.triggerHandler('ontap');\n\t*\n\t* @param {String} nom - The name of the {@glossary event} to trigger.\n\t* @param {Object} [event] - The event object to pass along.\n\t* @param {enyo.Component} [sender=this] - The originator of the event.\n\t* @returns {Boolean} `false` if unhandled or uninterrupted, `true` otherwise.\n\t* @public\n\t*/\n\ttriggerHandler: function () {\n\t\treturn this.dispatchEvent.apply(this, arguments);\n\t},\n\n\t/**\n\t* Sends a message to myself and all of my [components]{@link enyo.Component}.\n\t* You can stop a waterfall into components owned by a receiving object\n\t* by returning a truthy value from the {@glossary event}\n\t* [handler]{@link enyo.Component~EventHandler}.\n\t*\n\t* @param {String} nom - The name of the {@glossary event} to waterfall.\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\n\t* @param {enyo.Component} [sender=this] - The originator of the event.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\twaterfall: function(nom, event, sender) {\n\t\tif (!this._silenced) {\n\t\t\tevent = event || {};\n\t\t\tevent.bubbling = false;\n\n\t\t\t// give the locals an opportunity to interrupt the event\n\t\t\tif (this.dispatchEvent(nom, event, sender)) return true;\n\n\t\t\t// otherwise carry on\n\t\t\tthis.waterfallDown(nom, event, sender || this);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Sends a message to all of my [components]{@link enyo.Component}, but not myself. You can\n\t* stop a [waterfall]{@link enyo.Component#waterfall} into [components]{@link enyo.Component}\n\t* owned by a receiving [object]{@glossary Object} by returning a truthy value from the\n\t* {@glossary event} [handler]{@link enyo.Component~EventHandler}.\n\t*\n\t* @param {String} nom - The name of the {@glossary event}.\n\t* @param {Object} [event] - The event [object]{@glossary Object} to pass along.\n\t* @param {enyo.Component} [sender=this] - The event originator.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\twaterfallDown: function(nom, event, sender) {\n\t\tvar comp;\n\t\tevent = event || {};\n\t\tevent.bubbling = false;\n\n\t\tif (!this._silenced) {\n\t\t\tfor (comp in this.$) this.$[comp].waterfall(nom, event, sender || this);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_silenced: false,\n\n\t/**\n\t* @private\n\t*/\n\t_silenceCount: 0,\n\n\t/**\n\t* Sets a flag that disables {@glossary event} propagation for this\n\t* [component]{@link enyo.Component}. Also increments an internal counter that tracks\n\t* the number of times the [unsilence()]{@link enyo.Component#unsilence} method must\n\t* be called before event propagation will continue.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsilence: function () {\n\t\tthis._silenced = true;\n\t\tthis._silenceCount += 1;\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Determines if the [object]{@glossary Object} is currently\n\t* [silenced]{@link enyo.Component#_silenced}, which will prevent propagation of\n\t* [events]{@glossary event} (of any kind).\n\t*\n\t* @returns {Boolean} `true` if silenced; otherwise, `false`.\n\t* @public\n\t*/\n\tisSilenced: function () {\n\t\treturn this._silenced;\n\t},\n\n\t/**\n\t* Allows {@glossary event} propagation for this [component]{@link enyo.Component}\n\t* if the internal silence counter is `0`; otherwise, decrements the counter by one.\n\t* For event propagation to resume, this method must be called one time each call to\n\t* [silence()]{@link enyo.Component#silence}.\n\t*\n\t* @returns {Boolean} `true` if the {@link enyo.Component} is now unsilenced completely;\n\t*\t`false` if it remains silenced.\n\t* @public\n\t*/\n\tunsilence: function () {\n\t\tif (0 !== this._silenceCount) --this._silenceCount;\n\t\tif (0 === this._silenceCount) this._silenced = false;\n\t\treturn !this._silenced;\n\t},\n\n\t/**\n\t* Creates a new [job]{@link enyo.job} tied to this instance of the\n\t* [component]{@link enyo.Component}. If the component is\n\t* [destroyed]{@link enyo.Component#destroy}, any jobs associated with it\n\t* will be stopped.\n\t*\n\t* If you start a job with the same name as a pending job,\n\t* the original job will be stopped; this can be useful for resetting\n\t* timeouts.\n\t*\n\t* You may supply a priority level (1-10) at which the job should be\n\t* executed. The default level is `5`. Setting the priority lower than `5` (or setting it to\n\t* the string `\"low\"`) will defer the job if an animation is in progress,\n\t* which can help to avoid stuttering.\n\t*\n\t* @param {String} nom - The name of the [job]{@link enyo.job} to start.\n\t* @param {(Function|String)} job - Either the name of a method or a\n\t*\t[function]{@glossary Function} to execute as the requested job.\n\t* @param {Number} wait - The number of milliseconds to wait before starting\n\t*\tthe job.\n\t* @param {Number} [priority=5] The priority value to be associated with this\n\t*\tjob.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tstartJob: function (nom, job, wait, priority) {\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\n\t\tpriority = priority || 5;\n\t\t// allow strings as job names, they map to local method names\n\t\tif (typeof job == 'string') job = this[job];\n\t\t// stop any existing jobs with same name\n\t\tthis.stopJob(nom);\n\t\tjobs[nom] = setTimeout(this.bindSafely(function() {\n\t\t\tJobs.add(this.bindSafely(job), priority, nom);\n\t\t}), wait);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Stops a [component]{@link enyo.Component}-specific [job]{@link enyo.job} before it has\n\t* been activated.\n\t*\n\t* @param {String} nom - The name of the [job]{@link enyo.job} to be stopped.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tstopJob: function (nom) {\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\n\t\tif (jobs[nom]) {\n\t\t\tclearTimeout(jobs[nom]);\n\t\t\tdelete jobs[nom];\n\t\t}\n\t\tJobs.remove(nom);\n\t},\n\n\t/**\n\t* Executes the specified [job]{@link enyo.job} immediately, then prevents\n\t* any other calls to `throttleJob()` with the same job name from running for\n\t* the specified amount of time.\n\t*\n\t* @param {String} nom - The name of the [job]{@link enyo.job} to throttle.\n\t* @param {(Function|String)} job - Either the name of a method or a\n\t*\t[function]{@glossary Function} to execute as the requested job.\n\t* @param {Number} wait - The number of milliseconds to wait before executing the\n\t*\tjob again.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tthrottleJob: function (nom, job, wait) {\n\t\tvar jobs = (this.__jobs = this.__jobs || {});\n\t\t// if we still have a job with this name pending, return immediately\n\t\tif (!jobs[nom]) {\n\t\t\t// allow strings as job names, they map to local method names\n\t\t\tif (typeof job == 'string') job = this[job];\n\t\t\tjob.call(this);\n\t\t\tjobs[nom] = setTimeout(this.bindSafely(function() {\n\t\t\t\tthis.stopJob(nom);\n\t\t\t}), wait);\n\t\t}\n\t\treturn this;\n\t}\n});\n\n/**\n* @private\n*/\nkind.setDefaultCtor(Component);\n\n/**\n* Creates new instances from [config]{@glossary configurationBlock}\n* [objects]{@glossary Object}. This method looks up the proper\n* [constructor]{@glossary constructor} based on the provided [kind]{@glossary kind}\n* attribute.\n*\n* @name enyo.create\n* @param {Object} props - The properties that define the [kind]{@glossary kind}.\n* @returns {*} An instance of the requested [kind]{@glossary kind}.\n* @public\n*/\nComponent.create = function (props) {\n\tvar theKind,\n\t\tCtor;\n\n\tif (!props.kind && props.hasOwnProperty('kind')) throw new Error(\n\t\t'enyo.create: Attempt to create a null kind. Check dependencies for [' + props.name + ']'\n\t);\n\n\ttheKind = props.kind || props.isa || kind.getDefaultCtor();\n\tCtor = kind.constructorForKind(theKind);\n\n\tif (!Ctor) {\n\t\tlogger.error('No constructor found for kind ' + theKind);\n\t\tCtor = Component;\n\t}\n\n\treturn new Ctor(props);\n};\n\n/**\n* @name enyo.Component.subclass\n* @static\n* @private\n*/\nComponent.subclass = function (ctor, props) {\n\t// Note: To reduce API surface area, sub-components are declared only as\n\t// 'components' in both kind and instance declarations.\n\t//\n\t// However, 'components' from kind declarations must be handled separately\n\t// at creation time.\n\t//\n\t// We rename the property here to avoid having\n\t// to interrogate the prototype at creation time.\n\t//\n\tvar proto = ctor.prototype;\n\t//\n\tif (props.components) {\n\t\tproto.kindComponents = props.components;\n\t\tdelete proto.components;\n\t} else {\n\t\t// Feature to mixin overrides of super-kind component properties from named hash\n\t\t// (only applied when the sub-kind doesn't supply its own components block)\n\t\tif (props.componentOverrides) {\n\t\t\tproto.kindComponents = Component.overrideComponents(\n\t\t\t\tproto.kindComponents,\n\t\t\t\tprops.componentOverrides,\n\t\t\t\tproto.defaultKind\n\t\t\t);\n\t\t}\n\t}\n};\n\n/**\n* @name enyo.Component.concat\n* @static\n* @private\n*/\nComponent.concat = function (ctor, props) {\n\tvar proto = ctor.prototype || ctor,\n\t\thandlers;\n\tif (props.handlers) {\n\t\thandlers = proto.handlers ? utils.clone(proto.handlers) : {};\n\t\tproto.handlers = utils.mixin(handlers, props.handlers);\n\t\tdelete props.handlers;\n\t}\n\tif (props.events) Component.publishEvents(proto, props);\n};\n\n/**\n* @name enyo.Component.overrideComponents\n* @static\n* @private\n*/\nComponent.overrideComponents = function (components, overrides, defaultKind) {\n\tvar fn = function (k, v) { return !(utils.isFunction(v) || kind.isInherited(v)); };\n\tcomponents = utils.clone(components);\n\tfor (var i=0; i<components.length; i++) {\n\t\tvar c = utils.clone(components[i]);\n\t\tvar o = overrides[c.name];\n\t\tvar ctor = kind.constructorForKind(c.kind || defaultKind);\n\t\tif (o) {\n\n\t\t\t// NOTE: You cannot overload mixins, observers or computed properties from\n\t\t\t// component overrides\n\t\t\tkind.concatHandler(c, o);\n\t\t\tvar b = (c.kind && ((typeof c.kind == 'string' && utils.getPath(c.kind)) || (typeof c.kind == 'function' && c.kind))) || kind.getDefaultCtor();\n\t\t\twhile (b) {\n\t\t\t\tif (b.concat) { b.concat(c, o, true); }\n\t\t\t\tb = b.prototype.base;\n\t\t\t}\n\t\t\t// All others just mix in\n\t\t\tutils.mixin(c, o, {filter: fn});\n\t\t}\n\t\tif (c.components) {\n\t\t\tc.components = Component.overrideComponents(c.components, overrides, ctor.prototype.defaultKind);\n\t\t}\n\t\tcomponents[i] = c;\n\t}\n\treturn components;\n};\n\n/**\n* @name enyo.Component.publishEvents\n* @static\n* @private\n*/\nComponent.publishEvents = function (ctor, props) {\n\tvar events = props.events,\n\t\tevent,\n\t\tproto;\n\tif (events) {\n\t\tproto = ctor.prototype || ctor;\n\t\tfor (event in events) Component.addEvent(event, events[event], proto);\n\t}\n};\n\n/**\n* @name enyo.Component.addEvent\n* @static\n* @private\n*/\nComponent.addEvent = function (nom, val, proto) {\n\tvar v, fn;\n\tif (!utils.isString(val)) {\n\t\tv = val.value;\n\t\tfn = val.caller;\n\t} else {\n\t\tif (nom.slice(0, 2) != 'on') {\n\t\t\tlogger.warn('enyo.Component.addEvent: event names must start with \"on\". ' + proto.kindName + ' ' +\n\t\t\t\t'event \"' + nom + '\" was auto-corrected to \"on' + nom + '\".');\n\t\t\tnom = 'on' + nom;\n\t\t}\n\t\tv = val;\n\t\tfn = 'do' + utils.cap(nom.slice(2));\n\t}\n\tproto[nom] = v;\n\tif (!proto[fn]) {\n\t\tproto[fn] = function(payload, other) {\n\t\t\t// bubble this event\n\n\t\t\t// if the second parameter exists then we use that - this is for a single case\n\t\t\t// where a named event delegates happent to point to an auto generated event\n\t\t\t// bubbler like this one - in that case the first parameter is actually the\n\t\t\t// sender\n\t\t\tvar e = other || payload;\n\t\t\tif (!e) {\n\t\t\t\te = {};\n\t\t\t}\n\t\t\tvar d = e.delegate;\n\t\t\t// delete payload.delegate;\n\t\t\te.delegate = undefined;\n\t\t\tif (!utils.exists(e.type)) {\n\t\t\t\te.type = nom;\n\t\t\t}\n\t\t\tthis.bubble(nom, e);\n\t\t\tif (d) {\n\t\t\t\te.delegate = d;\n\t\t\t}\n\t\t};\n\t}\n};\n\n/**\n* @private\n*/\nfunction prefixFromKindName (nom) {\n\tvar pre = kindPrefix[nom],\n\t\tlast;\n\n\tif (!pre) {\n\t\tlast = nom.lastIndexOf('.');\n\t\tpre = (last >= 0) ? nom.slice(last+1) : nom;\n\t\tpre = pre.charAt(0).toLowerCase() + pre.slice(1);\n\t\tkindPrefix[nom] = pre;\n\t}\n\n\treturn pre;\n}","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tComponent = require('./Component'),\n\tEventEmitter = require('./EventEmitter'),\n\tModel = require('./Model'),\n\tModelList = require('./ModelList'),\n\tStateSupport = require('./StateSupport'),\n\tSource = require('./Source'),\n\tStore = require('./Store'),\n\tStates = require('./States');\n\n/**\n* This is only necessary because of the order in which mixins are applied.\n*\n* @class\n* @private\n*/\nvar BaseCollection = kind({\n\tkind: Component,\n\tmixins: [EventEmitter, StateSupport]\n});\n\n/**\n* Fires when [models]{@link enyo.Model} have been [added]{@link enyo.Collection#add}\n* to the [collection]{@link enyo.Collection}.\n*\n* @event enyo.Collection#add\n* @type {Object}\n* @property {enyo.Model[]} models - An [array]{@glossary Array} of\n*\t[models]{@link enyo.Model} that were [added]{@link enyo.Collection#add} to the\n*\t[collection]{@link enyo.Collection}.\n* @property {enyo.Collection} collection - A reference to the\n*\tcollection that [emitted]{@link enyo.EventEmitter.emit} the event.\n* @property {Number} index - The index in the given collection where the models were inserted.\n* @public\n*/\n\n/**\n* Fires when [models]{@link enyo.Model} have been [removed]{@link enyo.Collection#remove}\n* from the [collection]{@link enyo.Collection}.\n*\n* @event enyo.Collection#remove\n* @type {Object}\n* @property {enyo.Model[]} models - An [array]{@glossary Array} of\n*\t[models]{@link enyo.Model} that were [removed]{@link enyo.Collection#remove} from the\n*\t[collection]{@link enyo.Collection}.\n* @property {enyo.Collection} collection - A reference to the\n*\tcollection that [emitted]{@link enyo.EventEmitter.emit} the event.\n* @public\n*/\n\n/**\n* Fires when the [collection]{@link enyo.Collection} has been\n* [sorted]{@link enyo.Collection#sort}.\n*\n* @event enyo.Collection#sort\n* @type {Object}\n* @property {enyo.Model[]} models - An [array]{@glossary Array} of all\n*\t[models]{@link enyo.Model} in the correct, [sorted]{@link enyo.Collection#sort} order.\n* @property {enyo.Collection} collection - A reference to the\n*\t[collection]{@link enyo.Collection} that [emitted]{@link enyo.EventEmitter.emit} the event.\n* @property {Function} comparator - A reference to the\n*\t[comparator]{@link enyo.Collection#comparator} that was used when\n*\tsorting the collection.\n* @public\n*/\n\n/**\n* Fires when the [collection]{@link enyo.Collection} has been reset and its\n* contents have been updated arbitrarily.\n*\n* @event enyo.Collection#reset\n* @type {Object}\n* @property {enyo.Model[]} models - An [array]{@glossary Array} of all\n*\t[models]{@link enyo.Model} as they are currently.\n* @property {enyo.Collection} collection - A reference to the\n*\t[collection]{@link enyo.Collection} that [emitted]{@link enyo.EventEmitter.emit} the event.\n* @public\n*/\n\n/**\n* The default configurable [options]{@link enyo.Collection#options} used by certain API\n* methods of {@link enyo.Collection}.\n*\n* @typedef {Object} enyo.Collection~Options\n* @property {Boolean} merge=true - If `true`, when data is being added to the\n*\t[collection]{@link enyo.Collection} that already exists (i.e., is matched by\n*\t[primaryKey]{@link enyo.Model#primaryKey}), the new data values will be set\n* with the current [model]{@link enyo.Model} instance. This means that the\n* existing values will be updated with the new ones by calling\n* [set()]{@link enyo.Model#set} on the model.\n* @property {Boolean} silent=false - Many accessor methods of the collection\n*\twill emit events and/or notifications. This value indicates whether or not\n*\tthose events or notifications will be suppressed at times when that behavior\n*\tis necessary. Typically, you will not want to modify this value.\n* @property {Boolean} purge=false - When [adding]{@link enyo.Collection#add}\n*\tmodels, this flag indicates whether or not to [remove]{@link enyo.Collection#remove}\n* (purge) the existing models that are not included in the new dataset.\n* @property {Boolean} parse=false - The collection's [parse()]{@link enyo.Collection#parse}\n*\tmethod can be executed automatically when incoming data is added via the\n*\t[constructor()]{@link enyo.Collection#constructor} method, or, later, via a\n*\t[fetch]{@link enyo.Collection#fetch}. You may need to examine the runtime\n* configuration options of the method(s) to determine whether parsing is needed.\n* In cases where parsing will always be necessary, this may be set to `true`.\n* @property {Boolean} create=true - This value determines whether a new\n*\tmodel will be created when data being added to the collection cannot be found\n* (or the [find]{@link enyo.Collection#options#find} flag is `false`). Models\n* that are created by a collection have their [owner]{@link enyo.Model#owner}\n* property set to the collection that instanced them.\n* @property {Boolean} find=true - When data being added to the collection is not\n* already a model instance, the collection will attempt to find an existing model\n* by its `primaryKey`, if it exists. In most cases, this is the preferred behavior,\n* but if the model [kind]{@glossary kind} being  instanced does not have a\n* `primaryKey`, it is unnecessary and this value may be set to `false`.\n* @property {Boolean} sort=false - When adding models to the collection, the\n* collection can also be sorted. If the [comparator]{@link enyo.Collection#comparator}\n* is a [function]{@glossary Function} and this value is `true`, the comparator\n*\twill be used to sort the entire collection. It may also be a function that\n* will be used to sort the collection, instead of (or in the place of) a defined\n*\tcomparator.\n* @property {Boolean} commit=false - When modifications are made to the\n*\tcollection, this flag ensures that those changes are\n*\t[committed]{@link enyo.Collection#commit} according to the configuration and\n*\tavailability of a [source]{@link enyo.Collection#source}. This may also be\n* configured per-call to methods that use it.\n* @property {Boolean} destroy=false - When models are removed from the collection,\n*\tthis flag indicates whether or not they will be [destroyed]{@link enyo.Model#destroy}\n* as well. Note that this could have a significant impact if the same models are\n* used in other collections.\n* @property {Boolean} complete=false - When models are removed from the\n* collection, this flag indicates whether or not they will also be removed from\n* the [store]{@link enyo.Collection#store}. This is rarely necessary and can\n* cause problems if the models are used in other collections. In addition, this\n* value will be ignored if the [destroy]{@link enyo.Collection#options#destroy}\n* flag is `true`.\n* @property {Boolean} fetch=false - If `true`, when the collection is initialized,\n* it will automatically attempt to fetch data if the\n* [source]{@link enyo.Collection#source} and [url]{@link enyo.Collection#url}\n*\tor [getUrl]{@link enyo.Collection#getUrl} properties are properly configured.\n* @property {Boolean} modelEvents=true - If `false`, this will keep the collection from\n*\tregistering with each model for individual model events.\n*/\n\n/**\n* The configuration options for [add()]{@link enyo.Collection#add}. For complete\n* descriptions of the options and their default values, see\n* {@link enyo.Collection#options}. Note that some properties have different\n* meanings in different contexts. Please review the descriptions below to see\n* how each property is used in this context.\n* \n* @typedef {enyo.Collection~Options} enyo.Collection~AddOptions\n* @property {Boolean} merge - Update existing [models]{@link enyo.Model} when found.\n* @property {Boolean} purge - Remove existing models not in the new dataset.\n* @property {Boolean} silent - Emit [events]{@glossary event} and notifications.\n* @property {Boolean} parse - Parse the incoming dataset before evaluating.\n* @property {Boolean} find - Look for an existing model.\n* @property {(Boolean|Function)} sort - Sort the finalized dataset.\n* @property {Boolean} commit - [Commit]{@link enyo.Collection#commit} changes to the\n*\t{@link enyo.Collection} after completing the [add]{@link enyo.Collection#add}\n* operation.\n* @property {Boolean} create - When an existing {@link enyo.Model} instance cannot be\n*\tresolved, a new instance should be created.\n* @property {number} index - The index at which to add the new dataset. Defaults to the\n*\tend of the current dataset if not explicitly set or invalid.\n* @property {Boolean} destroy - If `purge` is `true`, this will\n* [destroy]{@link enyo.Model#destroy} any models that are\n* [removed]{@link enyo.Collection#remove}.\n* @property {Object} modelOptions - When instancing a model, this\n*\t[object]{@glossary Object} will be passed to the constructor as its `options`\n*\tparameter.\n*/\n\n/**\n* The configuration options for [remove()]{@link enyo.Collection#remove}. For\n* complete descriptions of the options and their defaults, see\n* {@link enyo.Collection~Options}. Note that some properties have different\n* meanings in different contexts. Please review the descriptions below to see\n* how each property is used in this context.\n* \n* @typedef {enyo.Collection~Options} enyo.Collection~RemoveOptions\n* @property {Boolean} silent - Emit [events]{@glossary event} and notifications.\n* @property {Boolean} commit - [Commit]{@link enyo.Collection#commit} changes to the\n*\t[collection]{@link enyo.Collection} after completing the\n*\t[remove]{@link enyo.Collection#remove} operation.\n* @property {Boolean} complete - Remove the [model]{@link enyo.Model} from the\n*\t[store]{@link enyo.Collection#store} as well as the collection.\n* @property {Boolean} destroy - [Destroy]{@link enyo.Model#destroy} models\n*\tthat are removed from the collection.\n*/\n\n/**\n* The configurable options for [fetch()]{@link enyo.Collection#fetch},\n* [commit()]{@link enyo.Collection#commit}, and [destroy()]{@link enyo.Collection#destroy}.\n*\n* @typedef {enyo.Collection~Options} enyo.Collection~ActionOptions\n* @property {enyo.Collection~Success} success - The callback executed upon successful\n*\tcompletion.\n* @property {enyo.Collection~Error} error - The callback executed upon a failed attempt.\n*/\n\n/**\n* @callback enyo.Collection~Success\n* @param {enyo.Collection} collection - The [collection]{@link enyo.Collection}\n* that is returning successfully.\n* @param {enyo.Collection~ActionOptions} - opts The original options passed to the action method\n*\tthat is returning successfully.\n* @param {*} - res The result, if any, returned by the [source]{@link enyo.Source} that\n*\texecuted it.\n* @param {String} source - The name of the [source]{@link enyo.Collection#source} that has\n*\treturned successfully.\n*/\n\n/**\n* @callback enyo.Collection~Error\n* @param {enyo.Collection} collection - The [collection]{@link enyo.Collection}\n* that is returning an error.\n* @param {String} action - The name of the action that failed, one of `'FETCHING'`,\n*\t`'COMMITTING'`, or `'DESTROYING'`.\n* @param {enyo.Collection~ActionOptions} opts - The original options passed to the\n*\taction method that is returning an error.\n* @param {*} res - The result, if any, returned by the [source]{@link enyo.Source}\n*\tthat executed it.\n* @param {String} source - The name of the [source]{@link enyo.Collection#source}\n*\tthat has returned an error.\n*/\n\n/**\n* A method used to compare two elements in an {@link enyo.Collection}. Should be\n* implemented like callbacks used with [Array.sort()]{@glossary Array.sort}.\n*\n* @see {@glossary Array.sort}\n* @see enyo.Collection.sort\n* @see enyo.Collection.comparator\n* @callback enyo.Collection~Comparator\n* @param {enyo.Model} a - The first [model]{@link enyo.Model} to compare.\n* @param {enyo.Model} b - The second model to compare.\n* @returns {Number} `-1` if `a` should have the lower index, `0` if they are the same,\n* or `1` if `b` should have the lower index.\n*/\n\n/**\n* An array-like structure designed to store instances of {@link enyo.Model}.\n* \n* @class enyo.Collection\n* @extends enyo.Component\n* @mixes enyo.StateSupport\n* @mixes enyo.EventEmitter\n* @public\n*/\nvar Collection = module.exports = kind(\n\t/** @lends enyo.Collection.prototype */ {\n\t\n\tname: 'enyo.Collection',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: BaseCollection,\n\t\n\t/**\n\t* @private\n\t*/\n\n\t\n\t/**\n\t* Used by various [sources]{@link enyo.Collection#source} as part of the\n\t* [URI]{@glossary URI} from which they may be [fetched]{@link enyo.Collection#fetch},\n\t* [committed]{@link enyo.Collection#commit}, or [destroyed]{@link enyo.Collection#destroy}.\n\t* Some sources may use this property in other ways.\n\t*\n\t* @see enyo.Collection.getUrl\n\t* @see enyo.Source\n\t* @see enyo.AjaxSource\n\t* @see enyo.JsonpSource\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\turl: '',\n\t\n\t/**\n\t* Implement this method to be used by [sources]{@link enyo.Model#source} to\n\t* dynamically derive the [URI]{@glossary URI} from which they may be\n\t* [fetched]{@link enyo.Collection#fetch}, [committed]{@link enyo.Collection#commit},\n\t* or [destroyed]{@link enyo.Collection#destroy}. Some\n\t* [sources]{@link enyo.Collection#source} may use this property in other ways.\n\t* Note that if this method is implemented, the [url]{@link enyo.Collection#url}\n\t* property will not be used.\n\t*\n\t* @see enyo.Collection.url\n\t* @see enyo.Source\n\t* @see enyo.AjaxSource\n\t* @see enyo.JsonpSource\n\t* @type {Function}\n\t* @default null\n\t* @virtual\n\t* @public\n\t*/\n\tgetUrl: null,\n\t\n\t/**\n\t* The [kind]{@glossary kind) of {@link enyo.Model} that this\n\t* [collection]{@link enyo.Collection} will contain. This is important to set properly so\n\t* that when [fetching]{@link enyo.Collection#fetch}, the returned data will be instanced\n\t* as the correct model [subkind]{@glossary subkind}.\n\t* \n\t* @type {(enyo.Model|String)}\n\t* @default enyo.Model\n\t* @public\n\t*/\n\tmodel: Model,\n\t\n\t/**\n\t* A special type of [array]{@glossary Array} used internally by\n\t* {@link enyo.Collection}. The array should not be modified directly, nor\n\t* should the property be set directly. It is used as a container by the\n\t* collection. If [set]{@link enyo.Collection#set} directly, it will\n\t* [emit]{@link enyo.EventEmitter.emit} a [reset]{@link enyo.Collection#reset}\n\t* event.\n\t*\n\t* @see enyo.Collection.modelsChanged\n\t* @type enyo.ModelList\n\t* @default null\n\t* @readonly\n\t* @protected\n\t*/\n\tmodels: null,\n\t\n\t/**\n\t* The current [state]{@link enyo~States} of the [collection]{@link enyo.Collection}.\n\t* This value changes automatically and may be observed for more complex state\n\t* monitoring. The default value is [READY]{@link enyo~States.READY}.\n\t* @type enyo.States\n\t* @default enyo~States.READY\n\t* @readonly\n\t* @public\n\t* @see enyo.States\n\t* @see enyo.StateSupport\n\t*/\n\tstatus: States.READY,\n\t\n\t/**\n\t* The configurable default [options]{@link enyo.Collection~Options}. These values will be\n\t* used to modify the behavior of the [collection]{@link enyo.Collection} unless additional\n\t* options are passed into the methods that use them. When modifying these values in a\n\t* [subkind]{@glossary subkind} of {@link enyo.Collection}, they will be merged with\n\t* existing values.\n\t* \n\t* @type {enyo.Collection~Options}\n\t* @public\n\t*/\n\toptions: {\n\t\tmerge: true,\n\t\tsilent: false,\n\t\tpurge: false,\n\t\tparse: false,\n\t\tcreate: true,\n\t\tfind: true,\n\t\tsort: false,\n\t\tcommit: false,\n\t\tdestroy: false,\n\t\tcomplete: false,\n\t\tfetch: false,\n\t\tmodelEvents: true\n\t},\n\t\n\t/**\n\t* Modifies the structure of data so that it can be used by the\n\t* [add()]{@link enyo.Collection#add} method. This method will only be used\n\t* during initialization or after a successful [fetch]{@link enyo.Collection#fetch}\n\t* if the [parse]{@link enyo.Collection~Options.parse} flag is set to `true`.\n\t* It may be used for simple remapping, renaming, or complex restructuring of\n\t* data coming from a [source]{@link enyo.Collection#source} that requires\n\t* modification before it can be added to the [collection]{@link enyo.Collection}.\n\t* This is a virtual method and must be implemented.\n\t* \n\t* @param {*} data - The incoming data passed to the\n\t*\t[constructor]{@link enyo.Collection#constructor} or returned by a successful\n\t*\t[fetch]{@link enyo.Collection#fetch}.\n\t* @returns {Array} The properly formatted data to be accepted by the\n\t*\t[add()]{@link enyo.Collection#add} method.\n\t* @virtual\n\t* @public\n\t*/\n\tparse: function (data) {\n\t\treturn data;\n\t},\n\t\n\t/**\n\t* Adds data to the [collection]{@link enyo.Collection}. This method can add an\n\t* individual [model]{@link enyo.Model} or an [array]{@glossary Array} of models.\n\t* It can splice them into the dataset at a designated index or remove models\n\t* from the existing dataset that are not included in the new one.\n\t* See {@link enyo.Collection~AddOptions} for detailed information on the\n\t* configuration options available for this method. This method is heavily\n\t* optimized for batch operations on arrays of models. For better performance,\n\t* ensure that loops do not consecutively call this method but instead\n\t* build an array to pass as the first parameter.\n\t* \n\t* @fires enyo.Collection#add\n\t* @param {(Object|Object[]|enyo.Model|enyo.Model[])} models The data to add to the\n\t*\t{@link enyo.Collection} that can be a [hash]{@glossary Object}, an array of\n\t*\thashes, an {@link enyo.Model} instance, or and array of `enyo.Model` instances.\n\t* Note that if the [parse]{@link enyo.Collection#options#parse} configuration\n\t* option is `true`, it will use the returned value as this parameter.\n\t* @param {enyo.Collection~AddOptions} [opts] - The configuration options that modify\n\t*\tthe behavior of this method. The default values will be merged with these options\n\t* before evaluating.\n\t* @returns {enyo.Model[]} The models that were added, if any.\n\t* @public\n\t*/\n\tadd: function (models, opts) {\n\t\tvar loc = this.models\n\t\t\t, len = this.length\n\t\t\t, ctor = this.model\n\t\t\t, options = this.options\n\t\t\t, pkey = ctor.prototype.primaryKey\n\t\t\t, idx = len\n\t\t\t, removedBeforeIdx = 0\n\t\t\t, added, keep, removed, model, attrs, found, id;\n\t\t\t\n\t\t// for backwards compatibility with earlier api standards we allow the\n\t\t// second paramter to be the index and third param options when\n\t\t// necessary\n\t\t!isNaN(opts) && (idx = opts);\n\t\targuments.length > 2 && (opts = arguments[2]);\n\t\t\n\t\t// normalize options so we have values\n\t\topts = opts? utils.mixin({}, [options, opts]): options;\n\t\t\n\t\t// our flags\n\t\tvar merge = opts.merge\n\t\t\t, purge = opts.purge\n\t\t\t, silent = opts.silent\n\t\t\t, parse = opts.parse\n\t\t\t, find = opts.find\n\t\t\t, sort = opts.sort\n\t\t\t, commit = opts.commit\n\t\t\t, create = opts.create !== false\n\t\t\t, modelOpts = opts.modelOptions\n\t\t\t, index = opts.index;\n\t\t\t\n\t\tidx = !isNaN(index) ? Math.max(0, Math.min(len, index)) : idx;\n\n\t\t/*jshint -W018 */\n\t\tsort && !(typeof sort == 'function') && (sort = this.comparator);\n\t\t/*jshint +W018 */\n\t\t\n\t\t// for a special case purge to remove records that aren't in the current\n\t\t// set being added\n\t\t\n\t\tif (parse) models = this.parse(models);\n\t\t\t\n\t\t// we treat all additions as an array of additions\n\t\t!(models instanceof Array) && (models = [models]);\n\t\t\n\t\tfor (var i=0, end=models.length; i<end; ++i) {\n\t\t\tmodel = models[i];\n\t\t\tattrs = null;\n\t\t\t\n\t\t\tif (!model && isNaN(model)) continue;\n\t\t\t\n\t\t\t// first determine if the model is an instance of model since\n\t\t\t// everything else hinges on this\n\t\t\tif (!(model instanceof Model)) {\n\t\t\t\t// we need to determine how to handle this\n\t\t\t\tattrs = model;\n\t\t\t}\n\t\t\t\n\t\t\tif (typeof attrs == 'string' || typeof attrs == 'number') {\n\t\t\t\tid = attrs;\n\t\t\t\tattrs = {};\n\t\t\t\tattrs[pkey] = id;\n\t\t\t} else id = attrs? attrs[pkey]: model;\n\t\t\t\t\n\t\t\t\n\t\t\t// see if we have an existing entry for this model/hash\n\t\t\tif (find) found = loc.has(id);\n\t\t\t\n\t\t\t// if it already existed...\n\t\t\tif (found) {\n\t\t\t\t\n\t\t\t\t// we need to ensure we've resolved the model (if necessary)\n\t\t\t\tfound = loc.resolve(id);\n\t\t\t\t\n\t\t\t\tif (merge) {\n\t\t\t\t\tattrs || (attrs = model.attributes);\n\t\t\t\t\tfound.set(attrs, opts);\n\t\t\t\t}\n\t\t\t\t// with the purge flag we endeavor on the expensive track of removing\n\t\t\t\t// those models currently in the collection that aren't in the incoming\n\t\t\t\t// dataset and aren't being created\n\t\t\t\tif (purge) {\n\t\t\t\t\tkeep || (keep = {length: 0});\n\t\t\t\t\tkeep[found.euid] = model;\n\t\t\t\t\tkeep.length++;\n\t\t\t\t}\n\t\t\t} else if (attrs && find && (found = this.store.resolve(ctor, id))) {\n\t\t\t\t// in this case we were asked to search our store for an existing record\n\t\t\t\t// and we found one but we didn't previously have it so we are technically\n\t\t\t\t// adding it\n\t\t\t\t// @NOTE: Setting the _find_ option always assumes _merge_\n\t\t\t\tattrs || (attrs = model.attributes);\n\t\t\t\tparse && (attrs = found.parse(attrs));\n\t\t\t\tadded || (added = []);\n\t\t\t\tadded.push(found);\n\t\t\t\tthis.prepareModel(found, opts);\n\t\t\t\tmerge && found.set(attrs, opts);\n\t\t\t} else if (!attrs) {\n\t\t\t\tadded || (added = []);\n\t\t\t\tadded.push(model);\n\t\t\t\tthis.prepareModel(model);\n\t\t\t} else if (create) {\n\t\t\t\tmodel = this.prepareModel(attrs || model, modelOpts);\n\t\t\t\tadded || (added = []);\n\t\t\t\tadded.push(model);\n\t\t\t\t\n\t\t\t\t// with the purge flag we endeavor on the expensive track of removing\n\t\t\t\t// those models currently in the collection that aren't in the incoming\n\t\t\t\t// dataset and aren't being created\n\t\t\t\tif (purge) {\n\t\t\t\t\tkeep || (keep = {length: 0});\n\t\t\t\t\tkeep[model.euid] = model;\n\t\t\t\t\tkeep.length++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t// here we process those models to be removed if purge was true\n\t\t// the other guard is just in case we actually get to keep everything\n\t\t// so we don't do this unnecessary pass\n\t\tif (purge && (keep && keep.length)) {\n\t\t\tremoved || (removed = []);\n\t\t\tkeep || (keep = {});\n\t\t\tfor (i=0; i<len; ++i) {\n\t\t\t\tif (!keep[(model = loc[i]).euid]) {\n\t\t\t\t\tremoved.push(model);\n\t\t\t\t\tif (i < idx) removedBeforeIdx++;\n\t\t\t\t}\n\t\t\t} \n\t\t\t// if we removed any we process that now\n\t\t\tremoved.length && this.remove(removed, opts);\n\t\t\tidx = idx - removedBeforeIdx;\n\t\t}\n\t\t\n\t\t// added && loc.stopNotifications().add(added, idx).startNotifications();\n\t\tif (added) {\n\t\t\tloc.add(added, idx);\n\t\t\tsort && this.sort(sort, {silent: true});\n\t\t\t\n\t\t\t// we batch this operation to make use of its ~efficient array operations\n\t\t\tthis.store.add(added); \n\t\t}\n\t\tthis.length = loc.length;\n\t\t\n\t\t\n\t\tif (!silent) {\n\t\t\t// notify observers of the length change\n\t\t\tlen != this.length && this.notify('length', len, this.length);\n\t\t\t// notify listeners of the addition of records\n\t\t\tif (added) {\n\t\t\t\tthis.emit('add', {models: added, collection: this, index: idx});\n\t\t\t}\n\t\t}\n\t\t\n\t\t// note that if commit is set but this was called from a successful fetch this will be\n\t\t// a nop (as intended)\n\t\tcommit && added && this.commit(opts);\n\t\t\n\t\treturn added || [];\n\t},\n\t\n\t/**\n\t* Removes data from the [collection]{@link enyo.Collection}. It can take a\n\t* [model]{@link enyo.Model} or an [array]{@glossary Array} of models.\n\t* If any of the instances are present in the collection, they will be\n\t* removed in the order in which they are encountered. Emits the\n\t* [remove]{@link enyo.Collection#remove} event if any models were found and\n\t* removed from the collection (and the `silent` option is not `true`).\n\t* \n\t* @fires enyo.Collection#remove\n\t* @param {(enyo.Model|enyo.Model[])} models The [models]{@link enyo.Model} to remove\t\t\n\t*\tif they exist in the [collection]{@link enyo.Collection}.\n\t* @param {enyo.Collection~RemoveOptions} [opts] - The configuration options that modify\n\t*\tthe behavior of this method.\n\t* @returns {enyo.Model[]} The models that were removed, if any.\n\t* @public\n\t*/\n\tremove: function (models, opts) {\n\t\tvar loc = this.models\n\t\t\t, len = loc.length\n\t\t\t, options = this.options\n\t\t\t, removed, model;\n\t\t\n\t\t// normalize options so we have values\n\t\topts = opts? utils.mixin({}, [options, opts]): options;\n\t\t\n\t\t// our flags\n\t\tvar silent = opts.silent\n\t\t\t, destroy = opts.destroy\n\t\t\t, complete = opts.complete\n\t\t\t, commit = opts.commit;\n\t\t\n\t\t// we treat all additions as an array of additions\n\t\t!(models instanceof Array) && (models = [models]);\n\t\t\n\t\tremoved = loc.remove(models);\n\t\t\n\t\tif (removed.length) {\n\t\t\t\n\t\t\t// ensure that we can batch remove from the store\n\t\t\topts.batching = true;\n\t\t\t\n\t\t\tfor (var i=0, end=removed.length; i<end; ++i) {\n\t\t\t\tmodel = removed[i];\n\t\t\t\t\n\t\t\t\t// it is possible but highly, highly unlikely that this would have been set\n\t\t\t\t// to false by default and true at runtime...so we take our chances for the\n\t\t\t\t// small performance gain in those situations where it was defaulted to false\n\t\t\t\tif (options.modelEvents) model.off('*', this._modelEvent, this);\n\t\t\t\tif (destroy) model.destroy(opts);\n\t\t\t}\n\t\t\t\n\t\t\t// if complete or destroy was set we remove them from the store (batched op)\n\t\t\tif (complete || destroy) this.store.remove(removed);\n\t\t}\n\t\t\n\t\tthis.length = loc.length;\n\t\t\n\t\tif (!silent) {\n\t\t\tlen != this.length && this.notify('length', len, this.length);\n\t\t\tif (removed.length) {\n\t\t\t\tthis.emit('remove', {models: removed, collection: this});\n\t\t\t}\n\t\t}\n\t\t\n\t\t// if this is called from an overloaded method (such as fetch or commit) or some \n\t\t// success callback this will be a nop (as intended)\n\t\tcommit && removed.length && this.commit();\n\t\t\n\t\treturn removed;\n\t},\n\t\n\t/**\n\t* Retrieves a [model]{@link enyo.Model} for the provided index.\n\t* \n\t* @param {Number} idx - The index to return from the [collection]{@link enyo.Collection}.\n\t* @returns {(enyo.Model|undefined)} The [model]{@link enyo.Model} at the given index or\n\t*\t`undefined` if it cannot be found.\n\t* @public\n\t*/\n\tat: function (idx) {\n\t\treturn this.models[idx];\n\t},\n\t\n\t/**\n\t* Returns the JSON serializable [array]{@glossary Array} of [models]{@link enyo.Model}\n\t* according to their own [raw()]{@link enyo.Model#raw} output.\n\t*\n\t* @returns {enyo.Model[]} The [models]{@link enyo.Model} according to their\n\t*\t[raw()]{@link enyo.Model#raw} output.\n\t* @public\n\t*/\n\traw: function () {\n\t\treturn this.models.map(function (model) {\n\t\t\treturn model.raw();\n\t\t});\n\t},\n\t\n\t/**\n\t* Determines if the specified [model]{@link enyo.Model} is contained by this\n\t* [collection]{@link enyo.Collection}.\n\t*\n\t* @param {enyo.Model} model - The [model]{@link enyo.Model} to check.\n\t* @returns {Boolean} Whether or not the model belongs to the\n\t*\t[collection]{@link enyo.Collection}.\n\t* @public\n\t*/\n\thas: function (model) {\n\t\treturn this.models.has(model);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.forEach}\n\t* @public\n\t*/\n\tforEach: function (fn, ctx) {\n\t\t\n\t\t// ensure that this is an immutable reference to the models such that changes will\n\t\t// not affect the entire loop - e.g. calling destroy on models won't keep this from\n\t\t// completing\n\t\treturn this.models.slice().forEach(fn, ctx || this);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.filter}\n\t* @public\n\t*/\n\tfilter: function (fn, ctx) {\n\t\t\n\t\t// ensure that this is an immutable reference to the models such that changes will\n\t\t// not affect the entire loop - e.g. calling destroy on models won't keep this from\n\t\t// completing\n\t\treturn this.models.slice().filter(fn, ctx || this);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.find}\n\t* @public\n\t*/\n\tfind: function (fn, ctx) {\n\t\t\n\t\t// ensure that this is an immutable reference to the models such that changes will\n\t\t// not affect the entire loop - e.g. calling destroy on models won't keep this from\n\t\t// completing\n\t\treturn this.models.slice().find(fn, ctx || this);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.map}\n\t* @public\n\t*/\n\tmap: function (fn, ctx) {\n\t\t\n\t\t// ensure that this is an immutable reference to the models such that changes will\n\t\t// not affect the entire loop - e.g. calling destroy on models won't keep this from\n\t\t// completing\n\t\treturn this.models.slice().map(fn, ctx || this);\n\t},\n\t\n\t/**\n\t* @see {@glossary Array.indexOf}\n\t* @public\n\t*/\n\tindexOf: function (model, offset) {\n\t\treturn this.models.indexOf(model, offset);\n\t},\n\t\n\t/**\n\t* Removes all [models]{@link enyo.Model} from the [collection]{@link enyo.Collection}.\n\t* Optionally, a model (or models) may be provided to replace the removed models.\n\t* If this operation is not `silent`, it will emit a `reset` event. Returns the\n\t* removed models, but be aware that, if the `destroy` configuration option is set,\n\t* the returned models will have limited usefulness.\n\t* \n\t* @param {(enyo.Model|enyo.Model[])} [models] The [model or models]{@link enyo.Model}\n\t*\tto use as a replacement for the current set of models in the\n\t*\t{@link enyo.Collection}.\n\t* @param {enyo.Collection~Options} [opts] - The options that will modify the behavior\n\t*\tof this method.\n\t* @returns {enyo.Model[]} The models that were removed from the collection.\n\t* @public\n\t*/\n\tempty: function (models, opts) {\n\t\tvar silent,\n\t\t\tremoved,\n\t\t\tlen = this.length;\n\t\t\n\t\tif (models && !(models instanceof Array || models instanceof Model)) {\n\t\t\t// there were no models but instead some options only\n\t\t\topts = models;\n\t\t\tmodels = null;\n\t\t}\n\t\t\n\t\topts = opts || {};\n\t\t\n\t\t// just in case the entire thing was supposed to be silent\n\t\tsilent = opts.silent;\n\t\topts.silent = true;\n\t\t\n\t\tremoved = this.remove(this.models, opts);\n\t\t\n\t\t// if there are models we are going to propagate the remove quietly and instead issue\n\t\t// a single reset with the new content\n\t\tif (models) this.add(models, opts);\n\t\t\n\t\t// now if the entire thing wasn't supposed to have been done silently we issue\n\t\t// a reset\n\t\tif (!silent) {\n\t\t\tif (len != this.length) this.notify('length', len, this.length);\n\t\t\tthis.emit('reset', {models: this.models.copy(), collection: this});\n\t\t}\n\t\t\n\t\treturn removed;\n\t},\n\t\n\t/**\n\t* Returns the [JSON]{@glossary JSON} serializable [raw()]{@link enyo.Collection#raw}\n\t* output of the [collection]{@link enyo.Collection}. Will automatically be executed by\n\t* [JSON.parse()]{@glossary JSON.parse}.\n\t*\n\t* @see enyo.Collection.raw\n\t* @returns {Object} The return value of [raw()]{@link enyo.Collection#raw}.\n\t* @public\n\t*/\n\ttoJSON: function () {\n\t\treturn this.raw();\n\t},\n\t\n\t/**\n\t* The default behavior of this method is the same as {@glossary Array.sort}. If the\n\t* [function]{@glossary Function} parameter is omitted, it will attempt to use the\n\t* [comparator]{@link enyo.Collection#comparator} (if any) from the\n\t* [collection]{@link enyo.Collection}. Note that the collection is sorted in-place\n\t* and returns a reference to itself. The collection\n\t* [emits]{@link enyo.EventEmitter.emit} the [sort]{@link enyo.Collection#sort}\n\t* event.\n\t*\n\t* @fires enyo.Collection#sort\n\t* @see {@glossary Array.sort}\n\t* @param {enyo.Collection~Comparator} [fn] - The [comparator]{@link enyo.Collection#comparator}\n\t* method.\n\t* @param {enyo.Collection~Options} [opts] - The configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsort: function (fn, opts) {\n\t\tif (fn || this.comparator) {\n\t\t\tvar options = {silent: false}, silent;\n\t\t\n\t\t\topts = opts? utils.mixin({}, [options, opts]): options;\n\t\t\tsilent = opts.silent;\n\t\t\tthis.models.sort(fn || this.comparator);\n\t\t\t!silent && this.emit('sort', {\n\t\t\t\tcomparator: fn || this.comparator,\n\t\t\t\tmodels: this.models.copy(),\n\t\t\t\tcollection: this\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Commits the [collection]{@link enyo.Collection} to a\n\t* [source]{@link enyo.Collection#source} or sources. An {@link enyo.Collection}\n\t* cannot be committed if it is in an [error]{@link enyo~States.ERROR}\n\t* ({@link enyo.StateSupport.isError}) or [busy]{@link enyo~States.BUSY}\n\t* ({@link enyo.StateSupport.isBusy}) [state]{@link enyo.Model#status}. While\n\t* executing, it will add the [COMMITTING]{@link enyo~States.COMMITTING} flag\n\t* to the collection's [status]{@link enyo.Collection#status}. Once it has\n\t* completed execution, it will remove this flag (even if it fails).\n\t*\n\t* @see enyo.Collection.committed\n\t* @see enyo.Collection.status\n\t* @param {enyo.Collection~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tcommit: function (opts) {\n\t\tvar options,\n\t\t\tsource,\n\t\t\tit = this;\n\t\t\n\t\t// if the current status is not one of the error states we can continue\n\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\t\t\t\n\t\t\t// if there were options passed in we copy them quickly so that we can hijack\n\t\t\t// the success and error methods while preserving the originals to use later\n\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\t\t\t\n\t\t\t// make sure we keep track of how many sources we're requesting\n\t\t\tsource = options.source || this.source;\n\t\t\tif (source && ((source instanceof Array) || source === true)) {\n\t\t\t\tthis._waiting = source.length ? source.slice() : Object.keys(Source.sources);\n\t\t\t}\n\t\t\t\t\n\t\t\toptions.success = function (source, res) {\n\t\t\t\tit.committed(opts, res, source);\n\t\t\t};\n\t\t\t\n\t\t\toptions.error = function (source, res) {\n\t\t\t\tit.errored('COMMITTING', opts, res, source);\n\t\t\t};\n\t\t\t\n\t\t\t// set the state\n\t\t\tthis.set('status', (this.status | States.COMMITTING) & ~States.READY);\n\t\t\t\n\t\t\t// now pass this on to the source to execute as it sees fit\n\t\t\tSource.execute('commit', this, options);\n\t\t} else if (this.status & States.ERROR) this.errored(this.status, opts);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Fetches the [collection]{@link enyo.Collection} from a\n\t* [source]{@link enyo.Collection#source} or sources. An {@link enyo.Collection}\n\t* cannot be fetched if it is in an [error]{@link enyo~States.ERROR}\n\t* ({@link enyo.StateSupport.isError}) or [busy]{@link enyo~States.BUSY}\n\t* ({@link enyo.StateSupport.isBusy}) [state]{@link enyo.Model#status}. While\n\t* executing, it will add the [FETCHING]{@link enyo~States.FETCHING} flag to\n\t* the collection's [status]{@link enyo.Collection#status}. Once it has\n\t* completed execution, it will remove this flag (even if it fails).\n\t*\n\t* @see enyo.Collection.fetched\n\t* @see enyo.Collection.status\n\t* @param {enyo.Collection~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tfetch: function (opts) {\n\t\tvar options,\n\t\t\tsource,\n\t\t\tit = this;\n\t\t\t\n\t\t// if the current status is not one of the error states we can continue\n\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\t\t\t\n\t\t\t// if there were options passed in we copy them quickly so that we can hijack\n\t\t\t// the success and error methods while preserving the originals to use later\n\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\t\t\t\n\t\t\t// make sure we keep track of how many sources we're requesting\n\t\t\tsource = options.source || this.source;\n\t\t\tif (source && ((source instanceof Array) || source === true)) {\n\t\t\t\tthis._waiting = source.length ? source.slice() : Object.keys(Source.sources);\n\t\t\t}\n\t\t\t\n\t\t\toptions.success = function (source, res) {\n\t\t\t\tit.fetched(opts, res, source);\n\t\t\t};\n\t\t\t\n\t\t\toptions.error = function (source, res) {\n\t\t\t\tit.errored('FETCHING', opts, res, source);\n\t\t\t};\n\t\t\t\n\t\t\t// set the state\n\t\t\tthis.set('status', (this.status | States.FETCHING) & ~States.READY);\n\t\t\t\n\t\t\t// now pass this on to the source to execute as it sees fit\n\t\t\tSource.execute('fetch', this, options);\n\t\t} else if (this.status & States.ERROR) this.errored(this.status, opts);\n\t\t\n\t\treturn this;\n\t},\n\t\n\t/**\n\t* Destroys the [collection]{@link enyo.Collection}. By default, the\n\t* collection will only be [destroyed]{@glossary destroy} in the client. To\n\t* execute with a [source]{@link enyo.Collection#source} or sources, the\n\t* [commit default option]{@link enyo.Collection#options} must be `true` or a\n\t* `source` property must be explicitly provided in the `opts` parameter. A\n\t* collection cannot be destroyed (using a source) if it is in an\n\t* [error]{@link enyo~States.ERROR} ({@link enyo.StateSupport.isError}) or\n\t* [busy]{@link enyo~States.BUSY} ({@link enyo.StateSupport.isBusy})\n\t* [state]{@link enyo.Collection#status}. While executing, it will add the\n\t* [DESTROYING]{@link enyo~States.DESTROYING} flag to the collection's\n\t* [status]{@link enyo.Collection#status}. Once it has completed execution,\n\t* it will remove this flag (even if it fails).\n\t*\n\t* @see enyo.Collection.status\n\t* @param {enyo.Collection~ActionOptions} [opts] - Optional configuration options.\n\t* @returns {this} The callee for chaining.\n\t* @method\n\t* @public\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function (opts) {\n\t\t\tvar options = opts ? utils.mixin({}, [this.options, opts]) : this.options,\n\t\t\t\tit = this,\n\t\t\t\tidx;\n\t\t\t\t\t\t\n\t\t\t// this becomes an (potentially) async operation if we are committing this destroy\n\t\t\t// to a source and its kind of tricky to figure out because there are several ways\n\t\t\t// it could be flagged to do this\n\t\t\t\t\t\t\n\t\t\tif (options.commit || options.source) {\n\t\t\t\t\n\t\t\t\t// if the current status is not one of the error states we can continue\n\t\t\t\tif (!(this.status & (States.ERROR | States.BUSY))) {\n\t\t\t\t\n\t\t\t\t\t// remap to the originals\n\t\t\t\t\toptions = opts ? utils.clone(opts, true) : {};\n\t\t\t\t\n\t\t\t\t\toptions.success = function (source, res) {\n\t\t\t\t\n\t\t\t\t\t\tif (it._waiting) {\n\t\t\t\t\t\t\tidx = it._waiting.findIndex(function (ln) {\n\t\t\t\t\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (idx > -1) it._waiting.splice(idx, 1);\n\t\t\t\t\t\t\tif (!it._waiting.length) it._waiting = null;\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\t// continue the operation this time with commit false explicitly\n\t\t\t\t\t\tif (!it._waiting) {\n\t\t\t\t\t\t\toptions.commit = options.source = null;\n\t\t\t\t\t\t\tit.destroy(options);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t\t\t\t\t};\n\t\t\t\n\t\t\t\t\toptions.error = function (source, res) {\n\t\t\t\t\n\t\t\t\t\t\tif (it._waiting) {\n\t\t\t\t\t\t\tidx = it._waiting.findIndex(function (ln) {\n\t\t\t\t\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (idx > -1) it._waiting.splice(idx, 1);\n\t\t\t\t\t\t\tif (!it._waiting.length) it._waiting = null;\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\t// continue the operation this time with commit false explicitly\n\t\t\t\t\t\tif (!it._waiting) {\n\t\t\t\t\t\t\toptions.commit = options.source = null;\n\t\t\t\t\t\t\tit.destroy(options);\n\t\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\t// we don't bother setting the error state if we aren't waiting because \n\t\t\t\t\t\t// it will be cleared to DESTROYED and it would be pointless\n\t\t\t\t\t\telse this.errored('DESTROYING', opts, res, source);\n\t\t\t\t\t};\n\t\t\t\t\n\t\t\t\t\tthis.set('status', (this.status | States.DESTROYING) & ~States.READY);\n\t\t\t\n\t\t\t\t\tSource.execute('destroy', this, options);\n\t\t\t\t} else if (this.status & States.ERROR) this.errored(this.status, opts);\n\t\t\t\t\n\t\t\t\t// we don't allow the destroy to take place and we don't forcibly break-down\n\t\t\t\t// the collection errantly so there is an opportuniy to resolve the issue\n\t\t\t\t// before we lose access to the collection's content!\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\t\n\t\t\tif (this.length && options.destroy) this.empty(options);\n\t\t\t\n\t\t\t// set the final resting state of this collection\n\t\t\tthis.set('status', States.DESTROYED);\n\t\t\t\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* This is a virtual method that, when provided, will be used for sorting during\n\t* [add()]{@link enyo.Collection#add} when the `sort` flag is `true` or when the\n\t* [sort()]{@link enyo.Collection#sort} method is called without a passed-in\n\t* [function]{@glossary Function} parameter.\n\t*\n\t* @see enyo.Collection~Comparator\n\t* @type {enyo.Collection~Comparator}\n\t* @default null\n\t* @virtual\n\t* @method\n\t* @public\n\t*/\n\tcomparator: null,\n\t\n\t/**\n\t* Used during [add()]{@link enyo.Collection#add} when `create` is `true` and\n\t* the data is a [hash]{@glossary Object}.\n\t*\n\t* @private\n\t*/\n\tprepareModel: function (attrs, opts) {\n\t\tvar Ctor = this.model\n\t\t\t, options = this.options\n\t\t\t, model;\n\t\t\n\t\tattrs instanceof Ctor && (model = attrs);\n\t\tif (!model) {\n\t\t\topts = opts || {};\n\t\t\topts.noAdd = true;\n\t\t\tmodel = new Ctor(attrs, null, opts);\n\t\t}\n\t\t\n\t\tif (options.modelEvents) model.on('*', this._modelEvent, this);\n\t\t\n\t\treturn model;\n\t},\n\t\n\t/**\n\t* When a [commit]{@link enyo.Collection#commit} has completed successfully, it is returned\n\t* to this method. This method handles special and important behavior; it should not be\n\t* called directly and, when overloading, care must be taken to ensure that the\n\t* super-method is called. This correctly sets the [status]{@link enyo.Collection#status}\n\t* and, in cases where multiple [sources]{@link enyo.Collection#source} were used, it waits\n\t* until all have responded before clearing the [COMMITTING]{@link enyo~States.COMMITTING}\n\t* flag. If a [success]{@link enyo.Collection~Success} callback was provided, it will be\n\t* called once for each source.\n\t*\n\t* @param {enyo.Collection~ActionOptions} opts - The original options passed to\n\t*\t[commit()]{@link enyo.Collection#commit}, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given\n\t* [source]{@link enyo.Collection#source}, if any. This will vary depending\n\t* on the source.\n\t* @param {String} source - The name of the source that has completed successfully.\n\t* @public\n\t*/\n\tcommitted: function (opts, res, source) {\n\t\tvar idx;\n\t\t\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\t\t\n\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t\t\n\t\t// clear the state\n\t\tif (!this._waiting) {\n\t\t\tthis.set('status', (this.status | States.READY) & ~States.COMMITTING);\n\t\t}\n\t},\n\t\n\t/**\n\t* When a [fetch]{@link enyo.Collection#fetch} has completed successfully, it is returned\n\t* to this method. This method handles special and important behavior; it should not be\n\t* called directly and, when overloading, care must be taken to ensure that you call the\n\t* super-method. This correctly sets the [status]{@link enyo.Collection#status} and, in\n\t* cases where multiple [sources]{@link enyo.Collection#source} were used, it waits until\n\t* all have responded before clearing the [FETCHING]{@link enyo~States.FETCHING} flag. If\n\t* a [success]{@link enyo.Collection~Success} callback was provided, it will be called\n\t* once for each source.\n\t*\n\t* @param {enyo.Collection~ActionOptions} opts - The original options passed to\n\t*\t[fetch()]{@link enyo.Collection#fetch}, merged with the defaults.\n\t* @param {*} [res] - The result provided from the given\n\t* [source]{@link enyo.Collection#source}, if any. This will vary depending\n\t*\ton the source.\n\t* @param {String} source - The name of the source that has completed successfully.\n\t* @public\n\t*/\n\tfetched: function (opts, res, source) {\n\t\tvar idx;\n\t\t\n\t\tif (this._waiting) {\n\t\t\tidx = this._waiting.findIndex(function (ln) {\n\t\t\t\treturn (ln instanceof Source ? ln.name : ln) == source;\n\t\t\t});\n\t\t\tif (idx > -1) this._waiting.splice(idx, 1);\n\t\t\tif (!this._waiting.length) this._waiting = null;\n\t\t}\n\t\t\n\t\t// if there is a result we add it to the collection passing it any per-fetch options\n\t\t// that will override the defaults (e.g. parse) we don't do that here as it will\n\t\t// be done in the add method -- also note we reassign the result to whatever was\n\t\t// actually added and pass that to any other success callback if there is one\n\t\tif (res) res = this.add(res, opts);\n\t\t\n\t\t// now look for an additional success callback\n\t\tif (opts && opts.success) opts.success(this, opts, res, source);\n\t\t\n\t\t// clear the state\n\t\tif (!this._waiting) {\n\t\t\tthis.set('status', (this.status | States.READY) & ~States.FETCHING);\n\t\t}\n\t},\n\t\n\t/**\n\t* If an error is encountered while [fetching]{@link enyo.Collection#fetch},\n\t* [committing]{@link enyo.Collection#commit}, or [destroying]{@link enyo.Collection#destroy}\n\t* the [collection]{@link enyo.Collection}, this method will be called. By\n\t* default, it updates the collection's [status]{@link enyo.Collection#status}\n\t* property and then checks to see if there is a provided\n\t* [error handler]{@link enyo.Collection~ErrorCallback}. If the error handler\n\t* exists, it will be called.\n\t* \n\t* @param {String} action - The name of the action that failed,\n\t* one of `'FETCHING'` or `'COMMITTING'`.\n\t* @param {enyo.Collection~ActionOptions} opts - The options hash originally\n\t* passed along with the original action.\n\t* @param {*} [res] - The result of the requested `action`; varies depending on the\n\t*\trequested [source]{@link enyo.Collection#source}.\n\t* @param {String} source - The name of the source that has returned an error.\n\t* @public\n\t*/\n\terrored: function (action, opts, res, source) {\n\t\tvar stat;\n\t\t\n\t\t// if the error action is a status number then we don't need to update it otherwise\n\t\t// we set it to the known state value\n\t\tif (typeof action == 'string') {\n\t\t\t\n\t\t\t// all built-in errors will pass this as their values are > 0 but we go ahead and\n\t\t\t// ensure that no developer used the 0x00 for an error code\n\t\t\tstat = States['ERROR_' + action];\n\t\t} else stat = action;\n\t\t\n\t\tif (isNaN(stat) || !(stat & States.ERROR)) stat = States.ERROR_UNKNOWN;\n\t\t\n\t\t// if it has changed give observers the opportunity to respond\n\t\tthis.set('status', (this.status | stat) & ~States.READY);\n\t\t\n\t\t// we need to check to see if there is an options handler for this error\n\t\tif (opts && opts.error) opts.error(this, action, opts, res, source);\n\t},\n\t\n\t/**\n\t* Overloaded version of the method to call [set()]{@link enyo.Collection#set}\n\t* instead of simply assigning the value. This allows it to\n\t* [notify observers]{@link enyo.ObserverSupport.notify} and thus update\n\t* [bindings]{@link enyo.BindingSupport.bindings} as well.\n\t*\n\t* @see enyo.StateSupport.clearError\n\t* @public\n\t*/\n\tclearError: function () {\n\t\treturn this.set('status', States.READY);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\t_modelEvent: function (model, e) {\n\t\tswitch (e) {\n\t\tcase 'change':\n\t\t\tthis.emit('change', {model: model});\n\t\t\tbreak;\n\t\tcase 'destroy':\n\t\t\tthis.remove(model);\n\t\t\tbreak;\n\t\t}\n\t},\n\t\n\t/**\n\t* Responds to changes to the [models]{@link enyo.Collection#models} property.\n\t*\n\t* @see enyo.Collection.models\n\t* @fires enyo.Collection#reset\n\t* @type {enyo.ObserverSupport~Observer}\n\t* @public\n\t*/\n\tmodelsChanged: function (was, is, prop) {\n\t\tvar models = this.models.copy(),\n\t\t\tlen = models.length;\n\t\t\n\t\tif (len != this.length) this.set('length', len);\n\t\t\n\t\tthis.emit('reset', {models: models, collection: this});\n\t},\n\t\n\t/**\n\t* Initializes the [collection]{@link enyo.Collection}.\n\t*\n\t* @param {(Object|Object[]|enyo.Model[])} [recs] May be an [array]{@glossary Array}\n\t*\tof either [models]{@link enyo.Model} or [hashes]{@glossary Object} used to\n\t* initialize the [collection]{@link enyo.Collection}, or an [object]{@glossary Object}\n\t*\tequivalent to the `props` parameter.\n\t* @param {Object} [props] - A hash of properties to apply directly to the\n\t* collection.\n\t* @param {Object} [opts] - A hash.\n\t* @method\n\t* @public\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function (recs, props, opts) {\n\t\t\t// opts = opts? (this.options = enyo.mixin({}, [this.options, opts])): this.options;\n\t\t\t\n\t\t\t// if properties were passed in but not a records array\n\t\t\tprops = recs && !(recs instanceof Array)? recs: props;\n\t\t\tif (props === recs) recs = null;\n\t\t\t// initialize our core records\n\t\t\t// this.models = this.models || new ModelList();\n\t\t\t!this.models && (this.set('models', new ModelList()));\n\t\t\t\n\t\t\t// this is backwards compatibility\n\t\t\tif (props && props.records) {\n\t\t\t\trecs = recs? recs.concat(props.records): props.records.slice();\n\t\t\t\tdelete props.records;\n\t\t\t}\n\t\t\t\n\t\t\tif (props && props.models) {\n\t\t\t\trecs = recs? recs.concat(props.models): props.models.slice();\n\t\t\t\tdelete props.models;\n\t\t\t}\n\t\t\t\n\t\t\tif (props && props.options) {\n\t\t\t\tthis.options = utils.mixin({}, [this.options, props.options]);\n\t\t\t\tdelete props.options;\n\t\t\t}\n\t\t\t\n\t\t\topts = opts? utils.mixin({}, [this.options, opts]): this.options;\n\t\t\t\n\t\t\t// @TODO: For now, while there is only one property we manually check for it\n\t\t\t// if more options arrise that should be configurable this way it may need to\n\t\t\t// be modified\n\t\t\topts.fetch && (this.options.fetch = opts.fetch);\n\t\t\t\n\t\t\tthis.length = this.models.length;\n\t\t\tthis.euid = utils.uid('c');\n\t\t\t\n\t\t\tsup.call(this, props);\n\t\t\t\n\t\t\ttypeof this.model == 'string' && (this.model = kind.constructorForKind(this.model));\n\t\t\tthis.store = this.store || Store;\n\t\t\trecs && recs.length && this.add(recs, opts);\n\t\t};\n\t}),\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructed: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\t\n\t\t\t// automatically attempt a fetch after initialization is complete\n\t\t\tif (this.options.fetch) this.fetch();\n\t\t};\n\t})\n\t\n});\n\n/**\n* @name enyo.Collection.concat\n* @static\n* @private\n*/\nCollection.concat = function (ctor, props) {\n\tvar proto = ctor.prototype || ctor;\n\t\n\tif (props.options) {\n\t\tproto.options = utils.mixin({}, [proto.options, props.options]);\n\t\tdelete props.options;\n\t}\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tplatform = require('./platform'),\n\tanimation = require('./animation');\n\nvar\n\tComponent = require('./Component');\n\n/**\n* Fires when a scrolling action starts.\n*\n* @event enyo.ScrollMath#onScrollStart\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @private\n*/\n\n/**\n* Fires while a scrolling action is in progress.\n*\n* @event enyo.ScrollMath#onScroll\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @private\n*/\n\n/**\n* Fires when a scrolling action stops.\n*\n* @event enyo.ScrollMath#onScrollStop\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @private\n*/\n\n/**\n* {@link enyo.ScrollMath} implements a scrolling dynamics simulation. It is a\n* helper [kind]{@glossary kind} used by other [scroller]{@link enyo.Scroller}\n* kinds, such as {@link enyo.TouchScrollStrategy}.\n* \n* `enyo.ScrollMath` is not typically created in application code.\n*\n* @class enyo.ScrollMath\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ScrollMath.prototype */ {\n\n\tname: 'enyo.ScrollMath',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.ScrollMath.prototype */ {\n\n\t\t/** \n\t\t* Set to `true` to enable vertical scrolling.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @private\n\t\t*/\n\t\tvertical: true,\n\n\t\t/** \n\t\t* Set to `true` to enable horizontal scrolling.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @private\n\t\t*/\n\t\thorizontal: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonScrollStart: '',\n\t\tonScroll: '',\n\t\tonScrollStop: '',\n\t\tonStabilize: ''\n\t},\n\n\t/**\n\t* \"Spring\" damping returns the scroll position to a value inside the boundaries. Lower \n\t* values provide faster snapback.\n\t*\n\t* @private\n\t*/\n\tkSpringDamping: 0.93,\n\n\t/** \n\t* \"Drag\" damping resists dragging the scroll position beyond the boundaries. Lower values \n\t* provide more resistance.\n\t*\n\t* @private\n\t*/\n\tkDragDamping: 0.5,\n\t\n\t/** \n\t* \"Friction\" damping reduces momentum over time. Lower values provide more friction.\n\t*\n\t* @private\n\t*/\n\tkFrictionDamping: 0.97,\n\n\t/** \n\t* Additional \"friction\" damping applied when momentum carries the viewport into overscroll. \n\t* Lower values provide more friction.\n\t*\n\t* @private\n\t*/\n\tkSnapFriction: 0.9,\n\t\n\t/** \n\t* Scalar applied to `flick` event velocity.\n\t*\n\t* @private\n\t*/\n\tkFlickScalar: 15,\n\n\t/** \n\t* Limits the maximum allowable flick. On Android > 2, we limit this to prevent compositing \n\t* artifacts.\n\t*\n\t* @private\n\t*/\n\tkMaxFlick: platform.android > 2 ? 2 : 1e9,\n\t\n\t/** \n\t* The value used in [friction()]{@link enyo.ScrollMath#friction} to determine if the delta \n\t* (e.g., y - y0) is close enough to zero to consider as zero.\n\t*\n\t* @private\n\t*/\n\tkFrictionEpsilon: platform.webos >= 4 ? 1e-1 : 1e-2,\n\t\n\t/** \n\t* Top snap boundary, generally `0`.\n\t*\n\t* @private\n\t*/\n\ttopBoundary: 0,\n\t\n\t/** \n\t* Right snap boundary, generally `(viewport width - content width)`.\n\t*\n\t* @private\n\t*/\n\trightBoundary: 0,\n\t\n\t/** \n\t* Bottom snap boundary, generally `(viewport height - content height)`.\n\t*\n\t* @private\n\t*/\n\tbottomBoundary: 0,\n\t\n\t/** \n\t* Left snap boundary, generally `0`.\n\t*\n\t* @private\n\t*/\n\tleftBoundary: 0,\n\t\n\t/** \n\t* Animation time step.\n\t*\n\t* @private\n\t*/\n\tinterval: 20,\n\t\n\t/** \n\t* Flag to enable frame-based animation; if `false`, time-based animation is used.\n\t*\n\t* @private\n\t*/\n\tfixedTime: true,\n\n\t/**\n\t* Simulation state.\n\t*\n\t* @private\n\t*/\n\tx0: 0,\n\n\t/**\n\t* Simulation state.\n\t*\n\t* @private\n\t*/\n\tx: 0,\n\n\t/**\n\t* Simulation state.\n\t*\n\t* @private\n\t*/\n\ty0: 0,\n\n\t/**\n\t* Simulation state.\n\t*\n\t* @private\n\t*/\n\ty: 0,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Simple Verlet integrator for simulating Newtonian motion.\n\t*\n\t* @private\n\t*/\n\tverlet: function () {\n\t\tvar x = this.x;\n\t\tthis.x += x - this.x0;\n\t\tthis.x0 = x;\n\t\t//\n\t\tvar y = this.y;\n\t\tthis.y += y - this.y0;\n\t\tthis.y0 = y;\n\t},\n\n\t/**\n\t* Boundary damping function. Returns damped `value` based on `coeff` on one side of \n\t* `origin`.\n\t*\n\t* @private\n\t*/\n\tdamping: function (val, origin, coeff, sign) {\n\t\tvar kEpsilon = 0.5;\n\t\t//\n\t\t// this is basically just value *= coeff (generally, coeff < 1)\n\t\t//\n\t\t// 'sign' and the conditional is to force the damping to only occur\n\t\t// on one side of the origin.\n\t\t//\n\t\tvar dv = val - origin;\n\t\t// Force close-to-zero to zero\n\t\tif (Math.abs(dv) < kEpsilon) {\n\t\t\treturn origin;\n\t\t}\n\t\treturn val*sign > origin*sign ? coeff * dv + origin : val;\n\t},\n\n\t/**\n\t* Dual-boundary damping function. Returns damped `value` based on `coeff` when exceeding \n\t* either boundary.\n\t*\n\t* @private\n\t*/\n\tboundaryDamping: function (val, aBoundary, bBoundary, coeff) {\n\t\treturn this.damping(this.damping(val, aBoundary, coeff, 1), bBoundary, coeff, -1);\n\t},\n\n\t/**\n\t* Simulation constraints (spring damping occurs here).\n\t*\n\t* @private\n\t*/\n\tconstrain: function () {\n\t\tvar y = this.boundaryDamping(this.y, this.topBoundary, this.bottomBoundary, this.kSpringDamping);\n\t\tif (y != this.y) {\n\t\t\t// ensure snapping introduces no velocity, add additional friction\n\t\t\tthis.y0 = y - (this.y - this.y0) * this.kSnapFriction;\n\t\t\tthis.y = y;\n\t\t}\n\t\tvar x = this.boundaryDamping(this.x, this.leftBoundary, this.rightBoundary, this.kSpringDamping);\n\t\tif (x != this.x) {\n\t\t\tthis.x0 = x - (this.x - this.x0) * this.kSnapFriction;\n\t\t\tthis.x = x;\n\t\t}\n\t},\n\n\t/**\n\t* The friction function.\n\t*\n\t* @private\n\t*/\n\tfriction: function (ex, ex0, coeff) {\n\t\t// implicit velocity\n\t\tvar dp = this[ex] - this[ex0];\n\t\t// let close-to-zero collapse to zero (i.e. smaller than epsilon is considered zero)\n\t\tvar c = Math.abs(dp) > this.kFrictionEpsilon ? coeff : 0;\n\t\t// reposition using damped velocity\n\t\tthis[ex] = this[ex0] + c * dp;\n\t},\n\n\t/** \n\t* One unit of time for simulation.\n\t*\n\t* @private\n\t*/\n\tframe: 10,\n\t// piece-wise constraint simulation\n\tsimulate: function (t) {\n\t\twhile (t >= this.frame) {\n\t\t\tt -= this.frame;\n\t\t\tif (!this.dragging) {\n\t\t\t\tthis.constrain();\n\t\t\t}\n\t\t\tthis.verlet();\n\t\t\tthis.friction('y', 'y0', this.kFrictionDamping);\n\t\t\tthis.friction('x', 'x0', this.kFrictionDamping);\n\t\t}\n\t\treturn t;\n\t},\n\n\t/**\n\t* @fires enyo.ScrollMath#onScrollStop\n\t* @private\n\t*/\n\tanimate: function () {\n\t\tthis.stop();\n\t\t// time tracking\n\t\tvar t0 = utils.perfNow(), t = 0;\n\t\t// delta tracking\n\t\tvar x0, y0;\n\t\t// animation handler\n\t\tvar fn = this.bindSafely(function() {\n\t\t\t// wall-clock time\n\t\t\tvar t1 = utils.perfNow();\n\t\t\t// schedule next frame\n\t\t\tthis.job = animation.requestAnimationFrame(fn);\n\t\t\t// delta from last wall clock time\n\t\t\tvar dt = t1 - t0;\n\t\t\t// record the time for next delta\n\t\t\tt0 = t1;\n\t\t\t// user drags override animation\n\t\t\tif (this.dragging) {\n\t\t\t\tthis.y0 = this.y = this.uy;\n\t\t\t\tthis.x0 = this.x = this.ux;\n\t\t\t\tthis.endX = this.endY = null;\n\t\t\t}\n\t\t\t// frame-time accumulator\n\t\t\t// min acceptable time is 16ms (60fps)\n\t\t\tt += Math.max(16, dt);\n\t\t\t// prevent snapping to originally desired scroll position if we are in overscroll\n\t\t\tif (this.isInOverScroll()) {\n\t\t\t\tthis.endX = null;\n\t\t\t\tthis.endY = null;\n\t\t\t}\n\t\t\t// alternate fixed-time step strategy:\n\t\t\telse if (this.fixedTime) {\n\t\t\t\tt = this.interval;\n\t\t\t}\n\t\t\t// consume some t in simulation\n\t\t\tt = this.simulate(t);\n\t\t\t// scroll if we have moved, otherwise the animation is stalled and we can stop\n\t\t\tif (y0 != this.y || x0 != this.x) {\n\t\t\t\tthis.scroll();\n\t\t\t} else if (!this.dragging) {\n\t\t\t\t// set final values\n\t\t\t\tif (this.endX != null) {\n\t\t\t\t\tthis.x = this.x0 = this.endX;\n\t\t\t\t}\n\t\t\t\tif (this.endY != null) {\n\t\t\t\t\tthis.y = this.y0 = this.endY;\n\t\t\t\t}\n\n\t\t\t\tthis.stop();\n\t\t\t\tthis.scroll();\n\t\t\t\tthis.doScrollStop();\n\n\t\t\t\tthis.endX = null;\n\t\t\t\tthis.endY = null;\n\t\t\t}\n\t\t\ty0 = this.y;\n\t\t\tx0 = this.x;\n\t\t});\n\t\tthis.job = animation.requestAnimationFrame(fn);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tstart: function () {\n\t\tif (!this.job) {\n\t\t\tthis.doScrollStart();\n\t\t\tthis.animate();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstop: function (fire) {\n\t\tvar job = this.job;\n\t\tif (job) {\n\t\t\tthis.job = animation.cancelRequestAnimationFrame(job);\n\t\t}\n\t\tif (fire) {\n\t\t\tthis.doScrollStop();\n\n\t\t\tthis.endX = undefined;\n\t\t\tthis.endY = undefined;\n\t\t}\n\t},\n\n\t/**\n\t* Adjusts the scroll position to be valid, if necessary (e.g., after the scroll contents\n\t* have changed).\n\t*\n\t* @private\n\t*/\n\tstabilize: function (opts) {\n\t\tvar fire = !opts || opts.fire === undefined || opts.fire;\n\t\tvar y = Math.min(this.topBoundary, Math.max(this.bottomBoundary, this.y));\n\t\tvar x = Math.min(this.leftBoundary, Math.max(this.rightBoundary, this.x));\n\t\tif (y != this.y || x != this.x) {\n\t\t\tthis.y = this.y0 = y;\n\t\t\tthis.x = this.x0 = x;\n\t\t\tif (fire) {\n\t\t\t\tthis.doStabilize();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstartDrag: function (e) {\n\t\tthis.dragging = true;\n\t\t//\n\t\tthis.my = e.pageY;\n\t\tthis.py = this.uy = this.y;\n\t\t//\n\t\tthis.mx = e.pageX;\n\t\tthis.px = this.ux = this.x;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrag: function (e) {\n\t\tvar dy, dx, v, h;\n\t\tif (this.dragging) {\n\t\t\tv = this.canScrollY();\n\t\t\th = this.canScrollX();\n\t\t\n\t\t\tdy = v ? e.pageY - this.my : 0;\n\t\t\tthis.uy = dy + this.py;\n\t\t\t// provides resistance against dragging into overscroll\n\t\t\tthis.uy = this.boundaryDamping(this.uy, this.topBoundary, this.bottomBoundary, this.kDragDamping);\n\t\t\t//\n\t\t\tdx = h ? e.pageX - this.mx : 0;\n\t\t\tthis.ux = dx + this.px;\n\t\t\t// provides resistance against dragging into overscroll\n\t\t\tthis.ux = this.boundaryDamping(this.ux, this.leftBoundary, this.rightBoundary, this.kDragDamping);\n\t\t\t//\n\t\t\tthis.start();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragDrop: function () {\n\t\tif (this.dragging && !window.PalmSystem) {\n\t\t\tvar kSimulatedFlickScalar = 0.5;\n\t\t\tthis.y = this.uy;\n\t\t\tthis.y0 = this.y - (this.y - this.y0) * kSimulatedFlickScalar;\n\t\t\tthis.x = this.ux;\n\t\t\tthis.x0 = this.x - (this.x - this.x0) * kSimulatedFlickScalar;\n\t\t}\n\t\tthis.dragFinish();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragFinish: function () {\n\t\tthis.dragging = false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tflick: function (e) {\n\t\tvar v;\n\t\tif (this.canScrollY()) {\n\t\t\tv = e.yVelocity > 0 ? Math.min(this.kMaxFlick, e.yVelocity) : Math.max(-this.kMaxFlick, e.yVelocity);\n\t\t\tthis.y = this.y0 + v * this.kFlickScalar;\n\t\t}\n\t\tif (this.canScrollX()) {\n\t\t\tv = e.xVelocity > 0 ? Math.min(this.kMaxFlick, e.xVelocity) : Math.max(-this.kMaxFlick, e.xVelocity);\n\t\t\tthis.x = this.x0 + v * this.kFlickScalar;\n\t\t}\n\t\tthis.start();\n\t},\n\n\t/**\n\t* TODO: Refine and test newMousewheel, remove this\n\t* @private\n\t*/\n\tmousewheel: function (e) {\n\t\tvar dy = this.vertical ? e.wheelDeltaY || (!e.wheelDeltaX ? e.wheelDelta : 0) : 0,\n\t\t\tdx = this.horizontal ? e.wheelDeltaX : 0,\n\t\t\tshouldScroll = false;\n\t\tif ((dy > 0 && this.y < this.topBoundary) || (dy < 0 && this.y > this.bottomBoundary)) {\n\t\t\tthis.y = this.y0 = this.y0 + dy;\n\t\t\tshouldScroll = true;\n\t\t}\n\t\tif ((dx > 0 && this.x < this.leftBoundary) || (dx < 0 && this.x > this.rightBoundary)) {\n\t\t\tthis.x = this.x0 = this.x0 + dx;\n\t\t\tshouldScroll = true;\n\t\t}\n\t\tthis.stop(!shouldScroll);\n\t\tif (shouldScroll) {\n\t\t\tthis.start();\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tnewMousewheel: function (e) {\n\t\tvar wdY = (e.wheelDeltaY === undefined) ? e.wheelDelta : e.wheelDeltaY,\n\t\t\tdY = wdY,\n\t\t\tdX = e.wheelDeltaX,\n\t\t\tcanY = this.canScrollY(),\n\t\t\tcanX = this.canScrollX(),\n\t\t\tshouldScroll = false,\n\t\t\tm = 2,\n\t\t\t// TODO: Figure out whether we need to port the configurable\n\t\t\t// max / multiplier feature from Moonstone's implementation,\n\t\t\t// and (if so) how\n\t\t\t// max = 100,\n\t\t\tscr = this.isScrolling(),\n\t\t\tovr = this.isInOverScroll(),\n\t\t\trefY = (scr && this.endY !== null) ? this.endY : this.y,\n\t\t\trefX = (scr && this.endX !== null) ? this.endX : this.x,\n\t\t\ttY = refY,\n\t\t\ttX = refX;\n\n\t\tif (ovr) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// If we're getting strictly vertical mousewheel events over a scroller that\n\t\t// can only move horizontally, the user is probably using a one-dimensional\n\t\t// mousewheel and would like us to scroll horizontally instead\n\t\tif (dY && !dX && canX && !canY) {\n\t\t\tdX = dY;\n\t\t\tdY = 0;\n\t\t}\n\t\t\n\t\tif (dY && canY) {\n\t\t\ttY = -(refY + (dY * m));\n\t\t\tshouldScroll = true;\n\t\t}\n\t\tif (dX && canX) {\n\t\t\ttX = -(refX + (dX * m));\n\t\t\tshouldScroll = true;\n\t\t}\n\n\t\tif (shouldScroll) {\n\t\t\tthis.scrollTo(tX, tY, {allowOverScroll: true});\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @fires enyo.ScrollMath#onScroll\n\t* @private\n\t*/\n\tscroll: function () {\n\t\tthis.doScroll();\n\t},\n\n\t// NOTE: Yip/Orvell method for determining scroller instantaneous velocity\n\t// FIXME: incorrect if called when scroller is in overscroll region\n\t// because does not account for additional overscroll damping.\n\t\n\t/**\n\t* Scrolls to the specified position.\n\t*\n\t* @param {Number} x - The `x` position in pixels.\n\t* @param {Number} y - The `y` position in pixels.\n\t* @param {Object} opts - TODO: Document. When behavior == 'instant', we skip animation.\n\t* @private\n\t*/\n\tscrollTo: function (x, y, opts) {\n\t\tvar animate = !opts || opts.behavior !== 'instant',\n\t\t\tallowOverScroll = opts && opts.allowOverScroll,\n\t\t\tmaxX = Math.abs(Math.min(0, this.rightBoundary)),\n\t\t\tmaxY = Math.abs(Math.min(0, this.bottomBoundary));\n\n\t\tif (!animate || !allowOverScroll) {\n\t\t\tx = Math.max(0, Math.min(x, maxX));\n\t\t\ty = Math.max(0, Math.min(y, maxY));\n\t\t}\n\n\t\tif (-x == this.x && -y == this.y) return;\n\n\t\tif (!animate) {\n\t\t\tthis.doScrollStart();\n\t\t\tthis.setScrollX(-x);\n\t\t\tthis.setScrollY(-y);\n\t\t\tthis.doScroll();\n\t\t\tthis.doScrollStop();\n\t\t}\n\t\telse {\n\t\t\tif (y !== null) {\n\t\t\t\tthis.endY = -y;\n\t\t\t\tthis.y = this.y0 - (y + this.y0) * (1 - this.kFrictionDamping);\n\t\t\t}\n\t\t\tif (x !== null) {\n\t\t\t\tthis.endX = -x;\n\t\t\t\tthis.x = this.x0 - (x + this.x0) * (1 - this.kFrictionDamping);\n\t\t\t}\n\t\t\tthis.start();\n\t\t}\n\t},\n\n\t/**\n\t* Sets the scroll position along the x-axis.\n\t*\n\t* @param {Number} x - The x-axis scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tsetScrollX: function (x) {\n\t\tthis.x = this.x0 = x;\n\t},\n\n\t/**\n\t* Sets the scroll position along the y-axis.\n\t*\n\t* @param {Number} y - The y-axis scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tsetScrollY: function (y) {\n\t\tthis.y = this.y0 = y;\n\t},\n\n\t/**\n\t* Sets the scroll position; defaults to setting this position along the y-axis.\n\t*\n\t* @param {Number} pos - The scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tsetScrollPosition: function (pos) {\n\t\tthis.setScrollY(pos);\n\t},\n\t\n\tcanScrollX: function() {\n\t\treturn this.horizontal && this.rightBoundary < 0;\n\t},\n\n\tcanScrollY: function() {\n\t\treturn this.vertical && this.bottomBoundary < 0;\n\t},\n\n\n\t/** \n\t* Determines whether or not the [scroller]{@link enyo.Scroller} is actively moving.\n\t* \n\t* @return {Boolean} `true` if actively moving; otherwise, `false`.\n\t* @private\n\t*/\n\tisScrolling: function () {\n\t\treturn Boolean(this.job);\n\t},\n\n\t/** \n\t* Determines whether or not the [scroller]{@link enyo.Scroller} is in overscroll.\n\t* \n\t* @return {Boolean} `true` if in overscroll; otherwise, `false`.\n\t* @private\n\t*/\n\tisInOverScroll: function () {\n\t\treturn this.job && (this.x > this.leftBoundary || this.x < this.rightBoundary ||\n\t\t\tthis.y > this.topBoundary || this.y < this.bottomBoundary);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\n\nvar\n\tComponent = require('./Component');\n\n/**\n* {@link enyo.Signals} is a [component]{@link enyo.Component} used to listen\n* to global messages.\n* \n* An object with a Signals component can listen to messages sent from anywhere\n* by declaring handlers for them.\n* \n* DOM [events]{@glossary event} that have no node targets are broadcast as\n* signals. These events include Window events, such as `onload` and\n* `onbeforeunload`, as well as events that occur directly on `document`, such\n* as `onkeypress` if `document` has the focus.\n* \n* For more information, see the documentation on [Event\n* Handling]{@linkplain $dev-guide/key-concepts/event-handling.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Signals\n* @extends enyo.Component\n* @public\n*/\nvar Signals = module.exports = kind(\n\t/** @lends enyo.Signals.prototype */ {\n\n\tname: 'enyo.Signals',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* Needed because of early calls to bind DOM {@glossary event} listeners\n\t* to the [enyo.Signals.send()]{@link enyo.Signals#send} call.\n\t* \n\t* @private\n\t*/\n\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tSignals.addListener(this);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tSignals.removeListener(this);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tnotify: function (msg, load) {\n\t\tthis.dispatchEvent(msg, load);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprotectedStatics: {\n\t\tlisteners: [],\n\t\taddListener: function(listener) {\n\t\t\tthis.listeners.push(listener);\n\t\t},\n\t\tremoveListener: function(listener) {\n\t\t\tutils.remove(listener, this.listeners);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstatics: \n\t\t/** @lends enyo.Signals.prototype */ {\n\n\t\t/**\n\t\t* Broadcasts a global message to be consumed by subscribers.\n\t\t* \n\t\t* @param {String} msg - The message to send; usually the name of the\n\t\t*\t{@glossary event}.\n\t\t* @param {Object} load - An [object]{@glossary Object} containing any\n\t\t*\tassociated event properties to be accessed by subscribers.\n\t\t* @public\n\t\t*/\n\t\tsend: function (msg, load) {\n\t\t\tutils.forEach(this.listeners, function(l) {\n\t\t\t\tl.notify(msg, load);\n\t\t\t});\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tSignals = require('./Signals');\n\n/**\n* Provides a stub function for g11n string translation. This allows strings to be wrapped in\n* preparation for localization. If a g11n library is not loaded, this function will return the\n* string as is.\n* \n* `$L('Welcome')`\n* \n* If a compatible g11n library is loaded, this function will be replaced by the g11n library's\n* version, which translates wrapped strings to strings from a developer-provided resource file\n* corresponding to the current user locale.\n*\n* @name $L\n* @scope global\n* @type {Function}\n* @param {String} str - The {@glossary String} to translate.\n* @returns {String} The translated {@glossary String}.\n* @public\n*/\nexports.$L = function (str) {\n\treturn str;\n};\n\n/**\n* THE BELOW MAY NOT BE RELEVANT MOVING FORWARD BUT IS RETAINED FOR POSTERITY.\n*\n* Enyo controls may register for an `onlocalechange` signal to dynamically update their\n* presentation based on changes to the user's locale. This feature is currently used in webOS,\n* where Cordova for webOS listens for changes to the system locales and fires a `localechange`\n* event on the `document` object. Similar functionality could be implemented on other platforms\n* via a Cordova plugin or by other means.\n* \n* Enyo registers an event listener for the `localechange` event and broadcasts the\n* `onlocalechange` signal when the locale has changed. Before broadcasting, Enyo calls\n* `enyo.updateLocale()`. The default implementation of `enyo.updateLocale()` is a stub, but a\n* g11n library may override it to update its internal state before the `onlocalechange` signal\n* is broadcast.\n* \n* This feature is not supported on IE8, which doesn't support `addEventListener()`.\n*\n* @private\n*/\nexports.updateLocale = function updateLocale () {\n\t// This is a stub, to be implemented by a g11n library as needed\n\tSignals.send('onlocalechange');\n};\n\n// this...may not work the way it used to...\nif (document.addEventListener) {\n\tdocument.addEventListener('localechange', function(e) {\n\t\texports.updateLocale();\n\t}, false);\n}","require('../../enyo');\n\nvar\n\tutils = require('./utils');\nvar\n\tComponent = require('./Component'),\n\tSignals = require('./Signals');\n\n/**\n* Default owner assigned to ownerless [UiComponents]{@link enyo.UiComponent},\n* to allow such UiComponents to be notified of important system events like window resize.\n*\n* NOTE: Ownerless [UiComponents]{@link enyo.UiComponent} will not be garbage collected unless \n* explicitly destroyed, as they will be referenced by `enyo.master`.\n*\n* @private\n*/\nvar master = module.exports = new Component({\n\tname: 'master',\n\tnotInstanceOwner: true,\n\teventFlags: {showingOnly: true}, // don't waterfall these events into hidden controls\n\tgetId: function () {\n\t\treturn '';\n\t},\n\tisDescendantOf: utils.nop,\n\tbubble: function (nom, event) {\n\t\t//enyo.log('master event: ' + nom);\n\t\tif (nom == 'onresize') {\n\t\t\t// Resize is special; waterfall this message.\n\t\t\t// This works because master is a Component, so it waterfalls\n\t\t\t// to its owned Components (i.e., master has no children).\n\t\t\tmaster.waterfallDown('onresize', this.eventFlags);\n\t\t\tmaster.waterfallDown('onpostresize', this.eventFlags);\n\t\t} else {\n\t\t\t// All other top-level events are sent only to interested Signal\n\t\t\t// receivers.\n\t\t\tSignals.send(nom, event);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tmaster = require('./master');\n\nvar\n\tComponent = require('./Component');\n\n/**\n* {@link enyo.UiComponent} implements a container strategy suitable for presentation layers.\n* \n* `UiComponent` itself is abstract. Concrete [subkinds]{@glossary subkind} include\n* {@link enyo.Control} (for HTML/DOM) and\n* {@link enyo.canvas.Control} (for Canvas contexts).\n*\n* @class enyo.UiComponent\n* @extends enyo.Component\n* @public\n*/\nvar UiComponent = module.exports = kind(\n\t/** @lends enyo.UiComponent.prototype */ {\n\n\tname: 'enyo.UiComponent',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Component,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends  enyo.UiComponent.prototype */ {\n\n\t\t/** \n\t\t* The [UiComponent]{@link enyo.UiComponent} that physically contains this \n\t\t* [component]{@link enyo.Component} in the DOM.\n\t\t*\n\t\t* @type {enyo.UiComponent}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tcontainer: null,\n\n\t\t/**\n\t\t* The [UiComponent]{@link enyo.UiComponent} that owns this\n\t\t* [component]{@link enyo.Component} for purposes of {@glossary event}\n\t\t* propagation.\n\t\t*\n\t\t* @type {enyo.UiComponent}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tparent: null,\n\n\t\t/**\n\t\t* The [UiComponent]{@link enyo.UiComponent} that will physically contain new items added\n\t\t* by calls to [createComponent()]{@link enyo.UiComponent#createComponent}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'client'\n\t\t* @public\n\t\t*/\n\t\tcontrolParentName: 'client',\n\t\t\n\t\t/** \n\t\t* A [kind]{@glossary kind} used to manage the size and placement of child \n\t\t* [components]{@link enyo.Component}.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tlayoutKind: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonresize: 'handleResize'\n\t},\n\n\t/**\n\t* When set, provides a [control]{@link enyo.Control} reference used to indicate where a\n\t* newly-created [component]{@link enyo.Component} should be added in the\n\t* [UiComponent's]{@link enyo.UiComponent} [array]{@glossary Array} of children. This is\n\t* typically used when creating children dynamically (rather than at design time). If set\n\t* to `null`, the new control will be added at the beginning of the array; if set to a\n\t* specific existing control, the new control will be added before the specified\n\t* control. If left as `undefined`, the default behavior is to add the new control\n\t* at the end of the array.\n\t*\n\t* @type {enyo.Control}\n\t* @default undefined\n\t* @public\n\t*/\n\taddBefore: undefined,\n\t\n\t/**\n\t* @private\n\t*/\n\tprotectedStatics: {\n\t\t_resizeFlags: {showingOnly: true} // don't waterfall these events into hidden controls\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.controls = this.controls || [];\n\t\t\tthis.children = this.children || [];\n\t\t\tthis.containerChanged();\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.layoutKindChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\t// Destroys all non-chrome controls (regardless of owner).\n\t\t\tthis.destroyClientControls();\n\t\t\t// Removes us from our container.\n\t\t\tthis.setContainer(null);\n\t\t\t// Destroys chrome controls owned by this.\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\timportProps: kind.inherit(function (sup) {\n\t\treturn function(inProps) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (!this.owner) {\n\t\t\t\tthis.owner = master;\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* Creates [components]{@link enyo.Component} as defined by the [arrays]{@glossary Array}\n\t* of base and additional property [hashes]{@glossary Object}. The standard and \n\t* additional property hashes are combined as described in\n\t* {@link enyo.Component#createComponent}.\n\t* \n\t* ```\n\t* // ask foo to create components 'bar' and 'zot', but set the owner of\n\t* // both components to 'this'.\n\t* this.$.foo.createComponents([\n\t*\t{name: 'bar'},\n\t*\t{name: 'zot'}\n\t* ], {owner: this});\n\t* ```\n\t*\n\t* As implemented, [controlParentName]{@link enyo.UiComponent#controlParentName} only works\n\t* to identify an owned control created via `createComponents()`\n\t* (i.e., usually in our `components` block). To attach a `controlParent` via other means, \n\t* one must call [discoverControlParent()]{@link enyo.UiComponent#discoverControlParent} or \n\t* set `controlParent` directly.\n\t* \n\t* We could call `discoverControlParent()` in\n\t* [addComponent()]{@link enyo.Component#addComponent}, but that would\n\t* cause a lot of useless checking.\n\t* \n\t* @param {Object[]} props The array of {@link enyo.Component} definitions to be created.\n\t* @param {Object} ext - Additional properties to be supplied as defaults for each.\n\t* @returns {enyo.Component[]} The array of components that were created.\n\t* @method\n\t* @public\n\t*/\n\t// \n\tcreateComponents: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tvar results = sup.apply(this, arguments);\n\t\t\tthis.discoverControlParent();\n\t\t\treturn results;\n\t\t};\n\t}),\n\n\t/**\n\t* Determines and sets the current [control's]{@link enyo.Control} parent.\n\t*\n\t* @protected\n\t*/\n\tdiscoverControlParent: function () {\n\t\tthis.controlParent = this.$[this.controlParentName] || this.controlParent;\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tadjustComponentProps: kind.inherit(function (sup) {\n\t\treturn function(inProps) {\n\t\t\t// Components we create have us as a container by default.\n\t\t\tinProps.container = inProps.container || this;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Containment\n\t* \n\t* @method\n\t* @private\n\t*/\n\tcontainerChanged: function (container) {\n\t\tif (container) {\n\t\t\tcontainer.removeControl(this);\n\t\t}\n\t\tif (this.container) {\n\t\t\tthis.container.addControl(this, this.addBefore);\n\t\t}\n\t},\n\n\t/**\n\t* Parentage\n\t* \n\t* @method\n\t* @private\n\t*/\n\tparentChanged: function (oldParent) {\n\t\tif (oldParent && oldParent != this.parent) {\n\t\t\toldParent.removeChild(this);\n\t\t}\n\t},\n\n\t/**\n\t* Determines whether the [control]{@link enyo.Control} is a descendant of\n\t* another control.\n\t* \n\t* Note: Oddly, a control is considered to be a descendant of itself.\n\t*\n\t* @param {enyo.Control} ancestor - The [control]{@link enyo.Control} whose lineage\n\t*\twill be checked to determine whether the current control is a descendant.\n\t* @public\n\t*/\n\tisDescendantOf: function (ancestor) {\n\t\tvar p = this;\n\t\twhile (p && p!=ancestor) {\n\t\t\tp = p.parent;\n\t\t}\n\t\treturn ancestor && (p === ancestor);\n\t},\n\n\t/**\n\t* Returns all controls.\n\t*\n\t* @returns {enyo.Control[]} An [array]{@glossary Array} of [controls]{@link enyo.Control}.\n\t* @public\n\t*/\n\tgetControls: function () {\n\t\treturn this.controls;\n\t},\n\n\t/**\n\t* Returns all non-chrome controls.\n\t*\n\t* @returns {enyo.Control[]} An [array]{@glossary Array} of [controls]{@link enyo.Control}.\n\t* @public\n\t*/\n\tgetClientControls: function () {\n\t\tvar results = [];\n\t\tfor (var i=0, cs=this.controls, c; (c=cs[i]); i++) {\n\t\t\tif (!c.isChrome) {\n\t\t\t\tresults.push(c);\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t},\n\n\t/**\n\t* Destroys \"client controls\", the same set of [controls]{@link enyo.Control} returned by \n\t* [getClientControls()]{@link enyo.UiComponent#getClientControls}.\n\t*\n\t* @public\n\t*/\n\tdestroyClientControls: function () {\n\t\tvar c$ = this.getClientControls();\n\t\tfor (var i=0, c; (c=c$[i]); i++) {\n\t\t\tc.destroy();\n\t\t}\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\taddControl: function (ctl, before) {\n\t\t// Called to add an already created control to the object's control list. It is\n\t\t// not used to create controls and should likely not be called directly.\n\t\t// It can be overridden to detect when controls are added.\n\t\tif (before !== undefined) {\n\t\t\tvar idx = (before === null) ? 0 : this.indexOfControl(before);\n\t\t\tthis.controls.splice(idx, 0, ctl);\n\t\t} else {\n\t\t\tthis.controls.push(ctl);\n\t\t}\n\t\t// When we add a Control, we also establish a parent.\n\t\tthis.addChild(ctl, before);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveControl: function (ctl) {\n\t\t// Called to remove a control from the object's control list. As with addControl it\n\t\t// can be overridden to detect when controls are removed.\n\t\t// When we remove a Control, we also remove it from its parent.\n\t\tctl.setParent(null);\n\t\treturn utils.remove(ctl, this.controls);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexOfControl: function (ctl) {\n\t\treturn utils.indexOf(ctl, this.controls);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexOfClientControl: function (ctl) {\n\t\treturn utils.indexOf(ctl, this.getClientControls());\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexInContainer: function () {\n\t\treturn this.container.indexOfControl(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclientIndexInContainer: function () {\n\t\treturn this.container.indexOfClientControl(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontrolAtIndex: function (idx) {\n\t\treturn this.controls[idx];\n\t},\n\t\n\t/**\n\t* Determines what the following sibling [control]{@link enyo.Control} is for the current\n\t* [control]{@link enyo.Control}.\n\t*\n\t* @returns {enyo.Control | null} The [control]{@link enyo.Control} that is the] following\n\t*\tsibling. If no following sibling exists, we return `null`.\n\t* @public\n\t*/\n\tgetNextControl: function () {\n\t\tvar comps = this.getParent().children,\n\t\t\tcomp,\n\t\t\tsibling,\n\t\t\ti;\n\t\n\t\tfor (i = comps.length - 1; i >= 0; i--) {\n\t\t\tcomp = comps[i];\n\t\t\tif (comp === this) return sibling ? sibling : null;\n\t\t\tif (comp.generated) sibling = comp;\n\t\t}\n\t\n\t\treturn null;\n\t},\n\t\n\t/**\n\t* Children\n\t* \n\t* @private\n\t*/\n\taddChild: function (child, before) {\n\t\t// if before is undefined, add to the end of the child list.\n\t\t// If it's null, add to front of list, otherwise add before the\n\t\t// specified control.\n\t\t//\n\t\t// allow delegating the child to a different container\n\t\tif (this.controlParent /*&& !child.isChrome*/) {\n\t\t\t// this.controlParent might have a controlParent, and so on; seek the ultimate parent\n\t\t\tthis.controlParent.addChild(child, before);\n\t\t} else {\n\t\t\t// NOTE: addChild drives setParent.\n\t\t\t// It's the opposite for setContainer, where containerChanged (in Containable)\n\t\t\t// drives addControl.\n\t\t\t// Because of the way 'parent' is derived from 'container', this difference is\n\t\t\t// helpful for implementing controlParent.\n\t\t\t// By the same token, since 'parent' is derived from 'container', setParent is\n\t\t\t// not intended to be called by client code. Therefore, the lack of parallelism\n\t\t\t// should be private to this implementation.\n\t\t\t// Set the child's parent property to this\n\t\t\tchild.setParent(this);\n\t\t\t// track in children array\n\t\t\tif (before !== undefined) {\n\t\t\t\tvar idx = (before === null) ? 0 : this.indexOfChild(before);\n\t\t\t\tthis.children.splice(idx, 0, child);\n\t\t\t} else {\n\t\t\t\tthis.children.push(child);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveChild: function (child) {\n\t\treturn utils.remove(child, this.children);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tindexOfChild: function (child) {\n\t\treturn utils.indexOf(child, this.children);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlayoutKindChanged: function () {\n\t\tif (this.layout) {\n\t\t\tthis.layout.destroy();\n\t\t}\n\t\tthis.layout = kind.createFromKind(this.layoutKind, this);\n\t\tif (this.generated) {\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tflow: function () {\n\t\tif (this.layout) {\n\t\t\tthis.layout.flow();\n\t\t}\n\t},\n\n\t/**\n\t* CAVEAT: currently we use the entry point for both post-render layout work *and* \n\t* post-resize layout work.\n\t* @private\n\t*/\n\treflow: function () {\n\t\tif (this.layout) {\n\t\t\tthis.layout.reflow();\n\t\t}\n\t},\n\n\t/**\n\t* Call after this [control]{@link enyo.Control} has been resized to allow it to process the \n\t* size change. To respond to a resize, override `handleResize()` instead. Acts as syntactic \n\t* sugar for `waterfall('onresize')`.\n\t* \n\t* @public\n\t*/\n\tresize: function () {\n\t\tthis.waterfall('onresize', UiComponent._resizeFlags);\n\t\tthis.waterfall('onpostresize', UiComponent._resizeFlags);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\thandleResize: function () {\n\t\t// FIXME: once we are in the business of reflowing layouts on resize, then we have an\n\t\t// inside/outside problem: some scenarios will need to reflow before child\n\t\t// controls reflow, and some will need to reflow after. Even more complex scenarios\n\t\t// have circular dependencies, and can require multiple passes or other resolution.\n\t\t// When we can rely on CSS to manage reflows we do not have these problems.\n\t\tthis.reflow();\n\t},\n\n\t/**\n\t* Sends a message to all of my descendants, but not myself. You can stop a\n\t* [waterfall]{@link enyo.Component#waterfall} into [components]{@link enyo.Component}\n\t* owned by a receiving [object]{@glossary Object} by returning a truthy value from the\n\t* {@glossary event} [handler]{@link enyo.Component~EventHandler}.\n\t* \n\t* @param {String} nom - The name of the {@glossary event}.\n\t* @param {Object} [event] - The event object to pass along.\n\t* @param {enyo.Component} [sender=this] - The event's originator.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\twaterfallDown: function (nom, event, sender) {\n\t\tevent = event || {};\n\t\t// Note: Controls will generally be both in a $ hash and a child list somewhere.\n\t\t// Attempt to avoid duplicated messages by sending only to components that are not\n\t\t// UiComponent, as those components are guaranteed not to be in a child list.\n\t\t// May cause a problem if there is a scenario where a UiComponent owns a pure\n\t\t// Component that in turn owns Controls.\n\t\t//\n\t\t// waterfall to all pure components\n\t\tfor (var n in this.$) {\n\t\t\tif (!(this.$[n] instanceof UiComponent)) {\n\t\t\t\tthis.$[n].waterfall(nom, event, sender);\n\t\t\t}\n\t\t}\n\t\t// waterfall to my children\n\t\tfor (var i=0, cs=this.children, c; (c=cs[i]); i++) {\n\t\t\t// Do not send {showingOnly: true} events to hidden controls. This flag is set for resize events\n\t\t\t// which are broadcast from within the framework. This saves a *lot* of unnecessary layout.\n\t\t\t// TODO: Maybe remember that we did this, and re-send those messages on setShowing(true)?\n\t\t\t// No obvious problems with it as-is, though\n\t\t\tif (c.showing || !(event && event.showingOnly)) {\n\t\t\t\tc.waterfall(nom, event, sender);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetBubbleTarget: function (nom, event) {\n\t\tif (event.delegate) return this.owner;\n\t\telse {\n\t\t\treturn (\n\t\t\t\tthis.bubbleTarget\n\t\t\t\t|| (this.cachedBubble && this.cachedBubbleTarget[nom])\n\t\t\t\t|| this.parent\n\t\t\t\t|| this.owner\n\t\t\t);\n\t\t}\n\t}\n});","require('../../enyo');\n\nvar\n\tlogger = require('./logger'),\n\tmaster = require('./master'),\n\tutils = require('./utils'),\n\tplatform = require('./platform');\n\nvar\n\tDom = require('./dom');\n\n/**\n * An [object]{@glossary Object} describing the the last known coordinates of the cursor or\n * user-interaction point in touch environments.\n *\n * @typedef {Object} enyo.dispatcher~CursorCoordinates\n * @property {Number} clientX - The horizontal coordinate within the application's client area.\n * @property {Number} clientY - The vertical coordinate within the application's client area.\n * @property {Number} pageX - The X coordinate of the cursor relative to the viewport, including any\n *   scroll offset.\n * @property {Number} pageY - The Y coordinate of the cursor relative to the viewport, including any\n *   scroll offset.\n * @property {Number} screenX - The X coordinate of the cursor relative to the screen, not including\n *   any scroll offset.\n * @property {Number} screenY - The Y coordinate of the cursor relative to the screen, not including\n *   any scroll offset.\n */\n\n/**\n* @private\n*/\n\n/**\n* @private\n*/\nvar dispatcher = module.exports = dispatcher =\n\t/** @lends enyo.dispatcher.prototype */ {\n\n\t$: {},\n\n\t/**\n\t* These events come from document\n\t*\n\t* @private\n\t*/\n\tevents: [\"mousedown\", \"mouseup\", \"mouseover\", \"mouseout\", \"mousemove\", \"mousewheel\",\n\t\t\"click\", \"dblclick\", \"change\", \"keydown\", \"keyup\", \"keypress\", \"input\",\n\t\t\"paste\", \"copy\", \"cut\", \"webkitTransitionEnd\", \"transitionend\", \"webkitAnimationEnd\", \"animationend\",\n\t\t\"webkitAnimationStart\", \"animationstart\", \"webkitAnimationIteration\", \"animationiteration\"],\n\n\t/**\n\t* These events come from window\n\t*\n\t* @private\n\t*/\n\twindowEvents: [\"resize\", \"load\", \"unload\", \"message\", \"hashchange\", \"popstate\", \"focus\", \"blur\"],\n\n\t/**\n\t* Feature plugins (aka filters)\n\t*\n\t* @private\n\t*/\n\tfeatures: [],\n\n\t/**\n\t* @private\n\t*/\n\tconnect: function() {\n\t\tvar d = dispatcher, i, n;\n\t\tfor (i=0; (n=d.events[i]); i++) {\n\t\t\td.listen(document, n);\n\t\t}\n\t\tfor (i=0; (n=d.windowEvents[i]); i++) {\n\t\t\t// Chrome Packaged Apps don't like \"unload\"\n\t\t\tif(n === \"unload\" &&\n\t\t\t\t(typeof global.chrome === \"object\") &&\n\t\t\t\tglobal.chrome.app) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\td.listen(window, n);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tlisten: function(inListener, inEventName, inHandler) {\n\t\tif (inListener.addEventListener) {\n\t\t\tthis.listen = function(inListener, inEventName, inHandler) {\n\t\t\t\tinListener.addEventListener(inEventName, inHandler || dispatch, false);\n\t\t\t};\n\t\t} else {\n\t\t\t//enyo.log(\"IE8 COMPAT: using 'attachEvent'\");\n\t\t\tthis.listen = function(inListener, inEvent, inHandler) {\n\t\t\t\tinListener.attachEvent(\"on\" + inEvent, function(e) {\n\t\t\t\t\te.target = e.srcElement;\n\t\t\t\t\tif (!e.preventDefault) {\n\t\t\t\t\t\te.preventDefault = this.iePreventDefault;\n\t\t\t\t\t}\n\t\t\t\t\treturn (inHandler || dispatch)(e);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\tthis.listen(inListener, inEventName, inHandler);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstopListening: function(inListener, inEventName, inHandler) {\n\t\tif (inListener.addEventListener) {\n\t\t\tthis.stopListening = function(inListener, inEventName, inHandler) {\n\t\t\t\tinListener.removeEventListener(inEventName, inHandler || dispatch, false);\n\t\t\t};\n\t\t} else {\n\t\t\t//enyo.log(\"IE8 COMPAT: using 'detachEvent'\");\n\t\t\tthis.stopListening = function(inListener, inEvent, inHandler) {\n\t\t\t\tinListener.detachEvent(\"on\" + inEvent, inHandler || dispatch);\n\t\t\t};\n\t\t}\n\t\tthis.stopListening(inListener, inEventName, inHandler);\n\t},\n\n\t/**\n\t* Fires an event for Enyo to listen for.\n\t*\n\t* @private\n\t*/\n\tdispatch: function(e) {\n\t\t// Find the control who maps to e.target, or the first control that maps to an ancestor of e.target.\n\t\tvar c = this.findDispatchTarget(e.target) || this.findDefaultTarget();\n\t\t// Cache the original target\n\t\te.dispatchTarget = c;\n\t\t// support pluggable features return true to abort immediately or set e.preventDispatch to avoid processing.\n\t\tfor (var i=0, fn; (fn=this.features[i]); i++) {\n\t\t\tif (fn.call(this, e) === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (c && !e.preventDispatch) {\n\t\t\treturn this.dispatchBubble(e, c);\n\t\t}\n\t},\n\n\t/**\n\t* Takes an event target and finds the corresponding Enyo control.\n\t*\n\t* @private\n\t*/\n\tfindDispatchTarget: function(inNode) {\n\t\tvar t, n = inNode;\n\t\t// FIXME: Mozilla: try/catch is here to squelch \"Permission denied to access property xxx from a non-chrome context\"\n\t\t// which appears to happen for scrollbar nodes in particular. It's unclear why those nodes are valid targets if\n\t\t// it is illegal to interrogate them. Would like to trap the bad nodes explicitly rather than using an exception block.\n\t\ttry {\n\t\t\twhile (n) {\n\t\t\t\tif ((t = this.$[n.id])) {\n\t\t\t\t\t// there could be multiple nodes with this id, the relevant node for this event is n\n\t\t\t\t\t// we don't push this directly to t.node because sometimes we are just asking what\n\t\t\t\t\t// the target 'would be' (aka, calling findDispatchTarget from handleMouseOverOut)\n\t\t\t\t\tt.eventNode = n;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tn = n.parentNode;\n\t\t\t}\n\t\t} catch(x) {\n\t\t\tlogger.log(x, n);\n\t\t}\n\t\treturn t;\n\t},\n\n\t/**\n\t* Returns the default Enyo control for events.\n\t*\n\t* @private\n\t*/\n\tfindDefaultTarget: function() {\n\t\treturn master;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdispatchBubble: function(e, c) {\n\t\tvar type = e.type;\n\t\ttype = e.customEvent ? type : \"on\" + type;\n\t\treturn c.bubble(type, e, c);\n\t}\n};\n\n/**\n* Called in the context of an event.\n*\n* @private\n*/\ndispatcher.iePreventDefault = function() {\n\ttry {\n\t\tthis.returnValue = false;\n\t}\n\tcatch(e) {\n\t\t// do nothing\n\t}\n};\n\n/**\n* @private\n*/\nfunction dispatch (inEvent) {\n\treturn dispatcher.dispatch(inEvent);\n}\n\n/**\n* @private\n*/\ndispatcher.bubble = function(inEvent) {\n\t// '|| window.event' clause needed for IE8\n\tvar e = inEvent || global.event;\n\tif (e) {\n\t\t// We depend on e.target existing for event tracking and dispatching.\n\t\tif (!e.target) {\n\t\t\te.target = e.srcElement;\n\t\t}\n\t\tdispatcher.dispatch(e);\n\t}\n};\n\n// This string is set on event handlers attributes for DOM elements that\n// don't normally bubble (like onscroll) so that they can participate in the\n// Enyo event system.\ndispatcher.bubbler = \"enyo.bubble(arguments[0])\";\n\n// The code below helps make Enyo compatible with Google Packaged Apps\n// Content Security Policy(http://developer.chrome.com/extensions/contentSecurityPolicy.html),\n// which, among other things, forbids the use of inline scripts.\n// We replace online scripting with equivalent means, leaving enyo.bubbler\n// for backward compatibility.\n(function() {\n\tvar bubbleUp = function() {\n\t\tdispatcher.bubble(arguments[0]);\n\t};\n\n\t/**\n\t* Makes given events bubble on a specified Enyo control.\n\t*\n\t* @private\n\t*/\n\tdispatcher.makeBubble = function() {\n\t\tvar args = Array.prototype.slice.call(arguments, 0),\n\t\t\tcontrol = args.shift();\n\n\t\tif((typeof control === \"object\") && (typeof control.hasNode === \"function\")) {\n\t\t\tutils.forEach(args, function(event) {\n\t\t\t\tif(this.hasNode()) {\n\t\t\t\t\tdispatcher.listen(this.node, event, bubbleUp);\n\t\t\t\t}\n\t\t\t}, control);\n\t\t}\n\t};\n\n\t/**\n\t* Removes the event listening and bubbling initiated by\n\t* [enyo.makeBubble()]{@link enyo.makeBubble} on a specific control.\n\t*\n\t* @private\n\t*/\n\tdispatcher.unmakeBubble = function() {\n\t\tvar args = Array.prototype.slice.call(arguments, 0),\n\t\t\tcontrol = args.shift();\n\n\t\tif((typeof control === \"object\") && (typeof control.hasNode === \"function\")) {\n\t\t\tutils.forEach(args, function(event) {\n\t\t\t\tif(this.hasNode()) {\n\t\t\t\t\tdispatcher.stopListening(this.node, event, bubbleUp);\n\t\t\t\t}\n\t\t\t}, control);\n\t\t}\n\t};\n})();\n\n/**\n* @private\n*/\n// FIXME: we need to create and initialize dispatcher someplace else to allow overrides\nDom.requiresWindow(dispatcher.connect);\n\n/**\n* Generates a tapped event for a raw-click event.\n*\n* @private\n*/\ndispatcher.features.push(\n\tfunction (e) {\n\t\tif (\"click\" === e.type) {\n\t\t\tif (e.clientX === 0 && e.clientY === 0 && !e.detail) {\n\t\t\t\t// this allows the click to dispatch as well\n\t\t\t\t// but note the tap event will fire first\n\t\t\t\tvar cp = utils.clone(e);\n\t\t\t\tcp.type = \"tap\";\n\t\t\t\tcp.preventDefault = utils.nop;\n\t\t\t\tdispatcher.dispatch(cp);\n\t\t\t}\n\t\t}\n\t}\n);\n\n/**\n* Instead of having multiple `features` pushed and handled in separate methods\n* for these events, we handle them uniformly here to expose the last known\n* interaction coordinates as accurately as possible.\n*\n* @private\n*/\nvar _xy = {};\ndispatcher.features.push(\n\tfunction (e) {\n\t\tif (\n\t\t\t(e.type == \"mousemove\")  ||\n\t\t\t(e.type == \"tap\")        ||\n\t\t\t(e.type == \"click\")      ||\n\t\t\t(e.type == \"touchmove\")\n\t\t) {\n\t\t\t_xy.clientX = e.clientX;\n\t\t\t_xy.clientY = e.clientY;\n\t\t\t// note only ie8 does not support pageX/pageY\n\t\t\t_xy.pageX   = e.pageX;\n\t\t\t_xy.pageY   = e.pageY;\n\t\t\t// note ie8 and opera report these values incorrectly\n\t\t\t_xy.screenX = e.screenX;\n\t\t\t_xy.screenY = e.screenY;\n\t\t}\n\t}\n);\n\n/**\n* Retrieves the last known coordinates of the cursor or user-interaction point\n* in touch environments. Returns an immutable object with the `clientX`,\n* `clientY`, `pageX`, `pageY`, `screenX`, and `screenY` properties. It is\n* important to note that IE8 and Opera have improper reporting for the\n* `screenX` and `screenY` properties (they both use CSS pixels as opposed to\n* device pixels) and IE8 has no support for the `pageX` and `pageY` properties,\n* so they are facaded.\n*\n* @returns {enyo.dispatcher~CursorCoordinates} An [object]{@glossary Object} describing the\n*\tthe last known coordinates of the cursor or user-interaction point in touch environments.\n* @public\n*/\ndispatcher.getPosition = function () {\n\tvar p = utils.clone(_xy);\n\t// if we are in ie8 we facade the _pageX, pageY_ properties\n\tif (platform.ie < 9) {\n\t\tvar d = (document.documentElement || document.body.parentNode || document.body);\n\t\tp.pageX = (p.clientX + d.scrollLeft);\n\t\tp.pageY = (p.clientY + d.scrollTop);\n\t}\n\treturn p;\n};\n\n\n/**\n* Key mapping feature: Adds a `keySymbol` property to key [events]{@glossary event},\n* based on a global key mapping. Use\n* [enyo.dispatcher.registerKeyMap()]{@link enyo.dispatcher.registerKeyMap} to add\n* keyCode-to-keySymbol mappings via a simple hash. This method may be called\n* multiple times from different libraries to mix different maps into the global\n* mapping table; if conflicts arise, the last-in wins.\n*\n* ```\n* enyo.dispatcher.registerKeyMap({\n* \t415 : 'play',\n* \t413 : 'stop',\n* \t19  : 'pause',\n* \t412 : 'rewind',\n* \t417 : 'fastforward'\n* });\n* ```\n* \n* @private\n*/\ndispatcher.features.push(function(e) {\n\tif ((e.type === 'keydown') || (e.type === 'keyup') || (e.type === 'keypress')) {\n\t\te.keySymbol = this.keyMap[e.keyCode];\n\t\t// Dispatch key events to be sent via Signals\n\t\tvar c = this.findDefaultTarget();\n\t\tif (e.dispatchTarget !== c) {\n\t\t\tthis.dispatchBubble(e, c);\n\t\t}\n\t}\n});\n\nutils.mixin(dispatcher, {\n\tkeyMap: {},\n\tregisterKeyMap: function(map) {\n\t\tutils.mixin(this.keyMap, map);\n\t}\n});\n\n\n/**\n* Event modal capture feature. Capture events to a specific control via\n* [enyo.dispatcher.capture(inControl, inShouldForward)]{@linkcode enyo.dispatcher.capture};\n* release events via [enyo.dispatcher.release()]{@link enyo.dispatcher.release}.\n*\n* @private\n*/\ndispatcher.features.push(function(e) {\n\tif (this.captureTarget) {\n\t\tvar c = e.dispatchTarget;\n\t\tvar eventName = (e.customEvent ? '' : 'on') + e.type;\n\t\tvar handlerName = this.captureEvents[eventName];\n\t\tvar handlerScope = this.captureHandlerScope || this.captureTarget;\n\t\tvar handler = handlerName && handlerScope[handlerName];\n\t\tvar shouldCapture = handler && !(c && c.isDescendantOf && c.isDescendantOf(this.captureTarget));\n\t\tif (shouldCapture) {\n\t\t\tvar c1 = e.captureTarget = this.captureTarget;\n\t\t\t// NOTE: We do not want releasing capture while an event is being processed to alter\n\t\t\t// the way the event propagates. Therefore decide if the event should forward\n\t\t\t// before the capture target receives the event (since it may release capture).\n\t\t\te.preventDispatch = handler && handler.apply(handlerScope, [c1, e]) && !this.autoForwardEvents[e.type];\n\t\t}\n\t}\n});\n\n//\n//        NOTE: This object is a plug-in; these methods should\n//        be called on `enyo.dispatcher`, and not on the plug-in itself.\n//\nutils.mixin(dispatcher, {\n\n\t/**\n\t* @private\n\t*/\n\tautoForwardEvents: {leave: 1, resize: 1},\n\n\t/**\n\t* @private\n\t*/\n\tcaptures: [],\n\n\t/** \n\t* Captures [events]{@glossary event} for `inTarget`, where `inEvents` is specified as a\n\t* hash of event names mapped to callback handler names to be called on `inTarget` (or,\n\t* optionally, `inScope`). The callback is called when any of the captured events are\n\t* dispatched outside of the capturing control. Returning `true` from the callback stops\n\t* dispatch of the event to the original `dispatchTarget`.\n\t*\n\t* @private\n\t*/\n\tcapture: function(inTarget, inEvents, inScope) {\n\t\tvar info = {target: inTarget, events: inEvents, scope: inScope};\n\t\tthis.captures.push(info);\n\t\tthis.setCaptureInfo(info);\n\t},\n\n\t/**\n\t* Removes the specified target from the capture list.\n\t* \n\t* @private\n\t*/\n\trelease: function(inTarget) {\n\t\tfor (var i = this.captures.length - 1; i >= 0; i--) {\n\t\t\tif (this.captures[i].target === inTarget) {\n\t\t\t\tthis.captures.splice(i,1);\n\t\t\t\tthis.setCaptureInfo(this.captures[this.captures.length-1]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* Sets the information for a captured {@glossary event}.\n\t* \n\t* @private\n\t*/\n\tsetCaptureInfo: function(inInfo) {\n\t\tthis.captureTarget = inInfo && inInfo.target;\n\t\tthis.captureEvents = inInfo && inInfo.events;\n\t\tthis.captureHandlerScope = inInfo && inInfo.scope;\n\t}\n});\n\n\n(function () {\n\t/**\n\t* Dispatcher preview feature\n\t* \n\t* Allows {@link enyo.Control} ancestors of the {@glossary event} target\n\t* a chance (eldest first) to react by implementing `previewDomEvent`.\n\t*\n\t* @private\n\t*/\n\tvar fn = 'previewDomEvent';\n\tvar preview = \n\t\t/** @lends enyo.dispatcher.features */ {\n\n\t\t/**\n\t\t* @private\n\t\t*/\n\t\tfeature: function(e) {\n\t\t\tpreview.dispatch(e, e.dispatchTarget);\n\t\t},\n\n\t\t/**\n\t\t* @returns {(Boolean|undefined)} Handlers return `true` to abort preview and prevent default\n\t\t*\tevent processing.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tdispatch: function(evt, control) {\n\t\t\tvar i, l,\n\t\t\tlineage = this.buildLineage(control);\n\t\t\tfor (i=0; (l=lineage[i]); i++) {\n\t\t\t\tif (l[fn] && l[fn](evt) === true) {\n\t\t\t\t\tevt.preventDispatch = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t* We ascend, making a list of Enyo [controls]{@link enyo.Control}.\n\t\t*\n\t\t* Note that a control is considered to be its own ancestor.\n\t\t*\n\t\t* @private\n\t\t*/\n\t\tbuildLineage: function(control) {\n\t\t\tvar lineage = [],\n\t\t\t\tc = control;\n\t\t\twhile (c) {\n\t\t\t\tlineage.unshift(c);\n\t\t\t\tc = c.parent;\n\t\t\t}\n\t\t\treturn lineage;\n\t\t}\n\t};\n\n\tdispatcher.features.push(preview.feature);\n})();","require('../../../enyo');\n\n\n\nvar\n\tdispatcher = require('../dispatcher'),\n\tutils = require('../utils');\nvar\n\tSignals = require('../Signals'),\n\tReady = require('../ready');\n\n/**\n* Normalizes and provides fullscreen support for [controls]{@link enyo.Control},\n* based on the [fullscreen]{@glossary fullscreen} API.\n*\n* @name enyo.fullscreen\n* @type Object\n* @public\n*/\nvar fullscreen = module.exports = {\n\t\n\t/**\n\t* Reference to the current fullscreen [control]{@link enyo.Control}.\n\t*\n\t* @private\n\t*/\n\tfullscreenControl: null,\n\n\t/**\n\t* Reference to the current fullscreen element (fallback for platforms\n\t* without native support).\n\t*\n\t* @private\n\t*/\n\tfullscreenElement: null,\n\n\t/** \n\t* Reference to that [control]{@link enyo.Control} that requested fullscreen.\n\t* \n\t* @private\n\t*/\n\trequestor: null,\n\n\t/** \n\t* Native accessor used to get reference to the current fullscreen element.\n\t*\n\t* @private\n\t*/\n\telementAccessor:\n\t\t('fullscreenElement' in document) ? 'fullscreenElement' :\n\t\t('mozFullScreenElement' in document) ? 'mozFullScreenElement' :\n\t\t('webkitFullscreenElement' in document) ? 'webkitFullscreenElement' :\n\t\tnull,\n\n\t/** \n\t* Native accessor used to request fullscreen.\n\t*\n\t* @private\n\t*/\n\trequestAccessor:\n\t\t('requestFullscreen' in document.documentElement) ? 'requestFullscreen' :\n\t\t('mozRequestFullScreen' in document.documentElement) ? 'mozRequestFullScreen' :\n\t\t('webkitRequestFullscreen' in document.documentElement) ? 'webkitRequestFullscreen' :\n\t\tnull,\n\n\t/** \n\t* Native accessor used to cancel fullscreen.\n\t*\n\t* @private\n\t*/\n\tcancelAccessor:\n\t\t('cancelFullScreen' in document) ? 'cancelFullScreen' :\n\t\t('mozCancelFullScreen' in document) ? 'mozCancelFullScreen' :\n\t\t('webkitCancelFullScreen' in document) ? 'webkitCancelFullScreen' :\n\t\tnull,\n\n\t/**\n\t* Determines whether the platform supports the [fullscreen]{@glossary fullscreen} API.\n\t* \n\t* @returns {Boolean} Returns `true` if platform supports all of the \n\t*\t[fullscreen]{@glossary fullscreen} API, `false` otherwise.\n\t* @public\n\t*/\n\tnativeSupport: function() {\n\t\treturn (this.elementAccessor !== null && this.requestAccessor !== null && this.cancelAccessor !== null);\n\t},\n\n\t/** \n\t* Normalizes `getFullscreenElement()`.\n\t*\n\t* @public\n\t*/\n\tgetFullscreenElement: function() {\n\t\treturn (this.nativeSupport()) ? document[this.elementAccessor] : this.fullscreenElement;\n\t},\n\n\t/** \n\t* Returns current fullscreen [control]{@link enyo.Control}.\n\t*\n\t* @public\n\t*/\n\tgetFullscreenControl: function() {\n\t\treturn this.fullscreenControl;\n\t},\n\n\t/**\n\t* Normalizes `requestFullscreen()`.\n\t*\n\t* @public\n\t*/\n\trequestFullscreen: function(ctl) {\n\t\tif (this.getFullscreenControl() || !(ctl.hasNode())) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.requestor = ctl;\n\n\t\t// Only use native request if platform supports all of the API\n\t\tif (this.nativeSupport()) {\n\t\t\tctl.hasNode()[this.requestAccessor]();\n\t\t} else {\n\t\t\tthis.fallbackRequestFullscreen();\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/** \n\t* Normalizes `cancelFullscreen()`.\n\t*\n\t* @public\n\t*/\n\tcancelFullscreen: function() {\n\t\tif (this.nativeSupport()) {\n\t\t\tdocument[this.cancelAccessor]();\n\t\t} else {\n\t\t\tthis.fallbackCancelFullscreen();\n\t\t}\n\t},\n\n\t/** \n\t* Fallback support for setting fullscreen element (done by browser on platforms with\n\t* native support).\n\t*\n\t* @private\n\t*/\n\tsetFullscreenElement: function(node) {\n\t\tthis.fullscreenElement = node;\n\t},\n\n\t/** \n\t* Sets current fullscreen [control]{@link enyo.Control}.\n\t*\n\t* @private\n\t*/\n\tsetFullscreenControl: function(ctl) {\n\t\tthis.fullscreenControl = ctl;\n\t},\n\n\t/** \n\t* Fallback fullscreen request for platforms without fullscreen support.\n\t*\n\t* @private\n\t*/\n\tfallbackRequestFullscreen: function() {\n\t\tvar control = this.requestor;\n\n\t\tif (!control) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get before node to allow us to exit floating layer to the proper position\n\t\tcontrol.prevAddBefore = control.parent.controlAtIndex(control.indexInContainer() + 1);\n\t\t\n\t\tvar floatingLayer = Control.floatingLayer;\n\t\t\n\t\t// Render floating layer if we need to\n\t\tif (!floatingLayer.hasNode()) {\n\t\t\tfloatingLayer.render();\n\t\t}\n\n\t\tcontrol.addClass('enyo-fullscreen');\n\t\tcontrol.appendNodeToParent(floatingLayer.hasNode());\n\t\tcontrol.resize();\n\n\t\tthis.setFullscreenControl(control);\n\t\tthis.setFullscreenElement(control.hasNode());\n\t},\n\n\t/** \n\t* Fallback cancel fullscreen for platforms without fullscreen support.\n\t*\n\t* @private\n\t*/\n\tfallbackCancelFullscreen: function() {\n\t\tvar control = this.fullscreenControl,\n\t\t\tbeforeNode,\n\t\t\tparentNode\n\t\t;\n\n\t\tif (!control) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find beforeNode based on _this.addBefore_ and _this.prevAddBefore_\n\t\tbeforeNode = (control.prevAddBefore) ? control.prevAddBefore.hasNode() : null;\n\t\tparentNode = control.parent.hasNode();\n\t\tcontrol.prevAddBefore = null;\n\n\t\tcontrol.removeClass('enyo-fullscreen');\n\n\t\tif (!beforeNode) {\n\t\t\tcontrol.appendNodeToParent(parentNode);\n\t\t} else {\n\t\t\tcontrol.insertNodeInParent(parentNode, beforeNode);\n\t\t}\n\n\t\tcontrol.resize();\n\n\t\tthis.setFullscreenControl(null);\n\t\tthis.setFullscreenElement(null);\n\t},\n\n\t/** \n\t* Listens for fullscreen change {@glossary event} and broadcasts it as a\n\t* normalized event.\n\t*\n\t* @private\n\t*/\n\tdetectFullscreenChangeEvent: function() {\n\t\tthis.setFullscreenControl(this.requestor);\n\t\tthis.requestor = null;\n\n\t\t// Broadcast change\n\t\tSignals.send('onFullscreenChange');\n\t}\n};\n\n/**\n* Normalizes platform-specific fullscreen change [events]{@glossary event}.\n*\n* @private\n*/\nReady(function() {\n\t// no need for IE8 fallback, since it won't ever send this event\n\tif (document.addEventListener) {\n\t\tdocument.addEventListener('webkitfullscreenchange', utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\n\t\tdocument.addEventListener('mozfullscreenchange',    utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\n\t\tdocument.addEventListener('fullscreenchange',       utils.bind(fullscreen, 'detectFullscreenChangeEvent'), false);\n\t}\n});\n\n/**\n* If this platform doesn't have native support for fullscreen, add an escape handler to mimic \n* native behavior.\n*/\nif(!fullscreen.nativeSupport()) {\n\tdispatcher.features.push(\n\t\tfunction(e) {\n\t\t\tif (e.type === 'keydown' && e.keyCode === 27) {\n\t\t\t\tfullscreen.cancelFullscreen();\n\t\t\t}\n\t\t}\n\t);\n}","require('../../enyo');\n\nvar\n\tutils = require('./utils'),\n\tplatform = require('./platform'),\n\tdispatcher = require('./dispatcher');\n\nvar\n\tDom = require('./dom');\n\n\n/**\n* Enyo supports a set of normalized events that work similarly across all supported platforms.\n* These events are provided so that users can write a single set of event handlers for\n* applications that run on both mobile and desktop platforms. They are needed because desktop\n* and mobile platforms handle basic input differently.\n*\n* For more information on normalized input events and their associated properties, see the\n* documentation on [Event Handling]{@linkplain $dev-guide/key-concepts/event-handling.html}\n* in the Enyo Developer Guide.\n*\n* @namespace gesture\n* @public\n*/\nvar gesture = module.exports =\n\t/** @lends gesture */ {\n\n\t/**\n\t* @private\n\t*/\n\teventProps: ['target', 'relatedTarget', 'clientX', 'clientY', 'pageX', 'pageY',\n\t\t'screenX', 'screenY', 'altKey', 'ctrlKey', 'metaKey', 'shiftKey',\n\t\t'detail', 'identifier', 'dispatchTarget', 'which', 'srcEvent'],\n\n\t/**\n\t* Creates an {@glossary event} of type `type` and returns it.\n\t* `evt` should be an event [object]{@glossary Object}.\n\t*\n\t* @param {String} type - The type of {@glossary event} to make.\n\t* @param {(Event|Object)} evt - The event you'd like to clone or an object that looks like it.\n\t* @returns {Object} The new event [object]{@glossary Object}.\n\t* @public\n\t*/\n\tmakeEvent: function(type, evt) {\n\t\tvar e = {};\n\t\te.type = type;\n\t\tfor (var i=0, p; (p=this.eventProps[i]); i++) {\n\t\t\te[p] = evt[p];\n\t\t}\n\t\te.srcEvent = e.srcEvent || evt;\n\t\te.preventDefault = this.preventDefault;\n\t\te.disablePrevention = this.disablePrevention;\n\n\t\tif (Dom._bodyScaleFactorX !== 1 || Dom._bodyScaleFactorY !== 1) {\n\t\t\t// Intercept only these events, not all events, like: hold, release, tap, etc,\n\t\t\t// to avoid doing the operation again.\n\t\t\tif (e.type == 'move' || e.type == 'up' || e.type == 'down' || e.type == 'enter' || e.type == 'leave') {\n\t\t\t\te.clientX *= Dom._bodyScaleFactorX;\n\t\t\t\te.clientY *= Dom._bodyScaleFactorY;\n\t\t\t}\n\t\t}\n\t\t//\n\t\t// normalize event.which and event.pageX/event.pageY\n\t\t// Note that while 'which' works in IE9, it is broken for mousemove. Therefore,\n\t\t// in IE, use global.event.button\n\t\tif (platform.ie < 10) {\n\t\t\t//Fix for IE8, which doesn't include pageX and pageY properties\n\t\t\tif(platform.ie==8 && e.target) {\n\t\t\t\te.pageX = e.clientX + e.target.scrollLeft;\n\t\t\t\te.pageY = e.clientY + e.target.scrollTop;\n\t\t\t}\n\t\t\tvar b = global.event && global.event.button;\n\t\t\tif (b) {\n\t\t\t\t// multi-button not supported, priority: left, right, middle\n\t\t\t\t// (note: IE bitmask is 1=left, 2=right, 4=center);\n\t\t\t\te.which = b & 1 ? 1 : (b & 2 ? 2 : (b & 4 ? 3 : 0));\n\t\t\t}\n\t\t} else if (platform.webos || global.PalmSystem) {\n\t\t\t// Temporary fix for owos: it does not currently supply 'which' on move events\n\t\t\t// and the user agent string doesn't identify itself so we test for PalmSystem\n\t\t\tif (e.which === 0) {\n\t\t\t\te.which = 1;\n\t\t\t}\n\t\t}\n\t\treturn e;\n\t},\n\n\t/**\n\t* Handles \"down\" [events]{@glossary event}, including `mousedown` and `keydown`. This is\n\t* responsible for the press-and-hold key repeater.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tdown: function(evt) {\n\t\tvar e = this.makeEvent('down', evt);\n\n\t\t// prepare for hold\n\t\tthis.drag.prepareHold(e);\n\n\t\t// enable prevention of tap event\n\t\te.preventTap = function() {\n\t\t\te._tapPrevented = true;\n\t\t};\n\n\t\tdispatcher.dispatch(e);\n\t\tthis.downEvent = e;\n\n\t\t// start hold, now that control has had a chance\n\t\t// to override the holdPulse configuration\n\t\tthis.drag.beginHold(e);\n\t},\n\n\t/**\n\t* Handles `mousemove` [events]{@glossary event}.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tmove: function(evt) {\n\t\tvar e = this.makeEvent('move', evt);\n\t\t// include delta and direction v. down info in move event\n\t\te.dx = e.dy = e.horizontal = e.vertical = 0;\n\t\tif (e.which && this.downEvent) {\n\t\t\te.dx = evt.clientX - this.downEvent.clientX;\n\t\t\te.dy = evt.clientY - this.downEvent.clientY;\n\t\t\te.horizontal = Math.abs(e.dx) > Math.abs(e.dy);\n\t\t\te.vertical = !e.horizontal;\n\t\t}\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* Handles \"up\" [events]{@glossary event}, including `mouseup` and `keyup`.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tup: function(evt) {\n\t\tvar e = this.makeEvent('up', evt);\n\n\t\t// We have added some logic to synchronize up and down events in certain scenarios (i.e.\n\t\t// clicking multiple buttons with a mouse) and to generally guard against any potential\n\t\t// asymmetry, but a full solution would be to maintain a map of up/down events as an \n\t\t// ideal solution, for future work.\n\t\te._tapPrevented = this.downEvent && this.downEvent._tapPrevented && this.downEvent.which == e.which;\n\t\te.preventTap = function() {\n\t\t\te._tapPrevented = true;\n\t\t};\n\n\t\tdispatcher.dispatch(e);\n\t\tif (!e._tapPrevented && this.downEvent && this.downEvent.which == 1) {\n\t\t\tvar target = this.findCommonAncestor(this.downEvent.target, evt.target);\n\n\t\t\t// the common ancestor of the down/up events is the target of the tap\n\t\t\tif(target) {\n\t\t\t\tif(this.supportsDoubleTap(target)) {\n\t\t\t\t\tthis.doubleTap(e, target);\n\t\t\t\t} else {\n\t\t\t\t\tthis.sendTap(e, target);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.downEvent && this.downEvent.which == e.which) {\n\t\t\tthis.downEvent = null;\n\t\t}\n\t},\n\n\t/**\n\t* Handles `mouseover` [events]{@glossary event}.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tover: function(evt) {\n\t\tvar e = this.makeEvent('enter', evt);\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* Handles `mouseout` [events]{@glossary event}.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tout: function(evt) {\n\t\tvar e = this.makeEvent('leave', evt);\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* Generates `tap` [events]{@glossary event}.\n\t*\n\t* @param {Event} evt - The standard {@glossary event} [object]{glossary Object}.\n\t* @public\n\t*/\n\tsendTap: function(evt, target) {\n\t\tvar e = this.makeEvent('tap', evt);\n\t\te.target = target;\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttapData: {\n\t\tid: null,\n\t\ttimer: null,\n\t\tstart: 0\n\t},\n\n\t/**\n\t* Global configuration for double tap support. If this is true, all tap events for Controls\n\t* that do not have {@link enyo.Control#doubleTapEnabled} explicitly set to false will be\n\t* delayed by the {@link enyo.Control#doubleTapInterval}.\n\t*\n\t* @type {Boolean}\n\t* @default  false\n\t* @public\n\t*/\n\tdoubleTapEnabled: false,\n\n\t/**\n\t* Determines if the provided target node supports double tap events\n\t*\n\t* @param {Node} target\n\t* @return {Boolean}\n\t* @private\n\t*/\n\tsupportsDoubleTap: function(target) {\n\t\tvar obj = dispatcher.findDispatchTarget(target);\n\n\t\tif(obj) {\n\t\t\t// Control.doubleTapEnabled is a tri-value property. The default is 'inherit'\n\t\t\t// which takes its cue from gesture's doubleTapEnabled. Values of true or false\n\t\t\t// override the default. So, if the global is true, any truthy value on Control\n\t\t\t// results in true. If the global is false, only an explicit true on Control\n\t\t\t// results in true.\n\t\t\treturn this.doubleTapEnabled? !!obj.doubleTapEnabled : obj.doubleTapEnabled === true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\t/**\n\t* private\n\t*/\n\tdoubleTap: function(evt, t) {\n\t\tvar obj = dispatcher.findDispatchTarget(t);\n\n\t\tif(this.tapData.id !== obj.id) {\t// this is the first tap\n\t\t\tthis.resetTapData(true);\n\n\t\t\tthis.tapData.id = obj.id;\n\t\t\tthis.tapData.event = evt;\n\t\t\tthis.tapData.target = t;\n\t\t\tthis.tapData.timer = setTimeout(utils.bind(this, \"resetTapData\", true), obj.doubleTapInterval);\n\t\t\tthis.tapData.start = utils.perfNow();\n\t\t} else {\t\t\t\t\t\t\t// this is the double tap\n\t\t\tvar e2 = this.makeEvent('doubletap', evt);\n\t\t\te2.target = t;\n\t\t\te2.tapInterval = utils.perfNow() - this.tapData.start;\n\t\t\tthis.resetTapData(false);\n\t\t\tdispatcher.dispatch(e2);\n\t\t}\n\t},\n\n\tresetTapData: function(sendTap) {\n\t\tvar data = this.tapData;\n\n\t\tif(sendTap && data.id) {\n\t\t\tthis.sendTap(data.event, data.target);\n\t\t}\n\n\t\tclearTimeout(data.timer);\n\t\tdata.id = data.start = data.event = data.target = data.timer = null;\n\t},\n\n\t/**\n\t* Given two [DOM nodes]{@glossary Node}, searches for a shared ancestor (looks up\n\t* the hierarchic [DOM]{@glossary DOM} tree of [nodes]{@glossary Node}). The shared\n\t* ancestor node is returned.\n\t*\n\t* @param {Node} controlA - Control one.\n\t* @param {Node} controlB - Control two.\n\t* @returns {(Node|undefined)} The shared ancestor.\n\t* @public\n\t*/\n\tfindCommonAncestor: function(controlA, controlB) {\n\t\tvar p = controlB;\n\t\twhile (p) {\n\t\t\tif (this.isTargetDescendantOf(controlA, p)) {\n\t\t\t\treturn p;\n\t\t\t}\n\t\t\tp = p.parentNode;\n\t\t}\n\t},\n\n\t/**\n\t* Given two controls, returns `true` if the `child` is inside the `parent`.\n\t*\n\t* @param {Node} child - The child to search for.\n\t* @param {Node} parent - The expected parent.\n\t* @returns {(Boolean|undefined)} `true` if the `child` is actually a child of `parent`.\n\t*/\n\tisTargetDescendantOf: function(child, parent) {\n\t\tvar c = child;\n\t\twhile(c) {\n\t\t\tif (c == parent) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tc = c.parentNode;\n\t\t}\n\t}\n};\n\n/**\n* Installed on [events]{@glossary event} and called in event context.\n*\n* @private\n*/\ngesture.preventDefault = function() {\n\tif (this.srcEvent) {\n\t\tthis.srcEvent.preventDefault();\n\t}\n};\n\n/**\n* @private\n*/\ngesture.disablePrevention = function() {\n\tthis.preventDefault = utils.nop;\n\tif (this.srcEvent) {\n\t\tthis.srcEvent.preventDefault = utils.nop;\n\t}\n};\n\ndispatcher.features.push(\n\tfunction(e) {\n\t\t// NOTE: beware of properties in gesture inadvertently mapped to event types\n\t\tif (gesture.events[e.type]) {\n\t\t\treturn gesture.events[e.type](e);\n\t\t}\n\t}\n);\n\n/**\n* @namespace gesture.events\n* @public\n*/\ngesture.events =\n\t/** @lends gesture.events */ {\n\n\t/**\n\t* Shortcut to [gesture.down()]{@link gesture.down}.\n\t*\n\t* @public\n\t*/\n\tmousedown: function(e) {\n\t\tgesture.down(e);\n\t},\n\n\t/**\n\t* Shortcut to [gesture.up()]{@link gesture.up}.\n\t*\n\t* @public\n\t*/\n\tmouseup: function(e) {\n\t\tgesture.up(e);\n\t},\n\n\t/**\n\t* Shortcut to [gesture.move()]{@link gesture.move}.\n\t*\n\t* @public\n\t*/\n\tmousemove:  function(e) {\n\t\tgesture.move(e);\n\t},\n\n\t/**\n\t* Shortcut to [gesture.over()]{@link gesture.over}.\n\t*\n\t* @public\n\t*/\n\tmouseover:  function(e) {\n\t\tgesture.over(e);\n\t},\n\n\t/**\n\t* Shortcut to [gesture.out()]{@link gesture.out}.\n\t*\n\t* @public\n\t*/\n\tmouseout:  function(e) {\n\t\tgesture.out(e);\n\t}\n};\n\n// Firefox mousewheel handling\nDom.requiresWindow(function() {\n\tif (document.addEventListener) {\n\t\tdocument.addEventListener('DOMMouseScroll', function(inEvent) {\n\t\t\tvar e = utils.clone(inEvent);\n\t\t\te.preventDefault = function() {\n\t\t\t\tinEvent.preventDefault();\n\t\t\t};\n\t\t\te.type = 'mousewheel';\n\t\t\tvar p = e.VERTICAL_AXIS == e.axis ? 'wheelDeltaY' : 'wheelDeltaX';\n\t\t\te[p] =  e.detail * -40;\n\t\t\tdispatcher.dispatch(e);\n\t\t}, false);\n\t}\n});\n\n\n\n/**\n* The extended {@glossary event} [object]{@glossary Object} that is provided when we\n* emulate iOS gesture events on non-iOS devices.\n*\n* @typedef {Object} enyo.gesture~EmulatedGestureEvent\n* @property {Number} pageX - The x-coordinate of the center point between fingers.\n* @property {Number} pageY - The y-coordinate of the center point between fingers.\n* @property {Number} rotation - The degrees of rotation from the beginning of the gesture.\n* @property {Number} scale - The percent change of distance between fingers.\n*/\n\n/**\n* @private\n*/\nif (!platform.gesture && platform.touch) {\n\tdispatcher.features.push(function(e) {\n\t\tif (handlers[e.type]) {\n\t\t\ttouchGestures[e.type](e);\n\t\t}\n\t});\n}\n\n/**\n* @private\n*/\nvar handlers = {\n\ttouchstart: true,\n\ttouchmove: true,\n\ttouchend: true\n};\n\n/**\n* @private\n*/\nvar touchGestures = {\n\n\t/**\n\t* @private\n\t*/\n\torderedTouches: [],\n\n\t/**\n\t* @private\n\t*/\n\tgesture: null,\n\n\t/**\n\t* @private\n\t*/\n\ttouchstart: function (e) {\n\t\t// some devices can send multiple changed touches on start and end\n\t\tvar i,\n\t\t\tchangedTouches = e.changedTouches,\n\t\t\tlength = changedTouches.length;\n\n\t\tfor (i = 0; i < length; i++) {\n\t\t\tvar id = changedTouches[i].identifier;\n\n\t\t\t// some devices can send multiple touchstarts\n\t\t\tif (utils.indexOf(id, this.orderedTouches) < 0) {\n\t\t\t\tthis.orderedTouches.push(id);\n\t\t\t}\n\t\t}\n\n\t\tif (e.touches.length >= 2 && !this.gesture) {\n\t\t\tvar p = this.gesturePositions(e);\n\n\t\t\tthis.gesture = this.gestureVector(p);\n\t\t\tthis.gesture.angle = this.gestureAngle(p);\n\t\t\tthis.gesture.scale = 1;\n\t\t\tthis.gesture.rotation = 0;\n\t\t\tvar g = this.makeGesture('gesturestart', e, {vector: this.gesture, scale: 1, rotation: 0});\n\t\t\tdispatcher.dispatch(g);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttouchend: function (e) {\n\t\t// some devices can send multiple changed touches on start and end\n\t\tvar i,\n\t\t\tchangedTouches = e.changedTouches,\n\t\t\tlength = changedTouches.length;\n\n\t\tfor (i = 0; i < length; i++) {\n\t\t\tutils.remove(changedTouches[i].identifier, this.orderedTouches);\n\t\t}\n\n\t\tif (e.touches.length <= 1 && this.gesture) {\n\t\t\tvar t = e.touches[0] || e.changedTouches[e.changedTouches.length - 1];\n\n\t\t\t// gesture end sends last rotation and scale, with the x/y of the last finger\n\t\t\tdispatcher.dispatch(this.makeGesture('gestureend', e, {vector: {xcenter: t.pageX, ycenter: t.pageY}, scale: this.gesture.scale, rotation: this.gesture.rotation}));\n\t\t\tthis.gesture = null;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttouchmove: function (e) {\n\t\tif (this.gesture) {\n\t\t\tvar g = this.makeGesture('gesturechange', e);\n\t\t\tthis.gesture.scale = g.scale;\n\t\t\tthis.gesture.rotation = g.rotation;\n\t\t\tdispatcher.dispatch(g);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfindIdentifiedTouch: function (touches, id) {\n\t\tfor (var i = 0, t; (t = touches[i]); i++) {\n\t\t\tif (t.identifier === id) {\n\t\t\t\treturn t;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgesturePositions: function (e) {\n\t\tvar first = this.findIdentifiedTouch(e.touches, this.orderedTouches[0]);\n\t\tvar last = this.findIdentifiedTouch(e.touches, this.orderedTouches[this.orderedTouches.length - 1]);\n\t\tvar fx = first.pageX, lx = last.pageX, fy = first.pageY, ly = last.pageY;\n\t\t// center the first touch as 0,0\n\t\tvar x = lx - fx, y = ly - fy;\n\t\tvar h = Math.sqrt(x*x + y*y);\n\t\treturn {x: x, y: y, h: h, fx: fx, lx: lx, fy: fy, ly: ly};\n\t},\n\n\t/**\n\t* Finds rotation angle.\n\t* \n\t* @private\n\t*/\n\tgestureAngle: function (positions) {\n\t\tvar p = positions;\n\t\t// yay math!, rad -> deg\n\t\tvar a = Math.asin(p.y / p.h) * (180 / Math.PI);\n\t\t// fix for range limits of asin (-90 to 90)\n\t\t// Quadrants II and III\n\t\tif (p.x < 0) {\n\t\t\ta = 180 - a;\n\t\t}\n\t\t// Quadrant IV\n\t\tif (p.x > 0 && p.y < 0) {\n\t\t\ta += 360;\n\t\t}\n\t\treturn a;\n\t},\n\n\t/**\n\t* Finds bounding box.\n\t* \n\t* @private\n\t*/\n\tgestureVector: function (positions) {\n\t\t// the least recent touch and the most recent touch determine the bounding box of the gesture event\n\t\tvar p = positions;\n\t\t// center the first touch as 0,0\n\t\treturn {\n\t\t\tmagnitude: p.h,\n\t\t\txcenter: Math.abs(Math.round(p.fx + (p.x / 2))),\n\t\t\tycenter: Math.abs(Math.round(p.fy + (p.y / 2)))\n\t\t};\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmakeGesture: function (type, e, cache) {\n\t\tvar vector, scale, rotation;\n\t\tif (cache) {\n\t\t\tvector = cache.vector;\n\t\t\tscale = cache.scale;\n\t\t\trotation = cache.rotation;\n\t\t} else {\n\t\t\tvar p = this.gesturePositions(e);\n\t\t\tvector = this.gestureVector(p);\n\t\t\tscale = vector.magnitude / this.gesture.magnitude;\n\t\t\t// gestureEvent.rotation is difference from the starting angle, clockwise\n\t\t\trotation = (360 + this.gestureAngle(p) - this.gesture.angle) % 360;\n\t\t}\n\t\tvar event = utils.clone(e);\n\t\treturn utils.mixin(event, {\n\t\t\ttype: type,\n\t\t\tscale: scale,\n\t\t\tpageX: vector.xcenter,\n\t\t\tpageY: vector.ycenter,\n\t\t\trotation: rotation\n\t\t});\n\t}\n};","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind'),\n\tutils = require('../utils'),\n\tplatform = require('../platform'),\n\tdispatcher = require('../dispatcher'),\n\tfullscreen = require('../fullscreen'),\n\troots = require('../roots');\n\nvar\n\tUiComponent = require('../UiComponent'),\n\tHTMLStringDelegate = require('../HTMLStringDelegate'),\n\tDom = require('../dom'),\n\tFloatingLayer = require('../floatingLayer');\n\nvar nodePurgatory;\n\n/**\n* Called by `Control.teardownRender()`. In certain circumstances,\n* we need to temporarily keep a DOM node around after tearing down\n* because we're still acting on a stream of touch events emanating\n* from the node. See `Control.retainNode()` for more information.\n*\n* @private\n*/\nfunction storeRetainedNode (control) {\n\tvar p = getNodePurgatory(),\n\t\tn = control._retainedNode;\n\tif (n) {\n\t\tp.appendChild(n);\n\t}\n\tcontrol._retainedNode = null;\n}\n\n/**\n* Called (via a callback) when it's time to release a DOM node\n* that we've retained.\n*\n* @private\n*/\nfunction releaseRetainedNode (retainedNode) {\n\tvar p = getNodePurgatory();\n\tif (retainedNode) {\n\t\tp.removeChild(retainedNode);\n\t}\n}\n\n/**\n* Lazily add a hidden `<div>` to `document.body` to serve as a\n* container for retained DOM nodes.\n*\n* @private\n*/\nfunction getNodePurgatory () {\n\tvar p = nodePurgatory;\n\tif (!p) {\n\t\tp = nodePurgatory = document.createElement(\"div\");\n\t\tp.id = \"node_purgatory\";\n\t\tp.style.display = \"none\";\n\t\tdocument.body.appendChild(p);\n\t}\n\treturn p;\n}\n\n/**\n* {@link enyo.Control} is a [component]{@link enyo.UiComponent} that controls\n* a [DOM]{@glossary DOM} [node]{@glossary Node} (i.e., an element in the user\n* interface). Controls are generally visible and the user often interacts with\n* them directly. While things like buttons and input boxes are obviously\n* controls, in Enyo, a control may be as simple as a text item or as complex\n* as an entire application. Both inherit the same basic core capabilities from\n* this kind.\n*\n* For more information, see the documentation on\n* [Controls]{@linkplain $dev-guide/key-concepts/controls.html} in the\n* Enyo Developer Guide.\n*\n* **If you make changes to `enyo.Control`, be sure to add or update the\n* appropriate unit tests.**\n*\n* @class enyo.Control\n* @extends enyo.UiComponent\n* @ui\n* @public\n*/\nvar Control = module.exports = kind(\n\t/** @lends enyo.Control.prototype */ {\n\n\tname: 'enyo.Control',\n\n\t/**\n\t* @private\n\t*/\n\tkind: UiComponent,\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* @type {String}\n\t* @default 'enyo.Control'\n\t* @public\n\t*/\n\tdefaultKind: null, // set after the fact\n\n\t/**\n\t* The [DOM node]{@glossary DOM} tag name that should be created.\n\t*\n\t* @type {String}\n\t* @default 'div'\n\t* @public\n\t*/\n\ttag: 'div',\n\n\t/**\n\t* A [hash]{@glossary Object} of attributes to be applied to the created\n\t* [DOM]{@glossary DOM} node.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tattributes: null,\n\n\t/**\n\t* [Boolean]{@glossary Boolean} flag indicating whether this element should\n\t* \"fit\", or fill its container's size.\n\t*\n\t* @type {Boolean}\n\t* @default null\n\t* @public\n\t*/\n\tfit: null,\n\n\t/**\n\t* [Boolean]{@glossary Boolean} flag indicating whether HTML is allowed in\n\t* this control's [content]{@link enyo.Control#content} property. If `false`\n\t* (the default), HTML will be encoded into [HTML entities]{@glossary entity}\n\t* (e.g., `&lt;` and `&gt;`) for literal visual representation.\n\t*\n\t* @type {Boolean}\n\t* @default null\n\t* @public\n\t*/\n\tallowHtml: false,\n\n\t/**\n\t* Mimics the HTML `style` attribute.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tstyle: '',\n\n\t/**\n\t* @private\n\t*/\n\tkindStyle: '',\n\n\t/**\n\t* Mimics the HTML `class` attribute.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tclasses: '',\n\n\t/**\n\t* @private\n\t*/\n\tkindClasses: '',\n\n\t/**\n\t* [Classes]{@link enyo.Control#classes} that are applied to all controls.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tcontrolClasses: '',\n\n\t/**\n\t* The text-based content of the Control. If the [allowHtml]{@link enyo.Control#allowHtml}\n\t* flag is set to `true`, you may set this property to an HTML string.\n\t* @public\n\t*/\n\tcontent: '',\n\n\t/**\n\t* If true or 'inherit' and enyo.gesture.doubleTabEnabled == true, will fire a doubletap\n\t* event, and will temporarily suppress a single tap while waiting for a double tap.\n\t*\n\t* @type {String|Boolean}\n\t* @default 'inherit'\n\t* @public\n\t*/\n\tdoubleTapEnabled: 'inherit',\n\n\t/**\n\t* Time in milliseconds to wait to detect a double tap\n\t*\n\t* @type {Number}\n\t* @default 300\n\t* @public\n\t*/\n\tdoubleTapInterval: 300,\n\n\t/**\n\t* If set to `true`, the [control]{@link enyo.Control} will not be rendered until its\n\t* [showing]{@link enyo.Control#showing} property has been set to `true`. This can be used\n\t* directly or is used by some widgets to control when children are rendered.\n\t*\n\t* It is important to note that setting this to `true` will _force_\n\t* [canGenerate]{@link enyo.Control#canGenerate} and [showing]{@link enyo.Control#showing}\n\t* to be `false`. Arbitrarily modifying the values of these properties prior to its initial\n\t* render may have unexpected results.\n\t*\n\t* Once a control has been shown/rendered with `renderOnShow` `true` the behavior will not\n\t* be used again.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\trenderOnShow: false,\n\t\n\t/**\n\t* @todo Find out how to document \"handlers\".\n\t* @public\n\t*/\n\thandlers: {\n\t\tontap: 'tap',\n\t\tonShowingChanged: 'showingChangedHandler'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstrictlyInternalEvents: {onenter: 1, onleave: 1},\n\n\t/**\n\t* @private\n\t*/\n\tisInternalEvent: function (event) {\n\t\tvar rdt = dispatcher.findDispatchTarget(event.relatedTarget);\n\t\treturn rdt && rdt.isDescendantOf(this);\n\t},\n\n\t// .................................\n\t// DOM NODE MANIPULATION API\n\n\t/**\n\t* Gets the bounds for this control. The `top` and `left` properties returned\n\t* by this method represent the control's positional distance in pixels from\n\t* either A) the first parent of this control that is absolutely or relatively\n\t* positioned, or B) the `document.body`.\n\t*\n\t* This is a shortcut convenience method for {@link enyo.dom.getBounds}.\n\t*\n\t* @returns {Object} An [object]{@glossary Object} containing `top`, `left`,\n\t* `width`, and `height` properties.\n\t* @public\n\t*/\n\tgetBounds: function () {\n\t\tvar node = this.hasNode(),\n\t\t\tbounds = node && Dom.getBounds(node);\n\n\t\treturn bounds || {left: undefined, top: undefined, width: undefined, height: undefined};\n\t},\n\n\t/**\n\t* Sets the absolute/relative position and/or size for this control. Values\n\t* of `null` or `undefined` for the `bounds` properties will be ignored. You\n\t* may optionally specify a `unit` (i.e., a valid CSS measurement unit) as a\n\t* [string]{@glossary String} to be applied to each of the position/size\n\t* assignments.\n\t*\n\t* @param {Object} bounds - An [object]{@glossary Object}, optionally\n\t* containing one or more of the following properties: `width`, `height`,\n\t* `top`, `right`, `bottom`, and `left`.\n\t* @param {String} [unit='px']\n\t* @public\n\t*/\n\tsetBounds: function (bounds, unit) {\n\t\tvar newStyle = '',\n\t\t\textents = ['width', 'height', 'left', 'top', 'right', 'bottom'],\n\t\t\ti = 0,\n\t\t\tval,\n\t\t\text;\n\n\t\t// if no unit is supplied, we default to pixels\n\t\tunit = unit || 'px';\n\n\t\tfor (; (ext = extents[i]); ++i) {\n\t\t\tval = bounds[ext];\n\t\t\tif (val || val === 0) {\n\t\t\t\tnewStyle += (ext + ':' + val + (typeof val == 'string' ? '' : unit) + ';');\n\t\t\t}\n\t\t}\n\n\t\tthis.set('style', this.style + newStyle);\n\t},\n\n\t/**\n\t* Gets the bounds for this control. The `top` and `left` properties returned\n\t* by this method represent the control's positional distance in pixels from\n\t* `document.body`. To get the bounds relative to this control's parent(s),\n\t* use [getBounds()]{@link enyo.Control#getBounds}.\n\t*\n\t* This is a shortcut convenience method for {@link enyo.dom.getAbsoluteBounds}.\n\t*\n\t* @returns {Object} An [object]{@glossary Object} containing `top`, `left`,\n\t* `width`, and `height` properties.\n\t* @public\n\t*/\n\tgetAbsoluteBounds: function () {\n\t\tvar node = this.hasNode(),\n\t\t\tbounds = node && Dom.getAbsoluteBounds(node);\n\n\t\treturn bounds || {\n\t\t\tleft: undefined,\n\t\t\ttop: undefined,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tbottom: undefined,\n\t\t\tright: undefined\n\t\t};\n\t},\n\n\t/**\n\t* Shortcut method to set [showing]{@link enyo.Control#showing} to `true`.\n\t*\n\t* @public\n\t*/\n\tshow: function () {\n\t\tthis.set('showing', true);\n\t},\n\n\t/**\n\t* Shortcut method to set [showing]{@link enyo.Control#showing} to `false`.\n\t*\n\t* @public\n\t*/\n\thide: function () {\n\t\tthis.set('showing', false);\n\t},\n\n\t/**\n\t* Sets this control to be [focused]{@glossary focus}.\n\t*\n\t* @public\n\t*/\n\tfocus: function () {\n\t\tif (this.hasNode()) this.node.focus();\n\t},\n\n\t/**\n\t* [Blurs]{@glossary blur} this control. (The opposite of\n\t* [focus()]{@link enyo.Control#focus}.)\n\t*\n\t* @public\n\t*/\n\tblur: function () {\n\t\tif (this.hasNode()) this.node.blur();\n\t},\n\n\t/**\n\t* Determines whether this control currently has the [focus]{@glossary focus}.\n\t*\n\t* @returns {Boolean} Whether this control has focus. `true` if the control\n\t* has focus; otherwise, `false`.\n\t* @public\n\t*/\n\thasFocus: function () {\n\t\tif (this.hasNode()) return document.activeElement === this.node;\n\t},\n\n\t/**\n\t* Determines whether this control's [DOM node]{@glossary Node} has been created.\n\t*\n\t* @returns {Boolean} Whether this control's [DOM node]{@glossary Node} has\n\t* been created. `true` if it has been created; otherwise, `false`.\n\t* @public\n\t*/\n\thasNode: function () {\n\t\treturn this.generated && (this.node || this.findNodeById());\n\t},\n\n\t/**\n\t* Gets the requested property (`name`) from the control's attributes\n\t* [hash]{@glossary Object}, from its cache of node attributes, or, if it has\n\t* yet to be cached, from the [node]{@glossary Node} itself.\n\t*\n\t* @param {String} name - The attribute name to get.\n\t* @returns {(String|Null)} The value of the requested attribute, or `null`\n\t* if there isn't a [DOM node]{@glossary Node} yet.\n\t* @public\n\t*/\n\tgetAttribute: function (name) {\n\t\tvar node;\n\n\t\t// TODO: This is a fixed API assuming that no changes will happen to the DOM that\n\t\t// do not use it...original implementation of this method used the node's own\n\t\t// getAttribute method every time it could but we really only need to do that if we\n\t\t// weren't the ones that set the value to begin with -- in slow DOM situations this\n\t\t// could still be faster but it needs to be verified\n\t\tif (this.attributes.hasOwnProperty(name)) return this.attributes[name];\n\t\telse {\n\t\t\tnode = this.hasNode();\n\n\t\t\t// we store the value so that next time we'll know what it is\n\t\t\t/*jshint -W093 */\n\t\t\treturn (this.attributes[name] = (node ? node.getAttribute(name) : null));\n\t\t\t/*jshint +W093 */\n\t\t}\n\t},\n\n\t/**\n\t* Assigns an attribute to a control's [node]{@glossary Node}. Assigning\n\t* `name` a value of `null`, `false`, or the empty string `(\"\")` will remove\n\t* the attribute from the node altogether.\n\t*\n\t* @param {String} name - Attribute name to assign/remove.\n\t* @param {(String|Number|null)} value - The value to assign to `name`\n\t* @returns {this} Callee for chaining.\n\t* @public\n\t*/\n\tsetAttribute: function (name, value) {\n\t\tvar attrs = this.attributes,\n\t\t\tnode = this.hasNode(),\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\n\n\t\tif (name) {\n\t\t\tattrs[name] = value;\n\n\t\t\tif (node) {\n\t\t\t\tif (value == null || value === false || value === '') {\n\t\t\t\t\tnode.removeAttribute(name);\n\t\t\t\t} else node.setAttribute(name, value);\n\t\t\t} else delegate.invalidate(this, 'attributes');\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Reads the `name` property directly from the [node]{@glossary Node}. You\n\t* may provide a default (`def`) to use if there is no node yet.\n\t*\n\t* @param {String} name - The [node]{@glossary Node} property name to get.\n\t* @param {*} def - The default value to apply if there is no node.\n\t* @returns {String} The value of the `name` property, or `def` if the node\n\t* was not available.\n\t* @public\n\t*/\n\tgetNodeProperty: function (name, def) {\n\t\treturn this.hasNode() ? this.node[name] : def;\n\t},\n\n\t/**\n\t* Sets the value of a property (`name`) directly on the [node]{@glossary Node}.\n\t*\n\t* @param {String} name - The [node]{@glossary Node} property name to set.\n\t* @param {*} value - The value to assign to the property.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tsetNodeProperty: function (name, value) {\n\t\tif (this.hasNode()) this.node[name] = value;\n\t\treturn this;\n\t},\n\n\t/**\n\t* Appends additional content to this control.\n\t*\n\t* @param {String} content - The new string to add to the end of the `content`\n\t* property.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddContent: function (content) {\n\t\treturn this.set('content', this.get('content') + content);\n\t},\n\n\t// .................................\n\n\t// .................................\n\t// STYLE/CLASS API\n\n\t/**\n\t* Determines whether this control has the class `name`.\n\t*\n\t* @param {String} name - The name of the class (or classes) to check for.\n\t* @returns {Boolean} Whether the control has the class `name`.\n\t* @public\n\t*/\n\thasClass: function (name) {\n\t\treturn name && (' ' + this.classes + ' ').indexOf(' ' + name + ' ') > -1;\n\t},\n\n\t/**\n\t* Adds the specified class to this control's list of classes.\n\t*\n\t* @param {String} name - The name of the class to add.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddClass: function (name) {\n\t\tvar classes = this.classes || '';\n\n\t\t// NOTE: Because this method accepts a string and for efficiency does not wish to\n\t\t// parse it to determine if it is actually multiple classes we later pull a trick\n\t\t// to keep it normalized and synchronized with our attributes hash and the node's\n\t\tif (!this.hasClass(name)) {\n\n\t\t\t// this is hooked\n\t\t\tthis.set('classes', classes + (classes ? (' ' + name) : name));\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Removes the specified class from this control's list of classes.\n\t*\n\t* **Note: It is not advisable to pass a string of multiple, space-delimited\n\t* class names into this method. Instead, call the method once for each class\n\t* name that you want to remove.**\n\t*\n\t* @param {String} name - The name of the class to remove.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\tremoveClass: function (name) {\n\t\tvar classes = this.classes;\n\n\t\tif (name) {\n\t\t\tthis.set('classes', (' ' + classes + ' ').replace(' ' + name + ' ', ' ').trim());\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Adds or removes the specified class conditionally, based on the state\n\t* of the `add` argument.\n\t*\n\t* @param {String} name - The name of the class to add or remove.\n\t* @param {Boolean} add - If `true`, `name` will be added as a class; if\n\t* `false`, it will be removed.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddRemoveClass: function (name, add) {\n\t\treturn name ? this[add ? 'addClass' : 'removeClass'](name) : this;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclassesChanged: function () {\n\t\tvar classes = this.classes,\n\t\t\tnode = this.hasNode(),\n\t\t\tattrs = this.attributes,\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\n\n\t\tif (node) {\n\t\t\tif (classes || this.kindClasses) {\n\t\t\t\tnode.setAttribute('class', classes || this.kindClasses);\n\t\t\t} else node.removeAttribute('class');\n\n\t\t\tthis.classes = classes = node.getAttribute('class');\n\t\t}\n\n\t\t// we need to update our attributes.class value and flag ourselves to be\n\t\t// updated\n\t\tattrs['class'] = classes;\n\n\t\t// we want to notify the delegate that the attributes have changed in case it wants\n\t\t// to handle this is some special way\n\t\tdelegate.invalidate(this, 'attributes');\n\t},\n\n\t/**\n\t* Applies a CSS style directly to the control. Use the `prop` argument to\n\t* specify the CSS property name you'd like to set, and `value` to specify\n\t* the desired value. Setting `value` to `null` will remove the CSS property\n\t* `prop` altogether.\n\t*\n\t* @param {String} prop - The CSS property to assign.\n\t* @param {(String|Number|null|undefined)} value - The value to assign to\n\t* `prop`. Setting a value of `null`, `undefined`, or the empty string `(\"\")`\n\t* will remove the property `prop` from the control.\n\t* @returns {this} Callee for chaining.\n\t* @public\n\t*/\n\tapplyStyle: function (prop, value) {\n\n\t\t// NOTE: This method deliberately avoids calling set('style', ...) for performance\n\t\t// as it will have already been parsed by the browser so we pass it on via the\n\t\t// notification system which is the same\n\n\t\t// TODO: Wish we could delay this potentially...\n\t\t// if we have a node we render the value immediately and update our style string\n\t\t// in the process to keep them synchronized\n\t\tvar node = this.hasNode(),\n\t\t\tstyle = this.style,\n\t\t\tdelegate = this.renderDelegate || Control.renderDelegate;\n\n\t\t// FIXME: This is put in place for a Firefox bug where setting a style value of a node\n\t\t// via its CSSStyleDeclaration object (by accessing its node.style property) does\n\t\t// not work when using a CSS property name that contains one or more dash, and requires\n\t\t// setting the property via the JavaScript-style property name. This fix should be\n\t\t// removed once this issue has been resolved in the Firefox mainline and its variants\n\t\t// (it is currently resolved in the 36.0a1 nightly):\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=1083457\n\t\tif (node && (platform.firefox < 35 || platform.firefoxOS || platform.androidFirefox)) {\n\t\t\tprop = prop.replace(/-([a-z])/gi, function(match, submatch) {\n\t\t\t\treturn submatch.toUpperCase();\n\t\t\t});\n\t\t}\n\n\t\tif (value !== null && value !== '' && value !== undefined) {\n\t\t\t// update our current cached value\n\t\t\tif (node) {\n\t\t\t\tnode.style[prop] = value;\n\n\t\t\t\t// cssText is an internal property used to help know when to sync and not\n\t\t\t\t// sync with the node in styleChanged\n\t\t\t\tthis.style = this.cssText = node.style.cssText;\n\n\t\t\t\t// we need to invalidate the style for the delegate\n\t\t\t\tdelegate.invalidate(this, 'style');\n\n\t\t\t\t// otherwise we have to try and prepare it for the next time it is rendered we\n\t\t\t\t// will need to update it because it will not be synchronized\n\t\t\t} else this.set('style', style + (' ' + prop + ':' + value + ';'));\n\t\t} else {\n\n\t\t\t// in this case we are trying to clear the style property so if we have the node\n\t\t\t// we let the browser handle whatever the value should be now and otherwise\n\t\t\t// we have to parse it out of the style string and wait to be rendered\n\n\t\t\tif (node) {\n\t\t\t\tnode.style[prop] = '';\n\t\t\t\tthis.style = this.cssText = node.style.cssText;\n\n\t\t\t\t// we need to invalidate the style for the delegate\n\t\t\t\tdelegate.invalidate(this, 'style');\n\t\t\t} else {\n\n\t\t\t\t// this is a rare case to nullify the style of a control that is not\n\t\t\t\t// rendered or does not have a node\n\t\t\t\tstyle = style.replace(new RegExp(\n\t\t\t\t\t// This looks a lot worse than it is. The complexity stems from needing to\n\t\t\t\t\t// match a url container that can have other characters including semi-\n\t\t\t\t\t// colon and also that the last property may/may-not end with one\n\t\t\t\t\t'\\\\s*' + prop + '\\\\s*:\\\\s*[a-zA-Z0-9\\\\ ()_\\\\-\\'\"%,]*(?:url\\\\(.*\\\\)\\\\s*[a-zA-Z0-9\\\\ ()_\\\\-\\'\"%,]*)?\\\\s*(?:;|;?$)',\n\t\t\t\t\t'gi'\n\t\t\t\t),'');\n\t\t\t\tthis.set('style', style);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Allows the addition of several CSS properties and values at once, via a\n\t* single string, similar to how the HTML `style` attribute works.\n\t*\n\t* @param {String} css - A string containing one or more valid CSS styles.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\taddStyles: function (css) {\n\t\tvar key,\n\t\t\tnewStyle = '';\n\n\t\tif (typeof css == 'object') {\n\t\t\tfor (key in css) newStyle += (key + ':' + css[key] + ';');\n\t\t} else newStyle = css || '';\n\n\t\tthis.set('style', this.style + newStyle);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstyleChanged: function () {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\n\t\t// if the cssText internal string doesn't match then we know style was set directly\n\t\tif (this.cssText !== this.style) {\n\n\t\t\t// we need to render the changes and synchronize - this means that the style\n\t\t\t// property was set directly so we will reset it prepending it with the original\n\t\t\t// style (if any) for the kind and keeping whatever the browser is keeping\n\t\t\tif (this.hasNode()) {\n\t\t\t\tthis.node.style.cssText = this.kindStyle + (this.style || '');\n\t\t\t\t// now we store the parsed version\n\t\t\t\tthis.cssText = this.style = this.node.style.cssText;\n\t\t\t}\n\n\t\t\t// we need to ensure that the delegate has an opportunity to handle this change\n\t\t\t// separately if it needs to\n\t\t\tdelegate.invalidate(this, 'style');\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves a control's CSS property value. This doesn't just pull the\n\t* assigned value of `prop`; it returns the browser's understanding of `prop`,\n\t* the \"computed\" value. If the control isn't been rendered yet, and you need\n\t* a default value (such as `0`), include it in the arguments as `def`.\n\t*\n\t* @param {String} prop - The property name to get.\n\t* @param {*} [def] - An optional default value, in case the control isn't\n\t* rendered yet.\n\t* @returns {(String|Number)} The computed value of `prop`, as the browser\n\t* sees it.\n\t* @public\n\t*/\n\tgetComputedStyleValue: function (prop, def) {\n\t\treturn this.hasNode() ? Dom.getComputedStyleValue(this.node, prop) : def;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfindNodeById: function () {\n\t\treturn this.id && (this.node = Dom.byId(this.id));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tidChanged: function (was) {\n\t\tif (was) Control.unregisterDomEvents(was);\n\t\tif (this.id) {\n\t\t\tControl.registerDomEvents(this.id, this);\n\t\t\tthis.setAttribute('id', this.id);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontentChanged: function () {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\t\tdelegate.invalidate(this, 'content');\n\t},\n\n\t/**\n\t* If the control has been generated, re-flows the control.\n\t*\n\t* @public\n\t*/\n\tbeforeChildRender: function () {\n\t\t// if we are generated, we should flow before rendering a child;\n\t\t// if not, the render context isn't ready anyway\n\t\tif (this.generated) this.flow();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshowingChanged: function (was) {\n\t\tvar nextControl;\n\t\t// if we are changing from not showing to showing we attempt to find whatever\n\t\t// our last known value for display was or use the default\n\t\tif (!was && this.showing) {\n\t\t\tthis.applyStyle('display', this._display || '');\n\t\t\t\n\t\t\t// note the check for generated and canGenerate as changes to canGenerate will force\n\t\t\t// us to ignore the renderOnShow value so we don't undo whatever the developer was\n\t\t\t// intending\n\t\t\tif (!this.generated && !this.canGenerate && this.renderOnShow) {\n\t\t\t\tnextControl = this.getNextControl();\n\t\t\t\tif (nextControl && !this.addBefore) this.addBefore = nextControl;\n\t\t\t\tthis.set('canGenerate', true);\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t\t\n\t\t\tthis.sendShowingChangedEvent(was);\n\t\t}\n\n\t\t// if we are supposed to be hiding the control then we need to cache our current\n\t\t// display state\n\t\telse if (was && !this.showing) {\n\t\t\tthis.sendShowingChangedEvent(was);\n\t\t\t// we can't truly cache this because it _could_ potentially be set to multiple\n\t\t\t// values throughout its lifecycle although that seems highly unlikely...\n\t\t\tthis._display = this.hasNode() ? this.node.style.display : '';\n\t\t\tthis.applyStyle('display', 'none');\n\t\t}\n\n\t},\n\n\t/**\n\t* @private\n\t*/\n\trenderOnShowChanged: function () {\n\t\t// ensure that the default value assigned to showing is actually a boolean\n\t\t// and that it is only true if the renderOnShow is also false\n\t\tthis.showing = ((!!this.showing) && !this.renderOnShow);\n\t\t// we want to check and make sure that the canGenerate value is correct given\n\t\t// the state of renderOnShow\n\t\tthis.canGenerate = (this.canGenerate && !this.renderOnShow);\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tsendShowingChangedEvent: function (was) {\n\t\tvar waterfall = (was === true || was === false),\n\t\t\tparent = this.parent;\n\n\t\t// make sure that we don't trigger the waterfall when this method\n\t\t// is arbitrarily called during _create_ and it should only matter\n\t\t// that it changed if our parent's are all showing as well\n\t\tif (waterfall && (parent ? parent.getAbsoluteShowing(true) : true)) {\n\t\t\tthis.waterfall('onShowingChanged', {originator: this, showing: this.showing});\n\t\t}\n\t},\n\n\t/**\n\t* Returns `true` if this control and all parents are showing.\n\t*\n\t* @param {Boolean} ignoreBounds - If `true`, it will not force a layout by retrieving\n\t*\tcomputed bounds and rely on the return from [showing]{@link enyo.Control#showing}\n\t* exclusively.\n\t* @returns {Boolean} Whether the control is showing (visible).\n\t* @public\n\t*/\n\tgetAbsoluteShowing: function (ignoreBounds) {\n\t\tvar bounds = !ignoreBounds ? this.getBounds() : null,\n\t\t\tparent = this.parent;\n\n\t\tif (!this.generated || this.destroyed || !this.showing || (bounds &&\n\t\t\tbounds.height === 0 && bounds.width === 0)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (parent && parent.getAbsoluteShowing) {\n\n\t\t\t// we actually don't care what the parent says if it is the floating layer\n\t\t\tif (!this.parentNode || (this.parentNode !== Control.floatingLayer.hasNode())) {\n\t\t\t\treturn parent.getAbsoluteShowing(ignoreBounds);\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t* Handles the `onShowingChanged` event that is waterfalled by controls when\n\t* their `showing` value is modified. If the control is not showing itself\n\t* already, it will not continue the waterfall. Overload this method to\n\t* provide additional handling for this event.\n\t*\n\t* @private\n\t*/\n\tshowingChangedHandler: function (sender, event) {\n\t\treturn sender === this ? false : !this.showing;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfitChanged: function () {\n\t\tthis.parent.reflow();\n\t},\n\n\t/**\n\t* Determines whether we are in fullscreen mode or not.\n\t*\n\t* @returns {Boolean} Whether we are currently in fullscreen mode.\n\t* @public\n\t*/\n\tisFullscreen: function () {\n\t\treturn (this.hasNode() && this.node === fullscreen.getFullscreenElement());\n\t},\n\n\t/**\n\t* Requests that this control be displayed fullscreen (like a video\n\t* container). If the request is granted, the control fills the screen and\n\t* `true` is returned; if the request is denied, the control is not resized\n\t* and `false` is returned.\n\t*\n\t* @returns {Boolean} `true` on success; otherwise, `false`.\n\t* @public\n\t*/\n\trequestFullscreen: function () {\n\t\tif (!this.hasNode()) return false;\n\n\t\tif (fullscreen.requestFullscreen(this)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t* Ends fullscreen mode for this control.\n\t*\n\t* @returns {Boolean} If the control was in fullscreen mode before this\n\t* method was called, it is taken out of that mode and `true` is returned;\n\t* otherwise, `false` is returned.\n\t* @public\n\t*/\n\tcancelFullscreen: function() {\n\t\tif (this.isFullscreen()) {\n\t\t\tfullscreen.cancelFullscreen();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// .................................\n\n\t// .................................\n\t// RENDER-SCHEME API\n\n\t/**\n\t* Indicates whether the control is allowed to be generated, i.e., rendered\n\t* into the [DOM]{@glossary DOM} tree.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tcanGenerate: true,\n\n\t/**\n\t* Indicates whether the control is visible.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tshowing: true,\n\n\t/**\n\t* The [node]{@glossary Node} that this control will be rendered into.\n\t*\n\t* @type {enyo.Control}\n\t* @default null\n\t* @public\n\t*/\n\trenderDelegate: null,\n\n\t/**\n\t* Indicates whether the control has been generated yet.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @private\n\t*/\n\tgenerated: false,\n\n\t/**\n\t* Forces the control to be rendered. You should use this sparingly, as it\n\t* can be costly, but it may be necessary in cases where a control or its\n\t* contents have been updated surreptitiously.\n\t*\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trender: function () {\n\n\t\t// prioritize the delegate set for this control otherwise use the default\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\n\t\t// the render delegate acts on the control\n\t\tdelegate.render(this);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* Takes this control and drops it into a (new/different)\n\t* [DOM node]{@glossary Node}. This will replace any existing nodes in the\n\t* target `parentNode`.\n\t*\n\t* @param {Node} parentNode - The new parent of this control.\n\t* @param {Boolean} preventRooting - If `true`, this control will not be treated as a root\n\t*\tview and will not be added to the set of roots.\n\t* @returns {this} The callee for chaining.\n\t* @public\n\t*/\n\trenderInto: function (parentNode, preventRooting) {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate,\n\t\t\tnoFit = this.fit === false;\n\n\t\t// attempt to retrieve the parentNode\n\t\tparentNode = Dom.byId(parentNode);\n\n\t\t// teardown in case of previous render\n\t\tdelegate.teardownRender(this);\n\n\t\tif (parentNode == document.body && !noFit) this.setupBodyFitting();\n\t\telse if (this.fit) this.addClass('enyo-fit enyo-clip');\n\n\t\t// for IE10 support, we want full support over touch actions in enyo-rendered areas\n\t\tthis.addClass('enyo-no-touch-action');\n\n\t\t// add css to enable hw-accelerated scrolling on non-android platforms\n\t\t// ENYO-900, ENYO-901\n\t\tthis.setupOverflowScrolling();\n\n\t\t// if there are unflushed body classes we flush them now...\n\t\tDom.flushBodyClasses();\n\n\t\t// we inject this as a root view because, well, apparently that is just an assumption\n\t\t// we've been making...\n\t\tif (!preventRooting) {\n\t\t\troots.addToRoots(this);\n\t\t}\n\n\t\t// now let the delegate render it the way it needs to\n\t\tdelegate.renderInto(this, parentNode);\n\n\t\tDom.updateScaleFactor();\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* A function that fires after the control has rendered. This performs a\n\t* reflow.\n\t*\n\t* @public\n\t*/\n\trendered: function () {\n\t\tvar child,\n\t\t\ti = 0;\n\n\t\t// CAVEAT: Currently we use one entry point ('reflow') for\n\t\t// post-render layout work *and* post-resize layout work.\n\t\tthis.reflow();\n\n\t\tfor (; (child = this.children[i]); ++i) {\n\t\t\tif (child.generated) child.rendered();\n\t\t}\n\t},\n\n\t/**\n\t* You should generally not need to call this method in your app code.\n\t* It is used internally by some Enyo UI libraries to handle a rare\n\t* issue that sometimes arises when using a virtualized list or repeater\n\t* on a touch device.\n\t*\n\t* This issue occurs when a gesture (e.g. a drag) originates with a DOM\n\t* node that ends up being destroyed in mid-gesture as the list updates.\n\t* When the node is destroyed, the stream of DOM events representing the\n\t* gesture stops, causing the associated action to stop or otherwise\n\t* fail.\n\t*\n\t* You can prevent this problem from occurring by calling `retainNode`\n\t* on the {@link enyo.Control} from which the gesture originates. Doing\n\t* so will cause Enyo to keep the DOM node around (hidden from view)\n\t* until you explicitly release it. You should call `retainNode` in the\n\t* event handler for the event that starts the gesture.\n\t*\n\t* `retainNode` returns a function that you must call when the gesture\n\t* ends to release the node. Make sure you call this function to avoid\n\t* \"leaking\" the DOM node (failing to remove it from the DOM).\n\t*\n\t* @param {Node} node - Optional. Defaults to the node associated with\n\t* the Control (`Control.node`). You can generally omit this parameter\n\t* when working with {@link enyo.DataList} or {@link enyo.DataGridList},\n\t* but should generally pass in the event's target node (`event.target`)\n\t* when working with {@link enyo.List}. (Because {@link enyo.List} is\n\t* based on the Flyweight pattern, the event's target node is often not\n\t* the node currently associated with the Control at the time the event\n\t* occurs.)\n\t* @returns {Function} Keep a reference to this function and call it\n\t* to release the node when the gesture has ended.\n\t* @public\n\t*/\n\tretainNode: function(node) {\n\t\tvar control = this,\n\t\t\tretainedNode = this._retainedNode = (node || this.hasNode());\n\t\treturn function() {\n\t\t\tif (control && (control._retainedNode == retainedNode)) {\n\t\t\t\tcontrol._retainedNode = null;\n\t\t\t} else {\n\t\t\t\treleaseRetainedNode(retainedNode);\n\t\t\t}\n\t\t};\n\t},\n\n\t/**\n\t* @param {Boolean} [cache] - Whether or not we are tearing down as part of a destroy\n\t*\toperation, or if we are just caching. If `true`, the `showing` and `canGenerate`\n\t*\tproperties of the control will not be reset.\n\t* @private\n\t*/\n\tteardownRender: function (cache) {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\n\t\tif (this._retainedNode) {\n\t\t\tstoreRetainedNode(this);\n\t\t}\n\n\t\tdelegate.teardownRender(this, cache);\n\n\t\t// if the original state was set with renderOnShow true then we need to reset these\n\t\t// values as well to coordinate the original intent\n\t\tif (this.renderOnShow && !cache) {\n\t\t\tthis.set('showing', false);\n\t\t\tthis.set('canGenerate', false);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tteardownChildren: function () {\n\t\tvar delegate = this.renderDelegate || Control.renderDelegate;\n\n\t\tdelegate.teardownChildren(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\taddNodeToParent: function () {\n\t\tvar pn;\n\n\t\tif (this.node) {\n\t\t\tpn = this.getParentNode();\n\t\t\tif (pn) {\n\t\t\t\tif (this.addBefore !== undefined) {\n\t\t\t\t\tthis.insertNodeInParent(pn, this.addBefore && this.addBefore.hasNode());\n\t\t\t\t} else this.appendNodeToParent(pn);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tappendNodeToParent: function(parentNode) {\n\t\tparentNode.appendChild(this.node);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinsertNodeInParent: function(parentNode, beforeNode) {\n\t\tparentNode.insertBefore(this.node, beforeNode || parentNode.firstChild);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tremoveNodeFromDom: function() {\n\t\tif (this.hasNode() && this.node.parentNode) {\n\t\t\tthis.node.parentNode.removeChild(this.node);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetParentNode: function () {\n\t\treturn this.parentNode || (this.parent && (\n\t\t\tthis.parent.hasNode() || this.parent.getParentNode())\n\t\t);\n\t},\n\n\t// .................................\n\n\t/**\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tvar attrs = props && props.attributes;\n\n\t\t\t// ensure that we both keep an instance copy of defined attributes but also\n\t\t\t// update the hash with any additional instance definitions at runtime\n\t\t\tthis.attributes = this.attributes ? utils.clone(this.attributes) : {};\n\t\t\tif (attrs) {\n\t\t\t\tutils.mixin(this.attributes, attrs);\n\t\t\t\tdelete  props.attributes;\n\t\t\t}\n\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function (props) {\n\t\t\tvar classes;\n\n\t\t\t// initialize the styles for this instance\n\t\t\tthis.style = this.kindStyle + this.style;\n\n\t\t\t// set initial values based on renderOnShow\n\t\t\tthis.renderOnShowChanged();\n\n\t\t\t// super initialization\n\t\t\tsup.apply(this, arguments);\n\n\t\t\t// ensure that if we aren't showing -> true then the correct style\n\t\t\t// is applied - note that there might be issues with this because we are\n\t\t\t// trying not to have to parse out any other explicit display value during\n\t\t\t// initialization and we can't check because we haven't rendered yet\n\t\t\tif (!this.showing) this.style += ' display: none;';\n\n\t\t\t// try and make it so we only need to call the method once during\n\t\t\t// initialization and only then when we have something to add\n\t\t\tclasses = this.kindClasses;\n\t\t\tif (classes && this.classes) classes += (' ' + this.classes);\n\t\t\telse if (this.classes) classes = this.classes;\n\n\t\t\t// if there are known classes needed to be applied from the kind\n\t\t\t// definition and the instance definition (such as a component block)\n\t\t\tthis.classes = this.attributes['class'] = classes ? classes.trim() : classes;\n\n\t\t\t// setup the id for this control if we have one\n\t\t\tthis.idChanged();\n\t\t\tthis.contentChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* Destroys the control and removes it from the [DOM]{@glossary DOM}. Also\n\t* removes the control's ability to receive bubbled events.\n\t*\n\t* @public\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\t// if the control has been rendered we ensure it is removed from the DOM\n\t\t\tthis.removeNodeFromDom();\n\n\t\t\t// ensure no other bubbled events can be dispatched to this control\n\t\t\tdispatcher.$[this.id] = null;\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tdispatchEvent: kind.inherit(function (sup) {\n\t\treturn function (name, event, sender) {\n\t\t\t// prevent dispatch and bubble of events that are strictly internal (e.g.\n\t\t\t// enter/leave)\n\t\t\tif (this.strictlyInternalEvents[name] && this.isInternalEvent(event)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\taddChild: kind.inherit(function (sup) {\n\t\treturn function (control) {\n\t\t\tcontrol.addClass(this.controlClasses);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tremoveChild: kind.inherit(function (sup) {\n\t\treturn function (control) {\n\t\t\tsup.apply(this, arguments);\n\t\t\tcontrol.removeClass(this.controlClasses);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tset: kind.inherit(function (sup) {\n\t\treturn function (path, value, opts) {\n\t\t\t// this should be updated if a better api for hooking becomes available but for\n\t\t\t// now we just do this directly to ensure that the showing value is actually\n\t\t\t// a boolean\n\t\t\tif (path == 'showing') {\n\t\t\t\treturn sup.call(this, path, !! value, opts);\n\t\t\t} else return sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t// .................................\n\t// BACKWARDS COMPATIBLE API, LEGACY METHODS AND PUBLIC PROPERTY\n\t// METHODS OR PROPERTIES THAT PROBABLY SHOULD NOT BE HERE BUT ARE ANYWAY\n\n\t/**\n\t* Apparently used by Ares 2 still but we have the property embedded in the kind...\n\t*\n\t* @deprecated\n\t* @private\n\t*/\n\tisContainer: false,\n\n\t/**\n\t* @private\n\t*/\n\trtl: false,\n\n\t/**\n\t* @private\n\t*/\n\tsetupBodyFitting: function () {\n\t\tDom.applyBodyFit();\n\t\tthis.addClass('enyo-fit enyo-clip');\n\t},\n\n\t/*\n\t* If the platform is Android or Android-Chrome, don't include the css rule\n\t* `-webkit-overflow-scrolling: touch`, as it is not supported in Android and leads to\n\t* overflow issues (ENYO-900 and ENYO-901). Similarly, BB10 has issues repainting\n\t* out-of-viewport content when `-webkit-overflow-scrolling` is used (ENYO-1396).\n\t*\n\t* @private\n\t*/\n\tsetupOverflowScrolling: function () {\n\t\tif(platform.android || platform.androidChrome || platform.blackberry) {\n\t\t\treturn;\n\t\t}\n\t\tDom.addBodyClass('webkitOverflowScrolling');\n\t},\n\n\t/**\n\t* Sets the control's directionality based on its content, or an optional `stringInstead`.\n\t*\n\t* @param {String} [stringInstead] An alternate string for consideration may be sent instead,\n\t*\tin-case the string to test the directionality of the control is stored in `this.value`,\n\t*\tor some other property, for example.\n\t* @private\n\t*/\n\tdetectTextDirectionality: function (stringInstead) {\n\t\t// If an argument was supplied at all, use it, even if it's undefined.\n\t\t// Values that are null or undefined, or are numbers, arrays, and some objects are safe\n\t\t// to be tested.\n\t\tvar str = (arguments.length) ? stringInstead : this.content;\n\t\tif (str || str === 0) {\n\t\t\tthis.rtl = utils.isRtl(str);\n\t\t\tthis.applyStyle('direction', this.rtl ? 'rtl' : 'ltr');\n\t\t} else {\n\t\t\tthis.applyStyle('direction', null);\n\t\t}\n\n\t},\n\n\t// .................................\n\n\t// .................................\n\t// DEPRECATED\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetTag: function () {\n\t\treturn this.tag;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetTag: function (tag) {\n\t\tvar was = this.tag;\n\n\t\tif (tag && typeof tag == 'string') {\n\t\t\tthis.tag = tag;\n\t\t\tif (was !== tag) this.notify('tag', was, tag);\n\t\t}\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetAttributes: function () {\n\t\treturn this.attributes;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetAttributes: function (attrs) {\n\t\tvar was = this.attributes;\n\n\t\tif (typeof attrs == 'object') {\n\t\t\tthis.attributes = attrs;\n\t\t\tif (attrs !== was) this.notify('attributes', was, attrs);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetClasses: function () {\n\t\treturn this.classes;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetClasses: function (classes) {\n\t\tvar was = this.classes;\n\n\t\tthis.classes = classes;\n\t\tif (was != classes) this.notify('classes', was, classes);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetStyle: function () {\n\t\treturn this.style;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetStyle: function (style) {\n\t\tvar was = this.style;\n\n\t\tthis.style = style;\n\t\tif (was != style) this.notify('style', was, style);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetContent: function () {\n\t\treturn this.content;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetContent: function (content) {\n\t\tvar was = this.content;\n\t\tthis.content = content;\n\n\t\tif (was != content) this.notify('content', was, content);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetShowing: function () {\n\t\treturn this.showing;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetShowing: function (showing) {\n\t\tvar was = this.showing;\n\n\t\t// force the showing property to always be a boolean value\n\t\tthis.showing = !! showing;\n\n\t\tif (was != showing) this.notify('showing', was, showing);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetAllowHtml: function () {\n\t\treturn this.allowHtml;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetAllowHtml: function (allow) {\n\t\tvar was = this.allowHtml;\n\t\tthis.allowHtml = !! allow;\n\n\t\tif (was !== allow) this.notify('allowHtml', was, allow);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetCanGenerate: function () {\n\t\treturn this.canGenerate;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetCanGenerate: function (can) {\n\t\tvar was = this.canGenerate;\n\t\tthis.canGenerate = !! can;\n\n\t\tif (was !== can) this.notify('canGenerate', was, can);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tgetFit: function () {\n\t\treturn this.fit;\n\t},\n\n\t/**\n\t* @deprecated\n\t* @public\n\t*/\n\tsetFit: function (fit) {\n\t\tvar was = this.fit;\n\t\tthis.fit = !! fit;\n\n\t\tif (was !== fit) this.notify('fit', was, fit);\n\n\t\treturn this;\n\t},\n\n\t/**\n\t* @ares\n\t* @deprecated\n\t* @public\n\t*/\n\tgetIsContainer: function () {\n\t\treturn this.isContainer;\n\t},\n\n\t/**\n\t* @ares\n\t* @deprecated\n\t* @public\n\t*/\n\tsetIsContainer: function (isContainer) {\n\t\tvar was = this.isContainer;\n\t\tthis.isContainer = !! isContainer;\n\n\t\tif (was !== isContainer) this.notify('isContainer', was, isContainer);\n\n\t\treturn this;\n\t}\n\n\t// .................................\n\n});\n\n/**\n* @static\n* @public\n*/\nkind.setDefaultCtor(Control);\n\n/**\n* @static\n* @public\n*/\nControl.renderDelegate = HTMLStringDelegate;\n\n/**\n* @private\n*/\nControl.registerDomEvents = function (id, control) {\n\tdispatcher.$[id] = control;\n};\n\n/**\n* @private\n*/\nControl.unregisterDomEvents = function (id) {\n\tdispatcher.$[id] = null;\n};\n\n/**\n* @private\n*/\nControl.normalizeCssStyleString = function (style) {\n\treturn style ? (\n\t\t(\";\" + style)\n\t\t// add a semi-colon if it's not the last character (also trim possible unnecessary whitespace)\n\t\t.replace(/([^;])\\s*$/, \"$1;\")\n\t\t// ensure we have one space after each colon or semi-colon\n\t\t.replace(/\\s*;\\s*([\\w-]+)\\s*:\\s*/g, \"; $1: \")\n\t\t// remove first semi-colon and space\n\t\t.substr(2).trim()\n\t) : \"\";\n};\n\n/**\n* @private\n*/\nControl.concat = function (ctor, props, instance) {\n\tvar proto = ctor.prototype || ctor,\n\t\tattrs,\n\t\tstr;\n\n\tif (props.classes) {\n\t\tif (instance) {\n\t\t\tstr = (proto.classes ? (proto.classes + ' ') : '') + props.classes;\n\t\t\tproto.classes = str;\n\t\t} else {\n\t\t\tstr = (proto.kindClasses || '') + (proto.classes ? (' ' + proto.classes) : '');\n\t\t\tproto.kindClasses = str;\n\t\t\tproto.classes = props.classes;\n\t\t}\n\t\tdelete props.classes;\n\t}\n\n\tif (props.style) {\n\t\tif (instance) {\n\t\t\tstr = (proto.style ? (proto.style + ';') : '') + (props.style + ';');\n\t\t\tproto.style = Control.normalizeCssStyleString(str);\n\t\t} else {\n\t\t\tstr = proto.kindStyle ? proto.kindStyle : '';\n\t\t\tstr += proto.style ? (';' + proto.style) : '';\n\t\t\tstr += props.style;\n\n\t\t\t// moved it all to kindStyle so that it will be available whenever instanced\n\t\t\tproto.kindStyle = Control.normalizeCssStyleString(str);\n\t\t}\n\t\tdelete props.style;\n\t}\n\n\tif (props.attributes) {\n\t\tattrs = proto.attributes;\n\t\tproto.attributes = attrs ? utils.mixin({}, [attrs, props.attributes]) : props.attributes;\n\t\tdelete props.attributes;\n\t}\n};\n\nControl.prototype.defaultKind = Control;\n\n// Control has to be *completely* set up before creating the floating layer otherwise things will\n// error out during construction.\n\n/**\n* @static\n* @public\n*/\nControl.FloatingLayer = FloatingLayer(Control);\n\n/**\n* @static\n* @public\n*/\nControl.floatingLayer = new Control.FloatingLayer({id: 'floatingLayer'});","require('../../enyo');\n\nvar\n\tdispatcher = require('./dispatcher'),\n\tgesture = require('./gesture'),\n\tplatform = require('./platform'),\n\tutils = require('./utils');\n\n/**\n* @private\n*/\ndispatcher.features.push(\n\tfunction(e) {\n\t\t// NOTE: beware of properties in gesture inadvertently mapped to event types\n\t\tif (gesture.drag[e.type]) {\n\t\t\treturn gesture.drag[e.type](e);\n\t\t}\n\t}\n);\n\n/**\n* Enyo supports a cross-platform set of drag [events]{@glossary event}. These\n* events allow users to write a single set of event handlers for applications\n* that run on both mobile and desktop platforms.\n*\n* The following events are provided:\n*\n* * 'dragstart'\n* * 'dragfinish'\n* * 'drag'\n* * 'drop'\n* * 'dragover'\n* * 'dragout'\n* * 'hold'\n* * 'release'\n* * 'holdpulse'\n* * 'flick'\n*\n* For more information on these events, see the documentation on\n* [Event Handling]{@linkplain $dev-guide/key-concepts/event-handling.html} in\n* the Enyo Developer Guide.\n*\n* @namespace gesture.drag\n* @public\n*/\nmodule.exports = gesture.drag =\n\t/** @lends gesture.drag */ {\n\n\t/**\n\t* @private\n\t*/\n\tholdPulseDefaultConfig: {\n\t\tfrequency: 200,\n\t\tevents: [{name: 'hold', time: 200}],\n\t\tresume: false,\n\t\tmoveTolerance: 16,\n\t\tendHold: 'onMove'\n\t},\n\n\t/**\n\t* Call this method to specify the framework's 'holdPulse' behavior, which\n\t* determines the nature of the events generated when a user presses and holds\n\t* on a user interface element.\n\t*\n\t* By default, an `onhold` event fires after 200 ms. After that, an `onholdpulse`\n\t* event fires every 200 ms until the user stops holding, at which point a\n\t* `onrelease` event fires.\n\t*\n\t* To change the default behavior, call this method and pass it a holdPulse\n\t* configuration object. The holdPulse configuration object has a number of\n\t* properties.\n\t*\n\t* You can specify a set of custom hold events by setting the `events` property\n\t* to an array containing one or more objects. Each object specifies a custom\n\t* hold event, in the form of a `name` / `time` pair. Notes:\n\t*\n\t*  * Your custom event names should not include the 'on' prefix; that will be\n\t*    added automatically by the framework.\n\t*\n\t*  * Times should be specified in milliseconds.\n\t*\n\t*  * Your `events` array overrides the framework defaults entirely, so if you\n\t*    want the standard `hold` event to fire at 200 ms (in addition to whatever\n\t*    custom events you define), you'll need to redefine it yourself as part of\n\t*    your `events` array.\n\t*\n\t* Regardless of how many custom hold events you define, `onholdpulse` events\n\t* will start firing after the first custom hold event fires, and continue until\n\t* the user stops holding. Likewise, only one `onrelease` event will fire,\n\t* regardless of how many custom hold events you define.\n\t*\n\t* The`frequency` parameter determines not only how often `holdpulse` events are\n\t* sent, but the frequency with which the hold duration is measured. This means\n\t* that the value you set for `frequency` should always be a common factor of the\n\t* times you set for your custom hold events, to ensure accurate event timing.\n\t*\n\t* You can use the `endHold` property to specify the circumstances under which a\n\t* hold is considered to end. Set `endHold` to `onMove` (the default) if you want\n\t* the hold to end as soon as the user's finger or pointer moves. Set `endHold`\n\t* to `onLeave` if you want the hold to end only when the finger or pointer\n\t* leaves the element altogether. When specifying `onMove`, you can also provide\n\t* a `moveTolerance` value (default: `16`) that determines how tolerant you want\n\t* to be of small movements when deciding whether a hold has ended. The higher\n\t* the value, the further a user's finger or pointer may move without causing\n\t* the hold to end.\n\t*\n\t* Finally, the `resume` parameter (default: `false`) specifies whether a hold\n\t* that has ended due to finger / pointer movement should be resumed if the\n\t* user's finger or pointer moves back inside the tolerance threshold (in the\n\t* case of `endHold: onMove`) or back over the element (in the case of\n\t* `endHold: onLeave`).\n\t*\n\t* Here is an example:\n\t*\n\t* ```\n\t* gesture.drag.configureHoldPulse({\n\t*     frequency: 100,\n\t*     events: [\n\t*         {name: 'hold', time: 200},\n\t*         {name: 'longpress', time: 500}\n\t*     ],\n\t*     endHold: 'onLeave',\n\t*     resume: true\n\t* });\n\t* ```\n\t* For comparison, here are the out-of-the-box defaults:\n\t*\n\t* ```\n\t* gesture.drag.configureHoldPulse({\n\t*     frequency: 200,\n\t*     events: [\n\t*         {name: 'hold', time: 200}\n\t*     ],\n\t*     endHold: 'onMove',\n\t*     moveTolerance: 16,\n\t*     resume: false\n\t* });\n\t* ```\n\t*\n\t* The settings you provide via this method will be applied globally, affecting\n\t* every Control. Note that you can also override the defaults on a case-by-case\n\t* basis by handling the `down` event for any Control and calling the\n\t* `configureHoldPulse` method exposed by the event itself. That method works\n\t* exactly like this one, except that the settings you provide will apply only to\n\t* holds on that particular Control.\n\t*\n\t* @public\n\t*/\n\tconfigureHoldPulse: function(config) {\n\t\t// TODO: Might be nice to do some validation, error handling\n\t\tthis.holdPulseDefaultConfig = config;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tholdPulseConfig: {},\n\n\t/**\n\t* @private\n\t*/\n\ttrackCount: 5,\n\n\t/**\n\t* @private\n\t*/\n\tminFlick: 0.1,\n\n\t/**\n\t* @private\n\t*/\n\tminTrack: 8,\n\n\t/**\n\t* @private\n\t*/\n\tdown: function(e) {\n\t\t// tracking if the mouse is down\n\t\t//enyo.log('tracking ON');\n\t\t// Note: 'tracking' flag indicates interest in mousemove, it's turned off\n\t\t// on mouseup\n\t\t// make sure to stop dragging in case the up event was not received.\n\t\tthis.stopDragging(e);\n\t\tthis.target = e.target;\n\t\tthis.startTracking(e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmove: function(e) {\n\t\tif (this.tracking) {\n\t\t\tthis.track(e);\n\t\t\t// If the mouse is not down and we're tracking a drag, abort.\n\t\t\t// this error condition can occur on IE/Webkit after interaction with a scrollbar.\n\t\t\tif (!e.which) {\n\t\t\t\tthis.stopDragging(e);\n\t\t\t\tthis.endHold();\n\t\t\t\tthis.tracking = false;\n\t\t\t\t//enyo.log('gesture.drag: mouse must be down to drag.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.dragEvent) {\n\t\t\t\tthis.sendDrag(e);\n\t\t\t} else if (this.holdPulseConfig.endHold === 'onMove') {\n\t\t\t\tif (this.dy*this.dy + this.dx*this.dx >= this.holdPulseConfig.moveTolerance) { // outside of target\n\t\t\t\t\tif (this.holdJob) { // only stop/cancel hold job if it currently exists\n\t\t\t\t\t\tif (this.holdPulseConfig.resume) { // pause hold to potentially resume later\n\t\t\t\t\t\t\tthis.suspendHold();\n\t\t\t\t\t\t} else { // completely cancel hold\n\t\t\t\t\t\t\tthis.endHold();\n\t\t\t\t\t\t\tthis.sendDragStart(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (this.holdPulseConfig.resume && !this.holdJob) { // when moving inside target, only resume hold job if it was previously paused\n\t\t\t\t\tthis.resumeHold();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tup: function(e) {\n\t\tthis.endTracking(e);\n\t\tthis.stopDragging(e);\n\t\tthis.endHold();\n\t\tthis.target = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tenter: function(e) {\n\t\t// resume hold when re-entering original target when using 'onLeave' endHold value\n\t\tif (this.holdPulseConfig.resume && this.holdPulseConfig.endHold === 'onLeave' && this.target && e.target === this.target) {\n\t\t\tthis.resumeHold();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tleave: function(e) {\n\t\tif (this.dragEvent) {\n\t\t\tthis.sendDragOut(e);\n\t\t} else if (this.holdPulseConfig.endHold === 'onLeave') {\n\t\t\tif (this.holdPulseConfig.resume) { // pause hold to potentially resume later\n\t\t\t\tthis.suspendHold();\n\t\t\t} else { // completely cancel hold\n\t\t\t\tthis.endHold();\n\t\t\t\tthis.sendDragStart(e);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstopDragging: function(e) {\n\t\tif (this.dragEvent) {\n\t\t\tthis.sendDrop(e);\n\t\t\tvar handled = this.sendDragFinish(e);\n\t\t\tthis.dragEvent = null;\n\t\t\treturn handled;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmakeDragEvent: function(inType, inTarget, inEvent, inInfo) {\n\t\tvar adx = Math.abs(this.dx), ady = Math.abs(this.dy);\n\t\tvar h = adx > ady;\n\t\t// suggest locking if off-axis < 22.5 degrees\n\t\tvar l = (h ? ady/adx : adx/ady) < 0.414;\n\t\tvar e = {};\n\t\t// var e = {\n\t\te.type = inType;\n\t\te.dx = this.dx;\n\t\te.dy = this.dy;\n\t\te.ddx = this.dx - this.lastDx;\n\t\te.ddy = this.dy - this.lastDy;\n\t\te.xDirection = this.xDirection;\n\t\te.yDirection = this.yDirection;\n\t\te.pageX = inEvent.pageX;\n\t\te.pageY = inEvent.pageY;\n\t\te.clientX = inEvent.clientX;\n\t\te.clientY = inEvent.clientY;\n\t\te.horizontal = h;\n\t\te.vertical = !h;\n\t\te.lockable = l;\n\t\te.target = inTarget;\n\t\te.dragInfo = inInfo;\n\t\te.ctrlKey = inEvent.ctrlKey;\n\t\te.altKey = inEvent.altKey;\n\t\te.metaKey = inEvent.metaKey;\n\t\te.shiftKey = inEvent.shiftKey;\n\t\te.srcEvent = inEvent.srcEvent;\n\t\t// };\n\t\t//Fix for IE8, which doesn't include pageX and pageY properties\n\t\tif(platform.ie==8 && e.target) {\n\t\t\te.pageX = e.clientX + e.target.scrollLeft;\n\t\t\te.pageY = e.clientY + e.target.scrollTop;\n\t\t}\n\t\te.preventDefault = gesture.preventDefault;\n\t\te.disablePrevention = gesture.disablePrevention;\n\t\treturn e;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDragStart: function(e) {\n\t\t//enyo.log('dragstart');\n\t\tthis.dragEvent = this.makeDragEvent('dragstart', this.target, e);\n\t\tdispatcher.dispatch(this.dragEvent);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDrag: function(e) {\n\t\t//enyo.log('sendDrag to ' + this.dragEvent.target.id + ', over to ' + e.target.id);\n\t\t// send dragOver event to the standard event target\n\t\tvar synth = this.makeDragEvent('dragover', e.target, e, this.dragEvent.dragInfo);\n\t\tdispatcher.dispatch(synth);\n\t\t// send drag event to the drag source\n\t\tsynth.type = 'drag';\n\t\tsynth.target = this.dragEvent.target;\n\t\tdispatcher.dispatch(synth);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDragFinish: function(e) {\n\t\t//enyo.log('dragfinish');\n\t\tvar synth = this.makeDragEvent('dragfinish', this.dragEvent.target, e, this.dragEvent.dragInfo);\n\t\tsynth.preventTap = function() {\n\t\t\tif (e.preventTap) {\n\t\t\t\te.preventTap();\n\t\t\t}\n\t\t};\n\t\tdispatcher.dispatch(synth);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDragOut: function(e) {\n\t\tvar synth = this.makeDragEvent('dragout', e.target, e, this.dragEvent.dragInfo);\n\t\tdispatcher.dispatch(synth);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendDrop: function(e) {\n\t\tvar synth = this.makeDragEvent('drop', e.target, e, this.dragEvent.dragInfo);\n\t\tsynth.preventTap = function() {\n\t\t\tif (e.preventTap) {\n\t\t\t\te.preventTap();\n\t\t\t}\n\t\t};\n\t\tdispatcher.dispatch(synth);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstartTracking: function(e) {\n\t\tthis.tracking = true;\n\t\t// note: use clientX/Y to be compatible with ie8\n\t\tthis.px0 = e.clientX;\n\t\tthis.py0 = e.clientY;\n\t\t// this.flickInfo = {startEvent: e, moves: []};\n\t\tthis.flickInfo = {};\n\t\tthis.flickInfo.startEvent = e;\n\t\t// FIXME: so we're trying to reuse objects where possible, should\n\t\t// do the same in scenarios like this for arrays\n\t\tthis.flickInfo.moves = [];\n\t\tthis.track(e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttrack: function(e) {\n\t\tthis.lastDx = this.dx;\n\t\tthis.lastDy = this.dy;\n\t\tthis.dx = e.clientX - this.px0;\n\t\tthis.dy = e.clientY - this.py0;\n\t\tthis.xDirection = this.calcDirection(this.dx - this.lastDx, 0);\n\t\tthis.yDirection = this.calcDirection(this.dy - this.lastDy, 0);\n\t\t//\n\t\tvar ti = this.flickInfo;\n\t\tti.moves.push({\n\t\t\tx: e.clientX,\n\t\t\ty: e.clientY,\n\t\t\tt: utils.perfNow()\n\t\t});\n\t\t// track specified # of points\n\t\tif (ti.moves.length > this.trackCount) {\n\t\t\tti.moves.shift();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tendTracking: function() {\n\t\tthis.tracking = false;\n\t\tvar ti = this.flickInfo;\n\t\tvar moves = ti && ti.moves;\n\t\tif (moves && moves.length > 1) {\n\t\t\t// note: important to use up time to reduce flick\n\t\t\t// velocity based on time between move and up.\n\t\t\tvar l = moves[moves.length-1];\n\t\t\tvar n = utils.perfNow();\n\t\t\t// take the greatest of flick between each tracked move and last move\n\t\t\tfor (var i=moves.length-2, dt=0, x1=0, y1=0, x=0, y=0, sx=0, sy=0, m; (m=moves[i]); i--) {\n\t\t\t\t// this flick (this move - last move) / (this time - last time)\n\t\t\t\tdt = n - m.t;\n\t\t\t\tx1 = (l.x - m.x) / dt;\n\t\t\t\ty1 = (l.y - m.y) / dt;\n\t\t\t\t// establish flick direction\n\t\t\t\tsx = sx || (x1 < 0 ? -1 : (x1 > 0 ? 1 : 0));\n\t\t\t\tsy = sy || (y1 < 0 ? -1 : (y1 > 0 ? 1 : 0));\n\t\t\t\t// if either axis is a greater flick than previously recorded use this one\n\t\t\t\tif ((x1 * sx > x * sx) || (y1 * sy > y * sy)) {\n\t\t\t\t\tx = x1;\n\t\t\t\t\ty = y1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar v = Math.sqrt(x*x + y*y);\n\t\t\tif (v > this.minFlick) {\n\t\t\t\t// generate the flick using the start event so it has those coordinates\n\t\t\t\tthis.sendFlick(ti.startEvent, x, y, v);\n\t\t\t}\n\t\t}\n\t\tthis.flickInfo = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcDirection: function(inNum, inDefault) {\n\t\treturn inNum > 0 ? 1 : (inNum < 0 ? -1 : inDefault);\n\t},\n\n\t/**\n\t* Translate the old format for holdPulseConfig to the new one, to\n\t* preserve backward compatibility.\n\t*\n\t* @private\n\t*/\n\tnormalizeHoldPulseConfig: function (oldOpts) {\n\t\tvar nOpts = utils.clone(oldOpts);\n\t\tnOpts.frequency = nOpts.delay;\n\t\tnOpts.events = [{name: 'hold', time: nOpts.delay}];\n\t\treturn nOpts;\n\t},\n\n\t/**\n\t* Method to override holdPulseConfig for a given gesture. This method isn't\n\t* accessed directly from gesture.drag, but exposed by the `down` event.\n\t* See `prepareHold()`.\n\t*\n\t* @private\n\t*/\n\t_configureHoldPulse: function(opts) {\n\t\tvar nOpts = (opts.delay === undefined) ?\n\t\t\topts :\n\t\t\tthis.normalizeHoldPulseConfig(opts);\n\t\tutils.mixin(this.holdPulseConfig, nOpts);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tprepareHold: function(e) {\n\t\t// quick copy as the prototype of the new overridable config\n\t\tthis.holdPulseConfig = utils.clone(this.holdPulseDefaultConfig, true);\n\n\t\t// expose method for configuring holdpulse options\n\t\te.configureHoldPulse = this._configureHoldPulse.bind(this);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbeginHold: function(e) {\n\t\tvar ce;\n\t\t// cancel any existing hold since it's possible in corner cases to get a down without an up\n\t\tthis.endHold();\n\t\tthis.holdStart = utils.perfNow();\n\t\tthis._holdJobFunction = utils.bind(this, 'handleHoldPulse');\n\t\t// clone the event to ensure it stays alive on IE upon returning to event loop\n\t\tce = this._holdJobEvent = utils.clone(e);\n\t\tce.srcEvent = utils.clone(e.srcEvent);\n\t\tthis._pulsing = false;\n\t\tthis._unsent = utils.clone(this.holdPulseConfig.events);\n\t\tthis._unsent.sort(this.sortEvents);\n\t\tthis._next = this._unsent.shift();\n\t\tif (this._next) {\n\t\t\tthis.holdJob = setInterval(this._holdJobFunction, this.holdPulseConfig.frequency);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresumeHold: function() {\n\t\tthis.handleHoldPulse();\n\t\tthis.holdJob = setInterval(this._holdJobFunction, this.holdPulseConfig.frequency);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsortEvents: function(a, b) {\n\t\t\tif (a.time < b.time) return -1;\n\t\t\tif (a.time > b.time) return 1;\n\t\t\treturn 0;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tendHold: function() {\n\t\tvar e = this._holdJobEvent;\n\t\tthis.suspendHold();\n\t\tif (e && this._pulsing) {\n\t\t\tthis.sendRelease(e);\n\t\t}\n\t\tthis._pulsing = false;\n\t\tthis._unsent = null;\n\t\tthis._holdJobFunction = null;\n\t\tthis._holdJobEvent = null;\n\t\tthis._next = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsuspendHold: function() {\n\t\tclearInterval(this.holdJob);\n\t\tthis.holdJob = null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandleHoldPulse: function() {\n\t\tvar holdTime = utils.perfNow() - this.holdStart,\n\t\t\thje = this._holdJobEvent,\n\t\t\te;\n\t\tthis.maybeSendHold(hje, holdTime);\n\t\tif (this._pulsing) {\n\t\t\te = gesture.makeEvent('holdpulse', hje);\n\t\t\te.holdTime = holdTime;\n\t\t\tdispatcher.dispatch(e);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaybeSendHold: function(inEvent, inHoldTime) {\n\t\tvar n = this._next;\n\t\twhile (n && n.time <= inHoldTime) {\n\t\t\tvar e = gesture.makeEvent(n.name, inEvent);\n\t\t\tthis._pulsing = true;\n\t\t\tdispatcher.dispatch(e);\n\t\t\tn = this._next = this._unsent.shift();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendRelease: function(inEvent) {\n\t\tvar e = gesture.makeEvent('release', inEvent);\n\t\tdispatcher.dispatch(e);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsendFlick: function(inEvent, inX, inY, inV) {\n\t\tvar e = gesture.makeEvent('flick', inEvent);\n\t\te.xVelocity = inX;\n\t\te.yVelocity = inY;\n\t\te.velocity = inV;\n\t\tdispatcher.dispatch(e);\n\t}\n};","/*\n * glue.js - glue code to fit ilib into enyo\n *\n * Copyright  2013-2014 LG Electronics, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar\n\tdom = require('../../enyo/lib/dom'),\n\thooks = require('../../enyo/lib/hooks'),\n\tplatform = require('../../enyo/lib/platform'),\n\tutils = require('../../enyo/lib/utils'),\n\tAjax = require('../../enyo/lib/Ajax'),\n\tControl = require('../../enyo/lib/Control');\n\nvar\n\tZoneInfoFile = require('./zoneinfo');\n\nmodule.exports = function (ilib) {\n\n\tvar enyoLoader = function() {\n\t\tthis.base = \"ilib/\";\n\t\tif (platform.platformName === \"webos\") {\n\t\t\tthis.webos = true;\n\t\t}\n\t};\n\n\tenyoLoader.prototype = new ilib.Loader();\n\tenyoLoader.prototype.constructor = enyoLoader;\n\n\tenyoLoader.prototype._createZoneFile = function (path) {\n\t\tvar zone = path.substring(path.indexOf(\"zoneinfo\"));\n\n\t\t// remove the .json suffix to get the name of the zone\n\t\tzone = zone.substring(0, zone.length-5);\n\n\t\ttry {\n\t\t\tvar zif = new ZoneInfoFile(\"/usr/share/\" + zone);\n\n\t\t\t// only get the info for this year. Later we can get the info\n\t\t\t// for any historical or future year too\n\t\t\treturn zif.getIlibZoneInfo(new Date());\n\t\t} catch (e) {\n\t\t\t// no file, so just return nothing\n\t\t\treturn undefined;\n\t\t}\n\t};\n\n\tenyoLoader.prototype._pathjoin = function (root, subpath) {\n\t\tif (!root || !root.length) {\n\t\t\treturn subpath;\n\t\t}\n\t\tif (!subpath || !subpath.length) {\n\t\t\treturn root;\n\t\t}\n\t\treturn root + (root.charAt(root.length-1) !== '/' ? '/' : \"\") + subpath;\n\t};\n\n\t/**\n\t * Load the list of files asynchronously. This uses recursion in\n\t * order to create a queue of files that will be loaded serially.\n\t * Each layer, starting at the bottom, loads a file and then loads\n\t * the layer on top of it. The very top file on the stack will have\n\t * zero files to load, so instead it will be the one to call the\n\t * callback to notify the caller that all the content is loaded.\n\t *\n\t * @param {Object} context function to call this method in the context of\n\t * @param {Array.<string>} paths array of strings containing relative paths for required locale data files\n\t * @param {Array} results empty array in which to place the resulting json when it is loaded from a file\n\t * @param {Object} params An object full of parameters that the caller is passing to this function to help load the files\n\t * @param {function(Array.<Object>)} callback callback to call when this function is finished attempting\n\t * to load all the files that exist and can be loaded\n\t */\n\tenyoLoader.prototype._loadFilesAsync = function (context, paths, results, params, callback) {\n\t\tvar root = \"resources\";\n\t\tif (params && typeof(params.root) !== \"undefined\") {\n\t\t\troot = params.root;\n\t\t}\n\t\tif (paths.length > 0) {\n\t\t\tvar path = paths.shift(),\n\t\t\t\turl = undefined;\n\n\t\t\tif (this.webos && path.indexOf(\"zoneinfo\") !== -1) {\n\t\t\t\tresults.push(this._createZoneFile(path));\n\t\t\t} else {\n\t\t\t\tif (this.isAvailable(root, path)) {\n\t\t\t\t\turl = this._pathjoin(root, path);\n\t\t\t\t} else if (this.isAvailable(this.base + \"locale\", path)) {\n\t\t\t\t\turl = this._pathjoin(this._pathjoin(this.base, \"locale\"), path)\n\t\t\t\t}\n\n\t\t\t\tvar resultFunc = function(inSender, json) {\n\t                // console.log(\"enyo-ilib/glue: \" + (!inSender.failed && json ? \"success\" : \"failed\"));\n\t\t\t\t\tresults.push(!inSender.failed && (typeof(json) === 'object') ? json : undefined);\n\t\t\t\t\tif (paths.length > 0) {\n\t\t\t\t\t\tthis._loadFilesAsync(context, paths, results, params, callback);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// only the bottom item on the stack will call\n\t\t\t\t\t\t// the callback\n\t\t\t\t\t\tcallback.call(context, results);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (url) {\n\t\t\t\t\tvar ajax = new Ajax({\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tcacheBust: false\n\t\t\t\t\t});\n\t\t\t\t\t// console.log(\"enyo-ilib/glue: browser/async: attempting to load \" + url);\n\t\t\t\t\tajax.response(this, resultFunc);\n\t\t\t\t\tajax.error(this, resultFunc);\n\t\t\t\t\tajax.go();\n\t\t\t\t} else {\n\t\t\t\t\t// nothing to load, so go to the next file\n\t\t\t\t\tresultFunc({}, undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tenyoLoader.prototype.loadFiles = function(paths, sync, params, callback) {\n\t\tif (sync) {\n\t\t\tvar ret = [];\n\t\t\tvar root = \"resources\";\n\t\t\tvar locdata = this._pathjoin(this.base, \"locale\");\n\t\t\tif (params && typeof(params.root) !== \"undefined\") {\n\t\t\t\troot = params.root;\n\t\t\t}\n\t\t\t// synchronous\n\t\t\tutils.forEach(paths, function (path) {\n\t\t\t\tif (this.webos && path.indexOf(\"zoneinfo\") !== -1) {\n\t\t\t\t\tret.push(this._createZoneFile(path));\n\t\t\t\t} else {\n\t\t\t\t\tvar found = false;\n\n\t\t\t\t\tvar handler = function(inSender, json) {\n\t                    // console.log((!inSender.failed && json ? \"success\" : \"failed\"));\n\t\t\t\t\t\tif (!inSender.failed && typeof(json) === 'object') {\n\t\t\t\t\t\t\tret.push(json);\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// console.log(\"browser/sync: attempting to load lib/enyo-ilib/ilib/locale/\" + path);\n\t\t\t\t\tif (this.isAvailable(root, path)) {\n\t\t\t\t\t\tvar ajax = new Ajax({\n\t\t\t\t\t\t\turl: this._pathjoin(root, path),\n\t\t\t\t\t\t\tsync: true,\n\t\t\t\t\t\t\tcacheBust: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tajax.response(this, handler);\n\t\t\t\t\t\tajax.error(this, handler);\n\t\t\t\t\t\tajax.go();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!found && this.isAvailable(locdata, path)) {\n\t\t\t\t\t\tvar ajax = new Ajax({\n\t\t\t\t\t\t\turl: this._pathjoin(locdata, path),\n\t\t\t\t\t\t\tsync: true,\n\t\t\t\t\t\t\tcacheBust: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tajax.response(this, handler);\n\t\t\t\t\t\tajax.error(this, handler);\n\t\t\t\t\t\tajax.go();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!found) {\n\t\t\t\t\t\t// not there, so fill in a blank entry in the array\n\t\t\t\t\t\tret.push(undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tif (typeof(callback) === 'function') {\n\t\t\t\tcallback.call(this, ret);\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\n\t\t// asynchronous\n\t\tvar results = [];\n\t\tthis._loadFilesAsync(this, paths, results, params, callback);\n\t};\n\n\tenyoLoader.prototype._loadManifest = function (root, subpath) {\n\t\tif (!this.manifest) {\n\t\t\tthis.manifest = {};\n\t\t}\n\n\t\tvar dirpath = this._pathjoin(root, subpath);\n\t\tvar filepath = this._pathjoin(dirpath, \"ilibmanifest.json\");\n\n\t\t// util.print(\"enyo loader: loading manifest \" + filepath + \"\\n\");\n\t\tvar ajax = new Ajax({\n\t\t\turl: filepath,\n\t\t\tsync: true,\n\t\t\tcacheBust: false,\n\t\t\thandleAs: \"json\"\n\t\t});\n\n\t\tvar handler = function(inSender, json) {\n\t        // console.log((!inSender.failed && json ? \"success\" : \"failed\"));\n\t\t\t// star indicates there was no ilibmanifest.json, so always try to load files from that dir\n\t\t\tthis.manifest[dirpath] = (!inSender.failed && typeof(json) === 'object') ? json.files : \"*\";\n\t\t};\n\n\t\tajax.response(this, handler);\n\t\tajax.error(this, handler);\n\t\tajax.go();\n\t},\n\n\tenyoLoader.prototype._loadStandardManifests = function() {\n\t\t// util.print(\"enyo loader: load manifests\\n\");\n\t\tif (!this.manifest) {\n\t\t\tthis._loadManifest(this.base, \"locale\"); // standard ilib locale data\n\t\t\tthis._loadManifest(\"\", \"resources\");     // the app's resources dir\n\t\t}\n\t};\n\tenyoLoader.prototype.listAvailableFiles = function() {\n\t\t// util.print(\"enyo loader: list available files called\\n\");\n\t\tthis._loadStandardManifests();\n\t\treturn this.manifest;\n\t};\n\tenyoLoader.prototype.isAvailable = function(root, path) {\n\t\tthis._loadStandardManifests();\n\n\t\tif (!this.manifest[root]) {\n\t\t\t// maybe it's a custom root? If so, try to load\n\t\t\t// the manifest file first in case it is there\n\t\t\tthis._loadManifest(root, \"\");\n\t\t}\n\n\t\t// util.print(\"enyo loader: isAvailable \" + path + \"? \");\n\t\t// star means attempt to load everything because there was no manifest in that dir\n\t\tif (this.manifest[root] === \"*\" || ilib.indexOf(this.manifest[root], path) !== -1) {\n\t\t\t// util.print(\"true\\n\");\n\t\t\treturn true;\n\t\t}\n\n\t\t// util.print(\"false\\n\");\n\t\treturn false;\n\t};\n\n\tilib.setLoaderCallback(new enyoLoader());\n\n\tif (typeof(window.UILocale) !== 'undefined') {\n\t\t// this is a hack until GF-1581 is fixed\n\t\tilib.setLocale(window.UILocale);\n\t}\n\n\t/*\n\t * Tell whether or not the given locale is considered a non-Latin locale for webOS purposes. This controls\n\t * which fonts are used in various places to show the various languages. An undefined spec parameter means\n\t * to test the current locale.\n\t *\n\t * @param {ilib.Locale|string|undefined} spec locale specifier or locale object of the locale to test, or undefined\n\t * to test the current locale\n\t */\n\tfunction isNonLatinLocale (spec) {\n\t\tvar li = new ilib.LocaleInfo(spec),\n\t\t\tlocale = li.getLocale();\n\n\t    // We use the non-latin fonts for these languages (even though their scripts are technically considered latin)\n\t    var nonLatinLanguageOverrides = [\"bs\", \"cs\", \"ha\", \"hr\", \"hu\", \"lv\", \"lt\", \"pl\", \"ro\", \"sr\", \"sl\", \"tr\", \"vi\"];\n\t    // We use the latin fonts (with non-Latin fallback) for these languages (even though their scripts are non-latin)\n\t    var latinLanguageOverrides = [\"ko\"];\n\t\treturn ((li.getScript() !== \"Latn\" || utils.indexOf(locale.getLanguage(), nonLatinLanguageOverrides) !== -1) &&\n\t\t\t(utils.indexOf(locale.getLanguage(), latinLanguageOverrides) < 0));\n\t};\n\n\t// enyo.updateI18NClasses should be called after every setLocale, but there isn't such a callback in current version\n\tfunction updateI18NClasses () {\n\t    var li = new ilib.LocaleInfo(); // for the current locale\n\t    var locale = li.getLocale();\n\t\tvar base = \"enyo-locale-\";\n\n\t    // Remove old style definitions (hack style becouse enyo.dom doesn't have methods like enyo.dom.getBodyClasses, enyo.dom.removeBodyClass)\n\t    if (document && document.body && document.body.className && document.body.className) {\n\t        document.body.className = document.body.className.replace(new RegExp('(^|\\\\s)'+ base +'[^\\\\s]*', 'g'), '');\n\t    }\n\n\t\tif (isNonLatinLocale(locale)) {\n\t\t\t// allow enyo to define other fonts for non-Latin languages, or for certain\n\t\t\t// Latin-based languages where the characters with some accents don't appear in the\n\t\t\t// regular fonts, creating a strange \"ransom note\" look with a mix of fonts in the\n\t\t\t// same word. So, treat it like a non-Latin language in order to get all the characters\n\t\t\t// to display with the same font.\n\t\t\tdom.addBodyClass(base + \"non-latin\");\n\t\t}\n\n\t\tvar scriptName = li.getScript();\n\t\tif (scriptName !== 'Latn' && scriptName !== 'Cyrl' && scriptName !== 'Grek') {\n\t\t\t// GF-45884: allow enyo to avoid setting italic fonts for those scripts that do not\n\t\t\t// commonly use italics\n\t\t\tdom.addBodyClass(base + \"non-italic\");\n\t\t}\n\n\t\t// allow enyo to apply right-to-left styles to the app and widgets if necessary\n\t\tvar script = new ilib.ScriptInfo(scriptName);\n\t\tif (script.getScriptDirection() === \"rtl\") {\n\t\t\tdom.addBodyClass(base + \"right-to-left\");\n\t\t\tControl.prototype.rtl = true;\n\t\t} else {\n\t\t\tControl.prototype.rtl = false;\n\t\t}\n\n\t\t// allow enyo or the apps to give CSS classes that are specific to the language, country, or script\n\t\tif (locale.getLanguage()) {\n\t\t\tdom.addBodyClass(base + locale.getLanguage());\n\t\t\tif (locale.getScript()) {\n\t\t\t\tdom.addBodyClass(base + locale.getLanguage() + \"-\" + locale.getScript());\n\t\t\t\tif (locale.getRegion()) {\n\t\t\t\t\tdom.addBodyClass(base + locale.getLanguage() + \"-\" + locale.getScript() + \"-\" + locale.getRegion());\n\t\t\t\t}\n\t\t\t} else if (locale.getRegion()) {\n\t\t\t\tdom.addBodyClass(base + locale.getLanguage() + \"-\" + locale.getRegion());\n\t\t\t}\n\t\t}\n\t\tif (locale.getScript()) {\n\t\t\tdom.addBodyClass(base + locale.getScript());\n\t\t}\n\t\tif (locale.getRegion()) {\n\t\t\tdom.addBodyClass(base + locale.getRegion());\n\t\t}\n\t\t// Recreate the case mappers to use the just-recently-set locale\n\t \tsetCaseMappers();\n\t};\n\n\t/*\n\t * Reset the $L function to use ilib instead of the dummy function that enyo\n\t * comes with by default.\n\t */\n\thooks.$L = function (string) {\n\t\tvar str;\n\t\tif (!hooks.$L.rb) {\n\t\t\thooks.$L.setLocale();\n\t\t}\n\t\tif (typeof(string) === 'string') {\n\t\t\tif (!hooks.$L.rb) {\n\t\t\t\treturn string;\n\t\t\t}\n\t\t\tstr = hooks.$L.rb.getString(string);\n\t\t} else if (typeof(string) === 'object') {\n\t\t\tif (typeof(string.key) !== 'undefined' && typeof(string.value) !== 'undefined') {\n\t\t\t\tif (!hooks.$L.rb) {\n\t\t\t\t\treturn string.value;\n\t\t\t\t}\n\t\t\t\tstr = hooks.$L.rb.getString(string.value, string.key);\n\t\t\t} else {\n\t\t\t\tstr = \"\";\n\t\t\t}\n\t\t} else {\n\t\t\tstr = string;\n\t\t}\n\t\treturn str.toString();\n\t};\n\n\t/**\n\t * Set the locale for the strings that $L loads. This may reload the\n\t * string resources if necessary.\n\t * @param {string} spec the locale specifier\n\t */\n\thooks.$L.setLocale = function (spec) {\n\t\tvar locale = new ilib.Locale(spec);\n\t\tif (!hooks.$L.rb || spec !== hooks.$L.rb.getLocale().getSpec()) {\n\t\t\thooks.$L.rb = new ilib.ResBundle({\n\t\t\t\tlocale: locale,\n\t\t\t\ttype: \"html\",\n\t\t\t\tname: \"strings\",\n\t\t\t\tsync: true,\n\t\t\t\tlengthen: true\t\t// if pseudo-localizing, this tells it to lengthen strings\n\t\t\t});\n\t\t}\n\t};\n\n\tvar toLowerCaseMapper, toUpperCaseMapper;\n\n\t/**\n\t * Set CaseMapper object references to ilib's current locale (its most recently set, by default)\n\t */\n\tfunction setCaseMappers () {\n\t\ttoLowerCaseMapper = new ilib.CaseMapper({direction: \"tolower\"});\n\t\ttoUpperCaseMapper = new ilib.CaseMapper({direction: \"toupper\"});\n\t};\n\n\t/**\n\t * Override Enyo's toLowerCase and toUpperCase methods with these fancy ones\n\t * that call iLib's locale-safe case mapper.\n\t */\n\tutils.toLowerCase = function (inString) {\n\t\tif (inString != null) {\n\t\t\treturn toLowerCaseMapper.map(inString.toString());\n\t\t}\n\t\treturn inString;\n\t};\n\tutils.toUpperCase = function (inString) {\n\t\tif (inString != null) {\n\t\t\treturn toUpperCaseMapper.map(inString.toString());\n\t\t}\n\t\treturn inString;\n\t};\n\n\t/**\n\t * This Enyo hook lets us know that the system locale has changed and gives\n\t * us a chance to update the iLib locale before Enyo broadcasts its\n\t * `onlocalechange` signal.\n\t * Provide an inLocale string, like \"en-US\" or \"ja-JP\", to conveniently set\n\t * that locale immediately. Provide nothing, and reset the locale back to the\n\t * browser's default language.\n\t */\n\t(function(originalUpdateLocale) {\n\t\thooks.updateLocale = function(inLocale) {\n\t\t\t// blow away the cache to force it to reload the manifest files for the new app\n\t\t\tif (ilib._load) ilib._load.manifest = undefined;\n\t\t\tilib.setLocale(inLocale || navigator.language);\n\t\t\thooks.$L.setLocale(inLocale || navigator.language);\n\t\t\tupdateI18NClasses();\n\t\t\toriginalUpdateLocale();\n\t\t};\n\t})(hooks.updateLocale);\n\n\t// we go ahead and run this once during loading of iLib settings are valid\n\t// during the loads of later libraries.\n\thooks.updateLocale(null, true);\n\n\treturn {\n\t\tupdateI18NClasses: updateI18NClasses,\n\t\tisNonLatinLocale: isNonLatinLocale\n\t};\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tControl = require('./Control');\n\n/**\n* {@link enyo.Anchor} implements an HTML [anchor]{@glossary Anchor} (&lt;a&gt;) tag.\n* Published properties allow you to [bind]{@link enyo.BindingSupport} the anchor's\n* [href]{@link enyo.Anchor#href} and [title]{@link enyo.Anchor#title}\n* [attributes]{@glossary Attribute} to appropriate fields on data\n* [objects]{@glossary Object}.\n* \n* @class enyo.Anchor\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Anchor.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Anchor',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'a',\n\n\t/** \n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Anchor.prototype */ {\n\t\t\n\t\t/** \n\t\t* Maps to the `href` [attribute]{@glossary Attribute} of the &lt;a&gt; tag.\n\t\t* \n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\thref: '',\n\n\t\t/**\n\t\t* Maps to the `title` [attribute]{@glossary Attribute} of the &lt;a&gt; tag.\n\t\t* \n\t\t* @type {String}\n\t\t* @default  ''\n\t\t* @public\n\t\t*/\n\t\ttitle: ''\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.hrefChanged();\n\t\t\tthis.titleChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\threfChanged: function () {\n\t\tthis.setAttribute('href', this.href);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttitleChanged: function () {\n\t\tthis.setAttribute('title', this.title);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils');\nvar\n\tControl = require('./Control'),\n\tRepeaterChildSupport = require('./RepeaterChildSupport');\n\n/**\n* {@link enyo.DataRepeater} iterates over the items in an {@link enyo.Collection} to\n* repeatedly render and synchronize records (instances of {@link enyo.Model}) to its\n* own children. For any record in the collection, a new child will be rendered in\n* the repeater. If the record is destroyed, the child will be destroyed. These\n* [controls]{@link enyo.Control} will automatically update when properties on the\n* underlying records are modified if they have been bound using\n* [bindings]{@link enyo.Binding}.\n*\n* @class enyo.DataRepeater\n* @extends enyo.Control\n* @ui\n* @public\n*/\nvar DataRepeater = module.exports = kind(\n\t/** @lends enyo.DataRepeater.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.DataRepeater',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* Set this to `true` to enable selection support. Note that selection stores a\n\t* reference to the [model]{@link enyo.Model} that is selected, via the\n\t* [selected]{@link enyo.DataRepeater#selected} method.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tselection: true,\n\n\t/**\n\t* Specifies the type of selection (if enabled), that we want to enable. The possible values\n\t* are 'single', 'multi', and 'group'. The default is 'single' selection mode, which enables\n\t* selection and deselection of a single item at a time. The 'multi' selection mode allows\n\t* multiple children to be selected simultaneously, while the 'group' selection mode allows\n\t* group-selection behavior such that only one child may be selected at a time and, once a\n\t* child is selected, it cannot be deselected via user input. The child may still be \n\t* deselected via the selection API methods.\n\t* \n\t* @type {String}\n\t* @default 'single'\n\t* @public\n\t*/\n\tselectionType: 'single',\n\n\t/**\n\t* Set this to `true` to allow multiple children to be selected simultaneously.\n\t*\n\t* @deprecated since version 2.6\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tmultipleSelection: false,\n\n\t/**\n\t* Set this to `true` to allow group-selection behavior such that only one child\n\t* may be selected at a time and, once a child is selected, it cannot be\n\t* deselected via user input. The child may still be deselected via the selection\n\t* API methods. Note that setting this property to `true` will set the\n\t* [multipleSelection]{@link enyo.DataRepeater#multipleSelection} property to\n\t* `false`.\n\t*\n\t* @deprecated since version 2.6\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tgroupSelection: false,\n\n\t/**\n\t* This class will be applied to the [repeater]{@link enyo.DataRepeater} when\n\t* [selection]{@link enyo.DataRepeater#selection} is enabled. It will also be\n\t* applied if [multipleSelection]{@link enyo.DataRepeater#multipleSelection}\n\t* is `true`.\n\t*\n\t* @type {String}\n\t* @default 'selection-enabled'\n\t* @public\n\t*/\n\tselectionClass: 'selection-enabled',\n\n\t/**\n\t* This class will be applied to the [repeater]{@link enyo.DataRepeater} when\n\t* [selectionType]{@link enyo.DataRepeater#selectionType} is `multi`.\n\t* When that is the case, the [selectionClass]{@link enyo.DataRepeater#selectionClass}\n\t* will also be applied.\n\t*\n\t* @type {String}\n\t* @default 'multiple-selection-enabled'\n\t* @public\n\t*/\n\tmultipleSelectionClass: 'multiple-selection-enabled',\n\n\t/**\n\t* In cases where selection should be detected from the state of the\n\t* [model]{@link enyo.Model}, this property should be set to the property on\n\t* the model that the [repeater]{@link enyo.DataRepeater} should observe for\n\t* changes. If the model changes, the repeater will reflect the change without\n\t* having to interact directly with the model. Note that this property must be\n\t* part of the model's schema, or else its changes will not be detected\n\t* properly.\n\t*\n\t* @type {String}\n\t* @default ''\n\t* @public\n\t*/\n\tselectionProperty: '',\n\n\t/**\n\t* Set this to a space-delimited string of [events]{@glossary event} or an\n\t* [array]{@glossary Array} that can trigger the selection of a particular\n\t* child. To prevent selection entirely, set\n\t* [selection]{@link enyo.DataRepeater#selection} to `false`.\n\t*\n\t* @type {String}\n\t* @default 'ontap'\n\t* @public\n\t*/\n\tselectionEvents: 'ontap',\n\n\t/**\n\t* Use this [hash]{@glossary Object} to define default [binding]{@link enyo.Binding}\n\t* properties for **all** children (even children of children) of this\n\t* [repeater]{@link enyo.DataRepeater}. This can eliminate the need to write the\n\t* same paths over and over. You may also use any binding macros. Any property\n\t* defined here will be superseded by the same property if defined for an individual\n\t* binding.\n\t*\n\t* @type {Object}\n\t* @default null\n\t* @public\n\t*/\n\tchildBindingDefaults: null,\n\n\t/**\n\t* @private\n\t*/\n\tinitComponents: function () {\n\t\tthis.initContainer();\n\t\tvar components = this.kindComponents || this.components || [],\n\t\t\towner = this.getInstanceOwner(),\n\t\t\tprops = this.defaultProps? utils.clone(this.defaultProps, true): (this.defaultProps = {});\n\t\t// ensure that children know who their binding owner is\n\t\tprops.bindingTransformOwner = this;\n\t\tprops.bindingDefaults = this.childBindingDefaults;\n\t\tif (components) {\n\t\t\t// if there are multiple components in the components block they will become nested\n\t\t\t// children of the default kind set for the repeater\n\t\t\tif (components.length > 1) {\n\t\t\t\tprops.components = components;\n\t\t\t}\n\t\t\t// if there is only one child, the properties will be the default kind of the repeater\n\t\t\telse {\n\t\t\t\tutils.mixin(props, components[0]);\n\t\t\t}\n\t\t\tprops.repeater = this;\n\t\t\tprops.owner = owner;\n\t\t\tprops.mixins = props.mixins? props.mixins.concat(this.childMixins): this.childMixins;\n\t\t}\n\n\t\tthis.defaultProps = props;\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tconstructor: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tthis._selection = [];\n\t\t\t// we need to initialize our selectionEvents array\n\t\t\tvar se = this.selectionEvents;\n\t\t\tthis.selectionEvents = (typeof se == 'string'? se.split(' '): se);\n\t\t\t// we need to pre-bind these methods so they can easily be added\n\t\t\t// and removed as listeners later\n\t\t\tvar h = this._handlers = utils.clone(this._handlers);\n\t\t\tfor (var e in h) {\n\t\t\t\th[e] = this.bindSafely(h[e]);\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.collectionChanged();\n\t\t\t// Converting deprecated selection properties to our current selection API\n\t\t\tthis.selectionType = this.multipleSelection ? (this.groupSelection ? 'group' : 'multi') : this.selectionType;\n\t\t\tthis.selectionTypeChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tgroupSelectionChanged: function () {\n\t\tthis.set('selectionType', this.groupSelection ? 'group' : 'single');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmultipleSelectionChanged: function () {\n\t\tthis.set('selectionType', this.multipleSelection ? 'multi' : 'single');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectionTypeChanged: function (was) {\n\t\t// Synchronizing our deprecated properties\n\t\tthis.groupSelection = this.selectionType == 'group';\n\t\tthis.multipleSelection = this.selectionType == 'multi';\n\n\t\tif (was == 'multi') {\n\t\t\tif (this._selection.length > 1) {\n\t\t\t\tthis.deselectAll();\n\t\t\t}\n\t\t}\n\t\tthis.selectionChanged();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectionChanged: function () {\n\t\tthis.addRemoveClass(this.selectionClass, this.selection);\n\t\tthis.addRemoveClass(this.multipleSelectionClass, this.selectionType == 'multi' && this.selection);\n\t},\n\n\t/**\n\t* Destroys any existing children in the [repeater]{@link enyo.DataRepeater} and creates all\n\t* new children based on the current [data]{@link enyo.Repeater#data}.\n\t*\n\t* @public\n\t*/\n\treset: function () {\n\t\t// use the facaded dataset because this could be any\n\t\t// collection of records\n\t\tvar dd = this.get('data');\n\t\t// destroy the client controls we might already have\n\t\tthis.destroyClientControls();\n\t\t// and now we create new ones for each new record we have\n\t\tfor (var i=0, r; (r=dd.at(i)); ++i) {\n\t\t\tthis.add(r, i);\n\t\t}\n\t\tthis.hasReset = true;\n\t},\n\t/**\n\t* Refreshes each [control]{@link enyo.Control} in the dataset.\n\t*\n\t* @param {Boolean} immediate - If `true`, refresh will occur immediately; otherwise,\n\t* it will be queued up as a job.\n\t* @public\n\t*/\n\trefresh: function (immediate) {\n\t\tif (!this.hasReset) { return this.reset(); }\n\t\tvar refresh = this.bindSafely(function () {\n\t\t\tvar dd = this.get('data'),\n\t\t\t\tcc = this.getClientControls();\n\t\t\tfor (var i=0, c, d; (d=dd.at(i)); ++i) {\n\t\t\t\tc = cc[i];\n\t\t\t\tif (c) {\n\t\t\t\t\tc.set('model', d);\n\t\t\t\t} else {\n\t\t\t\t\tthis.add(d, i);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.prune();\n\t\t});\n\n\t\t// refresh is used as the event handler for\n\t\t// collection resets so checking for truthy isn't\n\t\t// enough. it must be true.\n\t\tif(immediate === true) {\n\t\t\trefresh();\n\t\t} else {\n\t\t\tthis.startJob('refreshing', refresh, 16);\n\t\t}\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.collection && this.collection.length) {\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t\tthis.hasRendered = true;\n\t\t};\n\t}),\n\n\t/**\n\t* Adds a [record]{@link enyo.Model} at a particular index.\n\t*\n\t* @param {enyo.Model} rec - The [record]{@link enyo.Model} to add.\n\t* @param {Number} idx - The index at which the record should be added.\n\t* @public\n\t*/\n\tadd: function (rec, idx) {\n\t\tvar c = this.createComponent({model: rec, index: idx});\n\t\tif (this.generated && !this.batching) {\n\t\t\tc.render();\n\t\t}\n\t},\n\n\t/**\n\t* Removes the [record]{@link enyo.Model} at a particular index.\n\t*\n\t* @param {Number} idx - The index of the [record]{@link enyo.Model} to be removed.\n\t* @public\n\t*/\n\tremove: function (idx) {\n\t\tvar controls = this.getClientControls()\n\t\t\t, control;\n\n\t\tcontrol = controls[idx];\n\n\t\tif (control) control.destroy();\n\t},\n\n\t/**\n\t* Removes any [controls]{@link enyo.Control} that are outside the boundaries of the\n\t* [data]{@link enyo.DataRepeater#data} [collection]{@link enyo.Collection} for the\n\t* [repeater]{@link enyo.DataRepeater}.\n\t*\n\t* @public\n\t*/\n\tprune: function () {\n\t\tvar g = this.getClientControls()\n\t\t\t, len = (this.collection? this.collection.length: 0)\n\t\t\t, x;\n\t\tif (g.length > len) {\n\t\t\tx = g.slice(len);\n\t\t\tfor (var i=0, c; (c=x[i]); ++i) {\n\t\t\t\tc.destroy();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitContainer: function () {\n\t\tvar ops = this.get('containerOptions'),\n\t\t\tnom = ops.name || (ops.name = this.containerName);\n\t\tthis.createChrome([ops]);\n\t\tthis.discoverControlParent();\n\t\tif (nom != this.containerName) {\n\t\t\tthis.$[this.containerName] = this.$[nom];\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonSelected: 'childSelected',\n\t\tonDeselected: 'childDeselected'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_handlers: {\n\t\tadd: 'modelsAdded',\n\t\tremove: 'modelsRemoved',\n\t\treset: 'refresh',\n\t\tsort: 'refresh',\n\t\tfilter: 'refresh'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomponentsChanged: function (p) {\n\t\tthis.initComponents();\n\t\tthis.reset();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcollectionChanged: function (p) {\n\t\tvar c = this.collection;\n\t\tif (typeof c == 'string') {\n\t\t\tc = this.collection = utils.getPath.call(global, c);\n\t\t}\n\t\tif (c) {\n\t\t\tthis.initCollection(c, p);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinitCollection: function (c, p) {\n\t\tvar e;\n\t\tif (c && c.addListener) {\n\t\t\tfor (e in this._handlers) {\n\t\t\t\tc.addListener(e, this._handlers[e]);\n\t\t\t}\n\t\t}\n\t\tif (p && p.removeListener) {\n\t\t\tfor (e in this._handlers) {\n\t\t\t\tp.removeListener(e, this._handlers[e]);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmodelsAdded: function (sender, e, props) {\n\t\tif (sender === this.collection) this.refresh();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmodelsRemoved: function (sender, e, props) {\n\t\tif (sender === this.collection) {\n\t\t\tthis.deselectRemovedModels(props.models);\n\t\t\tthis.refresh();\n\t\t}\n\t},\n\n\t/**\n\t* Deselect removed models from _selected array.\n\t* After calling it, we can ensure that the removed models aren't currently selected.\n\t* @param {array} models - The array of models that are removed from collection.\n\t* @private\n\t*/\n\tdeselectRemovedModels: function(models) {\n\t\tvar selected = this._selection,\n\t\t\torig,\n\t\t\tmodel,\n\t\t\tidx,\n\t\t\tlen = selected && selected.length,\n\t\t\ti = models.length - 1;\n\n\t\t// We have selected models\n\t\tif (len) {\n\t\t\t// unfortunately we need to make a copy to preserve what the original was\n\t\t\t// so we can pass it with the notification if any of these are deselected\n\t\t\torig = selected.slice();\n\n\t\t\t// we have _selected array to track currently selected models\n\t\t\t// if some removed models are in _selected, we should remove them from _selected\n\t\t\t// clearly we won't need to continue checking if selected does not have any models\n\t\t\tfor (; (model = models[i]) && selected.length; --i) {\n\t\t\t\tidx = selected.indexOf(model);\n\t\t\t\tif (idx > -1) selected.splice(idx, 1);\n\t\t\t}\n\n\t\t\t// Some selected models are discovered, so we need to notify\n\t\t\tif (len != selected.length) {\n\t\t\t\tif (this.selection) {\n\t\t\t\t\tif (this.selectionType == 'multi') this.notify('selected', orig, selected);\n\t\t\t\t\telse this.notify('selected', orig[0], selected[0] || null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tbatchingChanged: function (prev, val) {\n\t\tif (this.generated && false === val) {\n\t\t\tthis.$[this.containerName].render();\n\t\t\tthis.refresh(true);\n\t\t}\n\t},\n\n\t/**\n\t* Calls [childForIndex()]{@link enyo.DataRepeater#getChildForIndex}. Leaving for posterity.\n\t*\n\t* @param {Number} idx - The index of the child to retrieve.\n\t* @returns {enyo.Control|undefined} The [control]{@link enyo.Control} at the specified\n\t* index, or `undefined` if it could not be found or the index is out of bounds.\n\t* @public\n\t*/\n\tgetChildForIndex: function (idx) {\n\t\treturn this.childForIndex(idx);\n\t},\n\n\t/**\n\t* Attempts to return the [control]{@link enyo.Control} representation at a particular index.\n\t*\n\t* @param {Number} idx - The index of the child to retrieve.\n\t* @returns {enyo.Control|undefined} The [control]{@link enyo.Control} at the specified\n\t* index, or `undefined` if it could not be found or the index is out of bounds.\n\t* @public\n\t*/\n\tchildForIndex: function (idx) {\n\t\treturn this.$.container.children[idx];\n\t},\n\n\t/**\n\t* Retrieves the data associated with the [repeater]{@link enyo.DataRepeater}.\n\t*\n\t* @returns {enyo.Collection} The {@link enyo.Collection} that comprises the data.\n\t* @public\n\t*/\n\tdata: function () {\n\t\treturn this.collection;\n\t},\n\n\t/**\n\t* Consolidates selection logic and allows for deselection of a [model]{@link enyo.Model}\n\t* that has already been removed from the [collection]{@link enyo.Collection}.\n\t*\n\t* @private\n\t*/\n\t_select: function (idx, model, select) {\n\t\tif (!this.selection) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar c = this.getChildForIndex(idx),\n\t\t\ts = this._selection,\n\t\t\ti = utils.indexOf(model, s);\n\n\t\tif (select) {\n\t\t\tif(i == -1) {\n\t\t\t\tif(this.selectionType != 'multi') {\n\t\t\t\t\twhile (s.length) {\n\t\t\t\t\t\ti = this.collection.indexOf(s.pop());\n\t\t\t\t\t\tthis.deselect(i);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ts.push(model);\n\t\t\t}\n\t\t} else {\n\t\t\tif(i >= 0) {\n\t\t\t\ts.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (c) {\n\t\t\tc.set('selected', select);\n\t\t}\n\t\tif (this.selectionProperty && model) {\n\t\t\t(s=this.selectionProperty) && model.set(s, select);\n\t\t}\n\t\tthis.notifyObservers('selected');\n\t},\n\n\t/**\n\t* Selects the item at the given index.\n\t*\n\t* @param {Number} idx - The index of the item to select.\n\t* @public\n\t*/\n\tselect: function (idx) {\n\t\tthis._select(idx, this.collection.at(idx), true);\n\t},\n\n\t/**\n\t* Deselects the item at the given index.\n\t*\n\t* @param {Number} idx - The index of the item to deselect.\n\t* @public\n\t*/\n\tdeselect: function (idx) {\n\t\tthis._select(idx, this.collection.at(idx), false);\n\t},\n\n\t/**\n\t* Determines whether a [model]{@link enyo.Model} is currently selected.\n\t*\n\t* @param {enyo.Model} model - The [model]{@link enyo.Model} whose selection status\n\t* is to be determined.\n\t* @returns {Boolean} `true` if the given model is selected; otherwise, `false`.\n\t* @public\n\t*/\n\tisSelected: function (model) {\n\t\treturn !!~utils.indexOf(model, this._selection);\n\t},\n\n\t/**\n\t* Selects all items (if [selectionType]{@link enyo.DataRepeater#selectionType} is `multi`).\n\t*\n\t* @public\n\t*/\n\tselectAll: function () {\n\t\tif (this.selectionType == 'multi') {\n\t\t\tthis.stopNotifications();\n\t\t\tvar s = this._selection\n\t\t\t\t, len = this.collection? this.collection.length: 0;\n\t\t\ts.length = 0;\n\t\t\tfor (var i=0; i<len; ++i) {\n\t\t\t\tthis.select(i);\n\t\t\t}\n\t\t\tthis.startNotifications();\n\t\t}\n\t},\n\n\t/**\n\t* Deselects all items.\n\t*\n\t* @public\n\t*/\n\tdeselectAll: function () {\n\t\tif (this.selection) {\n\t\t\tthis.stopNotifications();\n\t\t\tvar s = this._selection, m, i;\n\t\t\twhile (s.length) {\n\t\t\t\tm = s.pop();\n\t\t\t\ti = this.collection.indexOf(m);\n\t\t\t\tthis.deselect(i);\n\t\t\t}\n\t\t\tthis.startNotifications();\n\t\t}\n\t},\n\n\t/**\n\t* A computed property that returns the currently selected [model]{@link enyo.Model}\n\t* (if [selectionType]{@link enyo.DataRepeater#selectionType} is not `multi'`),\n\t* or an immutable [array]{@glossary Array} of all currently selected models (if\n\t* `selectionType` is `multi'`).\n\t*\n\t* @public\n\t*/\n\tselected: function() {\n\t\t// to ensure that bindings will clear properly according to their api\n\t\treturn (this.selectionType == 'multi' ? this._selection : this._selection[0]) || null;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdataChanged: function () {\n\t\tif (this.collection && this.hasRendered) {\n\t\t\tthis.reset();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcomputed: [\n\t\t{method: 'selected'},\n\t\t{method: 'data', path: ['controller', 'collection']}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\n\n\t/**\n\t* @private\n\t*/\n\tchildMixins: [RepeaterChildSupport],\n\n\t/**\n\t* @private\n\t*/\n\tcontrolParentName: 'container',\n\n\t/**\n\t* @private\n\t*/\n\tcontainerName: 'container',\n\n\t/**\n\t* @private\n\t*/\n\tcontainerOptions: {name: 'container', classes: 'enyo-fill enyo-data-repeater-container'},\n\n\t/**\n\t* @private\n\t*/\n\tbatching: false,\n\n\t/**\n\t* @private\n\t*/\n\t_selection: null\n});\n\n/**\n* @static\n* @private\n*/\nDataRepeater.concat = function (ctor, props) {\n\tvar p = ctor.prototype || ctor;\n\tif (props.childMixins) {\n\t\tp.childMixins = (p.childMixins? utils.merge(p.childMixins, props.childMixins): props.childMixins.slice());\n\t\tdelete props.childMixins;\n\t}\n};","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tControl = require('./Control');\n\n/**\n* Fires when the [active state]{@link enyo.GroupItem#active} has changed.\n*\n* @event enyo.GroupItem#onActivate\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.GroupItem} is the base [kind]{@glossary kind} for the\n* [Grouping]{@link enyo.Group} API. It manages the\n* [active state]{@link enyo.GroupItem#active} of the [component]{@link enyo.Component}\n* (or the [inheriting]{@glossary subkind} component). A subkind may call `setActive()` \n* to set the [active]{@link enyo.GroupItem#active} property to the desired state; this\n* will additionally [bubble]{@link enyo.Component#bubble} an \n* [onActivate]{@link enyo.GroupItem#onActivate} {@glossary event}, which may\n* be handled as needed by the containing components. This is useful for creating\n* groups of items whose state should be managed collectively.\n*\n* For an example of how this works, see the {@link enyo.Group} kind, which enables the\n* creation of radio groups from arbitrary components that\tsupport the Grouping API.\n*\n* @class enyo.GroupItem\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Groupitem.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.GroupItem',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Groupitem.prototype */ {\n\n\t\t/**\n\t\t* Will be `true` if the item is currently selected.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tactive: false\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.activeChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @fires enyo.GroupItem#onActivate\n\t* @private\n\t*/\n\tactiveChanged: function () {\n\t\tthis.bubble('onActivate');\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tdispatcher = require('./dispatcher'),\n\tplatform = require('./platform');\nvar\n\tControl = require('./Control');\n\n/**\n* Fires immediately when the text changes.\n*\n* @event enyo.Input#oninput\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when the text has changed and the [input]{@link enyo.Input} subsequently loses\n* focus.\n*\n* @event enyo.Input#onchange\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* Fires when the [input]{@link enyo.Input} is disabled or enabled.\n*\n* @event enyo.Input#onDisabledChange\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing event information.\n* @public\n*/\n\n/**\n* {@link enyo.Input} implements an HTML [&lt;input&gt;]{@glossary input} element\n* with cross-platform support for change [events]{@glossary event}.\n*\n* You may listen for [oninput]{@link enyo.Input#oninput} and\n* [onchange]{@link enyo.Input#onchange} [DOM events]{@glossary DOMEvent} from\n* this [control]{@link enyo.Control} to know when the text inside has been modified.\n*\n* For more information, see the documentation on\n* [Text Fields]{@linkplain $dev-guide/building-apps/controls/text-fields.html}\n* in the Enyo Developer Guide.\n*\n* @class enyo.Input\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Input.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Input',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.Input.prototype */ {\n\n\t\t/**\n\t\t* Value of the [input]{@link enyo.Input}. Use this property only to initialize the\n\t\t* value. Call `getValue()` and `setValue()` to manipulate the value at runtime.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tvalue: '',\n\n\t\t/**\n\t\t* Text to display when the [input]{@link enyo.Input} is empty\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\tplaceholder: '',\n\n\t\t/**\n\t\t* Type of [input]{@link enyo.Input}; if not specified, it's treated as `'text'`.\n\t\t* This may be anything specified for the `type` attribute in the HTML\n\t\t* specification, including `'url'`, `'email'`, `'search'`, or `'number'`.\n\t\t*\n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @public\n\t\t*/\n\t\ttype: '',\n\n\t\t/**\n\t\t* When `true`, prevents input into the [control]{@link enyo.Control}. This maps\n\t\t* to the `disabled` DOM attribute.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false,\n\n\t\t/**\n\t\t* When `true`, the contents of the [input]{@link enyo.Input} will be selected\n\t\t* when the input gains focus.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tselectOnFocus: false\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonDisabledChange: ''\n\t},\n\n\t/**\n\t* Set to `true` to focus this [control]{@link enyo.Control} when it is rendered.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\tdefaultFocus: false,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'input',\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-input',\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonfocus: 'focused',\n\t\toninput: 'input',\n\t\tonclear: 'clear',\n\t\tondragstart: 'dragstart'\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tif (platform.ie) {\n\t\t\t\tthis.handlers.onkeyup = 'iekeyup';\n\t\t\t}\n\t\t\tif (platform.windowsPhone) {\n\t\t\t\tthis.handlers.onkeydown = 'iekeydown';\n\t\t\t}\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.placeholderChanged();\n\t\t\t// prevent overriding a custom attribute with null\n\t\t\tif (this.type) {\n\t\t\t\tthis.typeChanged();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\n\t\t\tdispatcher.makeBubble(this, 'focus', 'blur');\n\n\t\t\t//Force onchange event to be bubbled inside Enyo for IE8\n\t\t\tif(platform.ie == 8){\n\t\t\t\tthis.setAttribute('onchange', dispatcher.bubbler);\n\t\t\t}\n\n\t\t\tthis.disabledChanged();\n\t\t\tif (this.defaultFocus) {\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\ttypeChanged: function () {\n\t\tthis.setAttribute('type', this.type);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tplaceholderChanged: function () {\n\t\tthis.setAttribute('placeholder', this.placeholder);\n\t\tthis.valueChanged();\n\t},\n\n\t/**\n\t* @fires enyo.Input#onDisabledChange\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tthis.setAttribute('disabled', this.disabled);\n\t\tthis.bubble('onDisabledChange');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tvar node = this.hasNode(),\n\t\t\tattrs = this.attributes;\n\t\tif (node) {\n\t\t\tif (node.value !== this.value) {\n\t\t\t\tnode.value = this.value;\n\t\t\t}\n\t\t\t// we manually update the cached value so that the next time the\n\t\t\t// attribute is requested or the control is re-rendered it will\n\t\t\t// have the correct value - this is because calling setAttribute()\n\t\t\t// in some cases does not receive an appropriate response from the\n\t\t\t// browser\n\t\t\tattrs.value = this.value;\n\t\t} else {\n\t\t\tthis.setAttribute('value', this.value);\n\t\t}\n\t\tthis.detectTextDirectionality((this.value || this.value === 0) ? this.value : this.get('placeholder'));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tiekeyup: function (sender, e) {\n\t\tvar ie = platform.ie, kc = e.keyCode;\n\t\t// input event missing on ie 8, fails to fire on backspace and delete keys in ie 9\n\t\tif (ie <= 8 || (ie == 9 && (kc == 8 || kc == 46))) {\n\t\t\tthis.bubble('oninput', e);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tiekeydown: function (sender, e) {\n\t\tvar wp = platform.windowsPhone, kc = e.keyCode, dt = e.dispatchTarget;\n\t\t// onchange event fails to fire on enter key for Windows Phone 8, so we force blur\n\t\tif (wp <= 8 && kc == 13 && this.tag == 'input' && dt.hasNode()) {\n\t\t\tdt.node.blur();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclear: function () {\n\t\tthis.setValue('');\n\t},\n\n\t// note: we disallow dragging of an input to allow text selection on all platforms\n\t/**\n\t* @private\n\t*/\n\tdragstart: function () {\n\t\treturn this.hasFocus();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfocused: function () {\n\t\tif (this.selectOnFocus) {\n\t\t\tutils.asyncMethod(this, 'selectContents');\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectContents: function () {\n\t\tvar n = this.hasNode();\n\n\t\tif (n && n.setSelectionRange) {\n\t\t\tn.setSelectionRange(0, n.value.length);\n\t\t} else if (n && n.createTextRange) {\n\t\t\tvar r = n.createTextRange();\n\t\t\tr.expand('textedit');\n\t\t\tr.select();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tinput: function () {\n\t\tvar val = this.getNodeProperty('value');\n\t\tthis.setValue(val);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind');\nvar\n\tControl = require('./Control');\n\n/**\n* {@link enyo.Option} implements the [options]{@glossary option} in an\n* {@link enyo.Select} [control]{@link enyo.Control}.\n*\n* @class enyo.Option\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Option.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Option',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: {\n\t\t/**\n\t\t* Value of the [option]{@link enyo.Option}.\n\t\t* \n\t\t* @type {String}\n\t\t* @default ''\n\t\t* @memberof enyo.Option.prototype\n\t\t* @public\n\t\t*/\n\t\tvalue: '',\n\n\t\t/**\n\t\t* Set to `true` if this [option]{@link enyo.Option} is selected (default is `false`).\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @memberof enyo.Option.prototype\n\t\t* @public\n\t\t*/\n\t\tselected: false\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\ttag: 'option',\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.valueChanged();\n\t\t\tthis.selectedChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function () {\n\t\tthis.setAttribute('value', this.value);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectedChanged: function () {\n\t\tthis.setAttribute('selected', this.selected);\n\t}\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tdispatcher = require('./dispatcher');\n\nvar\n\tControl = require('./Control');\n\n/**\n* {@link enyo.ScrollStrategy} is a helper [kind]{@glossary kind} that implements a default \n* scrolling strategy for an {@link enyo.Scroller}.\n* \n* `enyo.ScrollStrategy` is not typically created in application code. Instead, it is specified \n* as the value of the [strategyKind]{@link enyo.Scroller#strategyKind} property of an\n* `enyo.Scroller` or {@link enyo.List}, or is used by the framework implicitly.\n*\n* @class enyo.ScrollStrategy\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ScrollStrategy.prototype */ {\n\n\tname: 'enyo.ScrollStrategy',\n\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\ttag: null,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.ScrollStrategy.prototype */ {\n\t\t\n\t\t/**\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\tvertical: 'default',\n\t\t\n\t\t/**\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\thorizontal: 'default',\n\t\t\n\t\t/**\n\t\t* The horizontal scroll position.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tscrollLeft: 0,\n\t\t\n\t\t/**\n\t\t* The vertical scroll position.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tscrollTop: 0,\n\t\t\n\t\t/**\n\t\t* Maximum height of the scroll content.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tmaxHeight: null,\n\t\t\n\t\t/**\n\t\t* Indicates whether mouse wheel may be used to move the [scroller]{@link enyo.Scroller}.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuseMouseWheel: true\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonScrollStart: '',\n\t\tonScrollStop: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tondragstart: 'dragstart',\n\t\tondragfinish: 'dragfinish',\n\t\tondown: 'down',\n\t\tonmove: 'move',\n\t\tonmousewheel: 'mousewheel',\n\t\tonscroll: 'domScroll'\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.horizontalChanged();\n\t\t\tthis.verticalChanged();\n\t\t\tthis.maxHeightChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tdispatcher.makeBubble(this.container, 'scroll');\n\t\t\tthis.scrollNode = this.calcScrollNode();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tteardownRender: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.scrollNode = null;\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcalcScrollNode: function () {\n\t\treturn this.container.hasNode();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thorizontalChanged: function () {\n\t\tthis.container.applyStyle('overflow-x', this.horizontal == 'default' ? 'auto' : this.horizontal);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tverticalChanged: function () {\n\t\tthis.container.applyStyle('overflow-y', this.vertical == 'default' ? 'auto' : this.vertical);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\tthis.container.applyStyle('max-height', this.maxHeight);\n\t},\n\n\t/** \n\t* Scrolls to the specified position.\n\t*\n\t* @param {Number} x - The `x` position in pixels.\n\t* @param {Number} y - The `y` position in pixels.\n\t* @public\n\t*/\n\tscrollTo: function (x, y) {\n\t\tif (this.scrollNode) {\n\t\t\tthis.setScrollLeft(x);\n\t\t\tthis.setScrollTop(y);\n\t\t}\n\t},\n\n\t/** \n\t* Ensures that the given node is visible in the [scroller's]{@link enyo.Scroller} viewport.\n\t*\n\t* @param {Node} node - The node to make visible in the [scroller's]{@link enyo.Scroller}\n\t*\tviewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @public\n\t*/\n\tscrollToNode: function (node, alignWithTop) {\n\t\tif (this.scrollNode) {\n\t\t\tvar sb = this.getScrollBounds();\n\t\t\tvar n = node;\n\t\t\tvar b = {height: n.offsetHeight, width: n.offsetWidth, top: 0, left: 0};\n\t\t\twhile (n && n.parentNode && n.id != this.scrollNode.id) {\n\t\t\t\tb.top += n.offsetTop;\n\t\t\t\tb.left += n.offsetLeft;\n\t\t\t\tn = n.parentNode;\n\t\t\t}\n\t\t\t// By default, the element is scrolled to align with the top of the scroll area.\n\t\t\tthis.setScrollTop(Math.min(sb.maxTop, alignWithTop === false ? b.top - sb.clientHeight + b.height : b.top));\n\t\t\tthis.setScrollLeft(Math.min(sb.maxLeft, alignWithTop === false ? b.left - sb.clientWidth + b.width : b.left));\n\t\t}\n\t},\n\n\t/**\n\t* Scrolls the given [control]{@link enyo.Control} into view.\n\t*\n\t* @param {enyo.Control} ctl - The [control]{@link enyo.Control} to make visible in the\n\t*\t[scroller's]{@link enyo.Scroller} viewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @public\n\t*/\n\tscrollIntoView: function (ctl, alignWithTop) {\n\t\tif (ctl.hasNode()) {\n\t\t\tctl.node.scrollIntoView(alignWithTop);\n\t\t}\n\t},\n\tisInView: function(inNode) {\n\t\tvar sb = this.getScrollBounds();\n\t\tvar ot = inNode.offsetTop;\n\t\tvar oh = inNode.offsetHeight;\n\t\tvar ol = inNode.offsetLeft;\n\t\tvar ow = inNode.offsetWidth;\n\t\treturn (ot >= sb.top && ot + oh <= sb.top + sb.clientHeight) && (ol >= sb.left && ol + ow <= sb.left + sb.clientWidth);\n\t},\n\n\t/**\n\t* Sets the vertical scroll position.\n\t*\n\t* @param {Number} top - The vertical scroll position in pixels.\n\t* @public\n\t*/\n\tsetScrollTop: function (top) {\n\t\tthis.scrollTop = top;\n\t\tif (this.scrollNode) {\n\t\t\tthis.scrollNode.scrollTop = this.scrollTop;\n\t\t}\n\t},\n\n\t/**\n\t* Sets the horizontal scroll position.\n\t*\n\t* @param {Number} left - The horizontal scroll position in pixels.\n\t* @public\n\t*/\n\tsetScrollLeft: function (left) {\n\t\tthis.scrollLeft = left;\n\t\tif (this.scrollNode) {\n\t\t\tthis.scrollNode.scrollLeft = this.scrollLeft;\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves the horizontal scroll position.\n\t*\n\t* @returns {Number} The horizontal scroll position in pixels.\n\t* @public\n\t*/\n\tgetScrollLeft: function () {\n\t\treturn this.scrollNode ? this.scrollNode.scrollLeft : this.scrollLeft;\n\t},\n\n\t/**\n\t* Retrieves the vertical scroll position.\n\t*\n\t* @returns {Number} The vertical scroll position in pixels.\n\t* @private\n\t*/\n\tgetScrollTop: function () {\n\t\treturn this.scrollNode ? this.scrollNode.scrollTop : this.scrollTop;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\t_getScrollBounds: function () {\n\t\tvar s = this.getScrollSize(), cn = this.container.hasNode();\n\t\tvar b = {\n\t\t\tleft: this.getScrollLeft(),\n\t\t\ttop: this.getScrollTop(),\n\t\t\tclientHeight: cn ? cn.clientHeight : 0,\n\t\t\tclientWidth: cn ? cn.clientWidth : 0,\n\t\t\theight: s.height,\n\t\t\twidth: s.width\n\t\t};\n\t\tb.maxLeft = Math.max(0, b.width - b.clientWidth);\n\t\tb.maxTop = Math.max(0, b.height - b.clientHeight);\n\t\treturn b;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetScrollSize: function () {\n\t\tvar n = this.scrollNode;\n\t\treturn {width: n ? n.scrollWidth : 0, height: n ? n.scrollHeight : 0};\n\t},\n\n\t/**\n\t* Retrieves the scroll boundaries of the [scroller]{@link enyo.Scroller}.\n\t* \n\t* @returns {enyo.Scroller~BoundaryObject} An [object]{@glossary Object} describing the \n\t*\tscroll boundaries.\n\t* @public\n\t*/\n\tgetScrollBounds: function () {\n\t\treturn this._getScrollBounds();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcStartInfo: function () {\n\t\tvar sb = this.getScrollBounds();\n\t\tvar y = this.getScrollTop(), x = this.getScrollLeft();\n\t\tthis.canVertical = sb.maxTop > 0 && this.vertical != 'hidden';\n\t\tthis.canHorizontal = sb.maxLeft > 0 && this.horizontal != 'hidden';\n\t\tthis.startEdges = {\n\t\t\ttop: y === 0,\n\t\t\tbottom: y === sb.maxTop,\n\t\t\tleft: x === 0,\n\t\t\tright: x === sb.maxLeft\n\t\t};\n\t},\n\n\t// NOTE: down, move, and drag handlers are needed only for native touch scrollers\n\n\t/**\n\t* @private\n\t*/\n\tshouldDrag: function (e) {\n\t\tvar requestV = e.vertical;\n\t\treturn (requestV && this.canVertical  || !requestV && this.canHorizontal) /*&& !this.isOobVerticalScroll(event)*/;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragstart: function (sender, e) {\n\t\tthis.dragging = this.shouldDrag(e);\n\t\tif (this.dragging) {\n\t\t\treturn this.preventDragPropagation;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdragfinish: function (sender, e) {\n\t\tif (this.dragging) {\n\t\t\tthis.dragging = false;\n\t\t\te.preventTap();\n\t\t}\n\t},\n\n\t/**\n\t* Avoid allowing scroll when starting at a vertical boundary to prevent iOS from window \n\t* scrolling.\n\t* \n\t* @private\n\t*/\n\tdown: function (sender, e) {\n\t\tif (this.isScrolling()) {\n\t\t\te.preventTap();\n\t\t}\n\t\tthis.calcStartInfo();\n\t},\n\n\t/**\n\t* NOTE: Mobile native [scrollers]{@link enyo.Scroller} need `touchmove`. Indicate this by \n\t* setting the `requireTouchmove` property to `true`.\n\t* \n\t* @private\n\t*/\n\tmove: function (sender, e) {\n\t\tif (e.which && (this.canVertical && e.vertical || this.canHorizontal && e.horizontal)) {\n\t\t\te.disablePrevention();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmousewheel: function (sender, e) {\n\t\t//* We disable mouse wheel scrolling by preventing the default\n\t\tif (!this.useMouseWheel) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdomScroll: function(sender, e) {\n\t\tif (!this._scrolling) {\n\t\t\tthis.doScrollStart();\n\t\t}\n\t\tthis._scrolling = true;\n\t\tthis.startJob('stopScrolling', function() {\n\t\t\tthis._scrolling = false;\n\t\t\tthis.doScrollStop();\n\t\t}, 100);\n\t},\n\n\t/**\n\t* @public\n\t*/\n\tisScrolling: function() {\n\t\treturn this._scrolling;\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind');\n\nvar\n\tControl = require('../Control'),\n\tDom = require('../dom');\n\n/**\n* {@link enyo.ScrollThumb} is a helper [kind]{@glossary kind} used by \n* {@link enyo.TouchScrollStrategy} and {@link enyo.TranslateScrollStrategy} to\n* display a small visual scroll indicator.\n* \n* `enyo.ScrollThumb` is not typically created in application code.\n*\n* @class enyo.ScrollThumb\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ScrollThumb.prototype */ {\n\t\n\tname: 'enyo.ScrollThumb',\n\t\n\tkind: Control,\n\n\t/**\n\t* The orientation of the scroll indicator bar; 'v' for vertical or 'h' for horizontal.\n\t* \n\t* @type {String}\n\t* @default 'v'\n\t* @public\n\t*/\n\taxis: 'v',\n\n\t/**\n\t* Minimum size of the indicator.\n\t* \n\t* @private\n\t*/\n\tminSize: 4,\n\n\t/**\n\t* Size of the indicator's corners.\n\t* \n\t* @private\n\t*/\n\tcornerSize: 6,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-thumb',\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tvar v = this.axis == 'v';\n\t\t\tthis.dimension = v ? 'height' : 'width';\n\t\t\tthis.offset = v ? 'top' : 'left';\n\t\t\tthis.translation = v ? 'translateY' : 'translateX';\n\t\t\tthis.positionMethod = v ? 'getScrollTop' : 'getScrollLeft';\n\t\t\tthis.sizeDimension = v ? 'clientHeight' : 'clientWidth';\n\t\t\tthis.addClass('enyo-' + this.axis + 'thumb');\n\t\t\tthis.transform = Dom.canTransform();\n\t\t\tif (Dom.canAccelerate()) {\n\t\t\t\tDom.transformValue(this, 'translateZ', 0);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/** \n\t* Syncs the scroll indicator bar to the [scroller]{@link enyo.Scroller} size and position,\n\t* as determined by the passed-in scroll strategy.\n\t*\n\t* @param {enyo.ScrollStrategy} strategy - The scroll strategy to be synced with.\n\t* @public\n\t*/\n\tsync: function (strategy) {\n\t\tthis.scrollBounds = strategy._getScrollBounds();\n\t\tthis.update(strategy);\n\t},\n\n\t/**\n\t* Updates the scroll indicator bar based on the scroll bounds of the strategy, the available\n\t* scroll area, and whether there is overscrolling. If the scroll indicator bar is not\n\t* needed, it will be not be displayed.\n\t* \n\t* @param {enyo.ScrollStrategy} strategy - The scroll strategy to update from.\n\t* @public\n\t*/\n\tupdate: function (strategy) {\n\t\tif (this.showing) {\n\t\t\tvar d = this.dimension, o = this.offset;\n\t\t\tvar bd = this.scrollBounds[this.sizeDimension], sbd = this.scrollBounds[d];\n\t\t\tvar overs = 0, overp = 0, over = 0;\n\t\t\tif (bd >= sbd) {\n\t\t\t\tthis.hide();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (strategy.isOverscrolling()) {\n\t\t\t\tover = strategy.getOverScrollBounds()['over' + o];\n\t\t\t\tovers = Math.abs(over);\n\t\t\t\toverp = Math.max(over, 0);\n\t\t\t}\n\t\t\tvar sbo = strategy[this.positionMethod]() - over;\n\t\t\t// calc size & position\n\t\t\tvar bdc = bd - this.cornerSize;\n\t\t\tvar s = Math.floor((bd * bd / sbd) - overs);\n\t\t\ts = Math.max(this.minSize, s);\n\t\t\tvar p = Math.floor((bdc * sbo / sbd) + overp);\n\t\t\tp = Math.max(0, Math.min(bdc - this.minSize, p));\n\t\t\t// apply thumb styling\n\t\t\tthis.needed = s < bd;\n\t\t\tif (this.needed && this.hasNode()) {\n\t\t\t\tif (this._pos !== p) {\n\t\t\t\t\tthis._pos = p;\n\t\t\t\t\tif(!this.transform) {\n\t\t\t\t\t\t//adjust top/left for browsers that don't support translations\n\t\t\t\t\t\tif(this.axis=='v') {\n\t\t\t\t\t\t\tthis.setBounds({top:p + 'px'});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setBounds({left:p + 'px'});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tDom.transformValue(this, this.translation, p + 'px');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this._size !== s) {\n\t\t\t\t\tthis._size = s;\n\t\t\t\t\tthis.applyStyle(d, s + 'px');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* We implement `setShowing()` and cancel the [delayHide()]{@link enyo.ScrollThumb#delayHide} \n\t* because [showing]{@link enyo.Control#showing} is not changed while we execute\n\t* `delayHide()`.\n\t*\n\t* @param {Boolean} showing - If `true`, displays the {@link enyo.ScrollThumb} if appropriate;\n\t*\totherwise, hides the ScrollThumb.\n\t* @public\n\t*/\n\tsetShowing: function (showing) {\n\t\tif (showing && showing != this.showing) {\n\t\t\tif (this.scrollBounds[this.sizeDimension] >= this.scrollBounds[this.dimension]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (this.hasNode()) {\n\t\t\tthis.cancelDelayHide();\n\t\t}\n\t\tif (showing != this.showing) {\n\t\t\tvar last = this.showing;\n\t\t\tthis.showing = showing;\n\t\t\tthis.showingChanged(last);\n\t\t}\n\t},\n\n\t/**\n\t* Delays automatic hiding of the {@link enyo.ScrollThumb}.\n\t*\n\t* @param {Number} delay - The number of milliseconds to delay hiding of the\n\t*\t{@link enyo.ScrollThumb}.\n\t* @public\n\t*/\n\tdelayHide: function (delay) {\n\t\tif (this.showing) {\n\t\t\tthis.startJob('hide', this.hide, delay || 0);\n\t\t}\n\t},\n\n\t/**\n\t* Cancels any pending [delayHide()]{@link enyo.ScrollThumb#delayHide} jobs.\n\t* \n\t* @public\n\t*/\n\tcancelDelayHide: function () {\n\t\tthis.stopJob('hide');\n\t}\n});","var\n\tglue = require('./lib/glue');\n\nvar enyoIlib = {\n\tregister: function (ilib) {\n\t\tglue(ilib);\n\t\tenyoIlib.ilib = ilib;\n\t\treturn enyoIlib;\n\t},\n\tilib: null,\n\tversion: '2.6.0-pre.5-dev'\n};\n\nmodule.exports = enyoIlib;","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind');\nvar\n\tGroupItem = require('../GroupItem');\n\n/**\n* {@link enyo.ToolDecorator} lines up [components]{@link enyo.Component} in a row,\n* centered vertically.\n*\n* @class enyo.ToolDecorator\n* @extends enyo.GroupItem\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.ToolDecorator.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.ToolDecorator',\n\n\t/**\n\t* @private\n\t*/\n\tkind: GroupItem,\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-tool-decorator'\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tplatform = require('./platform'),\n\tdispatcher = require('./dispatcher');\nvar\n\tControl = require('./Control'),\n\t/*jshint -W079*/\n\tOption = require('./Option');\n\t/*jshint +W079*/\n\n/**\n* {@link enyo.Select} implements an HTML [selection]{@glossary select} widget, using\n* {@link enyo.Option} instances by default.\n*\n* ```\n* {kind: 'Select', onchange: 'selectChanged', components: [\n*\t{content: 'Descending', value: 'd'},\n*\t{content: 'Ascending', value: 'a'}\n* ]}\n* \n* selectChanged: function(inSender, inEvent) {\n*\tvar s = inSender.getValue();\n*\tif (s == 'd') {\n*\t\tthis.sortListDescending();\n*\t} else {\n*\t\tthis.sortListAscending();\n*\t}\n* }\n* ```\n* \n* Note: This uses the [&lt;select&gt;]{@glossary select} tag, which isn't implemented for\n* native webOS applications, although it does work in the webOS Web browser.\n*\n* @class enyo.Select\n* @extends enyo.Control\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Select.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Select',\n\n\t/**\n\t* @private\n\t*/\n\tkind: Control,\n\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Select.prototype */ {\n\t\t\n\t\t/**\n\t\t* The index of the selected [option]{@link enyo.Option} in the list.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tselected: 0,\n\n\t\t/**\n\t\t* The value of the selected [option]{@link enyo.Option}.\n\t\t* \n\t\t* @type {Object}\n\t\t* @default null\n\t\t* @public\n\t\t*/\n\t\tvalue: null,\n\n\t\t/**\n\t\t* The size of the select box in rows.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tsize: 0,\n\n\t\t/**\n\t\t* Sets whether the enyo.Select can select multiple options\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tmultiple: false,\n\n\t\t/**\n\t\t* Sets whether the enyo.Select is disabled, or not\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tdisabled: false\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonchange: 'change'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'select',\n\n\t/**\n\t* @private\n\t*/\n\tdefaultKind: Option,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\t//Trick to force IE8 onchange event bubble\n\t\t\tif(platform.ie == 8){\n\t\t\t\tthis.setAttribute('onchange', dispatcher.bubbler);\n\t\t\t}\n\t\t\tthis.selectedChanged();\n\t\t\tthis.valueChanged();\n\t\t\tthis.sizeChanged();\n\t\t\tthis.multipleChanged();\n\t\t\tthis.disabledChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tgetSelected: function () {\n\t\treturn Number(this.getNodeProperty('selectedIndex', this.selected));\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tselectedChanged: function () {\n\t\tthis.setNodeProperty('selectedIndex', this.selected);\n\t\tthis.set('value', this.getNodeProperty('value', this.value));\n\t},\n\t/**\n\t* @private\n\t*/\n\tvalueChanged: function() {\n\t\tthis.setNodeProperty('value', this.value);\n\t\tthis.set('selected', this.getSelected());\n\t},\n\t/**\n\t* @private\n\t*/\n\tsizeChanged: function() {\n\t\tthis.setNodeProperty('size', this.size);\n\t},\n\t/**\n\t* @private\n\t*/\n\tmultipleChanged: function() {\n\t\tthis.setNodeProperty('multiple', this.multiple);\n\t},\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function() {\n\t\tthis.setNodeProperty('disabled', this.disabled);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tchange: function () {\n\t\tthis.set('selected', this.getSelected());\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trender: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\t// work around IE bug with innerHTML setting of <select>, rerender parent instead\n\t\t\t// http://support.microsoft.com/default.aspx?scid=kb;en-us;276228\n\t\t\tif (platform.ie) {\n\t\t\t\tthis.parent.render();\n\t\t\t} else {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t})\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tutils = require('./utils'),\n\tdispatcher = require('./dispatcher'),\n\tplatform = require('./platform');\n\nvar\n\tScrollMath = require('./ScrollMath'),\n\tScrollStrategy = require('./ScrollStrategy'),\n\tScrollThumb = require('./ScrollThumb'),\n\tDom = require('./dom');\n\n/**\n* Fires when dragging has started, allowing drags to propagate to parent\n* [scrollers]{@link enyo.Scroller}.\n*\n* @event enyo.TouchScrollStrategy#onShouldDrag\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently\n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing\n*\tevent information.\n* @private\n*/\n\n/**\n* {@link enyo.TouchScrollStrategy} is a helper [kind]{@glossary kind} for implementing a\n* touch-based [scroller]{@link enyo.Scroller}. It integrates the scrolling simulation provided\n* by {@link enyo.ScrollMath} into an `enyo.Scroller`.\n*\n* `enyo.TouchScrollStrategy` is not typically created in application code. Instead, it is\n* specified as the value of the [strategyKind]{@link enyo.Scroller#strategyKind} property\n* of an `enyo.Scroller` or {@link enyo.List}, or is used by the framework implicitly.\n*\n* @class enyo.TouchScrollStrategy\n* @extends enyo.ScrollStrategy\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.TouchScrollStrategy.prototype */ {\n\n\tname: 'enyo.TouchScrollStrategy',\n\n\t/**\n\t* @private\n\t*/\n\tkind: ScrollStrategy,\n\n\t/**\n\t\tIf `true` (the default), the scroller will overscroll and bounce back at the edges.\n\t*/\n\toverscroll: true,\n\n\t/**\n\t\tIf `true` (the default), the scroller will not propagate `dragstart`\n\t\tevents that cause it to start scrolling.\n\t*/\n\tpreventDragPropagation: true,\n\n\t/**\n\t* @private\n\t*/\n\tpublished:\n\t\t/** @lends enyo.TouchScrollStrategy.prototype */ {\n\n\t\t/**\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\tvertical: 'default',\n\n\t\t/**\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\thorizontal: 'default',\n\n\t\t/**\n\t\t* Set to `true` to display a scroll thumb.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tthumb: true,\n\n\t\t/**\n\t\t* Set to `true` to display a transparent overlay while scrolling. This can help improve\n\t\t* performance of complex, large scroll regions on some platforms (e.g., Android).\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\tscrim: false,\n\n\t\t/**\n\t\t* Indicates whether to allow drag [events]{@glossary event} to be sent while gesture\n\t\t* events are happening simultaneously.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tdragDuringGesture: true,\n\n\t\t/**\n\t\t* Facades animation time step from [ScrollMath]{@link enyo.ScrollMath}.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 20\n\t\t* @public\n\t\t*/\n\t\tinterval: 20,\n\n\t\t/**\n\t\t* Facades animation interval type from [ScrollMath]{@link enyo.ScrollMath}.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tfixedTime: true,\n\n\t\t/**\n\t\t* Facades one unit of time for simulation from [ScrollMath]{@link enyo.ScrollMath}.\n\t\t*\n\t\t* @type {Number}\n\t\t* @default 10\n\t\t* @public\n\t\t*/\n\t\tframe: 10,\n\n\t\t/**\n\t\t* Indicates whether default [events]{@glossary event} (e.g., native scrolling\n\t\t* events) should be suppressed.\n\t\t*\n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tpreventDefault: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonShouldDrag: ''\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonflick: 'flick',\n\t\tonShouldDrag: 'shouldDrag',\n\t\tondrag: 'drag'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttools: [\n\t\t{kind: ScrollMath, onScrollStart: 'scrollMathStart', onScroll: 'scrollMathScroll', onScrollStop: 'scrollMathStop', onStabilize: 'scrollMathStabilize'},\n\t\t{name: 'vthumb', kind: ScrollThumb, axis: 'v', showing: false},\n\t\t{name: 'hthumb', kind: ScrollThumb, axis: 'h', showing: false}\n\t],\n\n\t/**\n\t* @private\n\t*/\n\tscrimTools: [{name: 'scrim', classes: 'enyo-fit', style: 'z-index: 1;', showing: false}],\n\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'client', classes: 'enyo-touch-scroller'}\n\t],\n\n\t/**\n\t* Flag indicating whether the list is currently reordering.\n\t*\n\t* @readonly\n\t* @public\n\t*/\n\tlistReordering: false,\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.transform = Dom.canTransform();\n\t\t\tif(!this.transform) {\n\t\t\t\tif(this.overscroll) {\n\t\t\t\t\t//so we can adjust top/left if browser can't handle translations\n\t\t\t\t\tthis.$.client.applyStyle('position', 'relative');\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.accel = Dom.canAccelerate();\n\t\t\tvar containerClasses = 'enyo-touch-strategy-container';\n\t\t\t// note: needed for ios to avoid incorrect clipping of thumb\n\t\t\t// and need to avoid on Android as it causes problems hiding the thumb\n\t\t\tif (platform.ios && this.accel) {\n\t\t\t\tcontainerClasses += ' enyo-composite';\n\t\t\t}\n\t\t\tthis.scrimChanged();\n\t\t\tthis.intervalChanged();\n\t\t\tthis.fixedTimeChanged();\n\t\t\tthis.frameChanged();\n\t\t\tthis.container.addClass(containerClasses);\n\t\t\tthis.translation = this.accel ? 'translate3d' : 'translate';\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.createChrome(this.tools);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tdestroy: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.container.removeClass('enyo-touch-strategy-container');\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tdispatcher.makeBubble(this.$.client, 'scroll');\n\t\t\tthis.calcBoundaries();\n\t\t\tthis.syncScrollMath();\n\t\t\tif (this.thumb) {\n\t\t\t\tthis.alertThumbs();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tscrimChanged: function () {\n\t\tif (this.scrim && !this.$.scrim) {\n\t\t\tthis.makeScrim();\n\t\t}\n\t\tif (!this.scrim && this.$.scrim) {\n\t\t\tthis.$.scrim.destroy();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmakeScrim: function () {\n\t\t// reset control parent so scrim doesn't go into client.\n\t\tvar cp = this.controlParent;\n\t\tthis.controlParent = null;\n\t\tthis.createChrome(this.scrimTools);\n\t\tthis.controlParent = cp;\n\t\tvar cn = this.container.hasNode();\n\t\t// render scrim in container, strategy has no dom.\n\t\tif (cn) {\n\t\t\tthis.$.scrim.parentNode = cn;\n\t\t\tthis.$.scrim.render();\n\t\t}\n\t},\n\n\t/**\n\t* Determines whether or not the scroller is actively moving.\n\t*\n\t* @return {Boolean} `true` if actively moving; otherwise, `false`.\n\t* @public\n\t*/\n\tisScrolling: function () {\n\t\tvar m = this.$.scrollMath;\n\t\treturn m ? m.isScrolling() : this.scrolling;\n\t},\n\n\t/**\n\t* Determines whether or not the scroller is in overscroll.\n\t*\n\t* @return {Boolean} `true` if in overscroll; otherwise, `false`.\n\t* @public\n\t*/\n\tisOverscrolling: function () {\n\t\tvar m = this.$.scrollMath || this;\n\t\treturn (this.overscroll) ? Boolean(m.isInOverScroll()) : false;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdomScroll: function () {\n\t\tif (!this.isScrolling()) {\n\t\t\tthis.calcBoundaries();\n\t\t\tthis.syncScrollMath();\n\t\t\tif (this.thumb) {\n\t\t\t\tthis.alertThumbs();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thorizontalChanged: function () {\n\t\tthis.$.scrollMath.horizontal = (this.horizontal != 'hidden');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tverticalChanged: function () {\n\t\tthis.$.scrollMath.vertical = (this.vertical != 'hidden');\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\tthis.$.client.applyStyle('max-height', this.maxHeight);\n\t\t// note: previously used enyo-fit here but IE would reset scroll position when the scroll thumb\n\t\t// was hidden; in general IE resets scrollTop when there are 2 abs position siblings, one has\n\t\t// scrollTop and the other is hidden.\n\t\tthis.$.client.addRemoveClass('enyo-scrollee-fit', !this.maxHeight);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tthumbChanged: function () {\n\t\tthis.hideThumbs();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tintervalChanged: function () {\n\t\tif (this.$.scrollMath) {\n\t\t\tthis.$.scrollMath.interval = this.interval;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tfixedTimeChanged: function () {\n\t\tif (this.$.scrollMath) {\n\t\t\tthis.$.scrollMath.fixedTime = this.fixedTime;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tframeChanged: function () {\n\t\tif (this.$.scrollMath) {\n\t\t\tthis.$.scrollMath.frame = this.frame;\n\t\t}\n\t},\n\n\t/**\n\t* Stops any active scroll movement.\n\t*\n\t* @todo Doc update made while merging, need official documentation update!\n\t*\n\t* @param {Boolean} emit - Whether or not to fire the `onScrollStop` event.\n\t* @public\n\t*/\n\tstop: function (emit) {\n\t\tif (this.isScrolling()) {\n\t\t\tthis.$.scrollMath.stop(emit);\n\t\t}\n\t},\n\n\t/**\n\t* Adjusts the scroll position to be valid, if necessary (e.g., after the scroll contents\n\t* have changed).\n\t*\n\t* @public\n\t*/\n\tstabilize: function () {\n\t\tif(this.$.scrollMath) {\n\t\t\tthis.$.scrollMath.stabilize();\n\t\t}\n\t},\n\n\t/**\n\t* Scrolls to a specific position within the scroll area.\n\t*\n\t* @param {Number} x - The `x` position in pixels.\n\t* @param {Number} y - The `y` position in pixels.\n\t* @public\n\t*/\n\tscrollTo: function (x, y) {\n\t\tthis.stop(true);\n\t\tthis.$.scrollMath.scrollTo(x, y || y === 0 ? y : null);\n\t},\n\n\t/**\n\t* Scrolls the given [control]{@link enyo.Control} into view.\n\t*\n\t* @param {enyo.Control} ctl - The [control]{@link enyo.Control} to make visible in the\n\t*\t[scroller's]{@link enyo.Scroller} viewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @method\n\t* @public\n\t*/\n\tscrollIntoView: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop(true);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Sets the horizontal scroll position.\n\t*\n\t* @param {Number} left - The horizontal scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tsetScrollLeft: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop(true);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Sets the vertical scroll position.\n\t*\n\t* @param {Number} top - The vertical scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tsetScrollTop: kind.inherit(function (sup) {\n\t\treturn function(top) {\n\t\t\tthis.stop(true);\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Retrieves the horizontal scroll position.\n\t*\n\t* @returns {Number} The horizontal scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tgetScrollLeft: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\treturn this.isScrolling() ? this.scrollLeft : sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* Retrieves the vertical scroll position.\n\t*\n\t* @returns {Number} The vertical scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tgetScrollTop: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\treturn this.isScrolling() ? this.scrollTop : sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tcalcScrollNode: function () {\n\t\treturn this.$.client.hasNode();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcAutoScrolling: function () {\n\t\tvar v = (this.vertical == 'auto');\n\t\tvar h = (this.horizontal == 'auto') || (this.horizontal == 'default');\n\t\tif ((v || h) && this.scrollNode) {\n\t\t\tvar b = this.getScrollBounds();\n\t\t\tif (v) {\n\t\t\t\tthis.$.scrollMath.vertical = b.height > b.clientHeight;\n\t\t\t}\n\t\t\tif (h) {\n\t\t\t\tthis.$.scrollMath.horizontal = b.width > b.clientWidth;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tshouldDrag: function (sender, e) {\n\t\tthis.calcAutoScrolling();\n\t\tvar requestV = e.vertical;\n\t\tvar canH = this.$.scrollMath.horizontal && !requestV;\n\t\tvar canV = this.$.scrollMath.vertical && requestV;\n\t\tvar down = e.dy < 0, right = e.dx < 0;\n\t\tvar oobV = (!down && this.startEdges.top || down && this.startEdges.bottom);\n\t\tvar oobH = (!right && this.startEdges.left || right && this.startEdges.right);\n\t\t// we would scroll if not at a boundary\n\t\tif (!e.boundaryDragger && (canH || canV)) {\n\t\t\te.boundaryDragger = this;\n\t\t}\n\t\t// include boundary exclusion\n\t\tif ((!oobV && canV) || (!oobH && canH)) {\n\t\t\te.dragger = this;\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tflick: function (sender, e) {\n\t\tvar onAxis = Math.abs(e.xVelocity) > Math.abs(e.yVelocity) ? this.$.scrollMath.horizontal : this.$.scrollMath.vertical;\n\t\tif (onAxis && this.dragging) {\n\t\t\tthis.$.scrollMath.flick(e);\n\t\t\treturn this.preventDragPropagation;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdown: kind.inherit(function (sup) {\n\t\treturn function (sender, e) {\n\t\t\tif (!this.isOverscrolling()) {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tmove: function (sender, e) {\n\t},\n\n\t// Special synthetic DOM events served up by the Gesture system\n\n\t/**\n\t* @fires enyo.TouchScrollStrategy#onShouldDrag\n\t* @private\n\t*/\n\tdragstart: function (sender, e) {\n\t\t// Ignore drags sent from multi-touch events\n\t\tif(!this.dragDuringGesture && e.srcEvent.touches && e.srcEvent.touches.length > 1) {\n\t\t\treturn true;\n\t\t}\n\t\t// note: allow drags to propagate to parent scrollers via data returned in the shouldDrag event.\n\t\tthis.doShouldDrag(e);\n\t\tthis.dragging = (e.dragger == this || (!e.dragger && e.boundaryDragger == this));\n\t\tif (this.dragging) {\n\t\t\tif(this.preventDefault){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t// note: needed because show/hide changes\n\t\t\t// the position so sync'ing is required when\n\t\t\t// dragging begins (needed because show/hide does not trigger onscroll)\n\t\t\tthis.syncScrollMath();\n\t\t\tthis.$.scrollMath.startDrag(e);\n\t\t\tif (this.preventDragPropagation) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdrag: function (sender, e) {\n\t\t// if the list is doing a reorder, don't scroll\n\t\tif(this.listReordering) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.dragging) {\n\t\t\tif(this.preventDefault){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tthis.$.scrollMath.drag(e);\n\t\t\tif (this.scrim) {\n\t\t\t\tthis.$.scrim.show();\n\t\t\t}\n\t\t}\n\t},\n\tdragfinish: function (sender, e) {\n\t\tif (this.dragging) {\n\t\t\te.preventTap();\n\t\t\tthis.$.scrollMath.dragFinish();\n\t\t\tthis.dragging = false;\n\t\t\tif (this.scrim) {\n\t\t\t\tthis.$.scrim.hide();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmousewheel: function (sender, e) {\n\t\tif (!this.dragging && this.useMouseWheel) {\n\t\t\tthis.calcBoundaries();\n\t\t\tthis.syncScrollMath();\n\t\t\tthis.stabilize();\n\t\t\tif (this.$.scrollMath.mousewheel(e)) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathStart: function () {\n\t\tif (this.scrollNode && !this.isScrolling()) {\n\t\t\tthis.scrolling = true;\n\t\t\tif (!this.isOverscrolling()) {\n\t\t\t\tthis.calcBoundaries();\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathScroll: function (sender) {\n\t\tif(!this.overscroll) {\n\t\t\t//don't overscroll past edges\n\t\t\tthis.effectScroll(-Math.min(sender.leftBoundary, Math.max(sender.rightBoundary, sender.x)),\n\t\t\t\t\t-Math.min(sender.topBoundary, Math.max(sender.bottomBoundary, sender.y)));\n\t\t} else {\n\t\t\tthis.effectScroll(-sender.x, -sender.y);\n\t\t}\n\t\tif (this.thumb) {\n\t\t\tthis.showThumbs();\n\t\t\tthis.delayHideThumbs(100);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathStop: function () {\n\t\tthis.scrolling = false;\n\t\tthis.effectScrollStop();\n\t\tif (this.thumb) {\n\t\t\tthis.delayHideThumbs(100);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathStabilize: function (sender) {\n\t\tthis.effectScroll(-sender.x, -sender.y);\n\t\tif (this.thumb) {\n\t\t\tthis.showThumbs();\n\t\t\tthis.delayHideThumbs(100);\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcalcBoundaries: function () {\n\t\tvar s = this.$.scrollMath || this, b = this._getScrollBounds();\n\t\ts.bottomBoundary = b.clientHeight - b.height;\n\t\ts.rightBoundary = b.clientWidth - b.width;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tsyncScrollMath: function () {\n\t\tvar m = this.$.scrollMath;\n\t\tif(m) {\n\t\t\tm.setScrollX(-this.getScrollLeft());\n\t\t\tm.setScrollY(-this.getScrollTop());\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teffectScroll: function (x, y) {\n\t\tif (this.scrollNode) {\n\t\t\tthis.scrollLeft = this.scrollNode.scrollLeft = x;\n\t\t\tthis.scrollTop = this.scrollNode.scrollTop = y;\n\t\t\tthis.effectOverscroll(x !== null? Math.round(x): x, y !== null? Math.round(y): y);\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teffectScrollStop: function () {\n\t\tthis.effectOverscroll(null, null);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\teffectOverscroll: function (x, y) {\n\t\tvar n = this.scrollNode;\n\t\tvar xt = '0', yt = '0', zt = this.accel ? ',0' : '';\n\t\tif (y !== null && Math.abs(y - n.scrollTop) > 1) {\n\t\t\tyt = (n.scrollTop - y);\n\t\t}\n\t\tif (x !== null && Math.abs(x - n.scrollLeft) > 1) {\n\t\t\txt = (n.scrollLeft - x);\n\t\t}\n\t\tif(!this.transform) {\n\t\t\t//adjust top/left if browser can't handle translations\n\t\t\tthis.$.client.setBounds({left:xt + 'px', top:yt + 'px'});\n\t\t} else {\n\t\t\tDom.transformValue(this.$.client, this.translation, xt + 'px, ' + yt + 'px' + zt);\n\t\t}\n\t},\n\n\t/**\n\t* Retrieves the overscroll boundaries of the [scroller]{@link enyo.Scroller}.\n\t*\n\t* @returns {enyo.Scroller~OverscrollBoundaryObject} An [object]{@glossary Object}\n\t*\tdescribing the overscroll boundaries.\n\t* @public\n\t*/\n\tgetOverScrollBounds: function () {\n\t\tvar m = this.$.scrollMath || this;\n\t\treturn {\n\t\t\toverleft: Math.min(m.leftBoundary - m.x, 0) || Math.max(m.rightBoundary - m.x, 0),\n\t\t\tovertop: Math.min(m.topBoundary - m.y, 0) || Math.max(m.bottomBoundary - m.y, 0)\n\t\t};\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\t_getScrollBounds: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tvar r = sup.apply(this, arguments);\n\t\t\tutils.mixin(r, this.getOverScrollBounds());\n\t\t\treturn r;\n\t\t};\n\t}),\n\n\t/**\n\t* Retrieves the scroll boundaries of the [scroller]{@link enyo.Scroller}.\n\t*\n\t* @returns {enyo.Scroller~BoundaryObject} An [object]{@glossary Object} describing the\n\t*\tscroll boundaries.\n\t* @method\n\t* @public\n\t*/\n\tgetScrollBounds: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.stop(true);\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* This method exists primarily to support an internal use case for\n\t* [enyo.DataList]{@link enyo.DataList}. It is intended to be called by the\n\t* [scroller]{@link enyo.Scroller} that owns this strategy.\n\t*\n\t* Triggers a remeasurement of the scroller's metrics (specifically, the\n\t* size of its viewport, the size of its contents and the difference between\n\t* the two, which determines the extent to which the scroller may scroll).\n\t*\n\t* @public\n\t*/\n\tremeasure: function () {\n\t\tthis.calcBoundaries();\n\t\tif (this.thumb) {\n\t\t\tthis.syncThumbs();\n\t\t}\n\t\tthis.stabilize();\n\t},\n\n\t/**\n\t* Displays the scroll indicators and sets the auto-hide timeout.\n\t*\n\t* @public\n\t*/\n\talertThumbs: function () {\n\t\tthis.showThumbs();\n\t\tthis.delayHideThumbs(500);\n\t},\n\n\t/**\n\t* Syncs the vertical and horizontal scroll indicators.\n\t*\n\t* @public\n\t*/\n\tsyncThumbs: function () {\n\t\tthis.$.vthumb.sync(this);\n\t\tthis.$.hthumb.sync(this);\n\t},\n\tupdateThumbs: function () {\n\t\tthis.$.vthumb.update(this);\n\t\tthis.$.hthumb.update(this);\n\t},\n\n\t/**\n\t* Syncs and shows both the vertical and horizontal scroll indicators. We only sync after we\n\t* have checked if the vertical and/or horizontal scroll indicators are to be shown, so that\n\t* {@link enyo.ScrollThumb#update} accurately makes calculations when the indicators are\n\t* visible.\n\t*\n\t* @public\n\t*/\n\tshowThumbs: function () {\n\t\tif (this.horizontal != 'hidden') {\n\t\t\tthis.$.hthumb.show();\n\t\t}\n\t\tif (this.vertical != 'hidden') {\n\t\t\tthis.$.vthumb.show();\n\t\t}\n\t\tthis.syncThumbs();\n\t},\n\n\t/**\n\t* Hides the vertical and horizontal scroll indicators.\n\t*\n\t* @public\n\t*/\n\thideThumbs: function () {\n\t\tthis.$.vthumb.hide();\n\t\tthis.$.hthumb.hide();\n\t},\n\n\t/**\n\t* Hides the vertical and horizontal scroll indicators asynchronously.\n\t*\n\t* @public\n\t*/\n\tdelayHideThumbs: function (delay) {\n\t\tthis.$.vthumb.delayHide(delay);\n\t\tthis.$.hthumb.delayHide(delay);\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind');\nvar\n\tToolDecorator = require('../ToolDecorator');\n\n/**\n* {@link enyo.Button} implements an HTML [button]{@glossary button}, with support\n* for grouping using {@link enyo.Group}.\n*\n* For more information, see the documentation on\n* [Buttons]{@linkplain $dev-guide/building-apps/controls/buttons.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Button\n* @extends enyo.ToolDecorator\n* @ui\n* @public\n*/\nmodule.exports = kind(\n\t/** @lends enyo.Button.prototype */ {\n\n\t/**\n\t* @private\n\t*/\n\tname: 'enyo.Button',\n\t\n\t/**\n\t* @private\n\t*/\n\tkind: ToolDecorator,\n\n\t/**\n\t* @private\n\t*/\n\ttag: 'button',\n\n\t/**\n\t* @private\n\t*/\n\tattributes: {\n\t\t/**\n\t\t * Set to `'button'`; otherwise, the default value would be `'submit'`, which\n\t\t * can cause unexpected problems when [controls]{@link enyo.Control} are used\n\t\t * inside of a [form]{@glossary form}.\n\t\t * \n\t\t * @type {String}\n\t\t * @private\n\t\t */\n\t\ttype: 'button'\n\t},\n\t\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Button.prototype */ {\n\t\t\n\t\t/**\n\t\t * When `true`, the [button]{@glossary button} is shown as disabled and does not \n\t\t * generate tap [events]{@glossary event}.\n\t\t * \n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @public\n\t\t */\n\t\tdisabled: false\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.disabledChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tdisabledChanged: function () {\n\t\tthis.setAttribute('disabled', this.disabled);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\ttap: function () {\n\t\tif (this.disabled) {\n\t\t\t// work around for platforms like Chrome on Android or Opera that send\n\t\t\t// mouseup to disabled form controls\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.setActive(true);\n\t\t}\n\t}\n});","var\n    kind = require('../../../enyo/lib/kind'),\n    Select = require('../../../enyo/lib/Select');\n\nvar\n    ilib = require('../../../enyo-ilib').ilib;\n\nmodule.exports = kind({\n    name: 'ilib.sample.ChooseLocale',\n    tag: 'span',\n\n    published: {\n        'value': 'en-US'\n    },\n\n    locales: [\n        {locale: 'sq-AL', label: 'Albanian - Albania', label_ol: 'shqipe - Shqipri'},\n        {locale: 'sq-ME', label: 'Albanian - Montenegro', label_ol: 'shqipe - Montenegro'},\n        {locale: 'ar-DZ', label: 'Arabic - Algeria', label_ol: ' - '},\n        {locale: 'ar-BH', label: 'Arabic - Bahrain', label_ol: ' - '},\n        {locale: 'ar-DJ', label: 'Arabic - Djibouti', label_ol: ' - '},\n        {locale: 'ar-EG', label: 'Arabic - Egypt', label_ol: ' - '},\n        {locale: 'ar-IQ', label: 'Arabic - Iraq', label_ol: ' - '},\n        {locale: 'ar-JO', label: 'Arabic - Jordan', label_ol: ' - '},\n        {locale: 'ar-KW', label: 'Arabic - Kuwait', label_ol: ' - '},\n        {locale: 'ar-LB', label: 'Arabic - Lebanon', label_ol: ' - '},\n        {locale: 'ar-LY', label: 'Arabic - Libya', label_ol: ' - '},\n        {locale: 'ar-MR', label: 'Arabic - Mauritania', label_ol: ' - '},\n        {locale: 'ar-MA', label: 'Arabic - Morocco', label_ol: ' - '},\n        {locale: 'ar-OM', label: 'Arabic - Oman', label_ol: ' - '},\n        {locale: 'ar-QA', label: 'Arabic - Qatar', label_ol: ' - '},\n        {locale: 'ar-SA', label: 'Arabic - Saudi Arabia', label_ol: ' -  '},\n        {locale: 'ar-SD', label: 'Arabic - Sudan', label_ol: ' - '},\n        {locale: 'ar-SY', label: 'Arabic - Syria', label_ol: ' - '},\n        {locale: 'ar-TN', label: 'Arabic - Tunisia', label_ol: ' - '},\n        {locale: 'ar-AE', label: 'Arabic - UAE', label_ol: ' -   '},\n        {locale: 'ar-YE', label: 'Arabic - Yemen', label_ol: ' - '},\n        {locale: 'bs-Latn-BA', label: 'Bosnian - Bosnia', label_ol: 'bosanski - Bosna i Hercegovina'},\n        {locale: 'bs-Latn-ME', label: 'Bosnian - Montenegro', label_ol: 'bosanski - Montenegro'},\n        {locale: 'bg-BG', label: 'Bulgarian - Bulgaria', label_ol: ' - '},\n        {locale: 'zh-Hans-CN', label: 'Chinese - China', label_ol: ' - '},\n        {locale: 'zh-Hant-HK', label: 'Chinese - Hong Kong', label_ol: ' - '},\n        {locale: 'zh-Hant-MY', label: 'Chinese - Malaysia', label_ol: ' - '},\n        {locale: 'zh-Hans-SG', label: 'Chinese - Singapore', label_ol: ' - '},\n        {locale: 'zh-Hant-TW', label: 'Chinese - Taiwan', label_ol: ' - '},\n        {locale: 'hr-HR', label: 'Croatian - Croatia', label_ol: 'Hrvatski - Hrvatska'},\n        {locale: 'hr-ME', label: 'Croatian - Montenegro', label_ol: 'Hrvatski - Montenegro'},\n        {locale: 'cz-CZ', label: 'Czech - Czech Republic', label_ol: 'esk - esk republika'},\n        {locale: 'da-DK', label: 'Danish - Denmark', label_ol: 'dansk - Danmark'},\n        {locale: 'nl-BE', label: 'Dutch - Belgium', label_ol: 'Nederlands - Belgi'},\n        {locale: 'nl-NL', label: 'Dutch - Netherlands', label_ol: 'Nederlands - Nederland'},\n        {locale: 'en-AM', label: 'English - Armenia', label_ol: 'English - Armenia'},\n        {locale: 'en-AU', label: 'English - Australia', label_ol: 'English - Australia'},\n        {locale: 'en-AZ', label: 'English - Azerbaijan', label_ol: 'English - Azerbaijan'},\n        {locale: 'en-CA', label: 'English - Canada', label_ol: 'English - Canada'},\n        {locale: 'en-ET', label: 'English - Ethiopia', label_ol: 'English - Ethiopia'},\n        {locale: 'en-GM', label: 'English - Gambia', label_ol: 'English - Gambia'},\n        {locale: 'en-GH', label: 'English - Ghana', label_ol: 'English - Ghana'},\n        {locale: 'en-HK', label: 'English - Hong Kong', label_ol: 'English - Hong Kong'},\n        {locale: 'en-IS', label: 'English - Iceland', label_ol: 'English - Iceland'},\n        {locale: 'en-IN', label: 'English - India', label_ol: 'English - India'},\n        {locale: 'en-IE', label: 'English - Ireland', label_ol: 'English - Ireland'},\n        {locale: 'en-KE', label: 'English - Kenya', label_ol: 'English - Kenya'},\n        {locale: 'en-LR', label: 'English - Liberia', label_ol: 'English - Liberia'},\n        {locale: 'en-MW', label: 'English - Malawi', label_ol: 'English - Malawi'},\n        {locale: 'en-MY', label: 'English - Malaysia', label_ol: 'English - Malaysia'},\n        {locale: 'en-MM', label: 'English - Myanmar', label_ol: 'English - Myanmar'},\n        {locale: 'en-NZ', label: 'English - New Zealand', label_ol: 'English - New Zealand'},\n        {locale: 'en-NG', label: 'English - Nigeria', label_ol: 'English - Nigeria'},\n        {locale: 'en-PK', label: 'English - Pakistan', label_ol: 'English - Pakistan'},\n        {locale: 'en-PH', label: 'English - Philippines', label_ol: 'English - Philippines'},\n        {locale: 'en-PR', label: 'English - Puerto Rico', label_ol: 'English - Puerto Rico'},\n        {locale: 'en-RW', label: 'English - Rwanda', label_ol: 'English - Rwanda'},\n        {locale: 'en-SL', label: 'English - Sierra Leone', label_ol: 'English - Sierra Leone'},\n        {locale: 'en-SG', label: 'English - Singapore', label_ol: 'English - Singapore'},\n        {locale: 'en-ZA', label: 'English - South Africa', label_ol: 'English - South Africa'},\n        {locale: 'en-LK', label: 'English - Sri Lanka', label_ol: 'English - Sri Lanka'},\n        {locale: 'en-SD', label: 'English - Sudan', label_ol: 'English - Sudan'},\n        {locale: 'en-TZ', label: 'English - Tanzania', label_ol: 'English - Tanzania'},\n        {locale: 'en-GB', label: 'English - UK', label_ol: 'English - UK'},\n        {locale: 'en-US', label: 'English - USA', label_ol: 'English - USA'},\n        {locale: 'en-UG', label: 'English - Uganda', label_ol: 'English - Uganda'},\n        {locale: 'en-ZM', label: 'English - Zambia', label_ol: 'English - Zambia'},\n        {locale: 'et-EE', label: 'Estonian - Estonia', label_ol: 'eesti - Eesti'},\n        {locale: 'fa-AF', label: 'Farsi - Afghanistan', label_ol: ' -   '},\n        {locale: 'fa-IR', label: 'Farsi - Iran', label_ol: ' -   '},\n        {locale: 'fi-FI', label: 'Finnish - Finland', label_ol: 'suomi - Suomi'},\n        {locale: 'fr-DZ', label: 'French - Algeria', label_ol: 'franais - Algrie'},\n        {locale: 'fr-BE', label: 'French - Belgium', label_ol: 'franais - Belgique'},\n        {locale: 'fr-BJ', label: 'French - Benin', label_ol: 'franais - Bnin'},\n        {locale: 'fr-BF', label: 'French - Burkina Faso', label_ol: 'franais - Burkina Faso'},\n        {locale: 'fr-CM', label: 'French - Cameroon', label_ol: 'franais - Cameroun'},\n        {locale: 'fr-CA', label: 'French - Canada', label_ol: 'franais - Canada'},\n        {locale: 'fr-CF', label: 'French - Central African Republic', label_ol: 'franais - Rpublique centrafricaine'},\n        {locale: 'fr-CD', label: 'French - Democratic Republic of the Congo', label_ol: 'franais - Rpublique dmocratique du Congo'},\n        {locale: 'fr-DJ', label: 'French - Djibouti', label_ol: 'franais - Djibouti'},\n        {locale: 'fr-CQ', label: 'French - Equatorial Guinea', label_ol: 'franais - Guine quatoriale'},\n        {locale: 'fr-FR', label: 'French - France', label_ol: 'franais - France'},\n        {locale: 'fr-GA', label: 'French - Gabon', label_ol: 'franais - Gabon'},\n        {locale: 'fr-GN', label: 'French - Guinea', label_ol: 'franais - Guine'},\n        {locale: 'fr-CI', label: 'French - Ivory Coast', label_ol: 'franais - Cte-d\\'Ivoire'},\n        {locale: 'fr-LB', label: 'French - Lebanon', label_ol: 'franais - Liban'},\n        {locale: 'fr-LU', label: 'French - Luxemburg', label_ol: 'franais - Luxembourg'},\n        {locale: 'fr-ML', label: 'French - Mali', label_ol: 'franais - Mali'},\n        {locale: 'fr-CG', label: 'French - Republic of the Congo (Congo-Brazzaville)', label_ol: 'franais - Rpublique du Congo'},\n        {locale: 'fr-RW', label: 'French - Rwanda', label_ol: 'franais - Rwanda'},\n        {locale: 'fr-SN', label: 'French - Senegal', label_ol: 'franais - Sngal'},\n        {locale: 'fr-CH', label: 'French - Swizerland', label_ol: 'franais - Suisse'},\n        {locale: 'fr-TG', label: 'French - Togo', label_ol: 'franais - Togo'},\n        {locale: 'ga-IE', label: 'Gaelic - Ireland', label_ol: 'Gaeilge - ire'},\n        {locale: 'de-AT', label: 'German - Austria', label_ol: 'Deutsch - sterreich'},\n        {locale: 'de-DE', label: 'German - Germany', label_ol: 'Deutsch - Deutschland'},\n        {locale: 'de-LU', label: 'German - Luxemburg', label_ol: 'Deutsch - Luxemburg'},\n        {locale: 'de-CH', label: 'German - Swizerland', label_ol: 'Deutsch - Schweiz'},\n        {locale: 'el-CY', label: 'Greek - Cyprus', label_ol: ' - '},\n        {locale: 'el-GR', label: 'Greek - Greece', label_ol: ' - '},\n        {locale: 'he-IL', label: 'Hebrew - Israel', label_ol: ' - '},\n        {locale: 'hi-IN', label: 'Hindi - India', label_ol: ' - '},\n        {locale: 'hu-HU', label: 'Hungarian - Hungary', label_ol: 'magyar - Magyarorszg'},\n        {locale: 'id-ID', label: 'Indonesian - Indonesia', label_ol: 'bahasa Indonesia - Indonesia'},\n        {locale: 'it-IT', label: 'Italian - Italy', label_ol: 'italiano - Italia'},\n        {locale: 'it-CH', label: 'Italian - Swizerland', label_ol: 'italiano - Svizzeria'},\n        {locale: 'ja-JP', label: 'Japanese - Japan', label_ol: ' - '},\n        {locale: 'kk-Cyrl-KZ', label: 'Kazahk - Kazakhstan', label_ol: '  -  '},\n        {locale: 'ko-KR', label: 'Korean - Korea', label_ol: ' - '},\n        {locale: 'ku-Arab-IQ', label: 'Kurdish - Iraq', label_ol: ' - '},\n        {locale: 'lv-LV', label: 'Latvian - Latvia', label_ol: 'Latvijas - Latvija'},\n        {locale: 'lt-LT', label: 'Lithuanian - Lithuania', label_ol: 'lietuvieu - Lietuva'},\n        {locale: 'mk-MK', label: 'Macedonian - Macedonia', label_ol: ' -    '},\n        {locale: 'ms-MY', label: 'Malaysian - Malaysia', label_ol: 'bahasa Melayu - Malaysia'},\n        {locale: 'ms-SG', label: 'Malaysian - Singapore', label_ol: 'bahasa Melayu - Singapore'},\n        {locale: 'mn-Cyrl-MN', label: 'Mongolian - Mongolia', label_ol: '  -  '},\n        {locale: 'nb-NO', label: 'Norwegian - Norway', label_ol: 'norsk - Norge'},\n        {locale: 'pl-PL', label: 'Polish - Poland', label_ol: 'polski - Polska'},\n        {locale: 'pt-AO', label: 'Portuguese - Angola', label_ol: 'portugus - Angola'},\n        {locale: 'pt-BR', label: 'Portuguese - Brazil', label_ol: 'portugus - Brasil'},\n        {locale: 'pt-CV', label: 'Portuguese - Cape Verde', label_ol: 'portugus - Ilhas de Cabo Verde'},\n        {locale: 'pt-CQ', label: 'Portuguese - Equatorial Guinea', label_ol: 'portugus - Guin Equatorial'},\n        {locale: 'pt-PT', label: 'Portuguese - Portugal', label_ol: 'portugus - Portugal'},\n        {locale: 'ro-RO', label: 'Romanian - Romania', label_ol: 'romn - Romnia'},\n        {locale: 'ru-BY', label: 'Russian - Belarus', label_ol: ' - '},\n        {locale: 'ru-GE', label: 'Russian - Georgia', label_ol: ' - '},\n        {locale: 'ru-KG', label: 'Russian - Kyrgyzstan', label_ol: ' - '},\n        {locale: 'ru-KZ', label: 'Russian - Kazahkstan', label_ol: ' - '},\n        {locale: 'ru-RU', label: 'Russian - Russia', label_ol: ' -  '},\n        {locale: 'ru-UA', label: 'Russian - Ukraine', label_ol: ' - '},\n        {locale: 'sr-Latn-ME', label: 'Serbian - Montenegro', label_ol: 'srpski - Montenegro'},\n        {locale: 'rs-Latn-RS', label: 'Serbian - Serbia', label_ol: 'srpski - Srbija'},\n        {locale: 'sk-SK', label: 'Slovakian - Slovakia', label_ol: 'slovensk - Slovensko'},\n        {locale: 'sl-SI', label: 'Slovenian - Slovenia', label_ol: 'Slovenski - Slovenija'},\n        {locale: 'es-AR', label: 'Spanish - Argentina', label_ol: 'espaol - Argentina'},\n        {locale: 'es-BO', label: 'Spanish - Bolivia', label_ol: 'espaol - Bolivia'},\n        {locale: 'es-CL', label: 'Spanish - Chile', label_ol: 'espaol - Chile'},\n        {locale: 'es-CO', label: 'Spanish - Colombia', label_ol: 'espaol - Colombia'},\n        {locale: 'es-CR', label: 'Spanish - Costa Rica', label_ol: 'espaol - Costa Rica'},\n        {locale: 'es-DO', label: 'Spanish - Dominican Republic', label_ol: 'espaol - Repblica Dominicana'},\n        {locale: 'es-EC', label: 'Spanish - Ecuador', label_ol: 'espaol - Ecuador'},\n        {locale: 'es-SV', label: 'Spanish - El Salvador', label_ol: 'espaol - El Salvador'},\n        {locale: 'es-GQ', label: 'Spanish - Equatorial Guinea', label_ol: 'espaol - Guinea Ecuatorial'},\n        {locale: 'es-GT', label: 'Spanish - Guatemala', label_ol: 'espaol - Guatamala'},\n        {locale: 'es-HN', label: 'Spanish - Honduras', label_ol: 'espaol - Honduras'},\n        {locale: 'es-MX', label: 'Spanish - Mexico', label_ol: 'espaol - Mxico'},\n        {locale: 'es-NI', label: 'Spanish - Nicaragua', label_ol: 'espaol - Nicaragua'},\n        {locale: 'es-PA', label: 'Spanish - Panama', label_ol: 'espaol - Panam'},\n        {locale: 'es-PY', label: 'Spanish - Paraguay', label_ol: 'espaol - Paraguay'},\n        {locale: 'es-PE', label: 'Spanish - Peru', label_ol: 'espaol - Per'},\n        {locale: 'es-PH', label: 'Spanish - Philippines', label_ol: 'espaol - Filipinas'},\n        {locale: 'es-PR', label: 'Spanish - Puerto Rico', label_ol: 'espaol - Puerto Rico'},\n        {locale: 'es-ES', label: 'Spanish - Spain', label_ol: 'espaol - Espaa'},\n        {locale: 'es-US', label: 'Spanish - USA', label_ol: 'espaol - Estados Unidos'},\n        {locale: 'es-UY', label: 'Spanish - Uruguay', label_ol: 'espaol - Uruguay'},\n        {locale: 'es-VE', label: 'Spanish - Venezuela', label_ol: 'espaol - Venezuela'},\n        {locale: 'sv-FI', label: 'Swedish - Finland', label_ol: 'svenska - Finland'},\n        {locale: 'sv-SE', label: 'Swedish - Sweden', label_ol: 'svenska - Sverige'},\n        {locale: 'th-TH', label: 'Thai - Thailand', label_ol: ' - '},\n        {locale: 'tr-AM', label: 'Turkish - Armenia', label_ol: 'Trk - Ermenistan'},\n        {locale: 'tr-AZ', label: 'Turkish - Azerbaijan', label_ol: 'Trk - Azerbeycan'},\n        {locale: 'tr-CY', label: 'Turkish - Cyprus', label_ol: 'Trk - Kbrs'},\n        {locale: 'tr-TR', label: 'Turkish - Turkey', label_ol: 'Trk - Trkiye'},\n        {locale: 'uk-UA', label: 'Ukranian - Ukraine', label_ol: ' - '},\n        {locale: 'uz-Cyrl-UZ', label: 'Uzbek - Uzbekistan', label_ol: ' -  '},\n        {locale: 'uz-Latn-UZ', label: 'Uzbek - Uzbekistan', label_ol: 'Ozbek - Ozbekiston Respublikasi'},\n        {locale: 'vi-VN', label: 'Vietnamese - Vietnam', label_ol: 'Vit - Vit Nam'},\n        {locale: 'as-IN', label: 'Assamese - India', label_ol: ' -'},\n        {locale: 'bn-IN', label: 'Bengali - India', label_ol: ' -'},\n        {locale: 'gu-IN', label: 'Gujarati - India', label_ol: ' -'},\n        {locale: 'kn-IN', label: 'Kannada - India', label_ol: ' -'},\n        {locale: 'ml-IN', label: 'Malayalam - India', label_ol: ' -'},\n        {locale: 'mr-IN', label: 'Marathi - India', label_ol: ' -'},\n        {locale: 'pa-IN', label: 'Punjabi - India', label_ol: ' -'},\n        {locale: 'pa-PK', label: 'Punjabi - Pakistan', label_ol: ' -'},\n        {locale: 'ta-IN', label: 'Tamil - India', label_ol: ' -'},\n        {locale: 'te-IN', label: 'Telugu - India', label_ol: ' -'},\n        {locale: 'ur-IN', label: 'Urdu - India', label_ol: ' - '},\n        {locale: 'ur-PK', label: 'Urdu - Pakistan', label_ol: ' - '}\n    ],\n    \n    components: [\n        {name: 'switcherLocale', kind: Select, onchange: 'setLocale'}\n    ],\n\n    create: function () {\n        this.inherited(arguments);\n        var curLocale = ilib.getLocale();\n        for(var i = 0; i < this.locales.length; i++) {\n            this.$.switcherLocale.createComponent({value: this.locales[i].locale, content: this.locales[i].locale +' ('+ this.locales[i].label +' / '+ this.locales[i].label_ol +')', active: this.locales[i].locale.toLowerCase() === curLocale.toLowerCase()});\n        }\n    },\n\n    setLocale: function (sender, event) {\n        this.setValue(this.$.switcherLocale.value);\n        this.bubble('onSelectedLocale', {content: this.$.switcherLocale.value});\n    }\n});","require('../../enyo');\n\nvar\n\tkind = require('./kind'),\n\tdispatcher = require('./dispatcher');\n\nvar\n\tTouchScrollStrategy = require('./TouchScrollStrategy'),\n\tDom = require('./dom');\n\n/**\n* {@link enyo.TranslateScrollStrategy} is a helper [kind]{@glossary kind} that extends\n* {@link enyo.TouchScrollStrategy}, optimizing it for scrolling environments in which effecting \n* scroll changes with transforms using CSS translations is fastest.\n* \n* `enyo.TranslateScrollStrategy` is not typically created in application code. Instead, it is \n* specified as the value of the [strategyKind]{@link enyo.Scroller#strategyKind} property of \n* an {@link enyo.Scroller} or {@link enyo.List}, or is used by the framework implicitly.\n*\n* @class enyo.TranslateScrollStrategy\n* @extends enyo.TouchScrollStrategy\n* @protected\n*/\nmodule.exports = kind(\n\t/** @lends enyo.TranslateScrollStrategy.prototype */ {\n\n\tname: 'enyo.TranslateScrollStrategy',\n\n\t/**\n\t* @private\n\t*/\n\tkind: TouchScrollStrategy,\n\n\t/** \n\t* Set to `true` to optimize the strategy to only use translation to scroll; this increases \n\t* fluidity of scrolling animation. It should not be used when the \n\t* [scroller]{@link enyo.Scroller} contains [controls]{@link enyo.Control} that require \n\t* keyboard input. This is because when `translateOptimized` is `true`, it is possible to \n\t* position inputs such that they will not become visible when focused.\n\t*\n\t* @type {Boolean}\n\t* @default false\n\t* @public\n\t*/\n\ttranslateOptimized: false,\n\t\n\t/**\n\t* @private\n\t*/\n\tcomponents: [\n\t\t{name: 'clientContainer', classes: 'enyo-touch-scroller', components: [\n\t\t\t{name: 'client'}\n\t\t]}\n\t],\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tdispatcher.makeBubble(this.$.clientContainer, 'scroll');\n\t\t\tif (this.translateOptimized) {\n\t\t\t\tthis.setStartPosition();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tsetStartPosition: function() {\n\t\tthis.startX = this.getScrollLeft();\n\t\tthis.startY = this.getScrollTop();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetScrollSize: function () {\n\t\tvar n = this.$.client.hasNode();\n\t\treturn {width: n ? n.scrollWidth : 0, height: n ? n.scrollHeight : 0};\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// apply initial transform so we're always composited\n\t\t\tDom.transformValue(this.$.client, this.translation, '0,0,0');\n\t\t};\n\t}),\n\t\n\t/**\n\t* @private\n\t*/\n\tcalcScrollNode: function () {\n\t\treturn this.$.clientContainer.hasNode();\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\t// content should cover scroller at a minimum if there's no max-height.\n\t\tthis.$.client.applyStyle('min-height', this.maxHeight ? null : '100%');\n\t\tthis.$.client.applyStyle('max-height', this.maxHeight);\n\t\tthis.$.clientContainer.addRemoveClass('enyo-scrollee-fit', !this.maxHeight);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tshouldDrag: kind.inherit(function (sup) {\n\t\treturn function(inEvent) {\n\t\t\t// stop and update drag info before checking drag status\n\t\t\tthis.stop();\n\t\t\tthis.calcStartInfo();\n\t\t\treturn sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tsyncScrollMath: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tif (!this._translated) {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* Sets the horizontal scroll position.\n\t*\n\t* @param {Number} left - The horizontal scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tsetScrollLeft: kind.inherit(function (sup) {\n\t\treturn function(inLeft) {\n\t\t\tvar m, p;\n\t\t\tif (this.translateOptimized) {\n\t\t\t\tp = this.scrollLeft;\n\t\t\t\tm = this.$.scrollMath;\n\t\t\t\tthis.stop(true);\n\t\t\t\tm.setScrollX(-inLeft);\n\t\t\t\tm.stabilize();\n\t\t\t\tif (p != -m.x) {\n\t\t\t\t\t// We won't get a native scroll event,\n\t\t\t\t\t// so need to make one ourselves\n\t\t\t\t\tm.doScroll();\n\t\t\t\t\tthis.delayHideThumbs(100);\n\t\t\t\t} \n\t\t\t} else {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* Sets the vertical scroll position.\n\t*\n\t* @param {Number} top - The vertical scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tsetScrollTop: kind.inherit(function (sup) {\n\t\treturn function(inTop) {\n\t\t\tvar m, p;\n\t\t\tif (this.translateOptimized) {\n\t\t\t\tp = this.scrollTop;\n\t\t\t\tm = this.$.scrollMath;\n\t\t\t\tthis.stop(true);\n\t\t\t\tm.setScrollY(-inTop);\n\t\t\t\tm.stabilize();\n\t\t\t\tif (p != -m.y) {\n\t\t\t\t\t// We won't get a native scroll event,\n\t\t\t\t\t// so need to make one ourselves\n\t\t\t\t\tm.doScroll();\n\t\t\t\t\tthis.delayHideThumbs(100);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\t\n\t/**\n\t* Retrieves the horizontal scroll position.\n\t*\n\t* @returns {Number} The horizontal scroll position in pixels.\n\t* @method\n\t* @public\n\t*/\n\tgetScrollLeft: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\treturn this._translated ? this.scrollLeft: sup.apply(this, arguments);\n\t\t};\n\t}),\n\t\n\t/**\n\t* Retrieves the vertical scroll position.\n\t*\n\t* @returns {Number} The vertical scroll position in pixels.\n\t* @method\n\t* @private\n\t*/\n\tgetScrollTop: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\treturn this._translated ? this.scrollTop : sup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcalcBoundaries: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.translateOptimized && !this.isScrolling()) this.stabilize();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\thandleResize: function() {\n\t\tif (this.translateOptimized) {\n\t\t\tthis.stabilize();\n\t\t}\n\t},\n\t\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tscrollMathStart: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (!this._translated) {\n\t\t\t\tthis.setStartPosition();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathScroll: function (sender) {\n\t\tif(!this.overscroll) { //don't overscroll past edges\n\t\t\tthis.scrollLeft = -Math.min(sender.leftBoundary, Math.max(sender.rightBoundary, sender.x));\n\t\t\tthis.scrollTop = -Math.min(sender.topBoundary, Math.max(sender.bottomBoundary, sender.y));\n\t\t} else {\n\t\t\tthis.scrollLeft = -sender.x;\n\t\t\tthis.scrollTop = -sender.y;\n\t\t}\n\t\tthis.effectScroll(this.scrollLeft, this.scrollTop);\n\t\tif (this.thumb) {\n\t\t\tthis.showThumbs();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tscrollMathStabilize: kind.inherit(function (sup) {\n\t\treturn function (sender) {\n\t\t\tif (this._translated) {\n\t\t\t\tthis.scrollLeft = -sender.x;\n\t\t\t\tthis.scrollTop = -sender.y;\n\t\t\t\tthis.effectScroll(-sender.x, -sender.y);\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn sup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* While moving, scroller uses translate.\n\t* \n\t* @private\n\t*/\n\teffectScroll: kind.inherit(function (sup) {\n\t\treturn function (x, y) {\n\t\t\tvar o;\n\t\t\tif (this.translateOptimized || this.isScrolling()) {\n\t\t\t\tx = this.startX - x;\n\t\t\t\ty = this.startY - y;\n\t\t\t\to = x + 'px, ' + y + 'px' + (this.accel ? ',0' : '');\n\t\t\t\tDom.transformValue(this.$.client, this.translation, o);\n\t\t\t\tthis._translated = true;\n\t\t\t} else {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* When stopped, we use `scrollLeft/scrollTop` (makes cursor positioning automagic).\n\t* \n\t* @private\n\t*/\n\teffectScrollStop: function () {\n\t\tif (!this.translateOptimized) {\n\t\t\tvar t = '0,0' + (this.accel ? ',0' : '');\n\t\t\t// FIXME: normally translate3d changes not effect scrollHeight; however\n\t\t\t// there appear to be some dom changes (e.g. showing a node inside the scroller,\n\t\t\t// which do cause the scrollHeight to be changed from the translate3d.\n\t\t\t// In this case setting the translate3d back to 0 does not restore scrollHeight.\n\t\t\t// This causes a problem because setting scrollTop can produced an unexpected result if\n\t\t\t// scrollHeight is less than expected.\n\t\t\t// We detect this fault by validating scroll bounds and (1) un-apply the translate3d,\n\t\t\t// (2) update scrollTop/Left, and (3) re-apply a 0,0,0 translate3d to ensure compositing.\n\t\t\t// Luckily this corrects the problem (which appears to be a webkit bug). Note that\n\t\t\t// it's important to maintain a composited state (translate3d 0,0,0) or Android 4 is\n\t\t\t// slow to start scrolling.\n\t\t\tvar m = this.$.scrollMath, sb = this._getScrollBounds();\n\t\t\tvar needsBoundsFix = Boolean((sb.maxTop + m.bottomBoundary) || (sb.maxLeft + m.rightBoundary));\n\t\t\tDom.transformValue(this.$.client, this.translation, needsBoundsFix ? null : t);\n\t\t\t// note: this asynchronously triggers dom scroll event\n\t\t\tthis.setScrollLeft(this.scrollLeft);\n\t\t\tthis.setScrollTop(this.scrollTop);\n\t\t\tif (needsBoundsFix) {\n\t\t\t\tDom.transformValue(this.$.client, this.translation, t);\n\t\t\t}\n\t\t\tthis._translated = false;\n\t\t}\n\t},\n\n\t/**\n\t* FIXME: we can fix scrolling artifacts BUGS on Android 4.04 with this heinous incantation.\n\t* \n\t* @private\n\t*/\n\ttwiddle: function () {\n\t\tif (this.translateOptimized && this.scrollNode) { // this.scrollNode is not always defined and makes Motorola XOOM crash\n\t\t\tthis.scrollNode.scrollTop = 1;\n\t\t\tthis.scrollNode.scrollTop = 0;\n\t\t}\n\t}\n});","require('../../../enyo');\n\n\n\nvar\n\tkind = require('../kind'),\n\tutils = require('../utils'),\n\tplatform = require('../platform');\n\nvar\n\tControl = require('../Control'),\n\tScrollStrategy = require('../ScrollStrategy'),\n\tTouchScrollStrategy = require('../TouchScrollStrategy'),\n\tTranslateScrollStrategy = require('../TranslateScrollStrategy');\n\n/**\n* An [object]{@glossary Object} representing the scroll boundaries.\n*\n* @typedef {Object} enyo.Scroller~BoundaryObject\n* @property {Number} left - The left scroll position.\n* @property {Number} top - The top scroll position.\n* @property {Number} maxLeft - Maximum value for the left scroll position (minimum is always 0).\n* @property {Number} maxTop - Maximum value for the top scroll position (minimum is always 0).\n* @property {Number} clientHeight - The vertical size of the [scroller]{@link enyo.Scroller} on\n*\tscreen.\n* @property {Number} clientWidth - The horizontal size of the [scroller]{@link enyo.Scroller} on\n*\tscreen.\n* @property {Number} width - The horizontal size of the full area of the scrolled region.\n* @property {Number} height - The vertical size of the full area of the scrolled region.\n* @property {Number} xDir - Either `1`, `-1`, or `0`, indicating positive movement along the\n*\tx-axis, negative movement, or no movement, respectively.\n* @property {Number} yDir - Either `1`, `-1`, or `0`, indicating positive movement along the\n*\ty-axis, negative movement, or no movement, respectively.\n*/\n\n\n/**\n* An [object]{@glossary Object} representing the overscroll boundaries.\n*\n* @typedef {Object} enyo.Scroller~OverscrollBoundaryObject\n* @property {Number} overleft - The left overscroll position.\n* @property {Number} overtop - The top overscroll position.\n*/\n\n/**\n* The extended {@glossary event} [object]{@glossary Object} that is provided \n* when a scroll event is fired.\n*\n* @typedef {Object} enyo.Scroller~ScrollEvent\n* @property {enyo.Scroller~BoundaryObject} bounds Current values of scroller bounds.\n*/\n\n/**\n* Fires when a scrolling action starts.\n*\n* @event enyo.Scroller#onScrollStart\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {enyo.Scroller~ScrollEvent} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @public\n*/\n\n/**\n* Fires while a scrolling action is in progress.\n*\n* @event enyo.Scroller#onScroll\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @public\n*/\n\n/**\n* Fires when a scrolling action stops.\n*\n* @event enyo.Scroller#onScrollStop\n* @type {Object}\n* @property {Object} sender - The [component]{@link enyo.Component} that most recently \n*\tpropagated the {@glossary event}.\n* @property {Object} event - An [object]{@glossary Object} containing \n*\tevent information.\n* @public\n*/\n\n/**\n* {@link enyo.Scroller} is a scroller suitable for use in both desktop and mobile\n* applications.\n* \n* In some mobile environments, a default scrolling solution is not implemented for\n* DOM elements. In such cases, `enyo.Scroller` implements a touch-based scrolling\n* solution, which may be opted into either globally (by setting\n* [touchScrolling]{@link enyo.Scroller#touchScrolling} to `true`) or on a\n* per-instance basis (by specifying a [strategyKind]{@link enyo.Scroller#strategyKind}\n* of `\"TouchScrollStrategy\"`).\n* \n* For more information, see the documentation on\n* [Scrollers]{@linkplain $dev-guide/building-apps/layout/scrollers.html} in the\n* Enyo Developer Guide.\n*\n* @class enyo.Scroller\n* @public\n*/\nvar Scroller = module.exports = kind(\n\t/** @lends enyo.Scroller.prototype */ {\n\t\n\tname: 'enyo.Scroller',\n\t\n\tkind: Control,\n\t\n\t/**\n\t* @private\n\t*/\n\tpublished: \n\t\t/** @lends enyo.Scroller.prototype */ {\n\n\t\t/**\n\t\t* Specifies how to horizontally scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\thorizontal: 'default',\n\n\t\t/**\n\t\t* Specifies how to vertically scroll.  Acceptable values are `'scroll'`, `'auto'`,\n\t\t* `'hidden'`, and `'default'`. The precise effect of the setting is determined by the\n\t\t* scroll strategy.\n\t\t* \n\t\t* @type {String}\n\t\t* @default 'default'\n\t\t* @public\n\t\t*/\n\t\tvertical: 'default',\n\n\t\t/**\n\t\t* The vertical scroll position.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tscrollTop: 0,\n\n\t\t/**\n\t\t* The horizontal scroll position.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default 0\n\t\t* @public\n\t\t*/\n\t\tscrollLeft: 0,\n\n\t\t/**\n\t\t* Maximum height of the scroll content.\n\t\t* \n\t\t* @type {Number}\n\t\t* @default null\n\t\t* @memberof enyo.Scroller.prototype\n\t\t* @public\n\t\t*/\n\t\tmaxHeight: null,\n\n\t\t/**\n\t\t* Set to `true` to make this [scroller]{@link enyo.Scroller} select a \n\t\t* platform-appropriate touch-based scrolling strategy. Note that if you specify a value \n\t\t* for [strategyKind]{@link enyo.Scroller#strategyKind}, that will take precedence over\n\t\t* this setting.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default false\n\t\t* @public\n\t\t*/\n\t\ttouch: false,\n\t\t/**\n\t\t* Specifies a type of scrolling. The [scroller]{@link enyo.Scroller} will attempt to \n\t\t* automatically select a strategy compatible with the runtime environment. Alternatively,\n\t\t* you may choose to use a specific strategy:\n\t\t* \n\t\t* - [ScrollStrategy]{@link enyo.ScrollStrategy} is the default and implements no \n\t\t*\tscrolling, relying instead on the environment to scroll properly.\n\t\t* - [TouchScrollStrategy]{@link enyo.TouchScrollStrategy} implements a touch scrolling \n\t\t*\tmechanism.\n\t\t* - [TranslateScrollStrategy]{@link enyo.TranslateScrollStrategy} implements a touch \n\t\t*\tscrolling mechanism using translations; it is currently recommended only for Android\n\t\t*\t3 and 4, and Windows Phone 8.\n\t\t* - [TransitionScrollStrategy]{@link enyo.TransitionScrollStrategy} implements a touch \n\t\t*\tscrolling mechanism using CSS transitions; it is currently recommended only for iOS \n\t\t*\t5 and later.\n\t\t*\n\t\t* @type {String}\n\t\t* @default 'ScrollStrategy'\n\t\t* @public\n\t\t*/\n\t\tstrategyKind: ScrollStrategy,\n\n\t\t/**\n\t\t* Set to `true` to display a scroll thumb in touch [scrollers]{@link enyo.Scroller}.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tthumb: true,\n\n\t\t/**\n\t\t* If `true`, mouse wheel may be used to move the [scroller]{@link enyo.Scroller}.\n\t\t* \n\t\t* @type {Boolean}\n\t\t* @default true\n\t\t* @public\n\t\t*/\n\t\tuseMouseWheel: true\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tevents: {\n\t\tonScrollStart: '',\n\t\tonScroll: '',\n\t\tonScrollStop: ''\n\t},\n\n\t/**\n\t* If `true`, enables touch scrolling globally.\n\t*\n\t* @name touchScrolling\n\t* @type {Boolean}\n\t* @default undefined\n\t* @memberof enyo.Scroller.prototype\n\t* @public\n\t*/\n\n\t/**\n\t* If `true` and this is a touch [scroller]{@link enyo.Scroller}, the scroller\n\t* will overscroll and bounce back at the edges.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\ttouchOverscroll: true,\n\n\t/**\n\t* If `true`, the [scroller]{@link enyo.Scroller} will not propagate `dragstart` \n\t* [events]{@glossary event} that cause it to start scrolling.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tpreventDragPropagation: true,\n\n\t/**\n\t* If `true`, the [scroller]{@link enyo.Scroller} will not propagate scroll \n\t* [events]{@glossary event}.\n\t*\n\t* @type {Boolean}\n\t* @default true\n\t* @public\n\t*/\n\tpreventScrollPropagation: true,\n\n\t/**\n\t* Needed to allow global mods to `enyo.Scroller.touchScrolling`.\n\t* \n\t* @private\n\t*/\n\n\n\t/**\n\t* @private\n\t*/\n\thandlers: {\n\t\tonscroll: 'domScroll',\n\t\tonScrollStart: 'scrollStart',\n\t\tonScroll: 'scroll',\n\t\tonScrollStop: 'scrollStop'\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tclasses: 'enyo-scroller',\n\n\t/**\n\t* @private\n\t*/\n\tstatics: {\n\t\tosInfo: [\n\t\t\t{os: 'android', version: 3},\n\t\t\t{os: 'androidChrome', version: 18},\n\t\t\t{os: 'androidFirefox', version: 16},\n\t\t\t{os: 'firefoxOS', version: 16},\n\t\t\t{os: 'ios', version: 5},\n\t\t\t{os: 'webos', version: 1e9},\n\t\t\t{os: 'blackberry', version:1e9},\n\t\t\t{os: 'tizen', version: 2}\n\t\t],\n\t\t//* Returns true if platform should have touch events.\n\t\thasTouchScrolling: function() {\n\t\t\tfor (var i=0, t; (t=this.osInfo[i]); i++) {\n\t\t\t\tif (platform[t.os]) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// special detection for IE10+ on touch devices\n\t\t\tif ((platform.ie >= 10 || platform.windowsPhone >= 8) && platform.touch) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t\tReturns true if the platform has native div scrollers (desktop\n\t\t\tbrowsers always have them).\n\t\t*/\n\t\thasNativeScrolling: function() {\n\t\t\tfor (var i=0, t; (t=this.osInfo[i]); i++) {\n\t\t\t\tif (platform[t.os] < t.version) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tgetTouchStrategy: function() {\n\t\t\treturn (platform.androidChrome >= 27) || (platform.android >= 3) || (platform.windowsPhone === 8) || (platform.webos >= 4)\n\t\t\t\t? TranslateScrollStrategy\n\t\t\t\t: TouchScrollStrategy;\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcontrolParentName: 'strategy',\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tcreate: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.horizontalChanged();\n\t\t\tthis.verticalChanged();\n\t\t\tthis.useMouseWheelChanged();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\timportProps: kind.inherit(function (sup) {\n\t\treturn function(inProps) {\n\t\t\tsup.apply(this, arguments);\n\t\t\t// allow global overriding of strategy kind\n\t\t\tif (inProps && inProps.strategyKind === undefined && (Scroller.touchScrolling || this.touch)) {\n\t\t\t\tthis.strategyKind = Scroller.getTouchStrategy();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tinitComponents: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tthis.strategyKindChanged();\n\t\t\tsup.apply(this, arguments);\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\trendered: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tthis.syncStrategy();\n\t\t};\n\t}),\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tsyncStrategy: function() {\n\t\tthis.$.strategy.setScrollLeft(this.scrollLeft);\n\t\tthis.$.strategy.setScrollTop(this.scrollTop);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tstrategyKindChanged: function () {\n\t\tif (this.$.strategy) {\n\t\t\tthis.$.strategy.destroy();\n\t\t\tthis.controlParent = null;\n\t\t}\n\t\t// note: createComponents automatically updates controlParent.\n\t\tthis.createStrategy();\n\t\tif (this.hasNode()) {\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tcreateStrategy: function () {\n\t\tthis.createComponents([{name: 'strategy', maxHeight: this.maxHeight,\n\t\t\tkind: this.strategyKind, thumb: this.thumb,\n\t\t\tpreventDragPropagation: this.preventDragPropagation,\n\t\t\toverscroll:this.touchOverscroll, isChrome: true}]);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tgetStrategy: function () {\n\t\treturn this.$.strategy;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tmaxHeightChanged: function () {\n\t\tthis.$.strategy.setMaxHeight(this.maxHeight);\n\t},\n\n\t/**\n\t* @method\n\t* @private\n\t*/\n\tshowingChanged: kind.inherit(function (sup) {\n\t\treturn function() {\n\t\t\tsup.apply(this, arguments);\n\t\t\tif (this.showing) {\n\t\t\t\tthis.syncStrategy();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tshowingChangedHandler: kind.inherit(function(sup) {\n\t\treturn function(sender, event) {\n\t\t\tif (this.showing && event.showing) {\n\t\t\t\tthis.syncStrategy();\n\t\t\t}\n\t\t};\n\t}),\n\n\t/**\n\t* @private\n\t*/\n\tthumbChanged: function () {\n\t\tthis.$.strategy.setThumb(this.thumb);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\thorizontalChanged: function () {\n\t\tthis.$.strategy.setHorizontal(this.horizontal);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tverticalChanged: function () {\n\t\tthis.$.strategy.setVertical(this.vertical);\n\t},\n\n\t// FIXME: these properties are virtual; property changed methods are fired only if\n\t// property value changes, not if getter changes.\n\t\n\t/**\n\t* Sets the horizontal scroll position.\n\t*\n\t* @param {Number} left - The horizontal scroll position in pixels.\n\t* @public\n\t*/\n\tsetScrollLeft: function (left) {\n\t\tthis.$.strategy.setScrollLeft(left);\n\t},\n\n\t/**\n\t* Sets the vertical scroll position.\n\t*\n\t* @param {Number} top - The vertical scroll position in pixels.\n\t* @public\n\t*/\n\tsetScrollTop: function (top) {\n\t\tthis.$.strategy.setScrollTop(top);\n\t},\n\n\t/**\n\t* Retrieves the horizontal scroll position.\n\t*\n\t* @returns {Number} The horizontal scroll position in pixels.\n\t* @public\n\t*/\n\tgetScrollLeft: function () {\n\t\t// sync our internal property\n\t\tthis.scrollLeft = this.$.strategy.getScrollLeft();\n\t\treturn this.scrollLeft;\n\t},\n\n\t/**\n\t* Retrieves the vertical scroll position.\n\t*\n\t* @returns {Number} The vertical scroll position in pixels.\n\t* @public\n\t*/\n\tgetScrollTop: function () {\n\t\t// sync our internal property\n\t\tthis.scrollTop = this.$.strategy.getScrollTop();\n\t\treturn this.scrollTop;\n\t},\n\n\t/**\n\t* Retrieves the scroll boundaries of the [scroller]{@link enyo.Scroller}.\n\t* \n\t* @returns {enyo.Scroller~BoundaryObject} An [object]{@glossary Object} describing the \n\t*\tscroll boundaries.\n\t* @public\n\t*/\n\tgetScrollBounds: function () {\n\t\tvar bounds  = this.$.strategy.getScrollBounds();\n\t\tif (\n\t\t\t(bounds.xDir !== -1 && bounds.xDir !== 0 && bounds.xDir !== 1) ||\n\t\t\t(bounds.yDir !== -1 && bounds.yDir !== 0 && bounds.yDir !== 1)\n\t\t) {\n\t\t\tthis.decorateBounds(bounds);\n\t\t}\n\t\t// keep our properties synchronized always and without extra calls\n\t\tthis.scrollTop  = bounds.top;\n\t\tthis.scrollLeft = bounds.left;\n\t\treturn bounds;\n\t},\n\n\t/** \n\t* Trigger a remeasurement of the scroller's metrics (specifically, the\n\t* size of its viewport, the size of its contents and the difference between\n\t* the two, which determines the extent to which the scroller may scroll).\n\t* \n\t* You should generally not need to call this from application code, as the\n\t* scroller usually remeasures automatically whenever needed. This method\n\t* exists primarily to support an internal use case for\n\t* [enyo.DataList]{@link enyo.DataList}.\n\t*\n\t* @public\n\t*/\n\tremeasure: function() {\n\t\tvar s = this.$.strategy;\n\t\tif (s.remeasure) s.remeasure();\n\t},\n\n\t/**\n\t* Scrolls the given [control]{@link enyo.Control} into view.\n\t*\n\t* @param {enyo.Control} ctl - The control to make visible in the\n\t*\t[scroller's]{@link enyo.Scroller} viewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top\n\t* of the scroller.\n\t* @public\n\t*/\n\tscrollIntoView: function (ctl, alignWithTop) {\n\t\tthis.$.strategy.scrollIntoView(ctl, alignWithTop);\n\t},\n\n\t/** \n\t* Scrolls to the specified position.\n\t*\n\t* @param {Number} x - The `x` position in pixels.\n\t* @param {Number} y - The `y` position in pixels.\n\t* @public\n\t*/\n\tscrollTo: function (x, y) {\n\t\tthis.$.strategy.scrollTo(x, y);\n\t},\n\n\t/**\n\t* Ensures that the given [control]{@link enyo.Control} is visible in the \n\t* [scroller's]{@link enyo.Scroller} viewport. Unlike \n\t* [scrollIntoView()]{@link enyo.Scroller#scrollIntoView}, which uses DOM's \n\t* [scrollIntoView()]{@glossary scrollIntoView}, this only affects the current \n\t* scroller.\n\t*\n\t* @param {enyo.Control} ctl - The [control]{@link enyo.Control} to make visible in the\n\t*\t[scroller's]{@link enyo.Scroller} viewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @public\n\t*/\n\tscrollToControl: function (ctl, alignWithTop) {\n\t\tthis.scrollToNode(ctl.hasNode(), alignWithTop);\n\t},\n\n\t/** \n\t* Ensures that the given node is visible in the [scroller's]{@link enyo.Scroller} viewport.\n\t*\n\t* @param {Node} node - The node to make visible in the [scroller's]{@link enyo.Scroller}\n\t*\tviewport.\n\t* @param {Boolean} alignWithTop - If `true`, the node is aligned with the top of the\n\t*\tscroller.\n\t* @public\n\t*/\n\tscrollToNode: function (node, alignWithTop) {\n\t\tthis.$.strategy.scrollToNode(node, alignWithTop);\n\t},\n\n\t/** \n\t* Stops the scroller if it is currently animating.\n\t* \n\t* @public\n\t*/\n\tstop: function() {\n\t\tif (typeof this.$.strategy.stop == 'function') {\n\t\t\tthis.$.strategy.stop(true);\n\t\t}\n\t},\n\n\t/** \n\t* Adds current values of `getScrollBounds()` to {@glossary event}.\n\t* \n\t* @private\n\t*/\n\tdecorateScrollEvent: function (e) {\n\t\tvar bounds = e.scrollBounds = e.scrollBounds || this.$.strategy._getScrollBounds();\n\t\t// in the off chance that the event already had scrollBounds then we need\n\t\t// to make sure they are decorated\n\t\tif (\n\t\t\t(bounds.xDir !== -1 && bounds.xDir !== 0 && bounds.xDir !== 1) ||\n\t\t\t(bounds.yDir !== -1 && bounds.yDir !== 0 && bounds.yDir !== 1)\n\t\t) {\n\t\t\tthis.decorateBounds(bounds);\n\t\t}\n\t\t// keep our properties synchronized always and without extra calls\n\t\tthis.scrollTop  = bounds.top;\n\t\tthis.scrollLeft = bounds.left;\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tdecorateBounds: function (bounds) {\n\t\tvar x       = this.scrollLeft - bounds.left,\n\t\t\ty       = this.scrollTop  - bounds.top;\n\t\tbounds.xDir = (x < 0? 1: x > 0? -1: 0);\n\t\tbounds.yDir = (y < 0? 1: y > 0? -1: 0);\n\t\t// we update our current bounds properties so we don't have to unnecessarily\n\t\t// call getScrollTop/getScrollLeft because we already have the current data\n\t\tthis.scrollLeft = bounds.left;\n\t\tthis.scrollTop  = bounds.top;\n\t},\n\n\t/** \n\t* Normalizes scroll {@glossary event} to `onScroll`.\n\t*\n\t* @fires enyo.Scroller#onScroll\n\t* @private\n\t*/\n\tdomScroll: function (sender, e) {\n\t\t// if a scroll event originated here, pass it to our strategy to handle\n\t\tif (this.$.strategy.domScroll && e.originator == this) {\n\t\t\tthis.$.strategy.domScroll(sender, e);\n\t\t}\n\t\tthis.decorateScrollEvent(e);\n\t\tthis.doScroll(e);\n\t\treturn true;\n\t},\n\n\t/**\n\t* @returns {Boolean} `true` if the current scroll {@glossary event} should\n\t* be stopped; `false` if it should be allowed to propagate.\n\t* @private\n\t*/\n\tshouldStopScrollEvent: function (e) {\n\t\treturn (this.preventScrollPropagation &&\n\t\t\te.originator.owner != this.$.strategy);\n\t},\n\n\t/**\n\t* Calls [shouldStopScrollEvent()]{@link enyo.Scroller#shouldStopScrollEvent} to\n\t* determine whether current scroll {@glossary event} should be stopped.\n\t*\n\t* @private\n\t*/\n\tscrollStart: function (sender, e) {\n\t\tif (!this.shouldStopScrollEvent(e)) {\n\t\t\tthis.decorateScrollEvent(e);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/** \n\t* Either propagates or stops the current scroll {@glossary event}.\n\t*\n\t* @private\n\t*/\n\tscroll: function (sender, e) {\n\t\t// note: scroll event can be native dom or generated.\n\t\tvar stop;\n\t\tif (e.dispatchTarget) {\n\t\t\t// allow a dom event if it orignated with this scroller or its strategy\n\t\t\tstop = this.preventScrollPropagation && !(e.originator == this ||\n\t\t\t\te.originator.owner == this.$.strategy);\n\t\t} else {\n\t\t\tstop = this.shouldStopScrollEvent(e);\n\t\t}\n\t\tif (!stop) {\n\t\t\tthis.decorateScrollEvent(e);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* Calls [shouldStopScrollEvent()]{@link enyo.Scroller#shouldStopScrollEvent} to\n\t* determine whether current scroll {@glossary event} should be stopped.\n\t*\n\t* @private\n\t*/\n\tscrollStop: function (sender, e) {\n\t\tif (!this.shouldStopScrollEvent(e)) {\n\t\t\tthis.decorateScrollEvent(e);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t/**\n\t* Scrolls to the top of the scrolling region.\n\t*\n\t* @public\n\t*/\n\tscrollToTop: function () {\n\t\tthis.setScrollTop(0);\n\t},\n\n\t/**\n\t* Scrolls to the bottom of the scrolling region.\n\t*\n\t* @public\n\t*/\n\tscrollToBottom: function () {\n\t\tthis.setScrollTop(this.getScrollBounds().maxTop);\n\t},\n\n\t/**\n\t* Scrolls to the right edge of the scrolling region.\n\t*\n\t* @public\n\t*/\n\tscrollToRight: function () {\n\t\tthis.setScrollLeft(this.getScrollBounds().maxLeft);\n\t},\n\n\t/**\n\t* Scrolls to the left edge of the scrolling region.\n\t*\n\t* @public\n\t*/\n\tscrollToLeft: function () {\n\t\tthis.setScrollLeft(0);\n\t},\n\n\t/**\n\t* Ensures scroll position is in bounds.\n\t*\n\t* @public\n\t*/\n\tstabilize: function () {\n\t\tvar s = this.getStrategy();\n\t\tif (s.stabilize) {\n\t\t\ts.stabilize();\n\t\t}\n\t},\n\n\t/**\n\t* Sends the [useMouseWheel]{@link enyo.Scroller#useMouseWheel} property to the scroll \n\t* strategy.\n\t*\n\t* @private\n\t*/\n\tuseMouseWheelChanged: function () {\n\t\tthis.$.strategy.setUseMouseWheel(this.useMouseWheel);\n\t},\n\n\t/**\n\t* @private\n\t*/\n\tresize: kind.inherit(function (sup) {\n\t\treturn function () {\n\t\t\tif (this.getAbsoluteShowing(true)) {\n\t\t\t\tsup.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t})\n});\n\n// provide a touch scrolling solution by default when the environment is mobile\nif (Scroller.hasTouchScrolling()) {\n\tScroller.prototype.strategyKind = Scroller.getTouchStrategy();\n}","var\n    kind = require('../../../enyo/lib/kind'),\n    Button = require('../../../enyo/lib/Button'),\n    Input = require('../../../enyo/lib/Input'),\n    Scroller = require('../../../enyo/lib/Scroller');\n\nvar\n    ilib = require('../../../enyo-ilib').ilib;\n\nvar\n    ChooseLocale = require('./ChooseLocale'),\n    rb = new ilib.ResBundle();\n\nmodule.exports = kind({\n    name: 'ilib.sample.AddressFormatting',\n    kind: Scroller,\n    \n    components: [\n        {style: 'margin: 10px;', components: [\n            {kind: ChooseLocale, name: 'localeSelector'},\n            {tag: 'span', style: 'display: inline-block; width: 20px'},\n            {kind: Button, content: rb.getString('Apply'), ontap: 'calcFormat', style: 'vertical-align: bottom;', classes: 'onyx-affirmative'}\n        ]},\n        {classes: 'sample-result-box', components: [\n            {classes: 'sample-result-box-header', content: rb.getString('Street Address')},\n            {tag: 'label', components: [\n                {kind: Input, style: 'width:100%', name: 'stAddress',placeholder: rb.getString('Enter Street')}\n            ]}\n        ]},\n        {classes: 'sample-result-box', components: [\n            {classes: 'sample-result-box-header', content: rb.getString('City/Locality')},\n            {tag: 'label', components: [\n                {kind: Input, style: 'width:100%', name: 'city', placeholder: rb.getString('Enter city')}\n            ]}\n        ]},\n        {classes: 'sample-result-box', components: [\n            {classes: 'sample-result-box-header', content: rb.getString('postal code/Zip')},\n            {tag: 'label', components: [\n                {kind: Input, style: 'width:100%', name: 'postalCode', placeholder: rb.getString('Enter postalcode')}\n            ]}\n        ]},\n        {classes: 'sample-result-box', components: [\n            {classes: 'sample-result-box-header', content: rb.getString('State/Province')},\n            {tag: 'label', components: [\n                {kind: Input, style: 'width:100%', name: 'state', placeholder: rb.getString('Enter state')}\n            ]}\n        ]},\n        {classes: 'sample-result-box', components: [\n            {classes: 'sample-result-box-header', content: rb.getString('Country')},\n            {tag: 'label', components: [\n                {kind: Input, style: 'width:100%', name: 'country', placeholder: rb.getString('Enter Country')}\n            ]}\n        ]},\n        {classes: 'sample-result-box', components: [\n            {classes: 'sample-result-box-header', content: rb.getString('Format result: ')},\n            {name: 'rtlResult', allowHtml:true, content: '-', style: 'padding: 10px'}\n        ]}\n    ],\n        \n    calcFormat: function (inSender, inEvent) {\n        // Processing parameters\n        var options = {\n            locale: this.$.localeSelector.getValue()\n        };\n       \n        var address =  new ilib.Address({\n            streetAddress:this.$.stAddress.getValue(),\n            locality: this.$.city.getValue(),\n            postalCode: this.$.postalCode.getValue(),\n            region: this.$.state.getValue(),\n            country:this.$.country.getValue()\n        });\n\n        var formatter = new ilib.AddressFmt(options);\n        var postFmtData = formatter.format(address);\n        this.$.rtlResult.setContent(postFmtData);\n    }\n});\n","var\n    kind = require('../../../enyo/lib/kind'),\n    Button = require('../../../enyo/lib/Button'),\n    Input = require('../../../enyo/lib/Input'),\n    Scroller = require('../../../enyo/lib/Scroller');\n\nvar\n    ilib = require('../../../enyo-ilib').ilib;\n\nvar\n    ChooseLocale = require('./ChooseLocale'),\n    rb = new ilib.ResBundle();\n\nmodule.exports = kind({\n    name: 'ilib.sample.AddressParsing',\n    kind: Scroller,     \n    components: [\n        {style: 'margin: 10px;', components: [\n            {kind: ChooseLocale, name: 'localeSelector'},\n            {tag: 'span', style: 'display: inline-block; width: 20px'},\n            {kind: Button, content: rb.getString('Apply'), ontap: 'calcFormat', style: 'vertical-align: bottom;', classes: 'onyx-affirmative'}\n        ]},\n        {classes: 'sample-result-box', components: [\n            {classes: 'sample-result-box-header', content: rb.getString('Address')},\n            {tag: 'label', components: [\n                {kind: Input, style: 'width:100%', name: 'address', placeholder: rb.getString('Enter Address')}\n            ]}\n        ]},\n        {classes: 'sample-result-box', components: [\n            {classes: 'sample-result-box-header', content: rb.getString('Format result: ')},\n            {name: 'rtlResult', allowHtml: true, content: '-', style: 'padding: 10px'}\n        ]}\n    ],\n        \n    calcFormat: function (inSender, inEvent) {\n        // Formatting\n        var parsedAddress = new ilib.Address(this.$.address.getValue());\n\n        var output = '';\n\n        if (parsedAddress) {\n            if (parsedAddress.streetAddress) {\n                output += 'streetAddress: ' + parsedAddress.streetAddress + '<br>';\n            }\n            if (parsedAddress.locality) {\n                output += 'locality: ' + parsedAddress.locality + '<br>';\n            }\n            if (parsedAddress.region) {\n                output += 'region: ' + parsedAddress.region + '<br>';\n            }\n            if (parsedAddress.postalCode) {\n                output += 'Postal code: ' + parsedAddress.postalCode + '<br>';\n            }\n            if (parsedAddress.country) {\n                output += 'country: ' + parsedAddress.country + '<br>';\n            }\n            if (parsedAddress.countryCode) {\n                output += 'countryCode: ' + parsedAddress.countryCode + '<br>';\n            }\n        }\n\n        this.$.rtlResult.setContent(output);\n    }\n});\n","// required for ontap handlers ... for now\nrequire('../../../enyo/lib/drag');\n\n// For simplicity, we'll require the full ilib since this is the root of the sample 'app'. The\n// individual samples can then safely import the root enyo-ilib package knowing that the app\n// registered which version it wanted.\n// require('../../../enyo-ilib/lib/full');\n\nvar\n\tkind = require('../../../enyo/lib/kind'),\n\tready = require('../../../enyo/lib/ready'),\n\tAnchor = require('../../../enyo/lib/Anchor'),\n\tCollection = require('../../../enyo/lib/Collection'),\n\tControl = require('../../../enyo/lib/Control'),\n\tDataRepeater = require('../../../enyo/lib/DataRepeater');\n\nvar\n\tsamples = {\n\t\tAddressFormatting\t: require('./AddressFormatting'),\n\t\tAddressParsing\t\t: require('./AddressParsing')\n\t};\n\nvar List = kind({\n\tkind: Control,\n\tcomponents: [\n\t\t{name: 'list', kind: DataRepeater, components: [\n\t\t\t{style: 'margin: 10px;', components: [\n\t\t\t\t{name: 'a', kind: Anchor}\n\t\t\t], bindings: [\n\t\t\t\t{from: 'model.name', to: '$.a.href', transform: function (v) { return '?' + v; }},\n\t\t\t\t{from: 'model.name', to: '$.a.content', transform: function (v) { return v + ' Sample'; }}\n\t\t\t]}\n\t\t]}\n\t],\n\tcreate: function () {\n\t\tControl.prototype.create.apply(this, arguments);\n\t\tthis.$.list.set('collection', new Collection(Object.keys(samples).map(function (key) {\n\t\t\treturn {name: key};\n\t\t})));\n\t}\n});\n\nready(function () {\n\tvar name = window.document.location.search.substring(1),\n\t\tSample = samples[name] || List;\n\n\tnew Sample({samples: samples}).renderInto(document.body);\n});"]}