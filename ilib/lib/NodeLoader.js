module.exports=function(e){var o=require("./Path.js"),t=require("fs"),n=require("util"),i=require("./ZoneInfo.js"),r=require("./Loader.js");var s=function(e){this.parent.call(this,e);this.root=process.cwd();this.base=typeof module!=="undefined"&&module.filename?o.join(o.dirname(module.filename),".."):this.root;this.includePath.push(o.join(this.root,"resources"));this._exists(o.join(this.base,"locale"),"localeinfo.json");this._exists("/usr/share/javascript/ilib/locale","localeinfo.json");if(t.existsSync("/usr/share/zoneinfo")){this.useSystemZoneInfo=true}else{}};s.prototype=new r;s.prototype.parent=r;s.prototype.constructor=s;s.prototype.name="NodeLoader";s.prototype._loadFile=function(e,o,n){var i;try{if(this.useSystemZoneInfo&&e.indexOf("zoneinfo")!==-1){i=this._createZoneFile(e)}else i=t.readFileSync(e,"utf-8");if(typeof n==="function"){n(i)}}catch(r){if(typeof n==="function"){n()}}return i};s.prototype._createZoneFile=function(e){var o=e.substring(e.indexOf("zoneinfo"));o=o.substring(0,o.length-5);try{var t=new i("/usr/share/"+o);ret=t.getIlibZoneInfo(new Date);return JSON.stringify(ret)}catch(n){console.log("NodeLoader._createZoneFile: error: "+n);return undefined}};s.prototype._exists=function(e,n){var i=o.normalize(o.join(e,n));if(t.existsSync(i)){this.includePath.push(e)}};return new s(e)};